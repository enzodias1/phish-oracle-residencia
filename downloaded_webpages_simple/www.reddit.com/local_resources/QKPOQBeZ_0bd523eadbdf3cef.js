SML.di("./DtmWCWbB.js",import.meta.url,"DtmWCWbB");SML.di("./DVMhF-xZ.js",import.meta.url,"DVMhF-xZ");SML.di("./DN8NCGGW.js",import.meta.url,"DN8NCGGW");SML.di("./Cko3Rz5m.js",import.meta.url,"Cko3Rz5m");SML.di("./CElIDZoh.js",import.meta.url,"CElIDZoh");
SML.dm("QKPOQBeZ",["DVMhF-xZ","DN8NCGGW","Cko3Rz5m","CElIDZoh","DtmWCWbB"],(async(t,e,s,i)=>{let o=t.f,n=window.location,a=class extends e.s{constructor(){super(...arguments),this.stepName=null,this.isStandalonePage=!1,this.open=!1,this.history=[],this.events=new t.E(this),this.scrollBlocker=new s.S(this),this.findStepElement=t=>this.querySelector(`[slot="${t}"]`),this.requestClose=()=>{this.blocking?this.isStandalonePage&&this.redirectToHome():this.close()},this.redirectToHome=()=>{n.href=location.origin},this.handleEscKey=this.events.define("keydown",(t=>{"Escape"!==t.key||this.blocking||this.close()})),this.deprecated__onFaceplateTrack=this.events.define("faceplate-track",(e=>{const{source:s,action:o,noun:n}=e.detail;s===i.G&&o===i.D&&t.aX.has(n)&&this.requestClose()}))}get blocking(){if(this.isStandalonePage)return!0;if(this.open&&this.stepName){const t=this.findStepElement(this.stepName);return t?.hasAttribute("blocking")}return!1}connectedCallback(){if(super.connectedCallback(),null!==this.stepName){const t=new URLSearchParams(window.location.search).get("action_source");this.show(this.stepName,{queryParams:{...t&&{actionSource:t}}})}}hasStep(t){return!!this.findStepElement(t)}onInitialFlowOpen(){this.open||this.dispatchEvent(t.c("auth-flow-initial-open"))}async show(e,s){const i=this.findStepElement(e),n=i?.getAttribute("feature-name"),a=t.B();if(!i||!n)return!1;try{const e={...s?.queryParams,is_standalone:this.isStandalonePage};a&&(e.source_page=a.toString()),await o({root:i,name:n,renderMode:t.g.Contents,...s,queryParams:e})}finally{this.onInitialFlowOpen(),this.open=!0,this.history.push(e),this.stepName=e,this.scrollBlocker.blockPageScrolling()}return!0}back(){if(!this.open)return;this.history.pop();const t=this.history.at(-1);if(!t)return this.requestClose();this.stepName=t}close(){this.dispatchEvent(t.c("auth-flow-dismiss")),this.open=!1,this.stepName=null,this.history=[],this.scrollBlocker.unblockPageScrolling()}render(){return this.open?e.x` <div class="z-[100] fixed"> <div class="${e.l(this.isStandalonePage?void 0:"fixed top-0 right-0 bottom-0 left-0 bg-black opacity-50 backdrop-blur-sm")}" tabindex="-1" @click="${this.requestClose}"></div> <slot name="${this.stepName}"></slot> <slot></slot> </div> `:e.A}};a.styles=[t.t],e._([e.n({attribute:"step-name",type:String,reflect:!0})],a.prototype,"stepName",void 0),e._([e.n({attribute:"is-standalone",type:Boolean})],a.prototype,"isStandalonePage",void 0),e._([e.b()],a.prototype,"open",void 0),a=e._([e.c("auth-flow-manager")],a)}));