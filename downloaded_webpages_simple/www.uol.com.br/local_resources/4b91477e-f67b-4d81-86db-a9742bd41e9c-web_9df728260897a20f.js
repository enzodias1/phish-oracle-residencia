/*! @permutive/javascript-sdk v20.51.0 (web) (built 2025-10-01T00:19:47.132Z) */(()=>{"use strict";var __webpack_modules__={5654:(e,t,r)=>{function n(e){return e instanceof Error?e:new Error("string"==typeof e?e:JSON.stringify(e))}r.d(t,{w:()=>n})},842:(e,t,r)=>{r.d(t,{A:()=>a});var n=r(2169),i=r(8236);function a(e){return(0,n.zG)((0,i.Y3)((()=>JSON.parse(e))),(0,i.fS)(n.gn))}},2945:(e,t,r)=>{r.d(t,{Qt:()=>o,Yt:()=>d,ap:()=>a,gz:()=>l});var n=r(2169),i=r(8614);function a(e,t){return function(r){return function(n){return e.ap(e.map(n,(function(e){return function(r){return t.ap(e,r)}})),r)}}}function o(e){return function(t,r){return function(n){return e.ap(e.map(n,(function(e){return function(r){var n;return Object.assign({},e,((n={})[t]=r,n))}})),r)}}}function s(e,t,r){return function(n){for(var i=Array(r.length+1),a=0;a<r.length;a++)i[a]=r[a];return i[r.length]=n,0===t?e.apply(null,i):s(e,t-1,i)}}var c={1:function(e){return[e]},2:function(e){return function(t){return[e,t]}},3:function(e){return function(t){return function(r){return[e,t,r]}}},4:function(e){return function(t){return function(r){return function(n){return[e,t,r,n]}}}},5:function(e){return function(t){return function(r){return function(n){return function(i){return[e,t,r,n,i]}}}}}};function u(e){return i.e$.call(c,e)||(c[e]=s(n.bc,e-1,[])),c[e]}function l(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var n=t.length,i=u(n),a=e.map(t[0],i),o=1;o<n;o++)a=e.ap(a,t[o]);return a}}function d(e){return function(t){for(var r=Object.keys(t),n=r.length,i=function(e){var t=e.length;switch(t){case 1:return function(t){var r;return(r={})[e[0]]=t,r};case 2:return function(t){return function(r){var n;return(n={})[e[0]]=t,n[e[1]]=r,n}};case 3:return function(t){return function(r){return function(n){var i;return(i={})[e[0]]=t,i[e[1]]=r,i[e[2]]=n,i}}};case 4:return function(t){return function(r){return function(n){return function(i){var a;return(a={})[e[0]]=t,a[e[1]]=r,a[e[2]]=n,a[e[3]]=i,a}}}};case 5:return function(t){return function(r){return function(n){return function(i){return function(a){var o;return(o={})[e[0]]=t,o[e[1]]=r,o[e[2]]=n,o[e[3]]=i,o[e[4]]=a,o}}}}};default:return s((function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];for(var i={},a=0;a<t;a++)i[e[a]]=r[a];return i}),t-1,[])}}(r),a=e.map(t[r[0]],i),o=1;o<n;o++)a=e.ap(a,t[r[o]]);return a}}},9912:(e,t,r)=>{r.d(t,{oA:()=>y,t9:()=>g,DZ:()=>b,Ew:()=>u,f2:()=>l,xH:()=>_,jV:()=>p,uK:()=>w,tV:()=>S,u4:()=>E,DY:()=>f});var n=r(2169),i=(r(6289),r(8614)),a=r(6377);i.r1;var o=function(e){return[e]};a.xP,a.Lx,a.u4,a.OE,a.nq,a.iw,a.YM,a.ZN,a.Eh,i.F4,a.YM,a.Z$,a.VV,a.Fp,a.j0;a.ur;var s=r(7812),c=r(7049);r(3226);s.P5,s.YM,s.Z$;s.cx;function u(e){return s.Ew(e)}var l=s.f2;s.JO,s.qr;var d=function(e){return e.slice()},f=function(e){return function(t){return t.length<=1?d(t):t.slice().sort(e.compare)}};var g=s.t9;function p(e){var t=g(e);return function(r,n){if(void 0===n){var i=p(e);return function(e){return i(e,r)}}return r.filter((function(e){return t(e,n)}))}}s.kp,s.Eq;var m=o,h=function(e){return function(t){return(0,n.zG)(t,function(e){return function(t){for(var r=[],n=0;n<t.length;n++)r.push.apply(r,e(n,t[n]));return r}}((function(t,r){return e(r)})))}},_=h(n.yR),v=function(e){return function(t){for(var r=[],n=0;n<t.length;n++){var a=e(n,t[n]);i.pC(a)&&r.push(a.value)}return r}},b=function(e){return v((function(t,r){return e(r)}))},y=b(n.yR),w=function(e){return I((function(t,r){return e(r)}))},I=function(e){return function(t){for(var r=[],n=[],i=0;i<t.length;i++){var a=t[i];e(i,a)?n.push(a):r.push(a)}return(0,c.s4)(r,n)}},S=function(e){return k((function(t,r){return e(r)}))},k=function(e){return function(t){for(var r=[],n=[],i=0;i<t.length;i++){var a=e(i,t[i]);"Left"===a._tag?r.push(a.left):n.push(a.right)}return(0,c.s4)(r,n)}},E=(s.Lx,s.xP,s.u4);s.OE,s.nq,s.iw,s.ZN,s.Eh,s.pR,s.pJ,s.oR,s.yW,s.j0,i.F4},6335:(e,t,r)=>{function n(e){return function(t){return function(r){return e.chain(r,(function(r){return e.map(t(r),(function(){return r}))}))}}}function i(e){return function(t,r){return function(n){return e.chain(n,(function(n){return e.map(r(n),(function(e){var r;return Object.assign({},n,((r={})[t]=e,r))}))}))}}}r.d(t,{a:()=>i,m:()=>n})},7144:(e,t,r)=>{r.d(t,{G5:()=>_,dO:()=>p,Pd:()=>w,ak:()=>R,tS:()=>b,Y$:()=>x,g_:()=>z,ij:()=>M,DT:()=>k,fS:()=>C,pF:()=>D,nM:()=>E,t$:()=>s,UI:()=>g,Vn:()=>I,EQ:()=>U,F2:()=>c,LF:()=>O,KC:()=>A,i$:()=>q,Y3:()=>T});var n=r(6335),i=r(4906),a=r(2169),o=(r(6289),r(8614)),s=o.t$,c=o.F2,u=function(e,t){return(0,a.zG)(e,g(t))},l=function(e,t){return(0,a.zG)(e,h(t))},d=function(e,t){return(0,a.zG)(e,b(t))},f="Either",g=function(e){return function(t){return E(t)?t:c(e(t.right))}},p={URI:f,map:u},m=c,h=function(e){return function(t){return E(t)?t:E(e)?e:c(t.right(e.right))}},_={URI:f,map:u,ap:l},v=function(e){return function(t){return E(t)?t:e(t.right)}},b=v,y={URI:f,map:u,ap:l,chain:d},w=function(e,t){return function(r){return E(r)?s(e(r.left)):c(t(r.right))}},I=function(e){return function(t){return E(t)?s(e(t.left)):t}},S={URI:f,fromEither:a.yR},k=(0,i.DT)(S),E=o.nM,P=(o.tO,function(e,t){return function(r){return E(r)?e(r.left):t(r.right)}}),G=P,U=P,z=U,D=function(e){return function(t){return E(t)?e(t.left):t.right}},C=D,x=(0,i.Y$)(S,y),O=function(e){return E(e)?c(e.left):s(e.right)},M=function(e){return function(t){return null==t?s(e):c(t)}},T=function(e,t){try{return c(e())}catch(e){return s(t(e))}},q=G(a.yR,a.yR);function A(e){return e instanceof Error?e:new Error(String(e))}o.F4;var R=(0,n.a)(y);o.Xl},7125:(e,t,r)=>{r.d(t,{EQ:()=>y,F2:()=>s,KQ:()=>f,LF:()=>P,LU:()=>E,LV:()=>w,NG:()=>g,Pd:()=>v,UI:()=>p,Vn:()=>b,ap:()=>m,dQ:()=>k,fS:()=>I,i$:()=>G,ij:()=>d,m8:()=>u,pk:()=>l,t$:()=>c,tS:()=>h,vx:()=>S,wp:()=>_});var n=r(2945),i=r(7144),a=r(2169),o=r(6289);function s(e){return(0,a.ls)(i.F2,e.of)}function c(e){return(0,a.ls)(i.t$,e.of)}function u(e){return function(t){return e.map(t,i.F2)}}function l(e){return function(t){return e.map(t,i.t$)}}function d(e){return function(t){return(0,a.ls)(i.ij(t),e.of)}}function f(e){var t=d(e);return function(e){var r=t(e);return function(e){return(0,a.ls)(e,r)}}}function g(e){var t=h(e),r=f(e);return function(e){var n=r(e);return function(e){return t(n(e))}}}function p(e){return(0,o.UI)(e,i.dO)}function m(e){return(0,n.ap)(e,i.G5)}function h(e){return function(t){return function(r){return e.chain(r,(function(r){return i.nM(r)?e.of(r):t(r.right)}))}}}function _(e){return function(t){return function(r){return e.chain(r,(function(r){return i.nM(r)?t():e.of(r)}))}}}function v(e){return function(t,r){return function(n){return e.map(n,i.Pd(t,r))}}}function b(e){return function(t){return function(r){return e.map(r,i.Vn(t))}}}function y(e){return function(t,r){return function(n){return e.map(n,i.EQ(t,r))}}}function w(e){return function(t,r){return function(n){return e.chain(n,i.EQ(t,r))}}}function I(e){return function(t){return function(r){return e.chain(r,i.EQ(t,e.of))}}}function S(e){return function(t){return function(r){return e.chain(r,(function(r){return i.nM(r)?t(r.left):e.of(r)}))}}}function k(e){var t=S(e);return function(r){return t((function(t){return e.map(r(t),(function(e){return i.nM(e)?e:i.t$(t)}))}))}}function E(e){return function(t){return function(r){return e.chain(r,i.EQ((function(r){return e.map(t(r),i.t$)}),(function(t){return e.of(i.F2(t))})))}}}function P(e){return function(t){return e.map(t,i.LF)}}function G(e){return function(t){return e.map(t,i.i$)}}},3689:(e,t,r)=>{r.d(t,{f7:()=>n,n_:()=>i,w4:()=>a});r(2169);var n=function(e){return{equals:function(t,r){return t===r||e(t,r)}}},i=function(e){return n((function(t,r){for(var n in e)if(!e[n].equals(t[n],r[n]))return!1;return!0}))},a={equals:function(e,t){return e===t}};a.equals},4906:(e,t,r)=>{r.d(t,{DT:()=>a,Y$:()=>c,fX:()=>s});var n=r(2169),i=r(8614);function a(e){return function(t,r){return function(n){return e.fromEither(t(n)?i.F2(n):i.t$(r(n)))}}}function o(e){return function(t){return(0,n.ls)(t,e.fromEither)}}function s(e,t){var r=o(e);return function(e){return function(n){return t.chain(n,r(e))}}}function c(e,t){return function(r,n){return function(a){return t.chain(a,(function(t){return e.fromEither(r(t)?i.F2(t):i.t$(n(t)))}))}}}},7755:(e,t,r)=>{r.d(t,{At:()=>a});var n=r(6335),i=r(2169);function a(e,t){var r=(0,n.m)(t);return function(t){return r((0,i.ls)(t,e.fromIO))}}},6289:(e,t,r)=>{function n(e,t){return function(r){return function(n){return e.map(n,(function(e){return t.map(e,r)}))}}}function i(e){return function(t){return function(r){return e.map(r,(function(e){var r;return(r={})[t]=e,r}))}}}function a(e){return function(t,r){return function(n){return e.map(n,(function(e){var n;return Object.assign({},e,((n={})[t]=r(e),n))}))}}}r.d(t,{Hr:()=>a,UI:()=>n,YO:()=>i})},4694:(e,t,r)=>{r.d(t,{G5:()=>l,RD:()=>p,UI:()=>s,of:()=>c});var n=r(2169),i=(r(6289),r(8614)),a=function(e,t){return function(){return t(e())}},o=function(e,t){return function(){return e()(t())}},s=function(e){return function(t){return a(t,e)}},c=n.a9,u="IO",l={URI:u,map:a,ap:o},d=(n.yR,n.yR,i.F4,c(i.Xl)),f=function(e){var t=function(e){return function(t){return function(){for(var r=[e(0,i.YM(t))()],n=1;n<t.length;n++)r.push(e(n,t[n])());return r}}}(e);return function(e){return i.Od(e)?t(e):d}},g=function(e){return f((function(t,r){return e(r)}))},p=g(n.yR)},9144:(e,t,r)=>{r.d(t,{P:()=>a});var n=r(7144),i=r(2169),a=function(e){return(0,n.Y3)((function(){var t=JSON.stringify(e);if("string"!=typeof t)throw new Error("Converting unsupported structure to JSON");return t}),i.yR)}},8236:(e,t,r)=>{r.d(t,{g1:()=>z,G5:()=>U,Ri:()=>R,xu:()=>B,dO:()=>E,wp:()=>x,tS:()=>D,fX:()=>ee,mU:()=>Z,NG:()=>ie,hX:()=>j,DZ:()=>L,xH:()=>X,g_:()=>V,Uo:()=>N,ij:()=>te,KQ:()=>ne,DT:()=>f,Eh:()=>S,IS:()=>g,fS:()=>J,EK:()=>p,lo:()=>M,Wi:()=>Q,pC:()=>Y,UI:()=>k,EQ:()=>W,aD:()=>H,YP:()=>l,of:()=>P,RD:()=>ce,G:()=>d,FS:()=>ae,Y3:()=>re,bM:()=>O});var n=r(6335),i=r(4906),a=r(2169),o=(r(6289),r(8614)),s=r(4327),c=r(7049);r(3226);function u(e,t){return function(r){return r?t.of(void 0):e.zero()}}var l=o.YP,d=o.G;function f(e){return function(t){return e(t)?d(t):l}}var g=function(e){return"Right"===e._tag?l:d(e.left)},p=function(e){return"Left"===e._tag?l:d(e.right)},m=function(e,t){return(0,a.zG)(e,k(t))},h=function(e,t){return(0,a.zG)(e,G(t))},_=function(e,t){return(0,a.zG)(e,D(t))},v=function(e,t){return(0,a.zG)(e,j(t))},b=function(e,t){return(0,a.zG)(e,L(t))},y=function(e,t){return(0,a.zG)(e,$(t))},w=function(e,t){return(0,a.zG)(e,F(t))},I="Option",S=function(e){return{equals:function(t,r){return t===r||(Q(t)?Q(r):!Q(r)&&e.equals(t.value,r.value))}}},k=function(e){return function(t){return Q(t)?l:d(e(t.value))}},E={URI:I,map:m},P=d,G=function(e){return function(t){return Q(t)||Q(e)?l:d(t.value(e.value))}},U={URI:I,map:m,ap:h},z={URI:I,map:m,ap:h,of:P},D=function(e){return function(t){return Q(t)?l:e(t.value)}},C={URI:I,map:m,ap:h,chain:_},x=function(e){return function(t){return Q(t)?e():t}},O=function(){return l},M=u({URI:I,zero:O},{URI:I,of:P}),T=D(a.yR),q=(0,c.s4)(l,l),A=function(e){return Q(e)?q:(0,c.s4)(g(e.value),p(e.value))},R={URI:I,compact:T,separate:A},j=function(e){return function(t){return Q(t)?l:e(t.value)?t:l}},L=function(e){return function(t){return Q(t)?l:e(t.value)}},$=function(e){return function(t){return(0,c.s4)(v(t,(0,s.ff)(e)),v(t,e))}},F=function(e){return(0,a.ls)(k(e),A)},B={URI:I,map:m,compact:T,separate:A,filter:v,filterMap:b,partition:y,partitionMap:w},N=p,K={URI:I,fromEither:N},Y=o.pC,Q=function(e){return"None"===e._tag},H=function(e,t){return function(r){return Q(r)?e():t(r.value)}},W=H,V=W,J=function(e){return function(t){return Q(t)?e():t.value}},X=T,Z=(0,n.m)(C),ee=(0,i.fX)(K,C),te=function(e){return null==e?l:d(e)},re=function(e){try{return d(e())}catch(e){return l}},ne=function(e){return(0,a.ls)(e,te)},ie=function(e){return function(t){return Q(t)?l:te(e(t.value))}},ae=W(a.r5,a.yR);o.F4;var oe=P(o.Xl),se=function(e){var t=function(e){return function(t){var r=e(0,o.YM(t));if(Q(r))return l;for(var n=[r.value],i=1;i<t.length;i++){var a=e(i,t[i]);if(Q(a))return l;n.push(a.value)}return d(n)}}(e);return function(e){return o.Od(e)?t(e):oe}},ce=function(e){return se((function(t,r){return e(r)}))}(a.yR)},856:(e,t,r)=>{r.d(t,{Fp:()=>c,VV:()=>s,Zt:()=>o,uZ:()=>u});var n=r(3689),i=r(2169),a=function(e){return function(t,r){return t===r||0===e(t,r)}},o=function(e){return{equals:a(e),compare:function(t,r){return t===r?0:e(t,r)}}},s=(i.W8,function(e){return function(t,r){return t===r||e.compare(t,r)<1?t:r}}),c=function(e){return function(t,r){return t===r||e.compare(t,r)>-1?t:r}},u=function(e){var t=s(e),r=c(e);return function(e,n){return function(i){return r(t(i,n),e)}}};n.w4.equals},4327:(e,t,r)=>{r.d(t,{ff:()=>n});r(2169);var n=function(e){return function(t){return!e(t)}}},7812:(e,t,r)=>{r.d(t,{$R:()=>U,DZ:()=>N,EQ:()=>m,Eh:()=>ie,Eq:()=>M,Ew:()=>w,G:()=>fe,Hr:()=>me,JO:()=>k,Lx:()=>V,OE:()=>J,Od:()=>g,P5:()=>_,Su:()=>L,UI:()=>j,YM:()=>v,YO:()=>pe,Z$:()=>b,ZN:()=>re,bM:()=>q,bj:()=>G,cS:()=>le,cx:()=>y,dF:()=>S,f2:()=>I,hX:()=>F,hp:()=>P,iw:()=>Z,j0:()=>ge,kp:()=>O,nI:()=>ue,nq:()=>X,oA:()=>K,oR:()=>ce,of:()=>T,oh:()=>$,pJ:()=>se,pR:()=>ae,qr:()=>E,t9:()=>z,tS:()=>A,u4:()=>W,uK:()=>Y,uZ:()=>ne,vP:()=>ee,xH:()=>R,xP:()=>H,xb:()=>f,yW:()=>de,zo:()=>D});var n=r(3689),i=r(2169),a=r(6289),o=r(8614),s=r(3052),c=r(856),u=r(6377),l=r(7049),d=(r(3226),function(e,t,r){if(r||2===arguments.length)for(var n,i=0,a=t.length;i<a;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}),f=function(e){return 0===e.length},g=u.Od,p=(u.Ce,u.ws,u.R3);u.Im;var m=function(e,t){return function(r){return g(r)?t(r):e()}},h=u.dC;function _(e,t){return void 0===t?function(t){return _(e,t)}:h(e,t)?o.YP:o.G(t[e])}var v=function(e){return g(e)?o.G(u.YM(e)):o.YP},b=function(e){return g(e)?o.G(u.Z$(e)):o.YP};var y=function(e){return function(t){for(var r=0;r<t.length;r++)if(e(t[r]))return o.G(r);return o.YP}};function w(e){return function(t){for(var r=0;r<t.length;r++)if(e(t[r]))return o.G(t[r]);return o.YP}}var I=function(e){return function(t){for(var r=0;r<t.length;r++){var n=e(t[r]);if(o.pC(n))return n}return o.YP}};function S(e){return function(t){for(var r=t.length-1;r>=0;r--)if(e(t[r]))return o.G(t[r]);return o.YP}}var k=function(e){return function(t){for(var r=t.length-1;r>=0;r--){var n=e(t[r]);if(o.pC(n))return n}return o.YP}},E=function(e){return function(t){for(var r=t.length-1;r>=0;r--)if(e(t[r]))return o.G(r);return o.YP}},P=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];"Right"===n._tag&&t.push(n.right)}return t},G=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];"Left"===n._tag&&t.push(n.left)}return t};function U(e,t){return void 0===t?function(t){return U(t,e)}:function(e,t,r){for(var n=[],i=Math.min(e.length,t.length),a=0;a<i;a++)n[a]=r(e[a],t[a]);return n}(e,t,(function(e,t){return[e,t]}))}function z(e){return function(t,r){if(void 0===r){var n=z(e);return function(e){return n(t,e)}}for(var i,a=0;a<r.length;a++)if(i=r[a],e.equals(i,t))return!0;return!1}}var D=function(e){return function(t){return f(t)?e:f(e)?t:t.concat(e)}};var C=function(e,t){return(0,i.zG)(e,j(t))},x=function(e,t,r){return(0,i.zG)(e,W(t,r))},O=function(e,t){return(0,i.zG)(e,se(t))},M=function(e,t){return(0,i.zG)(e,ce(t))},T=u.of,q=function(){return le},A=function(e){return function(t){return(0,i.zG)(t,function(e){return function(t){if(f(t))return le;for(var r=[],n=0;n<t.length;n++)r.push.apply(r,e(n,t[n]));return r}}((function(t,r){return e(r)})))}},R=A(i.yR),j=function(e){return function(t){return t.map((function(t){return e(t)}))}},L=function(e){return function(t){return t.map((function(t,r){return e(r,t)}))}},$=function(e){for(var t=[],r=[],n=0,i=e;n<i.length;n++){var a=i[n];"Left"===a._tag?t.push(a.left):r.push(a.right)}return(0,l.s4)(t,r)},F=function(e){return function(t){return t.filter(e)}},B=function(e){return function(t){for(var r=[],n=0;n<t.length;n++){var i=e(n,t[n]);o.pC(i)&&r.push(i.value)}return r}},N=function(e){return B((function(t,r){return e(r)}))},K=N(i.yR),Y=function(e){return Q((function(t,r){return e(r)}))},Q=function(e){return function(t){for(var r=[],n=[],i=0;i<t.length;i++){var a=t[i];e(i,a)?n.push(a):r.push(a)}return(0,l.s4)(r,n)}},H=function(e){return function(t){return function(r){return r.reduce((function(r,n,i){return e.concat(r,t(i,n))}),e.empty)}}},W=function(e,t){return J(e,(function(e,r,n){return t(r,n)}))},V=function(e){var t=H(e);return function(e){return t((function(t,r){return e(r)}))}},J=function(e,t){return function(r){for(var n=r.length,i=e,a=0;a<n;a++)i=t(a,i,r[a]);return i}},X=function(e,t){return Z(e,(function(e,r,n){return t(r,n)}))},Z=function(e,t){return function(r){return r.reduceRight((function(e,r,n){return t(n,r,e)}),e)}},ee=function(e){return function(t){return x(t,e.of(q()),(function(t,r){return e.ap(e.map(t,(function(e){return function(t){return(0,i.zG)(e,p(t))}})),r)}))}},te="ReadonlyArray",re=function(e){return{show:function(t){return"[".concat(t.map(e.show).join(", "),"]")}}},ne=function(){return{concat:function(e,t){return f(e)?t:f(t)?e:e.concat(t)},empty:le}},ie=function(e){return(0,n.f7)((function(t,r){return t.length===r.length&&t.every((function(t,n){return e.equals(t,r[n])}))}))},ae=function(e){return(0,c.Zt)((function(t,r){for(var n=t.length,i=r.length,a=Math.min(n,i),o=0;o<a;o++){var c=e.compare(t[o],r[o]);if(0!==c)return c}return s.Df.compare(n,i)}))},oe={URI:te,map:C},se=function(e){return function(t){for(var r=d([],e(t),!0),n=[];r.length>0;){var i=r.shift();o.nM(i)?r.unshift.apply(r,e(i.left)):n.push(i.right)}return n}},ce=function(e){return function(t){var r=e(t),n=[],i=[];function a(t){o.nM(t)?e(t.left).forEach((function(e){return n.push(e)})):i.push(t.right)}for(var s=0,c=r;s<c.length;s++){a(c[s])}for(;n.length>0;)a(n.shift());return i}},ue=(u.oo,function(e){return f(e)?le:e.slice()}),le=u.cS;function de(e){return function(t){return t.every(e)}}var fe=function(e){return function(t){return t.some(e)}},ge=function(e){var t=u.j0(e);return function(r){return m((function(){return e.empty}),t(r))}},pe=(o.F4,(0,a.YO)(oe)),me=(0,a.Hr)(oe);u.w6,u.QI,u.Ss},6377:(e,t,r)=>{r.d(t,{R3:()=>_,Im:()=>h,ur:()=>B,QI:()=>K,cS:()=>d,Lx:()=>D,xP:()=>O,nI:()=>I,c2:()=>b,Eh:()=>A,ZN:()=>q,vM:()=>k,YM:()=>R,j0:()=>N,Od:()=>f,dC:()=>g,Z$:()=>L,UI:()=>G,Fp:()=>F,VV:()=>$,of:()=>P,Ce:()=>m,ws:()=>p,w6:()=>w,u4:()=>z,nq:()=>C,iw:()=>M,OE:()=>x,Ss:()=>Y,oo:()=>v});var n,i=r(3689),a=r(2169),o=(r(6289),r(8614)),s=r(856),c=function(e){return{concat:s.VV(e)}},u=function(e){return{concat:s.Fp(e)}};n=void 0;var l=function(e,t,r){if(r||2===arguments.length)for(var n,i=0,a=t.length;i<a;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},d=o.Xl,f=o.Od,g=function(e,t){return e<0||e>=t.length},p=function(e){return function(t){return l([e],t,!0)}},m=p,h=function(e){return function(t){return l(l([],t,!0),[e],!1)}},_=h,v=function(e,t,r){if(f(r)){var n=o.r1(r);return n.splice(e,0,t),n}return[t]},b=function(e){return f(e)?o.G(e):o.YP},y=function(e){return function(t){for(var r=Math.max(0,Math.floor(t)),n=[e(0)],i=1;i<r;i++)n.push(e(i));return n}},w=function(e,t){return e<=t?y((function(t){return e+t}))(t-e+1):[e]},I=function(e){return b(e.slice())};function S(e,t){return t?e.concat(t):function(t){return t.concat(e)}}var k=function(e){return function(t){for(var r={},n=0,i=t;n<i.length;n++){var a=i[n],s=e(a);o.e$.call(r,s)?r[s].push(a):r[s]=[a]}return r}};var E=function(e){return function(t){for(var r=[e,t[0]],n=1;n<t.length;n++)r.push(e,t[n]);return r}},P=o.ri,G=function(e){return U((function(t,r){return e(r)}))},U=function(e){return function(t){for(var r=[e(0,R(t))],n=1;n<t.length;n++)r.push(e(n,t[n]));return r}},z=function(e,t){return x(e,(function(e,r,n){return t(r,n)}))},D=function(e){return function(t){return function(r){return r.slice(1).reduce((function(r,n){return e.concat(r,t(n))}),t(r[0]))}}},C=function(e,t){return M(e,(function(e,r,n){return t(r,n)}))},x=function(e,t){return function(r){return r.reduce((function(e,r,n){return t(n,e,r)}),e)}},O=function(e){return function(t){return function(r){return r.slice(1).reduce((function(r,n,i){return e.concat(r,t(i+1,n))}),t(0,r[0]))}}},M=function(e,t){return function(r){return r.reduceRight((function(e,r,n){return t(n,r,e)}),e)}},T=o.YM,q=function(e){return{show:function(t){return"[".concat(t.map(e.show).join(", "),"]")}}},A=function(e){return(0,i.f7)((function(t,r){return t.length===r.length&&t.every((function(t,n){return e.equals(t,r[n])}))}))},R=(o.F4,T),j=o.Gb,L=function(e){return e[e.length-1]},$=function(e){var t=c(e);return function(e){return e.reduce(t.concat)}},F=function(e){var t=u(e);return function(e){return e.reduce(t.concat)}},B=function(e){return function(t){return t.reduce(e.concat)}},N=function(e){var t=B(e);return function(e){return(0,a.ls)(function(e){return function(t){var r=j(t);return f(r)?(0,a.zG)(r,E(e),m(R(t))):t}}(e),t)}};function K(e,t){return void 0===t?m(e):(0,a.zG)(t,m(e))}var Y=function(e,t){return(0,a.zG)(e,S([t]))}},6450:(e,t,r)=>{r.d(t,{Bu:()=>m,CC:()=>q,DZ:()=>Z,EG:()=>p,EW:()=>B,Eh:()=>ce,G:()=>C,HA:()=>O,Hd:()=>P,I8:()=>R,P5:()=>h,RF:()=>A,RJ:()=>L,SW:()=>K,Su:()=>v,UI:()=>b,Ub:()=>Q,V_:()=>F,XP:()=>d,_Y:()=>$,_r:()=>E,dp:()=>c,dx:()=>f,e$:()=>g,hX:()=>X,jt:()=>G,kp:()=>T,mK:()=>V,mS:()=>j,nn:()=>M,nr:()=>le,nu:()=>N,oA:()=>ae,oh:()=>oe,qS:()=>W,ri:()=>S,sq:()=>z,t9:()=>x,tV:()=>te,uK:()=>ee,uZ:()=>ue,vA:()=>H,vP:()=>k,xb:()=>u,yW:()=>D,z7:()=>U,zV:()=>Y});var n=r(3689),i=r(2169),a=r(8614),o=r(7049),s=r(229),c=(r(3226),function(e){return Object.keys(e).length}),u=function(e){for(var t in e)if(a.e$.call(e,t))return!1;return!0},l=function(e){return function(t){return Object.keys(t).sort(e.compare)}},d=l(s.Df);var f=function(e,t){return function(r){if(a.e$.call(r,e)&&r[e]===t)return r;var n=Object.assign({},r);return n[e]=t,n}},g=function(e,t){return a.e$.call(t,e)};function p(e){return function(t){if(!a.e$.call(t,e))return t;var r=Object.assign({},t);return delete r[e],r}}function m(e){return function(t,r){if(void 0===r){var n=m(e);return function(e){return n(e,t)}}for(var i in t)if(!a.e$.call(r,i)||!e.equals(t[i],r[i]))return!1;return!0}}function h(e,t){return void 0===t?function(t){return h(e,t)}:a.e$.call(t,e)?a.G(t[e]):a.YP}var _={};function v(e){return function(t){var r={};for(var n in t)a.e$.call(t,n)&&(r[n]=e(n,t[n]));return r}}function b(e){return v((function(t,r){return e(r)}))}function y(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(2===e.length)return y(s.Df).apply(void 0,e);var r=l(e[0]);return function(e,t){return function(n){for(var i=e,a=r(n),o=a.length,s=0;s<o;s++){var c=a[s];i=t(c,i,n[c])}return i}}}function w(e){if("compare"in e){var t=l(e);return function(e){return function(r){return function(n){for(var i=e.empty,a=t(n),o=a.length,s=0;s<o;s++){var c=a[s];i=e.concat(i,r(c,n[c]))}return i}}}}return w(s.Df)(e)}function I(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(2===e.length)return I(s.Df).apply(void 0,e);var r=l(e[0]);return function(e,t){return function(n){for(var i=e,a=r(n),o=a.length-1;o>=0;o--){var s=a[o];i=t(s,n[s],i)}return i}}}var S=function(e,t){var r;return(r={})[e]=t,r};function k(e){return V(s.Df)(e)}function E(e){return function(t){var r={},n={};for(var i in t)if(a.e$.call(t,i)){var s=e(i,t[i]);switch(s._tag){case"Left":r[i]=s.left;break;case"Right":n[i]=s.right}}return(0,o.s4)(r,n)}}function P(e){return function(t){var r={},n={};for(var i in t)if(a.e$.call(t,i)){var s=t[i];e(i,s)?n[i]=s:r[i]=s}return(0,o.s4)(r,n)}}function G(e){return function(t){var r={};for(var n in t)if(a.e$.call(t,n)){var i=e(n,t[n]);a.pC(i)&&(r[n]=i.value)}return r}}function U(e){return function(t){var r={},n=!1;for(var i in t)if(a.e$.call(t,i)){var o=t[i];e(i,o)?r[i]=o:n=!0}return n?r:t}}var z=function(e){for(var t={},r=0,n=e;r<n.length;r++){var i=n[r];t[i[0]]=i[1]}return t};function D(e){return function(t){for(var r in t)if(!e(t[r]))return!1;return!0}}function C(e){return function(t){for(var r in t)if(e(t[r]))return!0;return!1}}function x(e){return function(t,r){if(void 0===r){var n=x(e);return function(e){return n(t,e)}}for(var i in r)if(e.equals(r[i],t))return!0;return!1}}var O=function(e,t){return(0,i.zG)(e,b(t))},M=function(e,t){return(0,i.zG)(e,v(t))},T=function(e){var t=re(e);return function(e,r,n){return(0,i.zG)(e,t(r,n))}},q=function(e){return function(t){var r=ne(e)(t);return function(e,t){return(0,i.zG)(e,r(t))}}},A=function(e){var t=ie(e);return function(e,r,n){return(0,i.zG)(e,t(r,n))}},R=function(e,t){return(0,i.zG)(e,X(t))},j=function(e,t){return(0,i.zG)(e,Z(t))},L=function(e,t){return(0,i.zG)(e,ee(t))},$=function(e,t){return(0,i.zG)(e,te(t))},F=function(e){var t=y(e);return function(e,r,n){return(0,i.zG)(e,t(r,n))}},B=function(e){var t=w(e);return function(e){var r=t(e);return function(e,t){return(0,i.zG)(e,r(t))}}},N=function(e){var t=I(e);return function(e,r,n){return(0,i.zG)(e,t(r,n))}},K=function(e,t){return(0,i.zG)(e,E(t))},Y=function(e,t){return(0,i.zG)(e,P(t))},Q=function(e,t){return(0,i.zG)(e,G(t))},H=function(e,t){return(0,i.zG)(e,U(t))},W=function(e){var t=J(e);return function(e){var r=t(e);return function(e,t){return r(e,(0,i.ls)(i.SK,t))}}},V=function(e){var t=W(e);return function(e){var r=t(e);return function(e){return r(e,i.yR)}}},J=function(e){return function(t){var r=l(e);return function(e,n){var i=r(e);if(0===i.length)return t.of(_);for(var a=t.of({}),o=function(r){a=t.ap(t.map(a,(function(e){return function(t){var n;return Object.assign({},e,((n={})[r]=t,n))}})),n(r,e[r]))},s=0,c=i;s<c.length;s++){o(c[s])}return a}}},X=function(e){return U((function(t,r){return e(r)}))},Z=function(e){return G((function(t,r){return e(r)}))},ee=function(e){return P((function(t,r){return e(r)}))},te=function(e){return E((function(t,r){return e(r)}))};function re(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var r=y(e[0]);return function(e,t){return r(e,(function(e,r,n){return t(r,n)}))}}return re(s.Df).apply(void 0,e)}function ne(e){if("compare"in e){var t=w(e);return function(e){var r=t(e);return function(e){return r((function(t,r){return e(r)}))}}}return ne(s.Df)(e)}function ie(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var r=I(e[0]);return function(e,t){return r(e,(function(e,r,n){return t(r,n)}))}}return ie(s.Df).apply(void 0,e)}var ae=function(e){var t={};for(var r in e)if(a.e$.call(e,r)){var n=e[r];a.pC(n)&&(t[r]=n.value)}return t},oe=function(e){var t={},r={};for(var n in e)if(a.e$.call(e,n)){var i=e[n];a.nM(i)?t[n]=i.left:r[n]=i.right}return(0,o.s4)(t,r)},se="ReadonlyRecord";function ce(e){var t=m(e);return(0,n.f7)((function(e,r){return t(e)(r)&&t(r)(e)}))}function ue(e){return{concat:function(t,r){if(u(t))return r;if(u(r))return t;var n=Object.assign({},t);for(var i in r)a.e$.call(r,i)&&(n[i]=a.e$.call(t,i)?e.concat(t[i],r[i]):r[i]);return n},empty:_}}s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df;function le(e,t){return a.e$.call(void 0===t?this:t,e)}s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df},3643:(e,t,r)=>{r.d(t,{H5:()=>s,Kl:()=>c,Lx:()=>l,Pd:()=>a,Yg:()=>i,li:()=>n,nq:()=>d,pL:()=>o,u4:()=>u});r(2169);function n(e){return e[0]}function i(e){return e[1]}var a=function(e,t){return function(r){return[t(n(r)),e(i(r))]}},o=function(e){return function(t){return[e(n(t)),i(t)]}},s=function(e){return function(t){return[n(t),e(i(t))]}},c=n,u=function(e,t){return function(r){return t(e,n(r))}},l=function(){return function(e){return function(t){return e(n(t))}}},d=function(e,t){return function(r){return t(n(r),e)}}},951:(e,t,r)=>{r.d(t,{UI:()=>s,XP:()=>o});var n=r(6450),i=r(229),a=(r(3226),n.dp,n.xb,function(e){return function(t){return Object.keys(t).sort(e.compare)}}),o=a(i.Df);n.dx,n.e$;n.Bu,n.P5,n.Su;var s=n.UI;n.ri;function c(e){return n.vP(e)}n._r;n.jt;n.yW,n.G,n.t9;var u=n.HA,l=(n.nn,n.kp),d=n.CC,f=n.RF,g=(n.I8,n.mS,n.RJ,n._Y,n.V_),p=n.EW,m=n.nu,h=(n.SW,n.zV,n.Ub,n.vA,n.qS),_=(n.mK,function(e){return function(t){var r=a(e);return function(e,n){var i=r(e);if(0===i.length)return t.of({});for(var a=t.of({}),o=function(r){a=t.ap(t.map(a,(function(e){return function(t){return e[r]=t,e}})),n(r,e[r]))},s=0,c=i;s<c.length;s++){o(c[s])}return a}}});n.hX,n.DZ,n.uK,n.tV;n.oA,n.oh;var v="Record";n.Eh,n.uZ,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,n.nr,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df,i.Df},5086:(e,t,r)=>{r.d(t,{ff:()=>n});var n=function(e){return function(t){return!e(t)}}},7049:(e,t,r)=>{r.d(t,{Pd:()=>i,s4:()=>n});r(2169);var n=function(e,t){return{left:e,right:t}},i=function(e,t){return function(r){return n(e(a(r)),t(o(r)))}},a=function(e){return e.left},o=function(e){return e.right}},7226:(e,t,r)=>{r.d(t,{At:()=>P,Hi:()=>y,PM:()=>b,Qt:()=>z,UA:()=>S,UI:()=>g,YO:()=>G,ak:()=>U,ap:()=>p,dO:()=>v,mU:()=>k,of:()=>m,pE:()=>M,qA:()=>w,qo:()=>I,tD:()=>u,tS:()=>h,uU:()=>O});var n=r(2945),i=r(6335),a=r(7755),o=r(2169),s=r(6289),c=r(8614),u=function(e){return function(){return Promise.resolve().then(e)}};var l=function(e,t){return(0,o.zG)(e,g(t))},d=function(e,t){return(0,o.zG)(e,p(t))},f=function(e,t){return(0,o.zG)(e,h(t))},g=function(e){return function(t){return function(){return Promise.resolve().then(t).then(e)}}},p=function(e){return function(t){return function(){return Promise.all([Promise.resolve().then(t),Promise.resolve().then(e)]).then((function(e){return(0,e[0])(e[1])}))}}},m=function(e){return function(){return Promise.resolve(e)}},h=function(e){return function(t){return function(){return Promise.resolve().then(t).then((function(t){return e(t)()}))}}},_="Task";var v={URI:_,map:l},b={URI:_,of:m},y={URI:_,map:l,ap:d},w={URI:_,map:l,ap:d,of:m},I={URI:_,map:l,ap:d,chain:f},S={URI:_,map:l,of:m,ap:d,chain:f},k=(o.yR,(0,i.m)(I)),E={URI:_,fromIO:u},P=(0,a.At)(E,I),G=(c.F4,(0,s.YO)(v)),U=(0,i.a)(I),z=(0,n.Qt)(y),D=m(c.Xl),C=function(e){var t=function(e){return function(t){return function(){return Promise.all(t.map((function(t,r){return Promise.resolve().then((function(){return e(r,t)()}))})))}}}(e);return function(e){return c.Od(e)?t(e):D}},x=function(e){var t=function(e){return function(t){return function(){return c.Gb(t).reduce((function(t,r,n){return t.then((function(t){return Promise.resolve().then(e(n+1,r)).then((function(e){return t.push(e),t}))}))}),Promise.resolve().then(e(0,c.YM(t))).then(c.ri))}}}(e);return function(e){return c.Od(e)?t(e):D}},O=function(e){return C((function(t,r){return e(r)}))},M=function(e){return x((function(t,r){return e(r)}))}},132:(e,t,r)=>{r.d(t,{Do:()=>Z,Qt:()=>re,ak:()=>te,tS:()=>A,fX:()=>Q,At:()=>V,wE:()=>X,Zl:()=>R,Y$:()=>H,Uo:()=>I,tD:()=>y,fF:()=>w,fS:()=>E,t$:()=>m,Hr:()=>ee,UI:()=>O,Vn:()=>T,EQ:()=>S,LV:()=>k,of:()=>L,Ij:()=>ne,Y3:()=>P});var n=r(2945),i=r(6335),a=r(7125),o=r(4906),s=r(7755),c=r(2169);function u(e,t){return function(r){var n=(0,c.ls)(r,e.fromTask);return function(e){return t.chain(e,n)}}}var l=r(6289),d=r(8614),f=r(7226),g=function(e,t,r,n){return new(r||(r=Promise))((function(i,a){function o(e){try{c(n.next(e))}catch(e){a(e)}}function s(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,s)}c((n=n.apply(e,t||[])).next())}))},p=function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},m=a.t$(f.PM),h=a.F2(f.PM),_=a.m8(f.dO),v=a.pk(f.dO),b=(0,c.ls)(f.tD,_),y=(f.tD,b),w=_,I=f.of,S=(f.tD,a.EQ(f.dO)),k=a.LV(f.UA),E=a.fS(f.UA),P=function(e,t){return function(){return g(void 0,void 0,void 0,(function(){var r;return p(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e().then(d.F2)];case 1:return[2,n.sent()];case 2:return r=n.sent(),[2,d.t$(t(r))];case 3:return[2]}}))}))}},G=(f.dO,f.PM,f.PM,f.UA,f.UA,f.UA,f.UA,f.dO,function(e,t){return(0,c.zG)(e,O(t))}),U=function(e,t){return(0,c.zG)(e,q(t))},z=function(e,t){return(0,c.zG)(e,A(t))},D=function(e,t,r){return(0,c.zG)(e,M(t,r))},C=function(e,t){return(0,c.zG)(e,T(t))},x=function(e,t){return(0,c.zG)(e,j(t))},O=a.UI(f.dO),M=a.Pd(f.dO),T=a.Vn(f.dO),q=a.ap(f.Hi),A=a.tS(f.UA),R=A,j=a.wp(f.UA),L=h,$=m,F="TaskEither";var B={URI:F,map:G},N={URI:F,map:G,ap:U},K={URI:F,map:G,ap:U,chain:z},Y={URI:F,fromEither:I},Q=(0,o.fX)(Y,K),H=(0,o.Y$)(Y,K),W={URI:F,fromIO:y},V=(0,s.At)(W,K),J={URI:F,fromIO:y,fromTask:w},X=u(J,K);var Z=L(d.F4),ee=(0,l.Hr)(B),te=(0,i.a)(K),re=(0,n.Qt)(N),ne=(d.Xl,{URI:F,bimap:D,mapLeft:C,map:G,of:L,ap:U,chain:z,alt:x,fromIO:y,fromTask:w,throwError:$})},3226:(e,t,r)=>{function n(e,t){return function(r){var n=e.traverse(r);return function(e,i){return r.map(n(e,i),t.separate)}}}function i(e,t){return function(r){var n=e.traverse(r);return function(e,i){return r.map(n(e,i),t.compact)}}}r.d(t,{BL:()=>i,Fj:()=>n})},2169:(e,t,r)=>{r.d(t,{MZ:()=>i,Q1:()=>u,SK:()=>g,W8:()=>o,a9:()=>a,bc:()=>d,gn:()=>s,ls:()=>l,r5:()=>c,yR:()=>n,zG:()=>f});function n(e){return e}var i=n;function a(e){return function(){return e}}var o=a(!0),s=a(null),c=a(void 0),u=c;function l(e,t,r,n,i,a,o,s,c){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return r(t(e.apply(this,arguments)))};case 4:return function(){return n(r(t(e.apply(this,arguments))))};case 5:return function(){return i(n(r(t(e.apply(this,arguments)))))};case 6:return function(){return a(i(n(r(t(e.apply(this,arguments))))))};case 7:return function(){return o(a(i(n(r(t(e.apply(this,arguments)))))))};case 8:return function(){return s(o(a(i(n(r(t(e.apply(this,arguments))))))))};case 9:return function(){return c(s(o(a(i(n(r(t(e.apply(this,arguments)))))))))}}}function d(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e}function f(e,t,r,n,i,a,o,s,c){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return r(t(e));case 4:return n(r(t(e)));case 5:return i(n(r(t(e))));case 6:return a(i(n(r(t(e)))));case 7:return o(a(i(n(r(t(e))))));case 8:return s(o(a(i(n(r(t(e)))))));case 9:return c(s(o(a(i(n(r(t(e))))))));default:for(var u=arguments[0],l=1;l<arguments.length;l++)u=arguments[l](u);return u}}var g=function(e,t){return t}},8614:(e,t,r)=>{r.d(t,{F2:()=>d,F4:()=>_,G:()=>s,Gb:()=>m,Od:()=>g,Wi:()=>i,Xl:()=>h,YM:()=>p,YP:()=>o,e$:()=>v,nM:()=>c,pC:()=>a,r1:()=>b,ri:()=>f,t$:()=>l,tO:()=>u});var n=function(e,t,r){if(r||2===arguments.length)for(var n,i=0,a=t.length;i<a;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},i=function(e){return"None"===e._tag},a=function(e){return"Some"===e._tag},o={_tag:"None"},s=function(e){return{_tag:"Some",value:e}},c=function(e){return"Left"===e._tag},u=function(e){return"Right"===e._tag},l=function(e){return{_tag:"Left",left:e}},d=function(e){return{_tag:"Right",right:e}},f=function(e){return[e]},g=function(e){return e.length>0},p=function(e){return e[0]},m=function(e){return e.slice(1)},h=[],_={},v=Object.prototype.hasOwnProperty,b=function(e){return n([e[0]],e.slice(1),!0)}},3052:(e,t,r)=>{r.d(t,{Df:()=>i,Eq:()=>n});var n={equals:function(e,t){return e===t}},i={equals:n.equals,compare:function(e,t){return e<t?-1:e>t?1:0}};n.equals,i.compare},229:(e,t,r)=>{r.d(t,{Df:()=>i,Eq:()=>n,pn:()=>o,xb:()=>a});var n={equals:function(e,t){return e===t}},i={equals:n.equals,compare:function(e,t){return e<t?-1:e>t?1:0}},a=function(e){return 0===e.length},o=function(e,t){return function(r){return r.endsWith(e,t)}}},2377:(e,t,r)=>{r.r(t),r.d(t,{CleanRoomAddon:()=>o,load:()=>a});var n=r(50);const i="clean_room",a=e=>{(0,n.Hn)(i)("auto_init",!1)&&e.q.push({functionName:"addon",arguments:[i,{}]})};class o{constructor(){}}},1876:(e,t,r)=>{r.d(t,{GL:()=>s,HJ:()=>c,N1:()=>d,NC:()=>n,RP:()=>i,SF:()=>f,UM:()=>u,ho:()=>p,iE:()=>g,t_:()=>l});const n=performance.now(),i=(new Date).getTime();let a=[],o=!1;const s=e=>function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return c((()=>e(...r)))},c=(e,t)=>{if(!o){const r=self.setTimeout(e,t);return()=>self.clearTimeout(r)}let r;const n=()=>{void 0!==r&&o&&a.length<1e4&&a.push([r,performance.now()]),r=void 0},i=[self.setTimeout((()=>{r=performance.now(),self.requestAnimationFrame(n),e()}),t),self.setTimeout(n,t)];return()=>{void 0===r&&i.forEach((e=>self.clearTimeout(e)))}},u=(e,t)=>{if(!o){const r=self.setInterval(e,t);return()=>self.clearInterval(r)}let r=!1,n=()=>{};const i=self.setInterval((()=>{n=c((()=>{r||e()}))}),t);return()=>{r=!0,n(),self.clearInterval(i)}},l=e=>new Promise(((t,r)=>e.then(s(t),s(r)))),d=e=>()=>l(e()),f=e=>{const t=d(e);return()=>new Promise((e=>c((()=>e(t())))))},g=()=>{const e=a;return a=[],e},p=e=>{o=e}},3567:(e,t,r)=>{r.d(t,{ap:()=>y,a9:()=>_,Ue:()=>p,gS:()=>m,D8:()=>D,VS:()=>w,xH:()=>I,En:()=>h,p4:()=>z,fF:()=>G,UI:()=>b,u4:()=>S,Rp:()=>k,vP:()=>E,bw:()=>C,yY:()=>U,YP:()=>v});var n=r(5654),i=r(7144),a=r(2169),o=r(8236),s=r(7812),c=r(1822);function u(e){let t=e,r=[],n=!1;return{addListener(e){if(n)return()=>{};let i=t;const a=()=>{Object.is(t,i)||(i=t,e(t))};r=[...r,a];return()=>{r=r.filter((e=>e!==a))}},notify(e){if(n)throw new Error("Ref bug: Attempted to notify a terminated notifier");Object.is(e,t)||(t=e,r.forEach((e=>e())))},terminate(){n=!0,r=[]}}}function l(e,t){let r=0;return function(){try{if(r++>0)throw new Error(e);return t(...arguments)}finally{r--}}}function d(e,t){let r=[...new Set(e)].filter((e=>"final"!==e.state));if(0===r.length)return{state:"final",onStateChange:()=>()=>{}};const n=()=>0===r.length?"final":r.some((e=>"might_change"===e.state))?"might_change":"nominal",[i,a]=f(n(),(e=>"might_change"!==e&&t())),o=()=>a(n());return r.forEach((t=>{t.onStateChange((t=>{switch(t){case"final":r=e.filter((e=>"final"!==e.state)),o();break;case"might_change":a("might_change");break;case"nominal":o();break;default:throw new Error(`Ref bug: Invalid state ${t}`)}}))})),i}function f(e,t){if("final"===e)return[{state:"final",onStateChange:()=>()=>{}},()=>{}];const{terminate:r,notify:n,addListener:i}=u(e),a={state:e,onStateChange:i},o=l("Disallowed recursion in Branch.",(e=>{if("final"===a.state){if("final"===e)return;throw new Error(`Attempted to change state of final branch to ${e}.`)}try{t?.(e),a.state=e,n(e)}finally{"final"===e&&r()}}));return[a,o]}var g=r(4694);function p(e){const[t,r,n]=function(){const[e,t]=f("nominal"),r=l("Disallowed recursion in Branch.",(r=>{if("final"===e.state)throw new Error("Attempted to mutate a finalized Ref.");const n=e.state;try{t("might_change"),r()}finally{t(n)}}));return[e,r,()=>t("final")]}(),[i,a]=x(t,e);return[i,e=>r((()=>a(e))),n]}function m(e){let t=e.empty;const r=()=>()=>{const r=t;return t=e.empty,r},[n,i,a]=p(r());return[n,n=>{t=e.concat(t,n),i(r())},a]}function h(e,t){return r=>{let n=new Array(e).fill(t.empty);return new Array(e).fill(null).map(((e,i)=>(0,a.zG)(r,b(g.UI((e=>{const r=t.concat(n[i],e);return n=n.map(((r,n)=>n===i?t.empty:t.concat(r,e))),r}))))))}}function _(e){return{get current(){return e},onChange:()=>()=>{},branch:{state:"final",onStateChange:()=>()=>{}}}}function v(e){return t=>{const r=t.onChange(e);return e(t.current),r}}function b(e,t){if(t){const[r,n]=x(t.branch,e(t.current));return t.onChange((t=>n(e(t)))),r}return t=>b(e,t)}const y=e=>w((t=>b(t)(e)));function w(e,t){return t?I(b(e,t)):t=>I(b(e,t))}function I(e){if("final"===e.branch.state)return e.current;const[t,r]=function(e,t){let r=t;const n=[e.state,r.state].includes("might_change")?"might_change":"nominal",[i,a]=f(n),o=e=>t=>{switch(t){case"final":a(e().state);break;case"might_change":a("might_change");break;case"nominal":"might_change"===e().state?a("might_change"):a("nominal");break;default:throw new Error(`Ref bug: Unexpected upstream state ${t}`)}};e.onStateChange(o((()=>r)));const s=o((()=>e));let c=r.onStateChange(s);return[i,e=>{r=e,c(),c=e.onStateChange(s),s(r.state)}]}(e.branch,e.current.branch),[n,i]=x(t,e.current.current);let a=e.current.onChange(i);return e.onChange((e=>{a(),a=e.onChange(i),r(e.branch),i(e.current)})),n}function S(e){return t=>{if("final"===t.branch.state)return t;let r=o.YP;return b((t=>{if(o.Wi(r))return r=o.G(t),t;const n=e(r.value,t);return r=o.G(n),n}),t)}}function k(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>{if(2===t.length){let r=t[0];return b((e=>(r=t[1](r,e),r)),e)}let r=o.bM();return b((e=>{const n=t[0](r,e);return r=o.G(n),n}),e)}}function E(){if(0===arguments.length||O(arguments.length<=0?void 0:arguments[0]))return P(...arguments);const e=arguments.length<=0?void 0:arguments[0],t=Object.keys(e);return(0,a.zG)(Object.values(e),(e=>P(...e)),b((0,a.ls)(s.Su(((e,r)=>[t[e],r])),Object.fromEntries)))}function P(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)return _([]);if(1===t.length)return b((e=>[e]))(t[0]);let n=!1;t.forEach((e=>e.onChange((()=>{if("might_change"!==e.branch.state)throw new Error("Ref bug: Received a change notification without a `might_change` state.");n=!0}))));const i=t.map((0,c.vg)("branch")),a=()=>{n&&(n=!1,u(t.map((e=>e.current))))},o=d(i,a),[s,u]=x(o,t.map((e=>e.current)));return s}function G(e){const[t,r,n]=p(o.YP);return e().then((0,a.ls)(o.G,r,n)),t}const U=e=>()=>o.pC(e.current)?Promise.resolve(e.current.value):new Promise((t=>{const r=(0,a.zG)(e,v(o.UI((e=>{r(),t(e)}))))}));function z(e){const[t,r,s]=p(o.YP);return e.then(i.F2).catch((0,a.ls)(n.w,i.t$)).then((0,a.ls)(o.G,r,s)),t}function D(e){const t=e.hasOwnProperty("equals")?e.equals:e;return S(((e,r)=>t(e,r)?e:r))}function C(e){return t=>(v(e)(t),t)}function x(e,t){if("final"===e.state)return[_(t),()=>{}];const r=u(t);e.onStateChange((e=>{"final"===e&&r.terminate()}));let n=t;return[{get current(){return n},onChange:r.addListener,branch:e},l("Disallowed recursion in Ref.",(e=>{n=e,r.notify(n)}))]}function O(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)&&"function"==typeof e.onChange}},6805:(e,t,r)=>{r.d(t,{Hr:()=>p,K4:()=>s,UI:()=>l,ak:()=>g,bw:()=>d,dQ:()=>c,of:()=>u,vP:()=>f});var n=r(3567),i=r(2169),a=r(1822),o=r(6450);const s=e=>(0,i.ls)((t=>{let{previousState:r,...n}=t;return e(n)}),(e=>({value:e,state:n.a9(void 0)}))),c=i.yR,u=(0,i.ls)(i.a9,s),l=e=>t=>(0,i.ls)(t,(0,a.rO)({value:e})),d=e=>t=>(0,i.ls)(t,(0,a.rO)({value:(0,a.bw)(e)}));function f(e){return t=>{let{previousState:r,...a}=t;const s=h(r)?r:{},c=(0,i.zG)(e,o.Su(((e,t)=>t({previousState:s[e],...a}))));return{value:(0,i.zG)(c,o.UI((e=>e.value))),state:(0,i.zG)(c,o.UI((e=>e.state)),(e=>n.vP(e)))}}}function g(e,t){return r=>(0,i.ls)((0,a.rO)({previousState:m}),(a=>{const o=r(a),s=t(o.value)({...a,previousState:a.previousState[e]});return{value:(0,i.zG)([o.value,s.value],(t=>{let[r,n]=t;if(!h(r))throw new Error("Service.bind() was passed an upstream Service with a non-record value.");return{...r,[e]:n}})),state:(0,i.zG)(n.vP(o.state,s.state),n.UI((t=>{let[r,n]=t;if(void 0===r)return{[e]:n};if(!h(r))throw new Error("Service.bind() was passed an upstream Service with a non-record state.");return{...r,[e]:n}})))}}))}const p=(e,t)=>l((r=>({...r,[e]:t(r)})));function m(e){return h(e)?e:{}}function h(e){return"object"==typeof e&&null!==e}},6942:(e,t,r)=>{r(8493)},7536:(e,t,r)=>{r.d(t,{lg:()=>m,Bt:()=>_});var n=r(9912),i=r(2169),a=r(8236),o=r(229),s=r(1822);var c=r(7144);class u{userId;network;api;logger;tcf;constructor(e,t,r,n,i){this.userId=e,this.network=t,this.api=r,this.logger=n,this.tcf=i}tag="appnexus";ttlInSeconds=86400;usedForThirdPartyData=!0;invalidAliases=["","0","-1"];logPrefix="identities[appnexus]:";async getId(){if((0,s.G6)(navigator.userAgent))return this.logger.debug(this.logPrefix,"skipped for Safari"),{type:"skipped"};const e=await this.tcf.getStatusOrAbortOnTimeout(2e3),t=(0,i.zG)(this.getGDPRParams(e),c.fS((()=>"")),(e=>`https://ib.adnxs.com/getuidj${e.length>0?`?${e}`:""}`));try{this.logger.debug(this.logPrefix,"start HTTP request");const e=await this.api.appnexus(t);return this.logger.debug(this.logPrefix,"end HTTP request"),{type:"attempted",result:(0,i.zG)(a.Y3((()=>e.uid)),a.tS(a.ij),a.hX((e=>this.isValidAlias(e))))}}catch(e){return this.logger.warn(this.logPrefix,"Failed to fetch id",e),{type:"attempted",result:a.YP}}}getGDPRParams(e){return c.Y3((()=>{if("missing"===e.type||"loaded"===e.type&&!e.data.gdprApplies)return"gdpr=0";return`gdpr=1&gdpr_consent=${"loaded"===e.type?e.data.tcString:""}`}),(e=>`Failed to retrieve GDPR query params. Got ${e}`))}reset(){return Promise.resolve()}isValidAlias(e){return!!e&&-1===this.invalidAliases.indexOf(e)}}class l{config;network;api;userId;logger;url;resetUrl;constructor(e,t,r,n,i){this.config=e,this.network=t,this.api=r,this.userId=n,this.logger=i,this.url=`https://4b91477e-f67b-4d81-86db-a9742bd41e9c.${this.config.pxidHost}/${this.config.apiVersion}/pxid`,this.resetUrl=this.url+"/reset"}tag="pxid";ttlInSeconds=86400;usedForThirdPartyData=!1;getId(){return this.logger.debug("identities[pxid]: start HTTP request"),(0,s.G6)(navigator.userAgent)?Promise.resolve({type:"skipped"}):this.api.pxid(this.url).then((e=>(this.logger.debug("identities[pxid]: end HTTP request"),{type:"attempted",result:(0,a.ij)(e.uid)})),(e=>({type:"attempted",result:a.YP})))}reset(){return(0,s.G6)(navigator.userAgent)?Promise.resolve():this.api.pxidReset(this.resetUrl)}}var d=r(3567),f=r(6450),g=r(5086);const p=g.ff((e=>void 0===e));class m{metrics;trace;permutiveData;identityProviderEnv;logger;ref;setReady;thirdParty;rawRef;identityMapRef;setIdentityMap;providers={};static emailSHA256Regex=/^[a-f0-9]{64}$/;constructor(e,t,r,n,c){this.metrics=e,this.trace=t,this.permutiveData=r,this.identityProviderEnv=n,this.logger=c;const u=this.getCachedIdentitiesAndMigrateIfRequired(),[l,g]=d.Ue(u);this.identityMapRef=l,this.setIdentityMap=g,l.onChange((0,i.ls)(f.z7((e=>!h.has(e))),(0,s.bw)((e=>{this.logger.debug("[identities] Persisting",e),this.permutiveData.setData("identities",e)})))),this.rawRef=(0,i.zG)(l,d.UI((0,i.ls)(f.UI((e=>e.value)),f.hX(p))),d.D8(f.Eh(o.Eq)));const[m,_]=d.Ue(!1);this.ref=(0,i.zG)(d.vP(m,this.rawRef),d.UI((e=>{let[t,r]=e;return(0,i.zG)(r,(0,a.DT)((()=>t)))}))),this.setReady=()=>{e.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"identity_ready",time_origin:"sdk_init"}),_(!0)},this.thirdParty=this.prepareThirdPartyIdentities()}get identities(){return this.identityMapRef.current}prepareThirdPartyIdentities(){this.logger.debug("[Identities]","loading 3rd party identities");const e=this.metrics.startTimer("sdk_get_third_party_identities_task_duration_seconds",{}),t=this.trace.startSpan("load_tpd_ids"),r=[{load:e=>{return t=e.config,r=e.network,n=e.api,i=e.userId,o=e.logger,(0,a.G)(new l(t,r,n,i,o));var t,r,n,i,o}},{load:e=>{return t=e.userId,r=e.network,n=e.api,i=e.logger,o=e.tcf,a.G(new u(t,r,n,i,o));var t,r,n,i,o}},{load:e=>(e.cookies,e.messages,a.YP)},{load:e=>(e.cookies,a.YP)},{load:e=>(e.metrics,e.permutiveData,e.permutive,e.messages,a.YP)}],o=(0,n.oA)(r.map((e=>e.load(this.identityProviderEnv)))).map((e=>this.shouldAskForNewIdentity(e)?this.retrieveIdentity(e):Promise.resolve((0,i.bc)(e,this.getCachedTPDIdentity(e.tag)))));return Promise.all(o).then((e=>e.map((e=>{let[t,r]=e;return this.providers[t.tag]=t,this.mapTPDIdentityIfPresent(t.tag,r,t.ttlInSeconds)})))).then((e=>this.setIdentities(e))).then((0,s.bw)((()=>{this.metrics.stopTimer("sdk_get_third_party_identities_task_duration_seconds",e),t.finish()})))}getPrioritizedIdentities(e){const t={default:0,pxid:1,appnexus:1},r=Object.entries(e).map((e=>{let[t,{id:r,expiry:n,priority:i}]=e;return{tag:t,...r?{id:r}:{},...n?{expiry:n}:{},...void 0!==i?{priority:i}:{}}})),i=r.filter((e=>((e,t)=>!!e.id&&!(0,n.t9)(o.Eq)(e.tag,t))(e,Object.values(this.providers).map((e=>e.tag))))),s=r.filter((e=>((e,t)=>!!e.id&&!!(0,n.t9)(o.Eq)(e.tag,t))(e,Object.values(this.providers).map((e=>e.tag))))),c=(0,n.DZ)((e=>(0,a.ij)(e.priority)))(i),u=c.length>0?Math.max(...c):0,l=i.map((e=>void 0!==e.priority?{...e,priority:e.priority}:{...e,priority:u+1})),d=s.map((e=>void 0===t[e.tag]?{tag:e.tag,id:e.id,priority:u+v}:{tag:e.tag,id:e.id,priority:u+b}));return l.concat(d)}getIdentitiesMap(){return this.getFilteredIdentities(((e,t)=>!!t.value))}parseCustomerDefinedIdentities(e){const t=`Identify must be passed a non-empty string or list of { tag, id, priority? } tuples, value passed was '${JSON.stringify(e)}'`,r=e=>"string"==typeof e.id&&"string"==typeof e.tag,a=e=>"email_sha256"!==e.tag||m.emailSHA256Regex.test(e.id);return"string"==typeof e?(s=e).length>0?{left:[],right:[{id:s,tag:"default"}]}:{left:[t],right:[]}:Array.isArray(e)?(o=e,(0,i.zG)(o,n.tV((0,i.ls)(c.DT(r,(()=>t)),c.Y$(a,(()=>"Identify called with unsupported format of email_sha256 ID. The support format is hex-encoded 64 character long lowercase string.")))))):{left:[t],right:[]};var o,s}extractIdentifyFromQueue(e){let{global:t}=e;const r=()=>t.q.findIndex((e=>"identify"===e.functionName)),n=(e,i)=>{if(e<0)return i;const a=t.q.splice(e,1)[0],o=this.parseCustomerDefinedIdentities(a.arguments[0]);return n(r(),{left:i.left.concat(o.left),right:i.right.concat(o.right)})},{left:i,right:a}=n(r(),{left:[],right:[]});return i.forEach((e=>this.logger.warn("Invalid identity provided during init",e))),a}setIdentities(e){const t=e.reduce(((e,t)=>{let{tag:r,id:n,expiry:i,priority:a}=t;return void 0===this.identities[r]&&this.logger.debug(`identities[${r}]: added`),e[r]={...n?{value:n}:{},...i?{expiry:i}:{},...void 0!==a?{priority:a}:{}},e}),{}),r=this.rawRef.current;this.setIdentityMap({...this.identities,...t});const n=this.rawRef.current;return{identifyRequestRequired:()=>!f.xb(n)&&!f.Eh(o.Eq).equals(r,n)}}async reset(){this.setIdentityMap({}),await Promise.all(Object.values(this.providers).map((e=>e.reset())))}getFilteredIdentities(e){return(0,s.m8)(...Object.entries(this.identities).filter((t=>{let[r,n]=t;return e(r,n)})).map((e=>{let[t,{value:r,expiry:n,priority:a}]=e;return(0,i.bc)(t,{id:r,...n?{expiry:n}:{},...void 0!==a?{priority:a}:{}})})))}shouldAskForNewIdentity(e){const t=(0,a.ij)(this.identities?.[e.tag]);return(0,a.g_)((()=>!0),this.isIdentityExpired)(t)}getCachedTPDIdentity(e){return this.identities[e]?(0,a.ij)(this.identities[e].value):a.YP}mapTPDIdentityIfPresent(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:86400;const n=()=>Date.now()+Math.floor(1e3*r);return(0,a.g_)((()=>({tag:e,expiry:n()})),(t=>({tag:e,id:t,expiry:n()})))(t)}retrieveIdentity(e){return e.getId().then((t=>"skipped"===t.type?(0,i.bc)(e,a.YP):(0,i.zG)(t.result,(t=>this.metrics.track({name:(0,a.pC)(t)?"sdk_third_party_identity_present_count":"sdk_third_party_identity_missing_count",value:1,labels:{identity_tag:e.tag}})),(r=>(0,i.bc)(e,t.result)))))}isIdentityExpired(e){return"number"==typeof e.expiry&&Date.now()>=e.expiry}getCachedIdentitiesAndMigrateIfRequired(){return(e=>(0,s.m8)(...Object.entries(e).filter((e=>{let[t,r]=e;return!this.isIdentityExpired(r)&&!h.has(t)}))))(this.permutiveData.getData("identities")||{})}}const h=new Set(["public","email","email_md5","ip_address"]),_=(e,t,r,i,a)=>{const s=(e,t)=>{const r=["(null)"];return r.indexOf(e)>-1||!!w[e]||(0,n.jV)(o.Eq)(t,r).length>0},c=e=>"721d6d85-35f0-4e35-bb38-13eb0d465158"===e,u={"be668577-07f5-444d-98e0-222b990951b1":s,"e43c8a90-d17b-4790-bfda-81b069b3b8c2":(e,t,r)=>["thestudentroom.co.uk"].some((e=>r.indexOf(e)>-1))&&(0,n.jV)(o.Eq)(t,["tsr-"]).length>0,"5d79bce7-5d2b-427e-a6c4-b89b6c7bf048":s,"366ab8da-5efa-4355-ab00-84db3b68ded2":e=>"96539955-4d7e-40df-882b-7e2fbacedb1c"===e||"345600e7-fb5f-48b1-9aa6-cde5396419b0"===e,"f3a06674-ebb9-4b9d-ba8f-0052018c0687":c,"38dadd0d-257a-4641-b332-b8b0fd20a6cb":c,"10453011-272d-49cd-9043-1964fdb36fd8":e=>"936ba6ac-9a8b-454d-ba98-facebd7553fe"===e},l={"fe68d1f7-c9f4-45b3-8905-7cda73d3fd74":e=>!!y[e]},d=u[e]||l[t];return!!d&&d(a,r,i)},v=2,b=3,y={},w={}},8923:(e,t,r)=>{r.d(t,{z:()=>n});class n{ingestIfEligible(e){return Promise.resolve()}}},295:(e,t,r)=>{r.d(t,{u6:()=>a});var n=r(6805);r(3567),r(1822);const i={prebid:{onReady:()=>({})}},a=e=>n.of(i)},9800:(e,t,r)=>{r.d(t,{CL:()=>s,EW:()=>c,PH:()=>o,eV:()=>i,jH:()=>u,t2:()=>a});var n=r(50);const i=(0,n.MU)("track_form_submission",!0),a=((0,n.MU)("track_pageview_complete",!0),(0,n.MU)("track_pageview_engagement",!0)),o=((0,n.$S)("sync_segments_cookie",!1),(0,n.$S)("track_slot_clicked",!0)),s=(0,n.$S)("track_slot_rendered",!0),c=(0,n.$S)("track_slot_viewable",!1),u=(0,n.$S)("track_targeting_keys",!1)},4836:(e,t,r)=>{r.d(t,{v:()=>o});class n{logger;permutive;id;segmentCode;triggerType;config;workspaceLevelConfig;prefix="[Activation]";constructor(e,t,r,n,i,a,o){this.logger=e,this.permutive=t,this.id=r,this.segmentCode=n,this.triggerType=i,this.config=a,this.workspaceLevelConfig=o}getSegmentCode(){return this.segmentCode}getTriggerType(){return this.triggerType}getConfig(){return this.config}getWorkspaceLevelConfig(){return this.workspaceLevelConfig}trackImpression(e){return this.trackActivation("impression",e)}trackConversion(e){return this.trackActivation("conversion",e)}trackActivation(e,t){const r={reaction_id:this.id,type:e};this.permutive.track("Reaction",r,t),this.logger.log(this.prefix,r.type,r)}}var i=r(50);const a={dfp:{dfp:[192971,201901,201910,202140,211186,223407,223408,223410,223415,223418,223419,223422,223427,223426,223424,223421,223430,223431,223432,223433,223477,223478,223479,223480,223482,223483,223484,223485,223486,223487,223488,224414,224387,224343,224299,224229,224218,224206,224196,224185,224173,223900,223915,223924,223937,223968,223984,224019,224021,224035,223732,227114,227748,227756,227765,227771,227775,227777,228024,228091,228169,224439,223880,223779,223859,223861,223896,224033,224118,228283,228284,228288,228325,223774,223850,223860,223862,223892,224107,224149,224159,224163,202336,202335,202334,202279,202281,202280,202332,202330,202327,202282,202326,202333,202331,202325,202329,202328,224082,224214,224086,224315,224430,224079,224080,224083,224087,224089,224085,224081,224084,224090,224088,224091,224132,224094,224134,224112,224098,224093,224100,224096,224106,224101,224102,224126,224104,224103,224109,224095,224105,224168,224092,224097,224099,224119,224140,224117,224114,224120,224164,224121,224122,224127,224142,224123,224170,224137,224108,224139,224136,224111,224115,224124,224157,224110,224113,224131,224148,224130,224133,224166,224125,224135,224116,224228,224146,224147,224129,224141,224155,224150,224156,224128,224158,224154,224161,224171,224160,224176,224167,224162,224239,224138,224145,224144,224152,224202,224189,224193,224191,224244,224247,224252,224234,224276,224273,224271,224272,224326,224310,224143,224153,224151,224169,224172,224178,224209,224204,224213,224230,224201,224220,224231,224259,224253,224216,224227,224165,224175,224174,224182,224179,224177,224195,224187,224186,224180,224199,224190,224181,224192,224184,224205,224240,224183,224400,224405,223744,223837,223838,223836,223894,223860,223896,223898,223911,223913,223908,223926,223933,223929,224198,224203,224200,224194,224235,224208,224188,224219,224223,224215,224212,224222,224225,224197,224238,224207,224224,224217,224210,224211,224236,224242,224221,224251,224255,224257,224243,224233,224245,224226,224241,224249,224256,224237,224258,224250,224232,224254,224246,224248,224261,224263,224262,224265,224268,224270,224277,224280,224285,224281,224283,224286,224287,224260,224264,224267,224269,224266,224274,224278,224275,224282,224279,224284,224289,224295,224290,224298,224302,224296,224323,224288,224293,224294,224291,224300,224292,224304,224303,224301,224305,224309,224321,224325,224322,224327,224320,224329,224307,224306,224313,224308,224311,224316,224317,224319,224318,224331,224328,224335,224337,224339,224338,224341,224312,224314,224324,224358,224362,224365,224372,224383,224386,224393,224409,224408,224406,224412,224416,223737,224333,224330,224332,224334,224336,224340,224344,224346,224349,224342,224348,224368,224354,224347,224351,224345,224350,224353,224352,224360,224363,224367,224366,224373,224378,224375,224374,224385,224388,224389,224394,224356,224355,224357,224359,224361,224364,224370,224369,224371,224376,224382,224377,224379,224381,224380,224384,224391,224392,224390,224395,224397,224396,224399,224401,224403,224404,224398,224402,224425,224407,224411,224410,224413,224417,224418,224431,224429,224434,224439,223733,223743,223749,223750,223755,223763,223758,223769,223768,223770,224415,224423,224422,224419,224427,224421,224420,224424,224428,224433,224435,224426,224436,224437,224438,223735,223736,223738,223740,223739,223741,223742,223760,223746,223748,223752,223747,223751,223753,223754,223759,223765,223757,223745,223772,223784,223771,223786,223858,223859,223863,223865,223991,224022,224043,224057,223756,223762,223761,223766,223767,223764,223775,223776,223781,223777,223783,223782,223787,223791,223798,223790,223778,223773,223780,223789,223788,223793,223800,223802,223806,223814,223809,223815,223813,223827,223835,223819,223796,223795,223797,223794,223799,223801,223803,223804,223805,223811,223808,223810,223822,223812,223820,223823,223919,223830,223834,223818,223821,223816,223829,223828,223833,223832,223824,223845,223841,223842,223840,223844,223825,223831,223826,223839,223843,223846,223877,223852,223851,223849,223855,223861,223866,223864,223870,223873,223876,223848,223847,223853,223856,223857,223867,223868,223869,223872,223871,223881,223875,223890,223879,223885,223888,223882,223874,223878,223886,223887,223889,223891,223897,223904,223903,223917,223957,223930,223942,223972,223977,223970,223932,223931,223884,223895,223883,223893,223901,223899,223906,223907,223905,223910,223914,223912,223916,223956,223946,223965,223920,223969,223938,223944,223922,223939,223918,223978,223936,223941,223950,223959,223952,223980,223987,223955,223960,223958,223988,223927,223928,223934,223921,223943,223940,223945,223976,223947,223973,223951,223997,223948,223967,223964,223954,223971,223961,223935,223925,223923,224026,224029,224037,224050,224049,224051,224055,224052,224061,224059,224067,223862,224387,223963,223981,223962,223979,223986,224003,223975,223992,224e3,223990,223985,223993,223989,223995,224007,224010,223983,223966,223998,223982,224013,224012,224017,223996,224002,223999,224009,224015,224018,224030,224024,224025,224020,224005,224006,224008,223994,224016,224001,224004,224014,224011,224023,224028,224031,224027,224046,224038,224033,224032,224041,224036,224045,224047,223807,224042,224044,224058,224068,224062,224063,224074,224054,224069,224060,224034,224039,223937,224218,224040,224053,224056,224064,224070,224066,223854,224078,223974,223902,223924,224021,224075,224073,224076,223915,223817,223968,223785,223792,223909,224071,224019,224048,223984,224414,224035,224299,224206,224185,223892,223953,224118,224173,223732,224159,224163,223850,223774,223880,224107,223779,224149,224343,224196,224229,224077,224072,230350,230352,230353,230355,230357,230356,230386,230387,230893,231568,231573,231575,231616,231615,231485,202304,202305,202307,211185,202309,202286,202288,202289,202290,211184,202311,202286,202287,202306,202291,202292,202293,202308,231734,231735,231736,231737,231738,231739,231740,231741,231743,231744,231745,231746,231747,231748,231749,231750,231751,231752,231753,231754,231755,231756,231757,231758,231759,231760,231761,231762,231763,231764,231765,231766,231767,231768,231769,231772,231980,232803,232334,233814,233938,233937,233932,233934,233935,233936,234208,234209,234649,234650,234652,234823,234824,234827,234826,234832,234837,234838,235158,236872,238938,239060,239488,239491,239917,239918,239920,239922,239927,239929,239951,240040,240048,240260,240261,240347,240348,240349,240350,240351,240352,240353,240354,240358,240359,240360,240361,240362,240363,240364,240365,240366,240367,240368,240369,240370,240371,240372,240373,240550,240741,240744,240746,240748,240769,240770,239441,239442,239443,239444,239445,239446,241366,241365,241364,241363,241522,241718,241767,241768,241792,241793,241802,241936,242075,242077,242383,242478,242479,242994,242993,243126,243087,243392,243542,243543,243493,243871,243872,243873,243874,243759,243976,243974,243975,243977,243978,244387,244891,246101,246110,246100,244914,246099,246825,246820,246821,246822,246823,246830,246832],dfp_legacy:{}},eyeota_pixel:[],dbm:{omitted:2},appnexus:{202279:40132466,202280:40132467,202281:40132464,202282:40132463,202286:40146823,202325:40132465,202326:40132462,202327:40132461,202328:40132460,202329:40132459,202330:40132458,202331:40132457,202332:40132456,202333:40132434,202334:40132435,202335:40132436,202336:40132437,211184:40146763,211186:40146764,223407:40132100,223408:40132364,223410:40132365,223415:40132366,223418:40131273,223419:40132367,223421:40132368,223422:40132369,223424:40132370,223426:40132371,223427:40132372,223430:40132342,223431:40132343,223432:40132344,223433:40132345,223477:40132348,223478:40132349,223479:40132350,223480:40132351,223482:40132352,223483:40132353,223484:40132354,223485:40132355,223486:40132357,223487:40132358,223488:40132359,223732:40146762,223733:40146761,223735:40146760,223736:40146759,223737:40146758,223738:40146757,223739:40146756,223740:40146755,223741:40146753,223742:40146754,223743:40146751,223744:40146752,223745:40146661,223746:40146662,223747:40146659,223748:40146658,223749:40146656,223750:40146657,223751:40146660,223752:40146654,223753:40146655,223754:40146652,223755:40146651,223756:40146653,223757:40146650,223758:40146649,223759:40146648,223760:40146647,223761:40146646,223762:40146645,223763:40146643,223764:40146644,223765:40146639,223766:40146637,223767:40146642,223768:40146636,223769:40146634,223770:40146641,223771:40146640,223772:40146638,223773:40146629,223774:40146635,223775:40146631,223776:40146630,223777:40146628,223778:40146626,223779:40146633,223780:40146632,223781:40146624,223782:40146623,223783:40146620,223784:40146622,223785:40146627,223786:40146625,223787:40146619,223788:40146618,223789:40146621,223790:40146616,223791:40146617,223792:40146615,223793:40146613,223794:40146612,223795:40146614,223796:40146611,223797:40146609,223798:40146610,223799:40146608,223800:40146607,223801:40146606,223802:40146605,223803:40146604,223804:40146603,223805:40146600,223806:40146596,223807:40146601,223808:40146597,223809:40146599,223810:40146594,223811:40146595,223812:40146593,223813:40146592,223814:40146591,223815:40146590,223816:40146589,223817:40146587,223818:40146585,223819:40146588,223820:40146582,223821:40146572,223822:40146573,223823:40146581,223824:40146577,223825:40146571,223826:40146570,223827:40146569,223828:40146568,223829:40146567,223830:40146566,223831:40146565,223832:40146560,223833:40146563,223834:40146562,223835:40146559,223836:40146558,223837:40146557,223838:40146556,223839:40146555,223840:40146553,223841:40146551,223842:40146554,223843:40146552,223844:40146550,223845:40146545,223846:40146544,223847:40146543,223848:40146541,223849:40146540,223850:40146542,223851:40146537,223852:40146536,223853:40146538,223854:40146539,223855:40146535,223856:40146534,223857:40146533,223858:40146532,223859:40146531,223860:40146527,223861:40146529,223862:40146530,223863:40146528,223864:40146523,223865:40146524,223866:40146525,223867:40146521,223868:40146522,223869:40146520,223870:40146518,223871:40146519,223872:40146516,223873:40146517,223874:40146515,223875:40146514,223876:40146513,223877:40146510,223878:40146512,223879:40146511,223880:40146508,223881:40146509,223882:40146461,223883:40146460,223884:40146459,223885:40146456,223886:40146457,223887:40146452,223888:40146454,223889:40146455,223890:40146448,223891:40146450,223892:40146451,223893:40146447,223894:40146449,223895:40146446,223896:40146444,223897:40146443,223898:40146445,223899:40146442,223900:40146441,223901:40146440,223902:40146439,223903:40146438,223904:40146437,223905:40146436,223906:40146434,223907:40146435,223908:40146431,223909:40146433,223910:40146429,223911:40146428,223912:40146430,223913:40146426,223914:40146425,223915:40146424,223916:40146423,223917:40146421,223918:40146422,223919:40146420,223920:40146419,223921:40146418,223922:40146417,223923:40146416,223924:40146414,223925:40146412,223926:40146410,223927:40146415,223928:40146409,223929:40146413,223930:40146411,223931:40146408,223932:40146405,223933:40146401,223934:40146407,223935:40146400,223936:40146394,223937:40146395,223938:40146392,223939:40146393,223940:40146391,223941:40146386,223942:40146363,223943:40146362,223944:40146361,223945:40146351,223946:40146349,223947:40146350,223948:40146347,223950:40146348,223951:40146345,223952:40146344,223953:40146346,223954:40146342,223955:40146343,223956:40146341,223957:40146339,223958:40146338,223959:40146340,223960:40146337,223961:40146336,223962:40146335,223963:40146334,223964:40146333,223965:40146332,223966:40146331,223967:40146329,223968:40146328,223969:40146323,223970:40146313,223971:40146315,223972:40146309,223973:40146311,223974:40146305,223975:40146304,223976:40146306,223977:40146307,223978:40146302,223979:40146301,223980:40146300,223981:40146303,223982:40146299,223983:40146298,223984:40146297,223985:40146295,223986:40146233,223987:40146240,223988:40146239,223989:40146230,223990:40146234,223991:40146231,223992:40146227,223993:40146226,223994:40146225,223995:40146223,223996:40146228,223997:40146224,223998:40146229,223999:40146221,224e3:40146222,224001:40146215,224002:40146214,224003:40146213,224004:40146216,224005:40146207,224006:40146204,224007:40146205,224008:40146212,224009:40146200,224010:40146206,224011:40146196,224012:40146199,224013:40146188,224014:40146191,224015:40146183,224016:40146186,224017:40146181,224018:40146184,224019:40146180,224020:40146178,224021:40146179,224022:40146177,224023:40146173,224024:40146170,224025:40146169,224026:40146146,224027:40146148,224028:40146142,224029:40146140,224030:40146133,224031:40146127,224032:40146124,224033:40146132,224034:40146125,224035:40146139,224036:40146135,224037:40146136,224038:40146128,224039:40146126,224040:40146122,224041:40146123,224042:40146120,224043:40146121,224044:40146119,224045:40146117,224046:40145978,224047:40146118,224048:40145979,224049:40145981,224050:40145982,224051:40145983,224052:40145988,224053:40145987,224054:40145984,224055:40145985,224056:40145986,224057:40145990,224058:40145989,224059:40145991,224060:40146114,224061:40146113,224062:40146112,224063:40146042,224064:40146043,224066:40146110,224067:40146038,224068:40146039,224069:40146040,224070:40146036,224071:40146037,224072:40146033,224073:40146035,224074:40146034,224075:40146106,224076:40146105,224077:40146104,224078:40146029,224079:40146028,224080:40146031,224081:40146030,224082:40146027,224083:40146025,224084:40146023,224085:40146021,224086:40146022,224087:40146020,224088:40146019,224089:40146101,224090:40146100,224091:40146097,224092:40146099,224093:40146098,224094:40146096,224095:40146094,224096:40146095,224097:40146108,224098:40146001,224099:40146e3,224100:40145999,224101:40145998,224102:40145997,224103:40145995,224104:40145994,224105:40145993,224106:40145992,224107:40145752,224108:40145756,224109:40145750,224110:40145747,224111:40145749,224112:40145743,224113:40145742,224114:40145739,224115:40145738,224116:40145736,224117:40145731,224118:40145721,224119:40145724,224120:40145720,224121:40145719,224122:40145695,224123:40145692,224124:40145691,224125:40145687,224126:40145684,224127:40145614,224128:40145616,224129:40145611,224130:40145610,224131:40145609,224132:40145607,224133:40145599,224134:40145600,224135:40145591,224136:40145584,224137:40145592,224138:40145581,224139:40145575,224140:40145571,224141:40145570,224142:40145567,224143:40145566,224144:40145564,224145:40145551,224146:40145548,224147:40145544,224148:40145540,224149:40145525,224150:40145523,224151:40145519,224152:40145502,224153:40145493,224154:40145495,224155:40145487,224156:40145490,224157:40145481,224158:40145483,224159:40145476,224160:40145475,224161:40145473,224162:40145472,224164:40145471,224165:40145470,224166:40145469,224167:40145456,224168:40145457,224169:40145454,224170:40145453,224171:40145455,224172:40145452,224173:40145450,224174:40145448,224175:40145447,224176:40145449,224177:40145444,224178:40145446,224179:40145443,224180:40145442,224183:40145441,224184:40145440,224185:40145439,224186:40145438,224187:40145436,224188:40145435,224189:40145434,224190:40145432,224191:40145433,224192:40145430,224193:40145431,224194:40145428,224195:40145427,224196:40145429,224197:40145426,224198:40145424,224199:40145425,224200:40145422,224201:40145420,224202:40145419,224203:40145417,224204:40145418,224205:40145416,224206:40145415,224207:40145410,224208:40145409,224209:40145407,224210:40145408,224211:40145406,224212:40145403,224213:40145405,224214:40145402,224215:40145404,224216:40145399,224217:40145395,224218:40145396,224219:40145390,224220:40145385,224221:40145392,224222:40145388,224223:40145382,224224:40145381,224225:40145380,224226:40145379,224227:40145376,224228:40145377,224229:40145378,224230:40145374,224231:40145375,224232:40145372,224233:40145369,224234:40145368,224235:40145367,224236:40145364,224237:40145359,224238:40145351,224239:40145352,224240:40145350,224241:40145349,224242:40145348,224243:40145346,224244:40145347,224245:40145345,224246:40145344,224247:40145325,224248:40145326,224249:40145323,224250:40145324,224251:40145322,224252:40145321,224253:40145317,224254:40145320,224255:40145316,224256:40145318,224257:40145319,224258:40145315,224259:40145313,224260:40145309,224261:40145308,224262:40145307,224263:40145306,224264:40145301,224265:40145285,224266:40145282,224267:40145281,224268:40145280,224269:40145279,224270:40145278,224271:40145264,224272:40145263,224273:40145251,224274:40145245,224275:40145246,224276:40145244,224277:40145242,224278:40145243,224279:40145240,224280:40145239,224281:40145238,224282:40145237,224283:40145236,224284:40145235,224285:40132360,224286:40145234,224287:40145231,224288:40145230,224289:40145229,224290:40145228,224291:40145226,224292:40145227,224293:40145225,224294:40145224,224295:40145222,224296:40145220,224298:40145152,224299:40145153,224300:40145151,224301:40145150,224302:40145149,224303:40145148,224304:40145147,224305:40145145,224306:40145146,224307:40145144,224328:40145040,224329:40145042,224330:40145044,224331:40145045,224332:40145049,224333:40145047,224334:40145046,224335:40145051,224336:40145066,224337:40145068,224338:40145069,224339:40145071,224340:40145079,224341:40145078,224342:40145082,224343:40145083,224344:40145084,224345:40145085,224346:40145087,224347:40145088,224348:40145016,224349:40145015,224350:40145014,224351:40145013,224352:40145011,224353:40145009,224354:40145006,224355:40145007,224356:40145010,224357:40145004,224358:40145008,224359:40145e3,224360:40145005,224361:40144999,224362:40144996,224363:40144995,224364:40144990,224365:40144856,224366:40144854,224367:40144853,224368:40144852,224369:40144849,224370:40144850,224371:40144848,224372:40144846,224373:40144847,224374:40144844,224375:40144841,224376:40144843,224377:40144840,224378:40144839,224379:40144834,224380:40144837,224381:40144829,224382:40144830,224383:40144826,224384:40144823,224385:40144822,224386:40144820,224387:40144799,224388:40144755,224389:40144754,224390:40144753,224391:40144751,224392:40144745,224393:40144740,224394:40144738,224395:40144736,224397:40144723,224398:40144722,224399:40144718,224400:40144717,224401:40144542,224402:40144716,224403:40144651,224404:40144657,224405:40144653,224406:40144643,224407:40144640,224408:40144641,224409:40144639,224410:40144570,224411:40144478,224412:40144460,224413:40144462,224414:40144458,224415:40144455,224416:40144451,224417:40144453,224418:40144449,224419:40144448,224420:40144446,224421:40144445,224422:40144444,224423:40144441,224424:40144443,224425:40144440,224426:40144438,224427:40144437,224428:40144424,224429:40144422,224430:40144423,224431:40144421,224433:40144420,224434:40144418,224435:40132230,224436:40132229,224437:40132228,224438:40132227,224439:40132226,227114:40132439,227748:40132441,227756:40132442,227765:40132445,227771:40132443,227775:40132444,227777:40132446,228024:40132448,228091:40132447,228169:40132449,228283:40132451,228284:40132450,228288:40132452,228325:40132454,230350:40132273,230352:40132274,230353:40132275,230355:40132276,230356:40132277,230357:40132278,230386:40132279,230387:40132280,230893:40132453,231568:40132361,231573:40132362,231575:40132363,231615:40144338,231616:40144337,231734:40147193,231735:40147196,231736:40147285,231737:40147389,231738:40147461,231739:40147465,231740:40147467,231741:40147473,231743:40147483,231744:40147497,231745:40147502,231746:40147505,231747:40147514,231748:40147523,231749:40147533,231750:40147577,231751:40147597,231752:40147599,231753:40147603,231754:40147608,231755:40147611,231756:40147612,231757:40147718,231758:40147729,231759:40147743,231760:40147747,231761:40147751,231762:40147752,231763:40147753,231764:40147756,231765:40147758,231766:40147759,231767:40147760,231768:40147761,231769:40147762,231772:40148153,231980:40215994,232803:40243252,233814:40309208,233932:40309178,233934:40309189,233935:40309201,233936:40309202,233937:40309203,233938:40309166,234208:40320605,234209:40320609,234649:40356e3,234650:40356118,234652:40356201,234823:40362234,234824:40362255,234827:40362292,234832:40363847,235158:40405991,236872:40429438,238938:40617846,239060:40636936,239441:40807102,239442:40807103,239443:40807107,239444:40807108,239445:40807113,239446:40807126,239488:40672404,239491:40672420,239917:40683068,239918:40683098,239920:40683612,239922:40683713,239927:40683905,239929:40683995,239951:40684214,240040:40684789,240048:40685684,240261:40719321,240347:40730831,240348:40730832,240349:40730834,240350:40730836,240351:40730838,240352:40730840,240353:40730857,240354:40730860,240358:40731565,240359:40731569,240360:40731570,240361:40731620,240362:40731632,240363:40731648,240364:40731665,240365:40731669,240366:40731671,240367:40731672,240368:40731673,240369:40731676,240370:40731677,240371:40731684,240372:40731686,240373:40731688,240550:40742834,240741:40763488,240744:40763658,240746:40763926,240748:40764050,240769:40764761,240770:40764760,241363:40836317,241364:40836316,241365:40836315,241366:40836313,241522:40841612,241718:40859071,241767:40863805,241768:40863807,241792:40867803,241793:40867811,241802:40868206,241936:40882807,242075:40901735,242077:40901755,242478:40929629,242479:40929635,243493:41058278,243542:41049490,243543:41049498,243759:41083280,243871:41072580,243872:41072577,243873:41072611,243874:41072612,243974:41085966,243975:41085967,243976:41086017,243977:41086026,243978:41086027,244387:41118858,244891:41152712,246099:41229660,246101:41185916,246110:41189292,246820:41266007,246821:41266015,246822:41266034,246823:41266048,246825:41266055,246830:41267072,246832:41267542},appnexus_adserver:[],nativo:[],rubicon_ssp:[],smart:[],freewheel:[],adswizz_keyvalue:[],curation_platforms:{adv:["adv"]}};class o{logger;permutive;clientContext;constructor(e,t,r){this.logger=e,this.permutive=t,this.clientContext=r}getSpecializedActivations(e){return a[e]}getActivations(e){return(0,i.Hn)(e)("activationConfigs",[]).filter((e=>this.areContextCriteriaSatisfied(e))).map((e=>new n(this.logger,this.permutive,e.id,e.sc,e.tt,e.c,e.wc)))}areContextCriteriaSatisfied(e){const t=e.cc,r=e=>{const t=this.clientContext.getContext()[e.key];switch(e.comparison){case"EQUALS":return t===e.value;case"NOT_EQUALS":return t!==e.value;case"CONTAINS":return"string"==typeof t&&t.indexOf(e.value)>=0;case"NOT_CONTAINS":return"string"==typeof t&&t.indexOf(e.value)<0}};return!t||("AND"===(n=t).operator?n.criteria.every(r):n.criteria.some(r));var n}}},50:(e,t,r)=>{r.d(t,{$S:()=>o,Hn:()=>i,MU:()=>a});const n={tiktok_pixel:{auto_init:!0,activationConfigs:[]},contextual_data:{auto_init:!0,activationConfigs:[]},dbm:{auto_init:!0,entity_id:416687,product_type:"INVITE_PARTNER",activationConfigs:[]},curation_platforms:{auto_init:!0,prebid_ssp_codes:["pubmatic","appnexus","ix","openx"],activationConfigs:[]},local_storage:{auto_init:!0,activationConfigs:[]},appnexus:{auto_init:!0,member_id:7739,activationConfigs:[]},clean_room:{auto_init:!0,cohort_ssp_config:[],activationConfigs:[]},prebid:{auto_init:!0,revenue_insights_enabled:!0,data_provider_config:{ac_bidders:[]},activationConfigs:[]},web:{auto_init:!1,track_pageview_engagement:!0,track_form_submission:!1,track_link_click:!0,track_pageview_complete:!0,add_alchemy_taxonomy:!1,add_alchemy_entities:!1,engagement_edge_only:!0,segment_transition_edge_only:!0,activationConfigs:[]},dfp:{auto_init:!0,track_slot_rendered:!1,track_slot_viewable:!0,track_slot_clicked:!0,activationConfigs:[]},privacy_sandbox_topics:{auto_init:!0,prebid:!0,topics_iframe_url:"https://cdn.permutive.app/topics.html",activationConfigs:[]}},i=e=>{const t=n[e];return(e,r)=>t?.[e]??r},a=i("web"),o=i("dfp");i("facebook_pixel_v2")},2223:(e,t,r)=>{r.d(t,{J:()=>c});var n=r(2169),i=r(8236),a=r(9955);const o=e=>t=>class extends t{key=(()=>e)();put(e){return this.db.then((t=>t.put(e,this.key))).then(n.Q1)}getIfPresent(){return this.db.then((e=>e.get(this.key))).then(i.ij)}reset(){return this.db.then((e=>e.delete(this.key)))}},s=e=>(0,n.zG)(class{db;constructor(e){this.db=Promise.resolve((0,a.E)(e.namespace,e.logger,e.consent))}},o(e));class c extends(s("permutive-unprocessed-pba")){constructor(e){super(e)}}},1778:(e,t,r)=>{r.d(t,{LP:()=>a,dG:()=>n,eP:()=>i});const n=4096,i=`Cookie exceeds maximum supported size of ${n} bytes for most browsers.`,a="Cookie is missing required parameters."},3997:(e,t,r)=>{r.d(t,{Eq:()=>d,X:()=>f,b:()=>l});var n=r(3567),i=r(6805),a=r(3689),o=r(229),s=r(3052),c=r(2169),u=r(8236);const l=()=>({country:void 0,continent:void 0,environment:"",events_count:0,os:"",sample_rate:0,sdk_version:"",segments_count:0,session_count:0,session_init_count:0,session_view_count:0,user_agent:""}),d=a.n_({country:{equals:(e,t)=>e===t},continent:{equals:(e,t)=>e===t},environment:o.Eq,events_count:s.Eq,os:o.Eq,sample_rate:s.Eq,sdk_version:o.Eq,segments_count:s.Eq,session_count:s.Eq,session_init_count:s.Eq,session_view_count:s.Eq,user_agent:o.Eq}),f=e=>{const t=p(e.userId),r=(0,c.zG)(n.vP(e.userId,e.sessionId),n.UI((e=>{let[t,r]=e;return`${t},${r}`})),p),a=String(Math.random()),o=(0,c.zG)(e.sdkVariant,u.UI((e=>`-${e}`)),u.fS((()=>""))),s={environment:"web",events_count:0,os:g(window.navigator.userAgent||""),sample_rate:e.sampleRate,sdk_version:"v20.51.0"+o,segments_count:0,user_agent:window.navigator.userAgent||""};return(0,c.zG)(i.vP({session_count:t(e.sessionId),session_init_count:r(n.a9(a)),session_view_count:r(e.viewId)}),i.UI((0,c.ls)((t=>n.vP({...t,continent:(0,c.zG)(e.geoInfo,n.UI(u.tS((e=>u.ij(e.continent)))),n.UI(u.FS)),country:(0,c.zG)(e.geoInfo,n.UI(u.tS((e=>u.ij(e.country)))),n.UI(u.FS))})),n.UI((e=>({...s,...e}))))))},g=e=>{const t=e.toLowerCase();return t.includes("windows")?"windows":t.includes("iphone")||t.includes("ipad")?"ios":t.includes("android")?"android":t.includes("macintosh")?"macos":t.includes("linux")?"linux":"unknown"},p=e=>t=>i.dQ((r=>{let{previousState:i}=r;const u=(0,c.zG)(n.vP(e,t),n.Rp(function(e){if(null!==e&&"object"==typeof e&&"scope"in e&&"lastValue"in e&&"count"in e)return e;return{scope:"",lastValue:"",count:1}}(i),((e,t)=>{let[r,n]=t;return{scope:r,lastValue:n,count:r!==e.scope?1:n!==e.lastValue?e.count+1:e.count}})),n.D8(a.n_({scope:o.Eq,lastValue:o.Eq,count:s.Eq})));return{state:u,value:(0,c.zG)(u,n.UI((e=>e.count)))}}))},1141:(e,t,r)=>{r.d(t,{p:()=>f});var n=r(5654),i=r(2169),a=r(1822),o=r(3997),s=r(3567),c=r(7812),u=r(132),l=r(7226),d=r(1876);const f=e=>{let t=e.context.current;(0,i.zG)(e.context,s.D8(o.Eq),s.Rp((0,i.bc)(o.b(),o.b()),((e,t)=>{let[,r]=e;return(0,i.bc)(r,t)})),(e=>e.onChange((e=>{let[r,n]=e;o.Eq.equals({...r,continent:void 0,country:void 0},{...n,continent:void 0,country:void 0})||g({beacon:!1}),t=n}))));const r="[Metrics Reporter]";let f=!0;const g=async a=>{let{beacon:o}=a;const s=t,d=(0,i.zG)(u.of(e.metrics.consume()),u.Y$((()=>f),(()=>{})),u.tS(c.EQ((()=>u.of(void 0)),(t=>u.Y3((()=>(async(t,r)=>{if(!t)return e.api.metrics(r);if(!e.api.metricsBeacon(r))throw new Error("Failed to send beacon.")})(o,{context:s,items:t})),(i=>{f=!1,function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];e.logger.error(r,...n)}(`Failed to publish metrics ${(0,n.w)(i).message}`,t)}))))),l.UI(i.Q1));return d()},p=()=>{(0,d.HJ)((()=>g({beacon:!1}).finally((()=>p()))),5e3)};p(),(0,a.Bf)((()=>g({beacon:!0})),{capture:!1})}},9537:(e,t,r)=>{r.d(t,{u:()=>n});class n{trace;metrics;messages;_isRealtime=!1;_isReady=!1;constructor(e,t,r){this.trace=e,this.metrics=t,this.messages=r}isRealtime(){return this._isRealtime}isReady(){return this._isReady}setAsRealtime(e){const t=performance.now();this._isRealtime=!0,this.trace.measureSinceInit("sdk_realtime").finish(),this.messages.emit("permutive:realtime"),this.metrics.trackTimeSinceInit("sdk_realtime_targeting_set_task_duration_seconds",{},t),this.metrics.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"sdk_realtime",time_origin:"sdk_init"},t),this.metrics.track({name:"sdk_user_segments_count",value:e,labels:{}})}setAsReady(){const e=performance.now();this._isReady=!0,this.trace.measureSinceInit("sdk_ready").finish(),this.messages.emit("permutive:ready"),this.metrics.trackTimeSinceInit("sdk_initialisation_task_duration_seconds",{},e),this.metrics.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"sdk_ready",time_origin:"sdk_init"},e),window.performance&&window.performance.memory&&(this.metrics.track({name:"sdk_heap_memory_bytes_used",value:window.performance.memory.usedJSHeapSize,labels:{}}),this.metrics.track({name:"sdk_heap_memory_limit_fraction_used",value:window.performance.memory.usedJSHeapSize/window.performance.memory.jsHeapSizeLimit,labels:{}}))}}},1597:(e,t,r)=>{r.d(t,{a:()=>a});var n=r(2169),i=r(951);class a{config;localStorage;logger;permutiveData;cookies;externalData;constructor(e,t,r,n,i,a){this.config=e,this.localStorage=t,this.logger=r,this.permutiveData=n,this.cookies=i,this.externalData=a}async reset(){return this.logger.log("Resetting State"),(0,n.zG)(this.cookies.deleteCookie(this.config.cookieName),(e=>this.externalData.removeExternalData(this.config.cookieName)),(e=>(0,i.XP)({_paols:!0,_papns:!0,_pcrdbs:!0,_pcrprs:!0,_pdfps:!0,_pfws:!0,_pnativo:!0,_prps:!0,_prubicons:!0,_psegs:!0,_psmart:!0,"permutive-id":!0,"permutive-loaded":!0,"permutive-prebid-rtd":!0,"permutive-prebid-id":!0,"permutive-events-cache":!0,_pssps:!0,_ppsts:!0,_pamzn_cohorts:!0,_pamzn_ids:!0,_padswizz:!0}).forEach((e=>this.externalData.removeExternalData(e)))),(e=>this.permutiveData.reset()),(e=>Promise.all([this.localStorage.delete(this.config.permutiveDataMiscKey),this.localStorage.delete(this.config.permutiveDataQueriesKey)])),n.Q1)}}},3576:(e,t,r)=>{r.d(t,{u:()=>n});class n{permutiveData;permutiveReset;userId;viewId;logger;constructor(e,t,r,n,i){this.permutiveData=e,this.permutiveReset=t,this.userId=r,this.viewId=n,this.logger=i}getPermutiveData(e){return this.permutiveData.getData(e)}setPermutiveData(e,t){return this.permutiveData.setData(e,t)}getStateSizeInBytes(){return this.logger.warn("getStateSizeInBytes needs to be updated to reflect new event persistence"),this.permutiveData.getDataSize()}reset(){return this.permutiveReset.reset()}}},9427:(e,t,r)=>{r.d(t,{W:()=>n});class n{ref;constructor(e){this.ref=e}get(){return this.ref.current}}},9955:(e,t,r)=>{r.d(t,{E:()=>i});var n=r(7900);const i=(e,t,r)=>{const i=window.localStorage;return(0,n.rK)(i,"[Local Storage]",e,t,r)}},8904:(e,t,r)=>{r.d(t,{u:()=>i});r(8972);var n=r(7900);const i=(e,t,r)=>{const i=window.sessionStorage;return(0,n.rK)(i,"[Session Storage]",e,t,r)}},7900:(e,t,r)=>{r.d(t,{oP:()=>c,rK:()=>d});var n=r(5654),i=r(842),a=r(7144),o=r(2169),s=r(7385);class c{storage;namespace;constructor(e,t){this.storage=e,this.namespace=t}async put(e,t){const r=this.namespace.getNamespacedStorageKey(t.toString());return this.storage.setItem(r,JSON.stringify(e)),t}async get(e){const t=this.namespace.getNamespacedStorageKey(e.toString()),r=this.storage.getItem(t);return null===r?null:(0,i.A)(r)}async delete(e){const t=this.namespace.getNamespacedStorageKey(e.toString());this.storage.removeItem(t)}async deleteStore(){}}const u=e=>{const{logger:t,consent:r,prefix:n}=e,i=(e,r)=>(t.debug(`${n} Failed to write ${String(r)} as consent is revoked`),Promise.resolve(r));return e=>class extends e{put=(()=>(0,s.v)(super.put.bind(this),i,(()=>!r.current)))()}},l=e=>{const{logger:t,prefix:r,storage:i}=e;return e=>class extends e{isSupported=null;isStorageSupported(){return null!==this.isSupported||(this.isSupported=a.Y3((()=>{const e="_permutive_ls_test";return i.setItem(e,e),i.getItem(e),i.removeItem(e),!0}),n.w),(0,o.zG)(this.isSupported,a.EQ((e=>{t.warn(`${r} Is NOT supported`,e)}),(()=>{t.debug(`${r} Is supported`)})))),this.isSupported}async put(e,t){return(0,o.zG)(this.isStorageSupported(),a.EQ((e=>{throw e}),(()=>super.put(e,t))))}async get(e){return(0,o.zG)(this.isStorageSupported(),a.EQ((()=>null),(()=>super.get(e))))}async delete(e){return(0,o.zG)(this.isStorageSupported(),a.EQ(o.Q1,(()=>super.delete(e))))}async deleteStore(){return(0,o.zG)(this.isStorageSupported(),a.EQ(o.Q1,(()=>super.deleteStore())))}}},d=(e,t,r,n,i)=>new((0,o.zG)(c,l({logger:n,prefix:t,storage:e}),u({logger:n,consent:i,prefix:t})))(e,r)},8493:(e,t,r)=>{r.d(t,{SD:()=>f});var n=r(8236),i=r(7144),a=r(7812),o=r(6450),s=r(2169),c=r(3567),u=r(1822);const l={tradedesk:21,ddp:755,appnexus:32,pubmatic:76,neustar_fabrick:468},d="[TCF]",f=(e,t)=>{const[r,f,p]=(0,s.zG)(c.Ue(n.YP),(e=>{let[r,...i]=e;return[(0,s.zG)(r,c.bw(n.UI((e=>{t.debug(d,`Status "${e.type}"`,e)})))),...i]})),m=e.__tcfapi;if(m){const e=new Set(["tcloaded","useractioncomplete"]);m("addEventListener",2,((r,i)=>{i?"loaded"===r.cmpStatus&&e.has(r.eventStatus)&&(t.debug(d,"TCF API loaded",r),f(n.G({type:"loaded",data:r}))):(t.warn(d,"TCF API failed to register event listener"),f(n.G({type:"aborted"})),p())}))}else t.debug(d,"TCF API missing from the page"),f(n.G({type:"missing"})),p();const[h,_]=(0,s.zG)(c.gS(a.uZ()),(e=>{let[t,r]=e;return[t,(0,s.ls)(a.of,r)]}));return(0,s.zG)(c.vP(r,h),c.bw((e=>{let[r,a]=e;return(0,s.zG)(r,n.UI((e=>{const r=a();switch(t.debug(d,`Processing ${r.length} listeners`,r),e.type){case"missing":r.forEach((r=>{let[n,i]=r;t.debug(d,`Invoking ${n} as TCF API missing`),i(e)}));break;case"aborted":r.forEach((e=>{let[r]=e;t.debug(d,`Invoking ${r} skipped as TCF API aborted`)}));break;case"loaded":r.forEach((r=>{let[a,c]=r;(0,s.zG)(g(e.data),n.EQ((()=>{t.debug(d,`Invoking ${a} as GDPR does not apply`),c(e)}),(r=>(0,s.zG)((0,s.zG)(a,i.EQ((e=>n.G(e)),(e=>(0,s.zG)(l,o.P5(e))))),n.tS((e=>(0,s.zG)(r,o.P5(e.toString())))),n.UI((r=>{r?(t.debug(d,`${a} has consent`,{vendor:a}),c(e)):t.debug(d,`${a} does not have consent`,{vendor:a})}))))))}))}})))}))),{registerVendorOnValidConsent:(e,t)=>_([(0,s.zG)(e,i.DT((e=>"string"==typeof e),(()=>e))),t]),getStatusOrAbortOnTimeout:e=>new Promise((t=>{const i=setTimeout((()=>t({type:"aborted"})),e);(0,s.zG)(r,c.UI(n.UI((e=>{clearTimeout(i),t(e)}))))})).then((0,u.bw)((e=>t.debug(d,"TCF status resolved as",{status:e})))),tcfApiStatusRef:r}},g=e=>e.gdprApplies?n.G(e.vendor.consents):n.YP},9782:(e,t,r)=>{r.d(t,{C:()=>s});var n=r(9912),i=r(2169);r(6636),r(295);const a=(o=[[{name:"dfp",import:Promise.resolve().then(r.bind(r,7498))}],[],[],[],[{name:"appnexus",import:Promise.resolve().then(r.bind(r,1798))}],[],[{name:"clean_room",import:Promise.resolve().then(r.bind(r,2377))}],[],[{name:"dbm",import:Promise.resolve().then(r.bind(r,7375))}],[{name:"ddp",import:Promise.resolve().then(r.bind(r,6482))}],[],[],[{name:"tiktok_pixel",import:Promise.resolve().then(r.bind(r,4805))}],[],[],[{name:"local_storage",import:Promise.resolve().then(r.bind(r,6816))}],[],[],[],[],[{name:"prebid",import:Promise.resolve().then(r.bind(r,8577))}],[],[],[],[],[],[],[],[],[{name:"web",import:Promise.resolve().then(r.bind(r,8223))}],[],[],[],[],[],[]],(0,i.zG)((0,n.xH)(o),(0,n.u4)({},((e,t)=>({...e,[t.name]:t.import})))));var o;const s=e=>{const t=Object.entries(a).map((async t=>{let[r,n]=t;return e.logger.log(`Loading addon ${r}`),(await n).load(e)}));return Promise.all(t)}},8021:(e,t,r)=>{r.r(t),r.d(t,{createAddon:()=>w,getCachedDFPSegments:()=>b});var n=r(5654),i=r(7144),a=r(2169),o=r(8236),s=r(7812),c=r(3567),u=r(50),l=r(1822);const d="_pdfps";r(1778);var f=r(9912),g=r(229);let p=!1;let m=null;const h=(e,t)=>{const{logger:r}=t;(0,a.zG)(e,o.UI((e=>{!0!==p&&e.pubadsReady&&(m??=n=>{let{slot:i}=n;const{getContentUrl:o}=i;if(!o||"function"!=typeof o)return;(0,a.zG)(o(),(0,g.pn)("&trunc=1"))&&(r.debug("DFP content URL has been truncated!"),(e=>{let{metrics:t,logger:r}=e;p||(t.track({name:"sdk_targeting_size_limit_exceeded_count",value:1,labels:{target:"dfp"}}),p=!0,r.debug("DFP has exceeded targeting limit"))})(t),m&&e.pubads().removeEventListener("slotRenderEnded",m),m=null)},e.pubads().addEventListener("slotRenderEnded",m))})))},_=(e,t,r,n,i)=>{const{logger:s}=t;h(e,t);(0,a.zG)(e,o.UI((e=>(e=>{e.cmd.push((()=>{const{getTargeting:t,setTargeting:a}=e.pubads(),o=t("permutive")||[],c=t("prmtvctx")||[],u=(0,f.uK)((e=>i.has(e))),{left:l}=u(o),{left:d}=u(c),g=n.concat(l).concat("rts");if(s.debug("DFP setTargeting for 'permutive'",g),a("permutive",g),r.contextualCohorts){const e=r.contextualCohorts.concat(d).concat("rts");s.debug("DFP setTargeting for 'prmtvctx'",e),a("prmtvctx",e)}}))})(e))))};var v=r(7498);const b=e=>e.getExternalJsonData(d)||[],y=(e,t,r,i,a)=>{const{logger:o,externalData:s,api:c}=t;let l=r.map(String).concat(i.cloudCohorts);o.debug("DFP is updating with targeting values",l),_(e,t,i,l,a);try{s.setExternalJsonData(d,l)}catch(e){const t=(0,n.w)(e),r="DFP failed to set data. Got:";o.error(r,t),c.reportError(`${r} ${t.message}`)}return((e,t)=>{let{api:r,logger:n}=e;(0,u.$S)("sync_segments_cookie",!1)?(n.debug("DFP syncing segment cookie _pdfps"),r.segmentSync({key:d,value:t})):n.debug("DFP sync segments cookie not enabled, skipping sync")})(t,JSON.stringify(l)),o.debug("DFP live segments updated to",r),r},w=async e=>{const t={segments:{liveSegments:[],cloudCohorts:[],eligibleSegments:{}},getGAMKeyValues:()=>({permutive:""})};const{api:r,logger:n,activationManager:u,messages:f,externalData:g,nextGenOutput:p,userId:m,cookies:h}=e,_=await(0,l.a4)((()=>window.googletag),(()=>!!window.googletag),{waitTimeInMs:10,maxAttempts:200,exponentialBackOff:!1});o.Wi(_)&&n.error("[DFP]: unable to find google tag script on the page"),(0,a.zG)(_,o.UI((e=>(e=>e.cmd.push((()=>e.pubads().setTargeting("prmtvsdk","web"))))(e))));t.getGAMKeyValues=()=>{const n={...(0,a.zG)((0,v.generateProjectSpecificKVs)(e),i.Vn((e=>{var t;return t=e,r.reportError(`[DFP] ${t}`,m.get()),e})),i.fS((()=>({})))),permutive:t.segments.liveSegments.join(",")};return t.segments.contextualCohorts&&(n.prmtvctx=t.segments.contextualCohorts.join(",")),n};const b=new Set("rts");t.segments.eligibleSegments=(e=>{const t=e.getSpecializedActivations("dfp"),r={};for(const e of t.dfp)r[e]=e;for(const e of Object.keys(t.dfp_legacy)){const n=Number(e);r[n]=t.dfp_legacy[n]}return r})(u),Object.values(t.segments.eligibleSegments).forEach((e=>{b.add(String(e))}));const w=(0,a.zG)(p.queryLanguageCohorts.all,c.UI((e=>{return n.debug("DFP received QL segments",{qlSegments:e}),r=e,i=t.segments.eligibleSegments,r.filter((e=>e in i)).map((e=>i[e]));var r,i})),c.D8(l.cO)),I=(0,a.zG)(p.activations.dfp??c.a9(s.cS),c.UI((e=>e||s.cS))),S=p.activations.dfp_contextual??c.a9(void 0);return(0,a.zG)(c.vP(I,(0,a.zG)(S,c.UI((e=>e||[])))),c.UI(s.xH),c.Rp(s.bM(),((e,t)=>[...new Set([...e,...t])])),c.bw((e=>e.forEach((e=>b.add(e)))))),(0,a.zG)(c.vP(w,I,S),c.YP((0,l.Z_)(r,m,(r=>{let[i,a,o]=r;n.debug("DFP received updated cohorts",{filteredQlSegments:i,cloudCohorts:a,contextualCohorts:o}),t.segments.cloudCohorts=a,o&&(t.segments.contextualCohorts=o),t.segments.liveSegments=y(_,e,i,t.segments,b)})))),n.debug("DFP initialised with segments",t.segments),(0,a.zG)(_,o.UI((e=>{e.secureSignalProviders=e.secureSignalProviders||[],e.secureSignalProviders.push({id:"permutive-secure-signal",collectorFunction:c.yY(p.addons.secureSignal)})}))),f.on("permutive:reset",(0,l.Z_)(r,m,(()=>{n.debug("DFP received 'permutive:reset' event"),g.removeExternalData(d),h.deleteCookie(d)}))),f.emit("permutive:dfp:ready"),t}},7498:(e,t,r)=>{r.r(t),r.d(t,{generateProjectSpecificKVs:()=>G,load:()=>f});var n=r(5654),i=r(7144),a=r(8236),o=r(2169),s=r(9800),c=r(50),u=r(1822),l=r(8021);const d={},f=e=>{(0,c.Hn)("dfp")("auto_init",!1)&&e.q.push({functionName:"addon",arguments:["dfp",{}]}),window.googletag=window.googletag||{},window.googletag.cmd.push((()=>g(e)))},g=e=>{e.permutive.ready((0,u.Z_)(e.api,e.userId,(()=>S(e.metrics))),"realtime");k(e.externalData);(0,o.zG)(G(e),i.tS((e=>i.Y3((()=>(0,u.qh)(e).forEach((e=>{let[t,r]=e;googletag.pubads().setTargeting(t,r)}))),n.w))),i.Vn((t=>e.api.reportError(`[DFP:load], ${t}`,e.userId.get())))),b(e.permutive),googletag.cmd.push((()=>{y(e.permutive),w(e.permutive)})),window.addEventListener("message",m(e.permutive),!1)},p=e=>{let{advertiserId:t,campaignId:r,lineItemId:n,creativeId:i}=e;return{advertiser_id:(0,u.rH)(t),campaign_id:(0,u.rH)(r),line_item_id:(0,u.rH)(n),creative_id:(0,u.rH)(i)}},m=e=>t=>{try{const r=JSON.parse(t.data);if(!r.permutive_type||"google_ad_click"!==r.permutive_type)return;const{ad_unit_path:n,creative_id:i,advertiser_id:a,order_id:o,line_item_id:s}=r?.data??{},c=p({lineItemId:s,advertiserId:a,campaignId:o,creativeId:i});let u;Object.keys(d).some((e=>{const{slot:t,creative_id:r}=d[e];if(t?.ad_unit_path===n&&r===c.creative_id)return u=d[e],!0})),u=u??{...c,is_empty:!1},h(e,u)}catch{}},h=(e,t)=>{s.PH&&t&&e.track("SlotClicked",t)},_={},v=(e,t,r)=>{d[t]=r,I(e,r),_[t]&&_[t](),_[t]=P(e,t)},b=e=>{const t=googletag.pubadsReady&&googletag.pubads().getSlots();t&&t.forEach((t=>{const r=t.getResponseInformation();if(!r)return;const n={...p(r),is_empty:!1,service_name:"publisher_ads",slot:E(t)},i=t.getSlotElementId();v(e,i,n)}))},y=e=>{googletag.pubads().addEventListener("slotRenderEnded",(t=>{const r={...p(t),is_empty:t.isEmpty,service_name:t.serviceName,slot:E(t.slot)};if(t.size){const[e,n]=t.size;"number"==typeof e&&"number"==typeof n&&(r.width=e,r.height=n)}const n=t.slot.getSlotElementId();v(e,n,r)}))},w=e=>{s.EW&&googletag.pubads().addEventListener("impressionViewable",(t=>{let{slot:r,serviceName:n}=t;const i=r.getResponseInformation();if(!i)return;const a={...p(i),service_name:n,slot:E(r)};e.track("SlotViewable",a)}))},I=(e,t)=>{if(!s.CL)return;var r;r={...t,rendered_timestamp:Date.now()},e.track("SlotRendered",r)},S=e=>{let t=0;const r=googletag.pubadsReady&&googletag.pubads().getSlots();r&&r.forEach((e=>e.getResponseInformation()&&t++));const n=0===t?"sdk_targeting_realtime_success_count":"sdk_targeting_realtime_fail_count";e.track({name:n,value:1,labels:{target:"dfp"}})},k=e=>{const t=(0,l.getCachedDFPSegments)(e);googletag.cmd.push((()=>{const{getTargeting:e,setTargeting:r}=googletag.pubads(),n=e("permutive")||[];r("permutive",[...new Set([...t.map(String),...n])])}))},E=e=>{const t={ad_unit_path:e.getAdUnitPath(),slot_element_id:e.getSlotElementId()};return s.jH?{...t,...(()=>{const t={},r=[];let n=[];const i=(e,i)=>{const a="slot"===e?e=>t[e]=1:()=>{},o=i.getTargetingKeys();n=o;for(let o=0;o<n.length;o++){const s=n[o];if(void 0!==t[s]&&"service"===e)continue;const c=[],u=i.getTargeting(s);for(let e=0;e<u.length;e++)c.push(u[e].toString());c.length>0&&(a(s),r.push({key:s,value:c}))}};return i("slot",e),i("service",googletag.pubads()),{targeting_keys:r}})()}:t},P=(e,t)=>{let r=[];const n=()=>(0,o.zG)((0,o.bc)((0,o.zG)(a.Y3((()=>document.getElementById(t))),a.tS(a.ij),a.tS(a.KQ((e=>e.querySelector("iframe"))))),a.ij(document.activeElement)),a.RD,a.UI((r=>{let[n,i]=r;"hidden"===document.visibilityState&&n===i&&h(e,d[t])})));return document.addEventListener("visibilitychange",n),r.push((()=>document.removeEventListener("visibilitychange",n))),()=>{r.forEach((e=>e())),r=[]}},G=e=>{let{userId:t,viewId:r}=e;return i.Y3((()=>({})),n.w)}},6816:(e,t,r)=>{r.r(t),r.d(t,{LocalStorageAddon:()=>c,load:()=>s});var n=r(50),i=r(1822),a=r(3567),o=r(2169);const s=e=>{(0,n.Hn)("local_storage")("auto_init",!1)&&e.q.push({functionName:"addon",arguments:["local_storage",{}]})};class c{options;activations;storageKeyToSegments;constructor(e){this.options=e;const t=this;this.activations=this.options.activationManager.getActivations("local_storage"),this.storageKeyToSegments={};for(let e=0;e<this.activations.length;e++){const t=this.activations[e],r=t.getSegmentCode(),n=t.getConfig().storage_key;n in this.storageKeyToSegments||(this.storageKeyToSegments[n]={}),this.storageKeyToSegments[n][r]=!0}(0,o.zG)(e.nextGenOutput.queryLanguageCohorts.all,a.YP((0,i.Z_)(this.options.api,this.options.userId,(e=>t.exportSegments(e)))))}exportSegments(e){const t=this;Object.keys(this.storageKeyToSegments).forEach((r=>{const n=[],i=t.storageKeyToSegments[r];e.forEach((e=>{e in i&&n.push(e.toString())})),n.length>0&&this.options.externalData.setExternalData(r,JSON.stringify(n))}))}}},7375:(e,t,r)=>{r.r(t),r.d(t,{load:()=>i});var n=r(50);const i=e=>{(0,n.Hn)("dbm")("auto_init",!1)&&e.q.push({functionName:"addon",arguments:["dbm",{}]})}},6482:(e,t,r)=>{r.r(t),r.d(t,{DDPPixel:()=>c,load:()=>u});class n{options;storageKey;syncTimeoutSeconds;tcfStatus;constructor(e,t,r){this.options=e,this.storageKey=t,this.syncTimeoutSeconds=r,this.tcfStatus=e.tcfStatus,this.sendPixel()}sendPixel(){const e=this.options.permutiveData.getData(this.storageKey);e&&!this.isExpired(e)||this.makeUrl(this.options.config.apiKey,this.options.state.userId.get()).then((e=>{this.fire(e),this.options.permutiveData.setData(this.storageKey,(new Date).getTime())}))}fire(e){(new Image).src=e}isExpired(e){return isNaN(e)||(new Date).getTime()>e+1e3*this.syncTimeoutSeconds}}var i=r(7144),a=r(2169),o=r(1822);const s=("https:"===location.protocol?"https:":"http:")+"//cm.g.doubleclick.net/pixel?google_nid=permutive_dmp&google_cm&type=ddp";class c extends n{constructor(e){super(e,"addon:ddp",86400)}async makeUrl(e,t){return(0,a.zG)(this.addGDPRParams(),i.Vn((0,o.bw)((e=>this.options.api.reportError(`Failed to make ddp url. ${e}`,t)))),i.EQ((()=>""),(r=>`${s}&k=${e}&u=${t}&${r}`)))}addGDPRParams(){return i.Y3((()=>{if("missing"===this.options.tcfStatus.type)return"gdpr=0";return`gdpr=1&gdpr_consent=${"loaded"===this.options.tcfStatus.type?this.options.tcfStatus.data.tcString:""}`}),(e=>`Failed to retrieve GDPR query params. Got ${e}`))}}const u=()=>{}},2068:(e,t,r)=>{r.d(t,{i:()=>n});class n{isFirstRun;cachedSegmentsMembership;constructor(e,t){this.isFirstRun=void 0===e.permutiveData.getData(t),this.cachedSegmentsMembership=new Set(e.nextGenOutput.queryLanguageCohorts.all.current),this.isFirstRun&&e.permutiveData.setData(t,!0),e.messages.on("permutive:reset",(()=>e.permutiveData.setData(t,!1)))}}},1798:(e,t,r)=>{r.r(t),r.d(t,{AppnexusPixel:()=>o,load:()=>s});var n=r(50),i=r(2068);class a extends i.i{constructor(e,t,r){super(e,r);const n=e.activationManager.getSpecializedActivations(t);this.processSpecialisedActivations(e.permutive,n)}}class o extends a{constructor(e){super(e,"appnexus","addon:appnexus")}processSpecialisedActivations(e,t){if(this.isFirstRun)for(const e of this.cachedSegmentsMembership){const r=String(e);r in t&&this.firePixel(t[r])}e.on("SegmentEntry",(e=>{const r=e.properties.segment_number,n=String(r);n in t&&this.firePixel(t[n])}))}firePixel(e){(new Image).src=`https://secure.adnxs.com/seg?add=${e}&t=1`}}const s=e=>{(0,n.Hn)("appnexus")("auto_init",!1)&&e.q.push({functionName:"addon",arguments:["appnexus",{}]})}},4805:(e,t,r)=>{r.r(t),r.d(t,{TikTokPixel:()=>l,load:()=>d});var n=r(2169),i=r(50),a=r(1822),o=r(8236),s=r(6450),c=r(2068);const u=e=>"object"==typeof e&&null!==e&&"track"in e&&"identify"in e;class l extends c.i{identities;tikTokSdk;constructor(e){super(e,"addon:tiktok_pixel");const t=e.activationManager.getActivations("tiktok_pixel");this.identities=e.identities,this.tikTokSdk=o.DT(u)(e.tikTokSdk),this.fire=this.fire.bind(this),t.forEach((t=>{const r=t.getSegmentCode(),n=this.cachedSegmentsMembership.has(r);this.isFirstRun&&n?this.fire(t,n):e.permutive.trigger(r,"",(e=>{this.fire(t,e.result)}))}))}fire(e,t){(0,n.zG)(this.identities.ref.current,o.tS(s.P5("email_sha256")),o.tS((e=>(0,n.zG)(this.tikTokSdk,o.UI((t=>t.identify({email:e}))))))),(0,n.zG)(this.tikTokSdk,o.UI((t=>t.track("Permutive-"+e.getSegmentCode()))))}}const d=e=>{(0,i.Hn)("tiktok_pixel")("auto_init",!1)&&(0,a.a4)((()=>e.permutive.addon("tiktok_pixel",{tikTokSdk:window.ttq})),(()=>u(window.ttq)),{waitTimeInMs:1e3,maxAttempts:3})}},8223:(e,t,r)=>{r.r(t),r.d(t,{WebAddon:()=>I,load:()=>w});var n=r(5654),i=r(7144),a=r(2169),o=r(3052),s=r(8236),c=r(856),u=r(9800),l=r(50),d=r(1822);const f=(0,l.MU)("add_alchemy_entities",!1),g=(0,l.MU)("add_alchemy_taxonomy",!1);function p(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{...e&&g?{taxonomy_labels:"$alchemy_taxonomy_labels"}:{},...e&&f?{entity_names:"$alchemy_entity_names"}:{},privacy_sandbox_topics_v2:"$privacy_sandbox_topics_v2"}}function m(e,t,r,n){const i={isp_info:"$ip_isp_info",geo_info:"$ip_geo_info",...h(),...e,...t};r.track("Pageview",i).then((e=>{e&&n.emit("permutive:event:pageview",e)}))}function h(){return{}}var _=r(1876);const v=["mousemove","click","scroll"],b=["email","tel","submit","reset","button","file","password","radio","checkbox"],y=["email","e-mail","password","tel","telephone","phone","name_first","name_last","sa_zip"],w=e=>{(0,l.Hn)("web")("auto_init",!1)&&e.q.push({functionName:"addon",arguments:["web",{auto_init:!0}]})};class I{permutive;options;api;clientContext;logger;dirtyState=!1;cancelEngagementTimer=()=>{};totalCompletion=0;totalEngagedTime=0;pageEngagementDetected;cleanupPageEngagementDetection=(()=>a.Q1)();constructor(e){this.permutive=e.permutive,this.options=e,this.api=e.api,this.clientContext=e.clientContext,this.logger=e.logger,this.options.customProperties.setCustomProps(e.page||{});this.pageEngagementDetected=(()=>{this.dirtyState=!0}).bind(this),m(p(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.permutive,this.options.messages),this.enablePageEngagementDetection(),"loading"!==document.readyState?this.attachListeners():window.addEventListener("DOMContentLoaded",this.attachListeners.bind(this),!1),u.t2&&(this.cancelEngagementTimer=this.registerEngagementInterval(this.getEventInterval()))}sendFormSubmissionEvent(e){{const t=e.currentTarget,r={form:{method:t.method||"GET",properties:this.serializeForm(t),..."string"==typeof t.id?{id:t.id}:{},...t.name&&"string"==typeof t.name?{name:t.name}:{},...t.action&&"string"==typeof t.action?{action:t.action}:{}}};this.permutive.track("FormSubmission",r)}}async trackEngagementInterval(e){const t=this.updateState(e);!function(e,t,r,n,i,a){const o={isp_info:"$ip_isp_info",geo_info:"$ip_geo_info",engaged_time:e,total_engaged_time:t,...i,completion:r,total_completion:n};a.track("PageviewEngagement",o)}(t.engaged_time,t.total_engaged_time,t.completion,t.total_completion,this.options.customProperties.getCustomProps(),this.permutive)}async reset(e){this.disablePageEngagementDetection(),this.dirtyState=!1;const t=this.updateWebOptions(e);this.options.pageviewState.setState(((e,r)=>({viewId:t.context?.view_id??(0,d.k$)(),watsonEnabled:t.watson?.enabled??r.watsonEnabled}))),this.totalCompletion=0,this.totalEngagedTime=0,this.options.customProperties.setCustomProps(this.options.page||{}),this.enablePageEngagementDetection(),m(p(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.permutive,this.options.messages),u.t2&&(this.cancelEngagementTimer(),this.cancelEngagementTimer=this.registerEngagementInterval(this.getEventInterval()))}serializeForm(e){return[...e.getElementsByTagName("input")].filter((e=>!(!e.type||!e.id||e.disabled||e.checked||"fieldset"===e.nodeName.toLowerCase()||-1!==b.indexOf(e.type.toLowerCase())||-1!==y.indexOf(e.name.toLowerCase())))).map((e=>({name:e.name||e.id,value:e.value}))).filter((e=>e.value.length<120))}registerEngagementInterval(e){return(0,_.UM)((()=>{this.dirtyState&&this.trackEngagementInterval(e)}),1e3*e)}attachListeners(){const e=e=>"a"===e.tagName.toLowerCase(),t=e=>e instanceof Element,r=t=>e(t)?(0,s.G)(t):t.parentElement?e(t.parentElement)?(0,s.G)(t.parentElement):r(t.parentElement):s.YP;u.eV&&[].slice.call(document.getElementsByTagName("form"),0).forEach((e=>e.addEventListener("submit",(0,a.ls)(s.DT(this.canTrackPermutiveEvent("FormSubmission")),s.UI((0,d.Z_)(this.options.api,this.options.userId,this.sendFormSubmissionEvent.bind(this)))))));(0,l.MU)("track_link_click",!0)&&document.body.addEventListener("click",(0,a.ls)(s.DT(this.canTrackPermutiveEvent("LinkClick")),s.UI((e=>({event:e,anchor:(0,a.zG)(e.target,s.ij,s.tS(s.DT(t)),s.tS(r))}))),s.DZ((e=>{let{event:t,anchor:r}=e;return s.pC(r)?s.G({event:t,anchor:r.value}):s.YP})),s.UI((e=>{let{event:t,anchor:r}=e;return S(this.permutive,r,(n=t,!("_blank"===r.target||n.metaKey||n.ctrlKey||n.shiftKey||2===n.which||3===n.which)));var n}))),{capture:!0})}updateState(e){const t=Math.max(this.totalCompletion,this.getCurrentCompletion()),r=t-this.totalCompletion;return this.totalEngagedTime+=e,this.totalCompletion=t,this.dirtyState=!1,{engaged_time:e,total_engaged_time:this.totalEngagedTime,completion:r,total_completion:this.totalCompletion}}getCurrentCompletion(){if("function"==typeof this.options.getPageCompletion)return(0,a.zG)((0,i.Y3)((0,a.ls)(this.options.getPageCompletion,Number,(e=>isNaN(e)?0:e),(0,c.uZ)(o.Df)(0,1)),n.w),(0,i.EQ)((e=>(this.logger.warn("Web: invoking getPageCompletion threw an error. Got",e),0)),(e=>(this.logger.debug("Web: invoking getPageCompletion returned",e),e))));return(()=>{const e=document.documentElement.scrollHeight,t=window.pageYOffset+window.innerHeight;return t<=0?0:t>=e?1:t/e})()}registerPageEngagementCleanup(e){"function"==typeof e?this.cleanupPageEngagementDetection=()=>(0,i.Y3)((()=>{e(),this.cleanupPageEngagementDetection=a.Q1}),(e=>this.logger.warn("Page detection cleanup threw an error",(0,n.w)(e)))):this.logger.warn("No page detection cleanup was registered")}enablePageEngagementDetection(){this.options.addPageEngagementDetection&&(0,a.zG)(this.options.addPageEngagementDetection(this.pageEngagementDetected),(e=>this.registerPageEngagementCleanup(e))),this.setDirtyEventListenersTo(!0,this.getDirtyEvents())}disablePageEngagementDetection(){this.cleanupPageEngagementDetection(),this.setDirtyEventListenersTo(!1,this.getDirtyEvents())}setDirtyEventListenersTo(e,t){const r=e?window.addEventListener:window.removeEventListener;return t.forEach((e=>r(e,this.pageEngagementDetected))),null}getDirtyEvents(){return this.options.dirtyEvents||v}getEventInterval(){return this.options.eventInterval||5}canTrackPermutiveEvent(e){return t=>(0,a.zG)(this.options?.filterPermutiveEvent?.[e],s.DT((e=>"function"==typeof e)),s.tS((0,a.ls)((e=>i.Y3((()=>e(t)),(e=>new Error(`Threw an unexpected error: ${(0,n.w)(e)}`)))),i.tS(i.DT((e=>"boolean"==typeof e),(()=>new Error("Did not return a boolean")))),(0,d.bw)(i.Vn((t=>this.logger.error(`Filter predicate for "${e}" event failed`,t)))),s.Uo)),s.fS((()=>!0)))}updateWebOptions(e){(0,d.Kn)(e)||(e={}),e.watson&&"object"==typeof e.watson&&"enabled"in e.watson&&"boolean"==typeof e.watson.enabled||delete e.watson,"object"==typeof e.filterPermutiveEvent&&null!==e.filterPermutiveEvent||delete e.filterPermutiveEvent,"context"in e&&!(0,d.Kn)(e.context)&&delete e.context;const t={addPageEngagementDetection:void 0,context:void 0,dirtyEvents:void 0,eventInterval:void 0,filterPermutiveEvent:void 0,getPageCompletion:void 0,page:void 0,watson:void 0};return this.options={...this.options,...t,...e}}}const S=(e,t,r)=>{if(window.location.href&&t.href){const n=0===t.href.indexOf("data:")?"NOT_URL":t.href;e.track("LinkClick",{dest_url:n},{useBeacon:r})}}},5883:(e,t,r)=>{r.d(t,{a:()=>n});class n{messages;handlers={};messageQueue={};constructor(e){this.messages=e;window.addEventListener?.("message",(e=>{"permutive"===e?.data?.origin&&this.handle(e)}),!1),this.messages.once("permutive:api:ready",(function(){window.postMessage?.({origin:"permutive",type:"sdk-init"},"*")}))}listen(e,t){if(e in this.handlers||(this.handlers[e]=[]),this.handlers[e].push(t),e in this.messageQueue){const t=this.messageQueue[e];if(void 0===t)return;for(let e=0;e<t.length;e++){const r=t[e];this.handle(r)}}}handle(e){if(e.data.type in this.handlers)this.handlers[e.data.type].forEach((t=>{t(e)}));else{(this.messageQueue[e.data.type]??=[]).push(e)}}}},5106:(e,t,r)=>{r.d(t,{o:()=>n,s:()=>i});class n extends Error{static errorName="NetworkRequestFailedError";name=(()=>n.errorName)();constructor(){super(n.defaultMessage)}static get defaultMessage(){return"Network request failed"}}class i extends Error{static errorName="NetworkRequestTimeoutError";name=(()=>i.errorName)();constructor(){super(i.defaultMessage)}static get defaultMessage(){return"Network request timed out"}}},7902:(e,t,r)=>{r.d(t,{F:()=>d});var n=r(5654),i=r(2169),a=r(8236),o=r(7812),s=r(4085),c=r(5106),u=r(4694);class l{urls;config;network;metricsCollector;logger;webClient;prefix="[API]";constructor(e,t,r,n,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:()=>a.YP;this.urls=e,this.config=t,this.network=r,this.metricsCollector=n,this.logger=i,this.webClient=o}async reportError(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date;const l=(0,n.w)(e);if(this.logError("Reporting error:\n",l),!this.config.sendClientErrors)return void this.logDebug("Send errors not enabled. Skipping");const d=(0,i.zG)(this.webClient,u.UI(a.fS((()=>({domain:self.location?.hostname??"",referrer:"document"in self?self.document?.referrer:"",url:self.location?.href??"",user_agent:navigator?.userAgent??""})))),u.UI((e=>{const n={error_message:l?.message?.toString()??"",stack_trace:l?.stack?.split("\n")},i=t?{user_id:t}:{};return{platform:"web",sdk_version:"v20.51.0",ql_runtime_version:"v14.1.0",timestamp:r,domain:e.domain,url:(0,s.bk)(e.url),referrer:(0,s.bk)(e.referrer),user_agent:e.user_agent,error_message:n.error_message??String(l),stack_trace:n.stack_trace,...i}}))),f=e=>this.network.req({url:this.urls.getSdkErrorsUrl("/errors",a.G(this.config.sdkErrorsApiVersion)),method:"POST",payload:[e],contentType:"text/plain",dataType:"text",withCredentials:!1}),g=e=>{this.metricsCollector.trackCounter({name:"sdk_http_generic_network_request_fail_count_total",value:1,labels:{network_error_type:e}})};await(0,i.zG)([c.o,c.s],o.Ew((e=>l.name===e.errorName||l.message.indexOf(e.errorName)>=0||l.message.indexOf(e.defaultMessage)>=0)),a.g_((()=>{const e=d();return f(e).catch((0,i.ls)(n.w,(e=>this.logError(e))))}),(async e=>g(e.errorName))))}logDebug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.debug(this.prefix,...t)}logError(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.error(this.prefix,...t)}}class d extends l{identifyPromise;identify(e,t,r){const n=()=>this.reqWithMetrics(e,"sdk_http_identify_seconds",{url:this.urls.getEndpointUrl("/identify",a.G(this.config.apiVersion)),method:"POST",payload:{user_id:t.get(),aliases:r},contentType:"text/plain",dataType:"json",withCredentials:!0});return this.identifyPromise?this.identifyPromise=this.identifyPromise.then(n):this.identifyPromise=n()}metrics(e){return this.network.req({url:this.urls.getEndpointUrl("/internal/metrics",a.G(this.config.apiVersion)),method:"POST",payload:e,contentType:"text/plain",dataType:"text",withCredentials:!1})}metricsBeacon(e){return this.network.reqWithBeacon({url:this.urls.getEndpointUrl("/internal/metrics",a.G(this.config.apiVersion)),payload:e})}reset(e){return this.reqWithMetrics(e,"sdk_http_reset_seconds",{url:this.urls.getEndpointUrl("/reset",a.G(this.config.apiVersion)),method:"POST",payload:null,contentType:"text/plain",dataType:"json",withCredentials:!0})}segmentSync(e){return this.network.req({url:`https://${this.config.segmentSyncApiHost}/sync/${e.key}`,method:"POST",payload:`value=${encodeURIComponent(e.value)}`,contentType:"application/x-www-form-urlencoded",dataType:"json",withCredentials:!0})}appnexus(e){return this.network.req({url:e,method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!0,timeout:2e3})}pxid(e){return this.network.req({url:this.urls.makeAuthenticatedUrl(e),method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!0,timeout:2e3})}queries(){const e={addons:{dfp:{activations:{dfp:[],dfp_legacy:{}},auto_init:!0,track_slot_rendered:!1,track_slot_viewable:!1,track_slot_clicked:!1,track_targeting_keys:!1,sync_segments_cookie:!1},web:{auto_init:!1,track_pageview_engagement:!0,track_pageview_complete:!0,track_form_submission:!1,track_link_click:!1,engagement_edge_only:!0,segment_transition_edge_only:!1}},queries:{queries:{},eventSegments:{},eventsLookup:[],literalsLookup:[],subexpressionsLookup:[],stateSyncReplays:[],propertiesLookup:[],ahoCorasickLookup:[]},queries_metadata:{}},t=`${this.config.cdnBaseUrl.startsWith("dev.local:")?"http":"https"}://${this.config.cdnBaseUrl}/queries/4b91477e-f67b-4d81-86db-a9742bd41e9c-amp.json`;return this.network.req({url:t,withCredentials:!1,dataType:"json",method:"GET"}).catch((()=>e))}pxidReset(e){return this.network.req({url:this.urls.makeAuthenticatedUrl(e),method:"POST",payload:null,contentType:"text/plain",dataType:"json",withCredentials:!0})}uploadCohortMemberships(e,t){return this.reqWithMetrics(e,"sdk_http_upload_cohort_memberships_seconds",{url:this.urls.getCCSCohortMembershipEndpointUrl("/amp/cohorts",a.G("alpha"),[["i",t.user_id]]),method:"POST",payload:t,contentType:"text/plain",dataType:"json",withCredentials:!1})}reqWithMetrics(e,t,r){const n=e.startTimer(t,{});return this.network.req(r).then((r=>(0,i.zG)(e.stopTimer(t,n),(e=>r))))}}},7499:(e,t,r)=>{r.d(t,{E:()=>b});var n=r(7144),i=r(2169),a=r(5106),o=r(1876),s=r(8236),c=r(8614),u=function(e){return"Left"===e._tag},l=function(e){return"Right"===e._tag};function d(e){return{_tag:"Left",left:e}}function f(e){return{_tag:"Right",right:e}}function g(e,t){return{_tag:"Both",left:e,right:t}}var p=function(e,t,r){return function(n){switch(n._tag){case"Left":return e(n.left);case"Right":return t(n.right);case"Both":return r(n.left,n.right)}}},m=p;m(f,d,(function(e,t){return g(t,e)}));var h=f,_="These",v=(i.yR,i.yR,c.Xl,r(1822));class b{metrics;logger;constructor(e,t){this.metrics=t,this.logger=e.withPrefix("network")}req(e){return this.logger.withPrefix("request").debug(e.method,e.url,..."POST"===e.method?[{payload:e.payload}]:[]),this.reqImpl(e).then((e=>(0,i.MZ)(e))).then((t=>(this.logger.withPrefix("response").debug(e.method,e.url,{response:t}),t)),(t=>{throw this.logger.withPrefix("response").error(e.method,e.url,t),t}))}reqWithBeacon(e){let{url:t,payload:r}=e;const n=JSON.stringify(r),i=navigator?.sendBeacon?.(t,JSON.stringify(r))??!1;return this.trackRequestMetrics({is_beacon:!0,is_error:!i,request:{method:"POST",url:t,content_length:n.length}}),i}reqImpl(e){const t="arraybuffer",{url:r,dataType:u,contentType:l,method:d,withCredentials:p,timeout:m}=e;return new Promise(((h,_)=>{const b=new XMLHttpRequest,y="POST"===e.method?"string"==typeof(w=e.payload)?w:JSON.stringify(w):null;var w;const I=e=>this.trackRequestMetrics({is_beacon:!1,request:{method:d,url:r,content_length:y?.length??0},response:e});b.onload=(0,o.GL)((()=>{return(0,i.zG)(b.status,n.DT((e=>e<400),(()=>{const e="text"===b.responseType||""===b.responseType?b.responseText:"Couldn't access response text";return`Failed ajax request. Status code was ${b.status}. ${e}`})),n.tS((()=>"json"===u?b.responseText?n.Y3((()=>JSON.parse(b.responseText)),(e=>`Failed to parse response as JSON. Response was ${JSON.stringify(b.responseText)}. Got ${e}`)):n.F2(null):"text"===u?n.F2(b.responseText):n.F2(b.response))),(0,v.bw)((0,i.ls)(s.IS,(e={content_length:"text"===b.responseType||""===b.responseType?b.responseText?.length??0:b.responseType===t?b.response.byteLength:0,response_time_ms:self.performance.now()-S,status_code:b.status},function(t){return c.Wi(t)?f(e):g(t.value,e)}),I)),n.EQ(_,h));var e})),b.onerror=(0,o.GL)((()=>{I(n.t$("network error")),_(new a.o)})),b.ontimeout=(0,o.GL)((()=>{I(n.t$("timeout")),_(new a.s)})),b.open(d,r,!0),l&&b.setRequestHeader("content-type",l),b.timeout=m||b.timeout,b.withCredentials=p||b.withCredentials,b.responseType="binary"===u?t:b.responseType;const S=self.performance.now();b.send(y)}))}trackRequestMetrics(e){if(!this.metrics?.isEnabled())return;const t=new URL(e.request.url).pathname;if(t.includes("metrics"))return;const r=r=>this.metrics.track({name:"sdk_http_request_count_total",value:1,labels:{request_method:e.request.method,request_path:t,request_content_length:e.request.content_length,...r}});var n;!0===e.is_beacon?r({is_beacon:!0,is_error:e.is_error}):(0,i.zG)((n=e.response,u(n)?c.YP:(l(n),c.G(n.right))),s.aD((()=>({})),(e=>({response_content_length:e.content_length,response_status:e.status_code,response_time_ms:e.response_time_ms}))),(t=>({is_beacon:!1,is_error:!l(e.response),...t})),r)}}},925:(e,t,r)=>{r.r(t),r.d(t,{startMaster:()=>ue});var n=r(3567),i=r(2169),a=r(6805),o=r(8236),s=r(7812),c=r(1822),u=r(4694),l=r(6450),d=r(2945),f=r(4327),g=r(6377);var p=r(7226),m=r(6335),h=r(6289),_=r(7049);function v(e,t){return function(r){return e.map(r,t.compact)}}function b(e,t,r){var n=v(e,t),a=(0,h.UI)(e,r);return function(e){return _.s4(n((0,i.zG)(e,a(o.IS))),n((0,i.zG)(e,a(o.EK))))}}function y(e,t){return function(r){return function(n){return e.map(n,(function(e){return t.filter(e,r)}))}}}function w(e,t){return function(r){return function(n){return e.map(n,(function(e){return t.filterMap(e,r)}))}}}function I(e,t){var r=y(e,t);return function(e){var t=r((0,f.ff)(e)),n=r(e);return function(e){return(0,_.s4)(t(e),n(e))}}}function S(e,t){var r=w(e,t);return function(e){return function(t){return(0,_.s4)((0,i.zG)(t,r((function(t){return(0,o.IS)(e(t))}))),(0,i.zG)(t,r((function(t){return(0,o.EK)(e(t))}))))}}}var k=r(8614);function E(e){return(0,i.ls)(o.G,e.of)}function P(e){return(0,i.a9)(e.of(o.YP))}function G(e){return function(t){return e.map(t,o.G)}}function U(e){return(0,i.ls)(o.ij,e.of)}function z(e){var t=U(e);return function(e){return(0,i.ls)(e,t)}}function D(e){var t=L(e),r=z(e);return function(e){return t(r(e))}}function C(e){return function(t){return(0,i.ls)(t,e.of)}}function x(e){var t=L(e),r=C(e);return function(e){return t(r(e))}}function O(e){return function(t){return function(r){return e.of(o.DT(t)(r))}}}function M(e){return(0,i.ls)(o.Uo,e.of)}function T(e){return function(t,r){return function(n){return e.map(n,o.EQ(t,r))}}}function q(e){return function(t,r){return function(n){return e.chain(n,o.EQ(t,r))}}}function A(e){return function(t){return function(r){return e.chain(r,o.EQ(t,e.of))}}}function R(e){return(0,h.UI)(e,o.dO)}function j(e){return(0,d.ap)(e,o.G5)}function L(e){var t=P(e);return function(r){return function(n){return e.chain(n,o.EQ((function(){return t()}),r))}}}function $(e){var t=E(e);return function(r){return function(n){return e.chain(n,o.EQ(r,t))}}}var F=function(e,t,r,n){return new(r||(r=Promise))((function(i,a){function o(e){try{c(n.next(e))}catch(e){a(e)}}function s(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,s)}c((n=n.apply(e,t||[])).next())}))},B=function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},N=E(p.PM),K=(p.PM,p.of,p.PM,p.dO,p.UI(o.Uo)),Y=(p.dO,p.qo,p.UA,p.PM,function(e){return function(){return F(void 0,void 0,void 0,(function(){return B(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,e().then(k.G)];case 1:return[2,t.sent()];case 2:return t.sent(),[2,k.YP];case 3:return[2]}}))}))}}),Q=(p.PM,p.UA,p.PM,p.UA,R(p.dO)),H=j(p.Hi),W=N,V=L(p.UA),J=(p.UA,p.PM,p.dO,o.Ri,p.dO,o.Ri,o.dO,p.dO,o.xu,p.dO,o.xu,p.dO,o.xu,p.dO,o.xu,function(e,t){return(0,i.zG)(e,Q(t))}),X=function(e,t){return(0,i.zG)(e,H(t))},Z=function(e,t){return(0,i.zG)(e,V(t))},ee="TaskOption",te={URI:ee,map:J},re={URI:ee,map:J,ap:X,chain:Z},ne=(k.F4,(0,h.YO)(te)),ie=(0,m.a)(re),ae=(k.Xl,r(1876)),oe=r(3643);const se=(e,t)=>{const[r,a]=n.gS(s.uZ());return(0,i.zG)(t,n.UI(u.UI((t=>{s.Od(t)&&e.all().then((e=>(0,i.zG)(t,s.UI((0,oe.H5)((()=>e))),a)))}))),n.UI((e=>e()))),r},ce=(e,t)=>{let r=!1;return n.UI(u.UI((0,c.bw)((n=>{r||(r=(0,i.zG)(n,s.G((e=>{let[,t]=e;return"Pageview"===t.name}))),r&&e.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:t,time_origin:"sdk_init"}))}))))};function ue(e){let{eventsCacheFactory:t,metrics:m,trace:h,migratedStateMaps:_,worker:v,...b}=e;return e=>a.dQ((0,i.ls)((0,c.rO)({previousState:le}),(a=>{let{stopped:c,previousState:y}=a;(0,i.zG)(c,n.YP((e=>e&&v.stop()))),v.send({...b,migratedStateMaps:y.stateMigrated?{external:o.YP,internal:o.YP}:_(),previousState:y.workerState}),h.measureSinceInit("post_worker_config_duration").finish(),m.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"master_sent_worker_config",time_origin:"sdk_init"},performance.now());const w=h.startSpan("worker_config_response_duration"),I=v.next();I.then((()=>{w.finish(),m.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"master_received_worker_config_response",time_origin:"sdk_init"},performance.now())}));const S=((e,t)=>{const a=(0,i.zG)((()=>t),p.UI((e=>o.lo(!e))),V((()=>K(e()))),ne("eventsCache"),ie("eventsCacheService",(()=>(0,i.zG)((0,ae.N1)(Y((()=>Promise.resolve().then(r.bind(r,3465))))),Q((e=>e.eventCacheService)))))),c=a();return e=>{let{priorCachedEventsRequests:t,...r}=e;return e=>{let{previousState:a,stopped:l}=e;const d=n.a9(u.of(s.bM())),[f,g]=n.Ue({eventsToPublish:n.a9(u.of(s.bM())),priorCachedEventsResponses:d,state:n.a9(a)});return c.then(o.EQ((()=>g({eventsToPublish:r.eventsToPublish,priorCachedEventsResponses:d,state:n.a9(void 0)})),(e=>{let{eventsCache:n,eventsCacheService:i}=e;const{state:o,value:{newEvents:s}}=i({eventsCache:n,newEvents:r.eventsToPublish})({previousState:a,stopped:l});g({eventsToPublish:s,priorCachedEventsResponses:se(n,t),state:o})}))),{state:(0,i.zG)(f,n.VS((e=>e.state))),value:(0,i.bc)((0,i.zG)(f,n.VS((e=>e.priorCachedEventsResponses))),{...r,eventsToPublish:(0,i.zG)(f,n.VS((e=>e.eventsToPublish)))})}}}})(t,I.then((e=>e.eventsCachedInWorker)));return(0,i.zG)((()=>v.read()),function(e,t){const r=e=>(0,i.zG)(e,l.Hd((e=>e in t)),(e=>{let{left:t,right:r}=e;return{buffers:r,nonBuffers:t}}));return a=>{const{buffers:o,nonBuffers:s}=r(e),[c,u]=n.Ue({...s,...(0,i.zG)(o,l.Su((e=>()=>{const r=o[e];return o[e]=t[e].empty,r})))});return(async()=>{for(;;){const e=(0,i.zG)(await a(),g.UI(r),g.ur({concat:(e,r)=>({nonBuffers:{...e.nonBuffers,...r.nonBuffers},buffers:(()=>{const n={...e.buffers};for(const e in r.buffers)n[e]=e in n?t[e].concat(n[e],r.buffers[e]):r.buffers[e];return n})()})})),n=(0,i.zG)(e.buffers,l.Su(((e,r)=>(o[e]=t[e].concat(o[e],r),()=>{const r=o[e];return o[e]=t[e].empty,r}))));u({...c.current,...e.nonBuffers,...n})}})(),(0,i.zG)(e,l.Su((e=>(0,i.zG)(c,n.UI((t=>t[e]))))))}}({activations:y.activations,cohorts:y.cohorts,context:{},eventsToPublish:s.cS,eventsToPublishOnPageUnload:s.cS,externalData:{},geoIP:o.YP,metrics:s.cS,priorCachedEventsRequests:s.cS,realtime:!1,state:y.workerState,transitionsSinceInit:{segmentsEntered:s.cS,segmentsExited:s.cS},workerStateFlushed:!1,stateMigratedThisInitialisation:!1,secureSignal:o.YP},{eventsToPublish:s.uZ(),metrics:s.uZ(),priorCachedEventsRequests:s.uZ()}),(e=>{let{metrics:t,...r}=e;return t.onChange((e=>e().forEach((e=>m.track(e))))),r}),(t=>{let{workerStateFlushed:r,stateMigratedThisInitialisation:a,activations:g,cohorts:p,state:h,secureSignal:_,...b}=t;const{value:[w,I],state:k}=S(b)({stopped:c,previousState:y.masterEventsCache});return function(e,t,r){const a=(0,i.zG)(n.vP(t),n.UI((0,i.ls)(l.UI((e=>"function"==typeof e?e:u.of(e))),(0,d.Yt)(u.G5))));let s=a.current();e(s),(0,i.zG)(a,n.YP((t=>{const n=t(),a=(0,i.zG)(n,l.z7(((e,t)=>t!==s[e]&&!r[e]?.isEmpty(t))),o.DT((0,f.ff)(l.xb)));o.pC(a)&&(s={...s,...a.value},e(a.value))})))}(v.send,{consent:e.consent,contextualCohorts:e.contextualCohorts,enrichmentReplacementMap:e.enrichmentReplacementMap,eventSourceId:e.eventSourceId,identities:e.identities,userId:e.userId,userIdIsNewlyGenerated:e.userIdIsNewlyGenerated,newEvents:(0,i.zG)(e.newEvents,ce(m,"pageview_sent_to_worker")),sessionId:e.sessionId,viewId:e.viewId,webClient:e.webClient,pageviewState:e.pageviewState,priorCachedEventsResponses:w},{newEvents:{isEmpty:s.xb},priorCachedEventsResponses:{isEmpty:s.xb}}),m.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"master_sent_worker_input",time_origin:"sdk_init"},performance.now()),{state:n.vP({activations:g,cohorts:p,masterEventsCache:k,workerState:h,stateMigrated:(0,i.zG)(n.vP(r,a),n.Rp(y.stateMigrated,((e,t)=>{let[r,n]=t;return e||r&&n})))}),value:{...I,stateMigratedThisInitialisation:a,activations:g,cohorts:{all:n.UI((e=>e.all),p),ql:n.UI((e=>e.ql),p),qlCustom:n.UI((e=>e.qlCustom),p),qlStandard:n.UI((e=>e.qlStandard),p)},secureSignal:_}}}))})))}const le=e=>me(e)?{activations:de(e.activations),cohorts:ge(e.cohorts),masterEventsCache:e.masterEventsCache,workerState:e.workerState,stateMigrated:!!e.stateMigrated}:{activations:de(null),cohorts:ge(null),masterEventsCache:null,workerState:null,stateMigrated:!1},de=e=>me(e)?{dfp:pe(e.dfp),dfp_contextual:void 0,xandr_ssp:pe(e.xandr_ssp),xandr_ssp_contextual:void 0,adswizz_keyvalue:pe(e.adswizz_keyvalue),adswizz_keyvalue_contextual:void 0}:fe(),fe=()=>({dfp:s.cS,dfp_contextual:void 0,xandr_ssp:s.cS,xandr_ssp_contextual:void 0,adswizz_keyvalue:s.cS,adswizz_keyvalue_contextual:void 0}),ge=e=>me(e)?{all:pe(e.all),ql:pe(e.ql),qlCustom:pe(e.qlCustom),qlStandard:pe(e.qlStandard)}:he(),pe=e=>Array.isArray(e)?e:s.cS,me=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),he=()=>({all:s.cS,ql:s.cS,qlCustom:s.cS,qlStandard:s.cS})},7557:(e,t,r)=>{r.r(t),r.d(t,{runNextGenFeatures:()=>Ht});var n=r(2169),i=r(3567),a=r(6805),o=r(1876),s=r(8236),c=r(1822);function u(e){let{messages:t}=e;const[r,n]=i.Ue(new Set);return t.on("permutive:addon:preinit",(e=>n(new Set([...r.current,e])))),r}function l(){const e=()=>Math.floor(Date.now()/1e3),[t,r]=i.Ue(e());return(0,o.UM)((()=>r(e())),1e3),t}function d(){const[e,t]=i.Ue(!1);return(0,c.aT)((()=>t(!0)),navigator.userAgent),e}var f=r(7812),g=r(5654),p=r(7144),m=r(6377),h=r(5086),_=r(6450),v=r(7049),b=r(50),y=r(9144),w=r(70);const I="[Prebid Monitoring]",S=(e,t)=>{e.metrics.trackCounter({name:"sdk_prebid_monitoring_key_flag_count_total",labels:t,value:1})},k=(e,t)=>{e.metrics.trackCounter({name:"sdk_prebid_monitoring_key_bidder_ortb2_count_total",labels:t,value:1})},E=Math.random()<.01?function(e,t){const r=P(e);return a.K4((()=>(0,n.zG)(t,i.UI((0,n.ls)(s.DT((e=>e.consent)),s.UI((e=>e.prebidJS)))),i.D8(s.Eh((0,c.Or)())),i.bw((0,n.ls)(s.tS((e=>e.completedChecks?e.mainPair:s.YP)),s.UI((t=>S(e,{flag:"prebid_main_key",prebid_key:t.windowPropertyKey}))))),i.UI(s.UI((e=>(0,n.zG)(e.mainPair,s.UI((t=>[t,...e.otherPairs])),s.fS((()=>e.otherPairs)))))),i.Rp(new Set,((t,i)=>(0,n.zG)(i,s.UI(f.hX((e=>!t.has(e.windowPropertyKey)))),s.hX(f.Od),(0,c.bw)(s.EQ((()=>e.logger.debug(I,"Nothing to report")),(t=>e.logger.debug(I,"Reporting",t)))),s.fS((()=>[])),f.UI((t=>(0,n.zG)((t=>(0,n.zG)(p.Y3((function(){const{pbjs:r,windowPropertyKey:i}=t;e.logger.log(I,`Reporting on "${i}"`,t);const a=G(r);e.logger.debug(I,`Version ${r.version} parsed as`,a);const o=(0,w.zi)(r);e.logger.debug(I,"Read config",o);const s=(0,n.zG)(o.realTimeData?.dataProviders??[],f.Ew((e=>"permutive"===e.name)));return e.logger.debug(I,"Read data provider config",s),{pbjs:r,config:o,dataProviderConfig:s,installedModules:r.installedModules||[],version:a,windowPropertyKey:i}}),g.w),p.ak("bidders",(e=>r.sspBidders(e))),p.ak("permutiveRTDProvider",(e=>r.permutiveRTDProvider(e))),p.ak("consent",(e=>r.consent(e))),p.ak("prebidConfig",(e=>r.prebidConfig(e))),p.ak("targeting",(e=>r.targeting(e)))))(t),p.Pd((r=>e.reportError(`${I} Failed to report pair "${t.windowPropertyKey}", ${r.message}`)),(()=>t.windowPropertyKey))))),f.hp,(e=>new Set([...t,...e]))))),(e=>({reportedKeys:e})))))}:function(){return a.K4((()=>({reportedKeys:i.a9(new Set)})))};const P=e=>({sspBidders:t=>p.Y3((()=>{const r=(0,b.Hn)("prebid")("data_provider_config",{ac_bidders:[]}),i=t.version.major>=7&&t.version.minor>=13?r.ac_bidders:[],a=(0,n.zG)(t.dataProviderConfig,s.UI((e=>e?.params?.acBidders??[])),s.fS((()=>[]))),o=[...new Set([...i,...a])];o.forEach((r=>{((e,t)=>{e.metrics.trackCounter({name:"sdk_prebid_monitoring_key_bidder_flag_count_total",labels:t,value:1})})(e,{flag:"prebid_ac_bidder",prebid_key:t.windowPropertyKey,prebid_bidder:r})}));const c=[...new Set(["pubmatic","appnexus","ix","openx",...o])];return e.logger.debug(I,"Determined ssp bidders as",{sspBidders:c,acBidders:o,dynamicBidders:i,staticBidders:a}),{sspBidders:c,acBidders:o,dynamicBidders:i,readBidders:a}}),g.w),consent:t=>p.Y3((()=>{const r=t.windowPropertyKey;t.config.consentManagement&&"object"==typeof t.config.consentManagement&&S(e,{prebid_key:r,flag:"prebid_has_consent_management"});const n=t.installedModules.includes("gdprEnforcement");n&&S(e,{prebid_key:r,flag:"prebid_gdpr_enforcement_module"});const i=t.config?.consentManagement?.gdpr?.rules?.find((e=>"storage"===e?.purpose))?.vendorExceptions?.includes("permutive")||!1;return i&&S(e,{prebid_key:r,flag:"prebid_storage_exception"}),{hasGDPREnforcementModule:n,addedAsStorageException:i}}),g.w),prebidConfig:t=>p.Y3((()=>{const r=t.windowPropertyKey,i=[t.version.major,t.version.minor,t.version.patch].join("."),a=t.installedModules.join(","),o=(0,n.zG)(t.dataProviderConfig,s.UI((e=>({waitForIt:e.waitForIt,params:e.params})))),u=(0,n.zG)(s.ij(t.config.realTimeData?.dataProviders?.find((e=>"jwplayer"===e.name))),s.UI((e=>({waitForIt:e.waitForIt})))),l=(0,n.zG)(s.ij(t.config.realTimeData),s.UI((e=>({auctionDelay:e.auctionDelay,permutive:s.FS(o),jwplayer:s.FS(u)}))),s.tS((0,n.ls)(y.P,s.Uo)),s.FS),d=(0,n.zG)((0,y.P)((()=>{if(t.config.consentManagement&&(0,c.Kn)(t.config.consentManagement)){const e=t.config.consentManagement?.gdpr;if(e){const t=(e?.rules||[]).filter((e=>"storage"===e?.purpose));return{gdpr:{cmpApi:e?.cmpApi,rules:t}}}return{}}})()),s.Uo,s.FS);((e,t)=>{e.metrics.trackCounter({name:"sdk_prebid_monitoring_config_count_total",labels:t,value:1})})(e,{prebid_key:r,version:i,installed_modules:a,rtd_config:l,consent_management:d})}),g.w),permutiveRTDProvider:t=>p.Y3((()=>{const r=t.installedModules.includes("permutiveRtdProvider");return r&&S(e,{prebid_key:t.windowPropertyKey,flag:"prebid_permutive_rtd"}),r}),g.w),targeting:t=>{const r=e=>{const t=(()=>{const t=new Set((e.bids||[]).flatMap((e=>(0,c.Kn)(e.mediaTypes)?Object.keys(e.mediaTypes):[])));return Array.from(t).join(",")})(),r=e.ortb2?.user;if(!r)return{has_ortb2_user:!1,media_types:t,user_keywords:"",user_ext_data:"",user_data:""};const n=new Set(["adv","cur"]),i=e=>{const t={everyones:new Set,complete:!1};return{key:e,addIfEveryone:e=>{n.has(e)&&t.everyones.add(e)},isComplete:()=>t.everyones.size===n.size,serialize:()=>t.everyones.size>0?`${e}=${Array.from(t.everyones).sort().join(",")}`:""}},a=i("p_standard"),o=i("p_standard_aud"),s=i("p_standard"),u=i("permutive.com");r.keywords?.split(",").some((e=>{const[t,r]=e.split("=");return t===a.key?a.addIfEveryone(r):t===o.key&&o.addIfEveryone(r),o.isComplete()&&a.isComplete()}));const l=r.ext?.data?.[s.key];Array.isArray(l)&&l.some((e=>(s.addIfEveryone(e),s.isComplete())));const d=r.data?.find((e=>e.name===u.key))?.segment?.map((e=>e.id));return Array.isArray(d)&&d.some((e=>(u.addIfEveryone(e),u.isComplete()))),{has_ortb2_user:!0,media_types:t,user_keywords:[a.serialize(),o.serialize()].filter(Boolean).join("&"),user_data:u.serialize(),user_ext_data:s.serialize()}},i=(0,n.ls)(f.UI((e=>[e,null])),_.sq),a=(t,i)=>(0,n.zG)(t,(0,c.bw)((t=>e.logger.debug(I,`Processing ${t.length} bidder request(s)`,t))),f.hX((e=>i.hasOwnProperty(e.bidderCode)&&null===i[e.bidderCode])),m.vM((e=>e.bidderCode)),_.DZ(f.f2((e=>(0,n.zG)(s.ij(e),s.UI(r))))),(0,c.bw)((t=>e.logger.debug(I,"Bidders targeting method's updated",t)))),o=r=>{e.logger.debug(I,"Bidders found with no targeting method",r);let o=i(r);const s=r=>(0,n.zG)(a([r],o),(0,c.bw)((e=>{o={...o,...e}})),(0,c.bw)(_.Su(((r,n)=>k(e,{prebid_key:t.windowPropertyKey,prebid_bidder:r,...n})))),(0,c.bw)((()=>{Object.values(o).includes(null)||(e.logger.debug(I,`Cleaning up "bidRequested" listener for ${t.windowPropertyKey}`),t.pbjs.offEvent("bidRequested",s))})));t.pbjs.onEvent("bidRequested",s)};return p.Y3((()=>{const r=(0,n.zG)(t.pbjs.getEvents(),f.DZ((0,n.ls)(s.DT((e=>"bidRequested"===e.eventType)),s.UI((0,c.vg)("args")))));return(0,n.zG)(t.bidders.sspBidders,s.DT(f.Od),s.EQ((()=>e.logger.debug(I,"No bidders for targeting")),(0,n.ls)(i,(e=>({...e,...a(r,e)})),_.uK(h.ff((e=>null===e))),v.Pd((0,n.ls)(_.XP,s.DT(f.Od),s.UI(o)),_.Su(((r,n)=>k(e,{prebid_bidder:r,prebid_key:t.windowPropertyKey,...n})))))))}),g.w)}}),G=e=>{const[t,r,n]=e.version.split("-")[0].replace("v","").split(".").map((e=>parseInt(e)));return{major:t,minor:r,patch:n}},U="[monitoring][video_player]";function z(){return function(){const e={name:"brightcove",detect:()=>!!(window?.bc&&"object"==typeof window.bc||window?.brightcove&&"object"==typeof window.brightcove)};return[{name:"jwplayer",detect:()=>!(!window?.jwplayer||"function"!=typeof window.jwplayer||"function"!=typeof window.jwplayer().getConfig)},{name:"kaltura",detect:()=>!!(window?.KalturaPlayer&&"object"==typeof window.KalturaPlayer||window?.kWidget&&"object"==typeof window.kWidget)},e,{name:"videojs",detect:()=>!e.detect()&&!(!window?.videojs||"function"!=typeof window.videojs)}]}().reduce(((e,t)=>({...e,[t.name]:{name:t.name,result:t.detect()}})),{})}function D(e){return{data:e,error:void 0}}function C(e){return{data:void 0,error:e}}function x(e){return void 0===e.error}function O(){return{parse:e=>"string"==typeof e?D(e):C("Expected value to be a string, got "+typeof e)}}function M(e){return{parse:t=>{if(!(0,c.Kn)(t))return C("Expected value to be an object, got "+typeof t);return D(Object.keys(e).reduce(((r,n)=>{const i=e[n].parse(t[n]);return x(i)?{...r,[n]:i.data}:i}),{}))}}}function T(e){return{parse:t=>void 0===t?D(void 0):e.parse(t)}}function q(e){return{parse:t=>{if(!Array.isArray(t))return C("Expected an array, got "+typeof t);const r=t.map((t=>e.parse(t))),n=r.filter((e=>!x(e)));return n.length>0?n[0]:D(r.map((e=>e.data)))}}}function A(e,t){return{parse:r=>{const n=e.parse(r);if(x(n))return n;return t.parse(r)}}}function R(e){const t=window?.jwplayer?.()?.getConfig?.(),r=M({advertising:T(M({client:T(O()),bids:T(M({bidders:T(q(M({name:T(O())}))),settings:T(M({mediationLayerAdServer:T(O())}))})),schedule:T(A(O(),q(M({tag:T(O())}))))}))}).parse(t);return x(r)?r.data:(e.warn("JW Player properties could not be parsed",r.error),null)}function j(e,t){const{metrics:r}=e,o=e.logger.withPrefix(U);return r.isEnabled()&&Math.random()<.8?a.K4((()=>{(0,n.zG)(t.consent,i.UI((e=>{if(e){!function(e){e.track({name:"sdk_video_player_count_total",labels:{},value:1})}(r),z();const e=z();if(function(e,t,r){const n=Object.keys(e);r.debug("Currently detected video players:",n),Object.values(e).forEach((e=>{e.result&&t.track({name:"sdk_video_player_sdk_exists_count_total",labels:{video_player:e.name},value:1})}))}(e,r,o),e.jwplayer){const e=R(o);try{!function(e,t,r){if(!e)return r.warn("JW Player properties could not be parsed"),void t.track({name:"sdk_video_player_properties_parse_error_count_total",labels:{player:"jwplayer"},value:1});if(e.advertising&&(e.advertising.bids||e.advertising.schedule)){const i=e.advertising,a=i.client||void 0;r.debug("JW Player advertising configuration detected");const o=i.bids?.settings?.mediationLayerAdServer||void 0,c=(0,n.zG)(i.bids?.bidders,s.ij,s.UI((e=>e.filter((e=>e.name&&e.name.trim().length>0)).map((e=>e.name?.trim().slice(0,20))).join(","))),s.fS((()=>""))),u=i.schedule&&("string"==typeof i.schedule?[i.schedule]:i.schedule.map((e=>e.tag)))||[],l=u.map((e=>e.trim().slice(0,40))).join(",")||"";r.debug("JW Player advertising configuration found"),t.track({name:"sdk_video_player_jwplayer_advertising_count_total",labels:{client:a,schedule_tags:l,mediation_ad_server:o,bidders:c},value:1})}else r.debug("No JW Player advertising configuration detected"),t.track({name:"sdk_video_player_jwplayer_advertising_not_found_count_total",labels:{},value:1})}(e,r,o)}catch(e){o.error("Error tracking JW Player properties",e)}}o.debug(U,"Video player monitoring completed")}else o.debug(U,"No consent given, not tracking")})))})):(o.debug("Video player monitoring disabled or user not sampled"),a.K4((()=>{})))}const L=function(e,t){const r=(0,n.zG)(t.pbjs,i.VS((0,n.ls)(s.tS(s.KQ((e=>e.getUserIdsAsync?.().then((()=>e.getUserIdsAsEids?.()??[]))))),s.UI(i.p4),s.fS((()=>i.a9(s.YP))))),i.UI(s.tS(s.Uo)),i.bw(s.mU((t=>(t.length>0?t.forEach((t=>{e.metrics.trackCounter({name:"sdk_prebid_alternative_identifiers_count_total",labels:{alternative_user_id_name:t.source},value:1})})):e.metrics.trackCounter({name:"sdk_prebid_alternative_identifiers_count_total",labels:{identifier:"NONE"},value:1}),s.YP))))),o=(0,n.zG)(t.pbjs,i.UI(s.tS(s.KQ((e=>e.getUserIdsAsEids?.())))));return a.K4((()=>(0,n.zG)(i.vP(r,o),i.UI((e=>{let[t,r]=e;return(0,n.zG)(t,s.wp((()=>r)))})),i.UI((0,n.ls)(s.UI(f.DZ((e=>"string"==typeof e.uids?.[0]?.id?s.G((0,n.bc)(e.source,{id:e.uids[0].id})):s.YP))),s.tS(m.c2),s.UI(_.sq))),i.bw((t=>{s.pC(t)&&e.logger.debug("[Prebid Identifiers]","Found identifiers",t.value)})))))};const $=function(e){let{externalData:t}=e;return a.K4((()=>{t.removeExternalData(F)}))};const F="_pfws",B=new Set(["AdRequest","Reaction","PageviewEngagement","SegmentEntry","SegmentExit"]);class N{events;listeners;static highVolumeEvents=(()=>{const e=new Set([...B]);return e.delete("Reaction"),e})();constructor(){this.events=[],this.listeners=[]}newEvent(e,t){N.highVolumeEvents.has(e.name)||this.events.push([e,t]),[...this.listeners].forEach((r=>{this.handle(e,t,r)}))}addListener(e){this.listeners.push(e);const t={replay:()=>(this.replay(e),t),remove:()=>(this.remove(e),t)};return t}handle(e,t,r){const n="string"==typeof r.name&&e.name===r.name,i=r.name.test&&r.name.test(e.name),a=n||i;if(a)try{r.callback(e,t)}catch(e){window.console&&window.console.error&&window.console.error("callback error: ",e)}a&&r.once&&this.remove(r)}replay(e){let t=-1!==this.listeners.indexOf(e);for(let r=0;r<this.events.length&&t;r++)this.handle(this.events[r][0],this.events[r][1],e),t=-1!==this.listeners.indexOf(e)}remove(e){const t=this.listeners.indexOf(e);-1!==t&&this.listeners.splice(t,1)}}var K=r(4694),Y=r(2945);var Q=r(3643),H=r(132),W=r(7226);const V="[Event Upload]",J=(e,t,r,s)=>a.dQ((a=>{let{stopped:u,previousState:l}=a;Array.isArray(l)&&(0,n.zG)(l,f.UI((0,Q.H5)((0,c.rO)({event:(0,c.rO)({time:ae})}))),re(e))();const d=new Set([...B]),[g,{appendUntrackedEvents:m,appendUploadResults:h}]=(0,n.zG)((()=>{const[e,t]=i.gS(f.uZ()),[r,a]=i.gS(f.uZ());return(0,n.bc)({uploadResults:e,untrackedEvents:r},{appendUploadResults:t,appendUntrackedEvents:a})})(),(0,Q.pL)((0,n.ls)((function(e){const[t,r]=(0,n.zG)(e.uploadResults,ne(f.bj));return{...e,uploadResults:t,erroredEventsAsJSON:r}}),(function(e){const[t,r]=(0,n.zG)(e.erroredEventsAsJSON,ne(f.UI((0,Q.H5)((0,c.rO)({event:(0,c.rO)({time:e=>new Date(e)})})))));return{...e,erroredEventsAsJSON:t,erroredEvents:r}}),(function(e){let{uploadResults:t,untrackedEvents:r,...a}=e;const o=(0,n.zG)(t,i.UI(K.UI((0,n.ls)(f.hp,f.UI((0,Q.H5)((0,c.rO)({time:e=>new Date(e)}))))))),s=(0,n.zG)(i.vP(o,r),i.UI(K.RD),i.UI(K.UI((e=>{let[t,r]=e;return r.concat(t)}))));return{...a,successEvents:s}}),(function(e){const[t,r]=(0,n.zG)(e.successEvents,ne(f.UI((0,Q.H5)((0,c.rO)({time:e=>e.toISOString()})))));return{...e,successEvents:t,successEventsAsJSON:r}})))),[_,v]=i.Ue(0),[b,y]=i.Ue(0),w=(0,n.zG)(t,i.UI(K.UI((e=>(0,n.zG)(e,f.uK((e=>{let[,t]=e;return!d.has(t.event.name)})),(e=>{let{left:t,right:r}=e;return(0,n.zG)(t,f.UI((0,Q.H5)((e=>e.event))),m),r}))))),i.UI(K.UI((e=>(e.length>0&&((0,o.HJ)((()=>v(_.current+e.length)),500),(0,o.HJ)((()=>y(b.current+e.length)),5e3)),e))))),I=e=>t=>(0,n.zG)(e,f.hX((e=>{let[r]=e;return!t.closeEventsProcessed.includes(r)})),f.zo(t.queue)),S=(0,n.zG)(i.vP(_,b,w,r,u,s),i.Rp({closeEventsProcessed:f.cS,noQueueItemsProcessed:0,queue:f.cS},((t,r)=>{let[i,a,o,s,u,l]=r;return u?t:(0,n.zG)(t,(0,c.rO)({queue:f.zo(o())}),(t=>l?(0,n.zG)(t,(t=>r=>(0,n.zG)(r,I(t),te(e),(0,c.rO)({right:(0,c.bw)((0,n.ls)(f.UI((0,n.ls)((0,Q.H5)((0,c.rO)({time:e=>e.toISOString()})),p.F2)),h))}),(e=>{let{left:t,right:i}=e;return(0,n.zG)(r,(0,c.rO)({closeEventsProcessed:(0,n.zG)(i,f.UI(Q.li),f.zo),queue:(0,n.zG)(t.map(Q.li),(e=>new Set(e)),(e=>f.hX((t=>{let[r]=t;return e.has(r)})))),noQueueItemsProcessed:e=>e+r.queue.length}))})))(s)):a>t.noQueueItemsProcessed||i===t.noQueueItemsProcessed+t.queue.length?(t=>((0,n.zG)(t.queue,re(e),W.UI(h))(),{closeEventsProcessed:t.closeEventsProcessed,noQueueItemsProcessed:t.noQueueItemsProcessed+t.queue.length,queue:f.cS}))(t):t))}))),k=(0,n.zG)(r,i.UI(I),i.ap(S),i.D8(f.Eh({equals:(e,t)=>e[0]===t[0]})),i.UI(f.UI((0,Q.H5)((0,c.rO)({event:(0,c.rO)({time:ie})})))));return{state:k,value:g}})),X=(e,t)=>e.permutiveUrls.getEndpointUrl("/batch/events",s.G(e.config.apiVersion),[["enrich",JSON.stringify(t.requiresEnrichment)],["sdkp",JSON.stringify(t.sdkProcessed)]]),Z=e=>(0,n.zG)(e.events,f.UI((0,n.ls)(Q.Yg,(e=>e.event)))),ee=(0,n.ls)(m.vM((e=>{let[t,r]=e;return`${r.requiresEnrichment}${r.sdkProcessed}`})),(e=>Object.values(e)),f.UI((e=>({requiresEnrichment:e[0][1].requiresEnrichment,events:e,sdkProcessed:e[0][1].sdkProcessed})))),te=e=>(0,n.ls)(ee,f.YO("request"),f.Hr("success",(t=>{let{request:r}=t;return e.logger.debug(V,"Uploading via beacon",r),e.permutiveApi.reqWithBeacon({url:X(e,r),payload:Z(r)})})),f.tS((e=>(0,n.zG)(e.request.events,f.UI((t=>{let[r,{event:i}]=t;return e.success?p.F2((0,n.bc)(r,i)):p.t$((0,n.bc)(r,i))}))))),f.UI((0,c.bw)(p.EQ((t=>{let[,r]=t;return e.metrics.trackCounter({name:"sdk_event_beacon_fail_count_total",labels:{event_name:r.name},value:1})}),(t=>{let[,r]=t;return e.metrics.trackCounter({name:"sdk_event_beacon_success_count_total",labels:{event_name:r.name},value:1})})))),f.oh),re=e=>t=>(0,n.zG)(ee(t),W.uU((t=>(0,n.zG)(t,(e=>t=>(e.logger.debug(V,"Uploading",t),H.Y3((()=>e.permutiveApi.req({payload:Z(t),url:X(e,t),method:"POST",contentType:"text/plain",dataType:"json",withCredentials:!1})),(t=>(e.reportError(`Error sending events batch. Got ${p.KC(t)}`),t)))))(e),H.UI(f.UI((e=>e.body))),H.EQ((e=>(0,n.zG)(t.events,f.UI((()=>p.t$(e))))),f.UI(p.F2)),W.UI(f.$R(t.events))))),W.UI(f.tS(f.UI((t=>{let[r,[i,{event:a}]]=t;return(0,n.zG)(r,p.EQ((e=>p.t$((0,n.bc)(i,{event:{...a,time:a.time.toISOString()},error:e}))),(e=>"request_id"in e?p.t$((0,n.bc)(i,{event:{...a,time:a.time.toISOString()},error:e})):p.F2((0,n.bc)(i,{...a,id:e.id,time:e.time})))),(0,c.bw)(p.EQ((t=>{let[,{event:r}]=t;return e.metrics.trackCounter({name:"sdk_event_upload_fail_count_total",labels:{event_name:r.name},value:1})}),(t=>{let[,r]=t;return e.metrics.trackCounter({name:"sdk_event_upload_success_count_total",labels:{event_name:r.name},value:1})}))))}))))),ne=e=>t=>(0,n.zG)(t,i.En(2,f.uZ()),(0,Q.H5)(i.UI(K.UI(e)))),ie=e=>ae(e).toISOString(),ae=e=>{if(null==e)return new Date;if(oe(e))return e;const t=new Date(e);return oe(t)?t:new Date},oe=e=>isFinite(e)&&e instanceof Date,se=(e,t,r,o)=>(0,n.zG)(a.K4((()=>{const[e,t]=i.Ue(i.a9(K.of([])));return{eventsToPublishBufferRef:i.xH(e),publishEvents:r=>{(0,n.zG)(i.vP(e.current,r),i.UI(K.RD),i.UI(K.UI(f.xH)),t)}}})),a.ak("eventUpload",(t=>{let{eventsToPublishBufferRef:n}=t;return J(e,n,r,o)})),a.ak("eventHandler",(e=>{let{eventUpload:t}=e;return r=t.successEventsAsJSON,o=t.erroredEventsAsJSON,a.K4((()=>{const e=new N;return(0,n.zG)(r,i.UI((e=>e())),i.bw((t=>t.forEach((t=>{let[,r]=t;return e.newEvent(r,null)}))))),(0,n.zG)(o,i.UI((e=>e())),i.bw((t=>t.forEach((t=>{let[,{event:r,error:n}]=t;return e.newEvent(r,n)}))))),{eventHandlerAfterUpload:e}}));var r,o})),a.ak("eventResolver",(e=>{let{eventUpload:r}=e;return((e,t,r,o)=>a.K4((()=>{(0,n.zG)(i.vP({unresolvedEvents:t,erroredEvents:o,successEvents:r}),i.UI((0,Y.Yt)(K.G5)),i.Rp({},((e,t)=>{const r=t();return(0,n.zG)(r.unresolvedEvents,s.DT(f.Od),s.UI((0,n.ls)(_.sq,(t=>({...e,...t})))),s.fS((()=>e)),(e=>(0,n.zG)(r.successEvents,f.u4(e,((e,t)=>{let[r,i]=t;return(0,n.zG)(_.P5(r,e),s.UI((t=>(t.succeed(i),_.EG(r)(e)))),s.fS((()=>e)))})))),(e=>(0,n.zG)(r.erroredEvents,f.u4(e,((e,t)=>{let[r,{event:i,error:a}]=t;return(0,n.zG)(_.P5(r,e),s.UI((t=>(t.fail(`Failed to track ${i.name}. ${"error"in a?a.error.message:a.message}`),_.EG(r)(e)))),s.fS((()=>e)))})))))})))})))(0,t,r.successEvents,r.erroredEvents)})),a.UI((e=>{let{publishEvents:t,eventHandler:r}=e;return{eventHandlerAfterUpload:r.eventHandlerAfterUpload,publishEvents:t}}))),ce="_pnativo",ue=function(e){let{externalData:t}=e;return a.K4((()=>{t.removeExternalData(ce)}))};var le,de,fe,ge,pe,me=-1,he=function(e){addEventListener("pageshow",(function(t){t.persisted&&(me=t.timeStamp,e(t))}),!0)},_e=function(){var e=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},ve=function(){var e=_e();return e&&e.activationStart||0},be=function(e,t){var r=_e(),n="navigate";return me>=0?n="back-forward-cache":r&&(document.prerendering||ve()>0?n="prerender":document.wasDiscarded?n="restore":r.type&&(n=r.type.replace(/_/g,"-"))),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:n}},ye=function(e,t,r){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var n=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return n.observe(Object.assign({type:e,buffered:!0},r||{})),n}}catch(e){}},we=function(e,t,r,n){var i,a;return function(o){t.value>=0&&(o||n)&&((a=t.value-(i||0))||void 0===i)&&(i=t.value,t.delta=a,t.rating=function(e,t){return e>t[1]?"poor":e>t[0]?"needs-improvement":"good"}(t.value,r),e(t))}},Ie=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},Se=function(e){document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&e()}))},ke=function(e){var t=!1;return function(){t||(e(),t=!0)}},Ee=-1,Pe=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},Ge=function(e){"hidden"===document.visibilityState&&Ee>-1&&(Ee="visibilitychange"===e.type?e.timeStamp:0,ze())},Ue=function(){addEventListener("visibilitychange",Ge,!0),addEventListener("prerenderingchange",Ge,!0)},ze=function(){removeEventListener("visibilitychange",Ge,!0),removeEventListener("prerenderingchange",Ge,!0)},De=function(){return Ee<0&&(Ee=Pe(),Ue(),he((function(){setTimeout((function(){Ee=Pe(),Ue()}),0)}))),{get firstHiddenTime(){return Ee}}},Ce=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},xe=[1800,3e3],Oe=[.1,.25],Me=function(e,t){t=t||{},function(e,t){t=t||{},Ce((function(){var r,n=De(),i=be("FCP"),a=ye("paint",(function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(a.disconnect(),e.startTime<n.firstHiddenTime&&(i.value=Math.max(e.startTime-ve(),0),i.entries.push(e),r(!0)))}))}));a&&(r=we(e,i,xe,t.reportAllChanges),he((function(n){i=be("FCP"),r=we(e,i,xe,t.reportAllChanges),Ie((function(){i.value=performance.now()-n.timeStamp,r(!0)}))})))}))}(ke((function(){var r,n=be("CLS",0),i=0,a=[],o=function(e){e.forEach((function(e){if(!e.hadRecentInput){var t=a[0],r=a[a.length-1];i&&e.startTime-r.startTime<1e3&&e.startTime-t.startTime<5e3?(i+=e.value,a.push(e)):(i=e.value,a=[e])}})),i>n.value&&(n.value=i,n.entries=a,r())},s=ye("layout-shift",o);s&&(r=we(e,n,Oe,t.reportAllChanges),Se((function(){o(s.takeRecords()),r(!0)})),he((function(){i=0,n=be("CLS",0),r=we(e,n,Oe,t.reportAllChanges),Ie((function(){return r()}))})),setTimeout(r,0))})))},Te=0,qe=1/0,Ae=0,Re=function(e){e.forEach((function(e){e.interactionId&&(qe=Math.min(qe,e.interactionId),Ae=Math.max(Ae,e.interactionId),Te=Ae?(Ae-qe)/7+1:0)}))},je=function(){return le?Te:performance.interactionCount||0},Le=function(){"interactionCount"in performance||le||(le=ye("event",Re,{type:"event",buffered:!0,durationThreshold:0}))},$e=[],Fe=new Map,Be=0,Ne=[],Ke=function(e){if(Ne.forEach((function(t){return t(e)})),e.interactionId||"first-input"===e.entryType){var t=$e[$e.length-1],r=Fe.get(e.interactionId);if(r||$e.length<10||e.duration>t.latency){if(r)e.duration>r.latency?(r.entries=[e],r.latency=e.duration):e.duration===r.latency&&e.startTime===r.entries[0].startTime&&r.entries.push(e);else{var n={id:e.interactionId,latency:e.duration,entries:[e]};Fe.set(n.id,n),$e.push(n)}$e.sort((function(e,t){return t.latency-e.latency})),$e.length>10&&$e.splice(10).forEach((function(e){return Fe.delete(e.id)}))}}},Ye=function(e){var t=self.requestIdleCallback||self.setTimeout,r=-1;return e=ke(e),"hidden"===document.visibilityState?e():(r=t(e),Se(e)),r},Qe=[200,500],He=function(e,t){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(t=t||{},Ce((function(){var r;Le();var n,i=be("INP"),a=function(e){Ye((function(){e.forEach(Ke);var t=function(){var e=Math.min($e.length-1,Math.floor((je()-Be)/50));return $e[e]}();t&&t.latency!==i.value&&(i.value=t.latency,i.entries=t.entries,n())}))},o=ye("event",a,{durationThreshold:null!==(r=t.durationThreshold)&&void 0!==r?r:40});n=we(e,i,Qe,t.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),Se((function(){a(o.takeRecords()),n(!0)})),he((function(){Be=je(),$e.length=0,Fe.clear(),i=be("INP"),n=we(e,i,Qe,t.reportAllChanges)})))})))},We=[2500,4e3],Ve={},Je={passive:!0,capture:!0},Xe=new Date,Ze=function(e,t){de||(de=t,fe=e,ge=new Date,rt(removeEventListener),et())},et=function(){if(fe>=0&&fe<ge-Xe){var e={entryType:"first-input",name:de.type,target:de.target,cancelable:de.cancelable,startTime:de.timeStamp,processingStart:de.timeStamp+fe};pe.forEach((function(t){t(e)})),pe=[]}},tt=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var r=function(){Ze(e,t),i()},n=function(){i()},i=function(){removeEventListener("pointerup",r,Je),removeEventListener("pointercancel",n,Je)};addEventListener("pointerup",r,Je),addEventListener("pointercancel",n,Je)}(t,e):Ze(t,e)}},rt=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,tt,Je)}))},nt=[100,300];const it=function(e){let t=0;const r=r=>{if(0===t)return;const n=at(r);n&&e.metrics.track({name:`sdk_web_vitals_${n.suffix}`,labels:{},value:n.value})},o=(0,c.HP)((()=>{Me(r),function(e,t){t=t||{},Ce((function(){var r,n=De(),i=be("LCP"),a=function(e){t.reportAllChanges||(e=e.slice(-1)),e.forEach((function(e){e.startTime<n.firstHiddenTime&&(i.value=Math.max(e.startTime-ve(),0),i.entries=[e],r())}))},o=ye("largest-contentful-paint",a);if(o){r=we(e,i,We,t.reportAllChanges);var s=ke((function(){Ve[i.id]||(a(o.takeRecords()),o.disconnect(),Ve[i.id]=!0,r(!0))}));["keydown","click"].forEach((function(e){addEventListener(e,(function(){return Ye(s)}),!0)})),Se(s),he((function(n){i=be("LCP"),r=we(e,i,We,t.reportAllChanges),Ie((function(){i.value=performance.now()-n.timeStamp,Ve[i.id]=!0,r(!0)}))}))}}))}(r),function(e,t){t=t||{},Ce((function(){var r,n=De(),i=be("FID"),a=function(e){e.startTime<n.firstHiddenTime&&(i.value=e.processingStart-e.startTime,i.entries.push(e),r(!0))},o=function(e){e.forEach(a)},s=ye("first-input",o);r=we(e,i,nt,t.reportAllChanges),s&&(Se(ke((function(){o(s.takeRecords()),s.disconnect()}))),he((function(){var n;i=be("FID"),r=we(e,i,nt,t.reportAllChanges),pe=[],fe=-1,de=null,rt(addEventListener),n=a,pe.push(n),et()})))}))}(r),He(r)}));return a.K4((r=>{let{stopped:a}=r;t++,(0,n.zG)(a,i.YP((e=>{e&&t--}))),e.metrics.isEnabled()&&o()}))};const at=e=>(e=>"CLS"===e.name)(e)?{value:e.value,suffix:`${e.name.toLowerCase()}_score`}:(e=>["INP","FID","LCP"].includes(e.name))(e)?{value:e.value/1e3,suffix:`${e.name.toLowerCase()}_seconds`}:void 0;var ot=r(5870);const st=(e,t)=>{const{activationManager:r,externalData:o,metrics:s,permutiveData:c}=e;return(0,n.zG)(a.of({}),a.ak("psegs",(()=>((e,t)=>a.K4((r=>{let{stopped:a}=r;const o="_psegs";(0,n.zG)(i.vP(t,a),i.YP((t=>{let[r,i]=t;i||(0,n.zG)(r,f.EQ((()=>e.removeExternalData(o)),(t=>e.setExternalJsonData(o,t))))})))})))(e.externalData,t.qlSegments))),a.ak("webVitals",(()=>it(e))),a.ak("nativo",(()=>ue({activationManager:r,externalData:o,metrics:s,queryLanguageCohorts:t.qlSegments,...t}))),a.ak("twitterPixel",(()=>(0,ot.eJ)({activationManager:r,metrics:s,permutiveData:c,queryLanguageCohorts:t.qlSegments,...t}))),a.ak("prebidJS",(()=>(0,w.dN)(e))))};var ct=r(3997);const ut=()=>{const[e,t]=i.gS(f.uZ());return{trackEvent:e=>{let r,n,{event:i,useBeacon:a}=e;const o=new Promise(((e,t)=>{r=e,n=t}));return t([{localId:(0,c.k$)(),event:i,fail:n,succeed:r,useBeacon:a}]),o},trackedEvents:e}};var lt=r(951);const dt="_ppsts",ft=function(e,t,r){return a.dQ((a=>{let{previousState:o}=a;const u=(0,n.ls)(s.UI((e=>e.topics)),s.hX((e=>Object.keys(e).length>0)),s.UI(_t),s.EQ((()=>e.externalData.removeExternalData(dt)),(t=>e.externalData.setExternalJsonData(dt,t))));return(0,n.zG)(i.vP({consent:r,sessionId:t}),i.Rp((l=o,(0,n.zG)(l,s.DT((e=>Boolean(e&&"object"==typeof e))),s.UI((0,c.rO)({topics:e=>i.a9(s.of(e))})))),((t,r)=>(0,n.zG)(r,s.DT((e=>{let{consent:t}=e;return t})),s.UI((r=>{let{sessionId:a}=r;return(0,n.zG)(t,s.hX((e=>e.sessionId===a)),s.fS((()=>({sessionId:a,topics:i.fF(gt(e))}))))}))))),i.VS(s.EQ((()=>i.a9(s.YP)),(e=>(0,n.zG)(e.topics,i.UI(s.UI((t=>({topics:t,sessionId:e.sessionId})))))))),i.bw(u),(e=>({state:(0,n.zG)(e,i.UI(s.FS)),value:{replacementMap:(0,n.zG)(e,i.UI(s.UI((e=>({$privacy_sandbox_topics_v2:e.topics[2]??[]})))))}})));var l}))};const gt=e=>(0,n.zG)(H.Do,H.Hr("span",(()=>e.trace.startSpan("topics_data_retrieval"))),H.ak("message",(()=>H.Y3(pt,(e=>e)))),H.At((e=>{let{span:t}=e;return t.finish})),H.EQ((t=>(e.api.reportError(`Error while registering the topics enricher: got ${t}`),{})),(e=>{let{message:t}=e;return mt(t.value??[])}))),pt=()=>{if(!("browsingTopics"in document))return Promise.resolve({value:void 0});const e="https://cdn.permutive.app/topics.html",t=new URL(e).origin,r=document.createElement("iframe");r.src=e,r.style.display="none",r.browsingtopics=!0;const n=(0,o.t_)(new Promise(((e,n)=>{window.addEventListener("message",(i=>{i.source===r.contentWindow&&i.origin===t&&(i.data.error?n(i.data.error):e(i.data))}))})));return document.body.appendChild(r),n},mt=e=>(0,n.zG)(e,m.vM((e=>e.taxonomyVersion)),lt.UI((e=>e.map((e=>e.topic))))),ht={1:"600",2:"601"},_t=e=>Object.entries(e).reduce(((e,t)=>{let[r,n]=t;return r in ht&&(e[ht[r]]=n),e}),{});var vt=r(295),bt=r(8493),yt=r(6289);r(7125);const wt=e=>[e,W.of(e)],It=Q.li,St=Q.Yg,kt=e=>wt(p.F2(e)),Et="RefEventual",Pt=e=>t=>i.vP((0,n.zG)(t,i.UI(It),i.UI(e)),(0,n.zG)(t,i.UI(St),i.UI(W.UI(e)))),Gt=e=>t=>i.vP((0,n.zG)(i.vP((0,n.zG)(e,i.UI(It)),(0,n.zG)(t,i.UI(It))),i.UI((e=>{let[t,r]=e;return r(t)}))),(0,n.zG)(i.vP((0,n.zG)(e,i.UI(St)),(0,n.zG)(t,i.UI(St))),i.UI((e=>{let[t,r]=e;return W.ap(t)(r)})))),Ut={URI:Et,map:(e,t)=>Pt(t)(e)},zt={URI:Et,map:Ut.map,ap:(e,t)=>Gt(t)(e)},Dt=e=>i.a9(kt(e));p.dO,p.G5,Dt(f.bM()),(0,c.mQ)((e=>s.YP));var Ct=r(229);const xt=()=>({equals:(e,t)=>JSON.stringify(e)===JSON.stringify(t)}),Ot=e=>{let{consent:t,pageviewProperties:r,pageUrl:a,permutiveApi:o,permutiveUrls:c,viewId:u}=e;const l=(0,n.zG)(r,i.UI(s.NG((e=>e.client?.url))),i.D8(s.Eh(Ct.Eq))),d=(0,n.zG)(u,i.VS((()=>i.fF(a))),i.D8(s.Eh(Ct.Eq))),f=(0,n.zG)(i.vP(l,d),i.UI((e=>{let[t,r]=e;return(0,n.zG)(t,s.wp((()=>r)))})),i.D8(s.Eh(Ct.Eq))),g=(0,n.zG)(i.vP(t,f),i.VS((e=>{let[t,r]=e;return t?(0,n.zG)(r,s.UI((0,n.ls)(Tt(o,c),W.UI(p.fS((()=>Mt()))),i.fF)),s.fS((()=>i.a9(s.bM())))):i.fF(W.of(Mt()))})),i.D8(s.Eh(xt())));return(0,n.zG)(i.vP(f,r,g,t),i.UI((e=>{let[t,r,i,a]=e;return(0,n.zG)((0,Y.gz)(s.g1)(t,r,i,s.lo(a)),s.hX((e=>{let[t,r,n]=e;return n.requires_segmentation})),s.UI((e=>{let[t,r]=e;return{url:t,page_properties:r}})))})),i.D8(s.Eh(xt())),i.UI(s.UI(qt(o,c))),i.YP(s.UI((e=>e())))),{contextualAddon:s.YP,response:(0,n.zG)(g,i.UI(s.UI((e=>{let{requires_segmentation:t,...r}=e;return r}))))}},Mt=()=>({activations:{},cohorts:[],contextual_data:{classifications:{}},requires_segmentation:!1}),Tt=(e,t)=>r=>H.Y3((()=>e.req({url:t.getEndpointUrl("/ctx/v1/state",s.YP,[["url",r]]),method:"GET",dataType:"json",withCredentials:!1})),(e=>`Failed to GET contextual data: ${e}`)),qt=(e,t)=>r=>H.Y3((()=>e.req({url:t.getEndpointUrl("/ctx/v1/segment",s.YP),method:"POST",payload:r,contentType:"text/plain",dataType:"json",withCredentials:!1})),(e=>`Failed to GET contextual data: ${e}`)),At=e=>({enrichedEvents:(0,n.zG)(e.events,i.UI(K.UI(f.UI(jt)))),replacementMap:(0,n.zG)(e.contextualData,i.UI(s.UI((e=>({[Lt]:e})))))}),Rt=["Pageview","PageviewEngagement"],jt=e=>Rt.includes(e.event.name)?{...e,event:{...e.event,properties:{...e.event.properties,contextual:Lt}}}:e,Lt="$contextual",$t=e=>{const[t,r]=(0,n.zG)(e.events,i.En(2,f.uZ())),a=(0,n.zG)(Ft(e.viewId,r),i.UI(s.UI((e=>e.properties)))),{contextualAddon:o,response:c}=(u={...e,pageviewProperties:a},Ot(u));var u;const l=i.D8(s.Eh(f.Eh(Ct.Eq))),d=(0,n.zG)(c,i.UI(s.UI((e=>e.contextual_data))),i.D8(xt())),{enrichedEvents:g,replacementMap:p}=(e=>At(e))({events:t,contextualData:d});return{activations:{gam:(0,n.zG)(c,i.UI(s.UI((e=>e.activations?.target_dfp??[]))),l),xandr:(0,n.zG)(c,i.UI(s.UI((e=>e.activations?.appnexus_adserver??[]))),l),adswizz_keyvalue:(0,n.zG)(c,i.UI(s.UI((e=>e.activations?.adswizz_keyvalue??[]))),l)},cohorts:(0,n.zG)(c,i.UI(s.UI((e=>e.cohorts??[]))),l),contextualAddon:o,data:d,enrichedEvents:g,replacementMap:p}},Ft=(e,t)=>{const r=(0,n.zG)(t,i.UI((e=>(0,n.zG)(e(),f.dF((e=>"Pageview"===e.event.name))))),i.u4(((e,t)=>(0,n.zG)(t,s.wp((()=>e))))),i.UI(s.UI((e=>e.event))));return(0,n.zG)(i.vP(e,r),i.UI((e=>{let[t,r]=e;return(0,n.zG)(r,s.hX((e=>e.view_id===t)))})))},Bt=e=>{const t=e=>{if("number"==typeof e&&!Number.isNaN(e))return e;throw new Error("Received unexpected "+(Number.isNaN(e)?"NaN":"type "+typeof e))},r=e=>Math.max(0,t(e)/1e3);return{compressed:!!e.decodedBodySize&&e.decodedBodySize!==e.encodedBodySize,decoded_body_size:t(e.decodedBodySize),dns_lookup_duration:r(e.domainLookupEnd-e.domainLookupStart),encoded_body_size:t(e.encodedBodySize),fetch_duration:r(e.responseEnd-e.fetchStart),fetch_end:r(e.responseEnd),fetch_start:r(e.fetchStart),redirect_duration:r(e.redirectEnd-e.redirectStart),request_duration:r(e.responseStart-e.requestStart),retrieved:Nt(e),service_worker_duration:r(0===e.workerStart?0:e.fetchStart-e.workerStart),start_time:r(e.startTime),tcp_handshake_duration:r(e.connectEnd-e.connectStart),total_duration:r(e.duration),tls_negotiation:r(e.requestStart-e.secureConnectionStart),transfer_duration:r(e.responseEnd-e.requestStart),transfer_size:t(e.transferSize)}},Nt=e=>0===e.transferSize?"cache":e.transferSize>e.encodedBodySize?"network":"revalidate";s.YP,i.a9(s.YP),i.a9([]),i.a9([]),i.a9([]),i.a9(ct.b()),i.a9(s.YP),i.a9({segmentsEntered:[],segmentsExited:[]}),i.a9(!1),i.a9((e=>{let{event:t}=e;return Promise.resolve(t)})),new N,i.a9(s.YP),i.a9(!1);function Kt(e,t,r){const{addonsLoaded:u,consent:l,currentTimestampSecs:d,enabledAddons:g,identities:h,sdkVariant:_,sessionId:v,userId:b,userIdIsNewlyGenerated:y,viewId:w,pageviewState:I}=t,[S,k]=(0,n.zG)(i.Ue(i.a9(f.cS)),(e=>{let[t,r]=e;return[i.xH(t),r]})),P=s.ij(e.permutiveData.getData("event-source-id")),G=(0,n.zG)(b,i.Rp(-1,(e=>e+1)),i.UI((t=>(0,n.zG)(P,s.hX((()=>0===t)),s.fS((()=>{const t=(0,c.k$)();return e.permutiveData.setData("event-source-id",t),t}))))));return(0,n.zG)(a.vP({computeTimeMetrics:(U=e.metrics,a.K4((e=>{let{stopped:t}=e;const r=(0,o.HJ)((()=>{(0,n.zG)((0,o.iE)(),(0,c.bw)((()=>(0,o.ho)(!1))),f.UI((e=>{let[t,r]=e;return(r-t)/1e3})),(e=>{U.track({name:"sdk_ui_thread_compute_first10s_total_seconds",value:e.reduce(((e,t)=>e+t),0),labels:{}}),U.track({name:"sdk_ui_thread_compute_first10s_total_task_overrun_seconds",value:(0,n.zG)(e,f.hX((e=>e>.05)),f.UI((e=>e-.05)),f.u4(0,((e,t)=>e+t))),labels:{}}),U.track({name:"sdk_ui_thread_compute_first10s_longest_task_seconds",value:Math.max(0,...e),labels:{}})}))}),1e4);(0,n.zG)(t,i.YP((e=>e&&r())))}))),privacySandboxTopics:ft(e,v,l)}),a.UI((t=>{const{reset:r,trackEvent:a,trackedEvents:o}=((e,t)=>{const[r,a]=i.Ue(0),o=(0,n.zG)(i.vP(r,t),i.UI((()=>[]))),s=(0,n.zG)(i.vP(o,e),i.D8(((e,t)=>{let[,r]=e,[,n]=t;return r===n})),i.UI((e=>{let[t]=e;const r=ut();return t.forEach(r.trackEvent),r})));return{reset:()=>a(r.current+1),trackEvent:(0,n.zG)(i.vP(s,o),i.UI((e=>{let[t,r]=e;return e=>(r.push(e),t.trackEvent(e))}))),trackedEvents:(0,n.zG)(s,i.VS((e=>e.trackedEvents)))}})(b,w),{enrichedEvents:s,...c}=(e=>$t(e))({consent:l,events:o,logger:e.logger,pageUrl:(0,n.zG)((()=>e.clientContext.getClientAsync()),W.UI((e=>e.url))),permutiveApi:e.permutiveApi,permutiveUrls:e.permutiveUrls,viewId:w}),[u,d,g]=(0,n.zG)(s,i.En(3,f.uZ()));return{...t,contextual:c,reset:r,trackEvent:a,unresolvedEvents:(0,n.zG)(u,i.UI(K.UI(f.UI((e=>(0,n.bc)(e.localId,{fail:e.fail,succeed:e.succeed})))))),eventsToProcessLocally:(0,n.zG)(d,i.UI(K.UI(f.hX((e=>!e.useBeacon))))),eventsToUploadViaBeacon:(0,n.zG)(g,i.UI(K.UI(f.hX((e=>e.useBeacon)))))}})),a.ak("eventPublication",(r=>{let{unresolvedEvents:n}=r;return se(e,n,S,t.sdkClosing)})),a.Hr("enrichmentReplacementMap",(e=>{let{contextual:t,privacySandboxTopics:r}=e;return(0,n.zG)(i.vP(t.replacementMap,r.replacementMap),i.UI((e=>{let[t,r]=e;return(0,Y.gz)(s.g1)(t,r)})),i.UI(s.UI((e=>{let[t,r]=e;return{...t,...r}}))))})),a.ak("core",(o=>{let{contextual:c,enrichmentReplacementMap:u,eventPublication:g,eventsToProcessLocally:p}=o;return(0,n.zG)(r({contextualCohorts:(0,n.zG)(i.vP(c.cohorts,c.activations.gam,c.activations.xandr,c.activations.adswizz_keyvalue),i.UI(s.RD),i.UI(s.UI((e=>{let[t,r,n,i]=e;return{all:t,gam:r,xandrSsp:n,adswizz_keyvalue:i}})))),consent:l,currentTimestampSecs:d,enrichmentReplacementMap:u,eventSourceId:G,identities:h,newEvents:(0,n.zG)(p,i.UI(K.UI(f.UI((e=>(0,n.bc)(e.localId,e.event)))))),sessionId:v,userId:b,userIdIsNewlyGenerated:y,viewId:w,webClient:t.webClient,pageviewState:I}),a.bw((e=>{let{eventsToPublish:t}=e;return(0,n.zG)(t,i.UI(K.UI(Yt)),g.publishEvents)})),a.bw((e=>{let{eventsToPublishOnPageUnload:t}=e;return(0,n.zG)(t,i.UI(Yt),k)})),a.bw((t=>{let{externalData:r}=t;return(0,n.zG)(r,i.UI((t=>(0,n.zG)(Object.entries(t),f.UI((t=>{let[r,i]=t;return(0,n.zG)(i,s.EQ((()=>e.externalData.removeExternalData(r)),(t=>e.externalData.setExternalJsonData(r,t))))}))))))})),a.bw((t=>{let{context:r}=t;return(0,n.zG)(r,i.UI((t=>{const r=Object.entries(t);e.clientContext.updateContext(...r)})))})))})),a.bw((e=>{let{core:r,eventPublication:a,eventsToUploadViaBeacon:o}=e;return(0,n.zG)(i.vP({cohorts:r.cohorts.all,eventsIO:o,segments:r.cohorts.ql,sessionId:v,userId:b,viewId:w,webClient:t.webClient}),i.UI((e=>{let{webClient:t,...r}=e;return(0,n.zG)(t,s.UI((e=>({...r,webClient:e}))))})),i.UI(s.EQ((()=>K.of(f.bM())),(e=>{let{cohorts:t,eventsIO:r,segments:i,sessionId:a,userId:o,viewId:s,webClient:c}=e;return(0,n.zG)(r,K.UI(f.UI((e=>{let{event:r,localId:u}=e;return(0,n.bc)(u,{requiresEnrichment:!0,sdkProcessed:!1,event:{user_id:o,name:r.name,segments:i,cohorts:t,properties:{...r.properties,client:{...c,...r.properties.client??{}}},session_id:a,time:new Date,view_id:s}})}))))}))),a.publishEvents)})),a.ak("metricContext",(e=>{let{core:r}=e;return(0,n.zG)(r.geoIP,i.UI(s.tS((e=>s.ij(e.geo_info)))),(e=>ct.X({geoInfo:e,sampleRate:t.metricSampleRate,sdkVariant:_,sessionId:v,userId:b,viewId:w})))})),a.ak("sdkql",(t=>{let{core:r}=t;return st(e,{addonsLoaded:u,consent:l,initdAddons:g,qlSegments:r.cohorts.ql})})),a.ak("strategicPartnerships",(t=>{let{sdkql:r}=t;return((e,t)=>a.vP({prebid_identifiers:L(e,t)}))(e,{pbjs:(0,n.zG)(r.prebidJS,i.UI((e=>(0,n.zG)(e.mainPair,s.UI((e=>e.pbjs))))))})})),a.ak("mediaAndEntertainment",(t=>{let{core:r}=t;return((e,t)=>(0,n.zG)(a.vP({freewheel:$({activationManager:e.activationManager,externalData:e.externalData,...t})}),a.UI((0,n.a9)({}))))(e,{addonsLoaded:u,consent:l,initdAddons:g,queryLanguageCohorts:r.cohorts.ql})})),a.ak("advertisers",(t=>{let{sdkql:r}=t;return((e,t)=>(0,n.zG)(a.of(t),a.ak("prebidMonitoring",(t=>{let{consent:r,prebidJS:n}=t;return E(e,i.vP({consent:r,prebidJS:n}))})),a.ak("videoPlayerMonitoring",(t=>{let{consent:r}=t;return j(e,{consent:r})})),a.UI(n.Q1)))(e,{consent:l,prebidJS:r.prebidJS})})),a.ak("identityManager",(t=>{let{core:r}=t;return(0,vt.u6)({...e,consent:l,tcfApiStatus:(0,bt.SD)(window,e.logger).tcfApiStatusRef,currentTimestampSecs:d,geoIP:r.geoIP},h)})),a.bw((function(){(0,n.zG)((0,Y.gz)(s.G5)(e.performance,(0,n.zG)(t.currentScript,s.UI((e=>e.src)),s.hX((e=>"string"==typeof e)))),s.UI((r=>{let[i,a]=r;var o;(o={consent:t.consent,logger:e.logger,metrics:e.metrics,name:a,performance:i}).consent.current&&o.metrics.isEnabled()&&(0,n.zG)(m.nI(o.performance.getEntriesByName(o.name,"resource")),s.UI(m.YM),s.hX((e=>self.PerformanceResourceTiming&&e instanceof self.PerformanceResourceTiming)),s.fX((e=>p.Y3((()=>Bt(e)),(0,c.bw)((t=>o.logger.warn("[resource timing] Failed to compute labels",{error:t,entry:e})))))),s.UI((e=>{const{total_duration:t,...r}=e;o.metrics.track({name:"sdk_resource_timing_seconds",value:t,labels:{...r,name:o.name}})})))})))})),a.UI((e=>{let{core:t,contextual:r,metricContext:n,sdkql:a,trackEvent:o,eventPublication:s,strategicPartnerships:c,identityManager:u,reset:l}=e;return{activations:{dfp:i.UI((e=>e.dfp),t.activations),dfp_contextual:i.UI((e=>e.dfp_contextual),t.activations),xandr_ssp:i.UI((e=>e.xandr_ssp),t.activations),xandr_ssp_contextual:i.UI((e=>e.xandr_ssp_contextual),t.activations),adswizz_keyvalue:i.UI((e=>e.adswizz_keyvalue),t.activations),adswizz_keyvalue_contextual:i.UI((e=>e.adswizz_keyvalue_contextual),t.activations)},addons:{contextual:r.contextualAddon,identityManager:u,secureSignal:t.secureSignal},metricContext:n,pbjsPair:i.UI((e=>e.mainPair),a.prebidJS),queryLanguageCohorts:{all:t.cohorts.ql,custom:t.cohorts.qlCustom,standard:t.cohorts.qlStandard},segmentTransitionsSinceInit:t.transitionsSinceInit,trackEvent:o,realtime:t.realtime,eventHandlerAfterUpload:s.eventHandlerAfterUpload,prebidIdentifiers:c.prebid_identifiers,reset:l,stateMigratedThisInitialisation:t.stateMigratedThisInitialisation}})));var U}const Yt=f.UI((0,Q.H5)((e=>({event:e,requiresEnrichment:!1,sdkProcessed:!0}))));function Qt(e){return(0,n.ls)((0,c.rO)({previousState:e=>{if("string"!=typeof e)return{};try{return JSON.parse(e)}catch{return{}}}}),e,(0,c.rO)({state:i.UI(JSON.stringify)}))}function Ht(e){const t=function(e){const{activationManager:t,api:r,clientContext:n,config:i,externalData:a,logger:o,metrics:c,permutiveData:u,network:l,urls:d,namespace:f,trace:g}=e;return{activationManager:t,api:r,clientContext:n,config:i,externalData:a,logger:o,metrics:c,performance:s.ij(self.performance),permutiveData:u,permutiveApi:l,permutiveUrls:d,reportError:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.reportError(e,t?.userId,t?.timestamp)},namespace:f,trace:g}}(e),r=function(e){const t={addonsLoaded:e.addonsLoaded,currentScript:e.currentScript,consent:(r=e.consentTracking,(0,n.zG)(r,s.EQ((()=>i.a9(!0)),(e=>e.consentRef)))),currentTimestampSecs:l(),enabledAddons:u(e),identities:e.identities,sdkClosing:d(),metricSampleRate:e.config.metricsSamplingPercentage/100,sdkVariant:s.ij(e.sdkVariant),sessionId:i.a9(e.sessionManager.getSessionId()),userId:e.userId.ref,userIdIsNewlyGenerated:e.userId.isNewlyGenerated,viewId:e.viewId.ref,pageviewState:e.pageviewState,webClient:e.webClient};var r;return t}(e);return function(e,t,r,s){const u=5e3,l=(0,n.zG)(e,function(e,t){return r=>a=>{const{value:s,state:c}=r(a),[u,l]=i.Ue(c.current),d=(0,o.UM)((()=>l(c.current)),e),f=(0,n.zG)(i.vP(c,u),i.UI((e=>{let[t,r]=e;return t===r})));return(0,n.zG)(t,i.bw((e=>e&&d()))),{value:(0,n.bc)(f,s),state:(0,n.zG)(i.vP(t,c,u),i.UI((e=>{let[t,r,n]=e;return t?r:n})))}}}(u,s),Qt,function(e){return t=>(0,n.ls)((0,c.rO)({previousState:t=>e.current?t:void 0}),t,(0,c.rO)({state:(0,n.ls)((t=>i.vP(e,t)),i.UI((e=>{let[t,r]=e;return t?r:void 0})))}))}(r),function(e){return t=>(0,n.ls)((0,c.rO)({previousState:()=>localStorage.getItem(e)}),t,(0,c.rO)({state:(0,c.bw)(i.YP((t=>{switch(typeof t){case"string":localStorage.setItem(e,t);break;case"undefined":localStorage.removeItem(e);break;case"object":if(null===t){localStorage.removeItem(e);break}throw new Error("Permutive app raised an invalid state.");default:throw new Error("Permutive app raised an invalid state.")}})))}))}(t),a.UI((e=>{let[t,r]=e;return r})));return l({stopped:i.a9(!1)}).value}(Kt(t,r,e.core),e.namespace.getNamespacedStorageKey("permutive-app"),r.consent,r.sdkClosing)}},8972:(e,t,r)=>{r.d(t,{B9:()=>p,iq:()=>d,ti:()=>h});var n=r(5654),i=r(842),a=r(7144),o=r(8236),s=r(2169),c=r(1822),u=r(4085);const l="__permutive.",d="__permutiveConfigQueryParams";const f={default:{windowKey:"permutive",environment:"default",apiHost:"api.permutive.com",apiKey:"",apiProtocol:"https",cdnBaseUrl:"cdn.permutive.com",cdnProtocol:"https",pxidHost:"prmutv.co",apiVersion:"v2.0",sdkErrorsApiVersion:"v2",advertiserApiVersion:"v2",classificationModelsApiVersion:"v1",loggingEnabled:!1,tracingEnabled:!1,requestTimeout:5e3,cookieDomain:"."+(0,u._Y)(window.location.hostname),cookieName:"permutive-id",cookieExpiry:function(){const e=new Date;return e.setMonth(e.getMonth()+6),e.toUTCString()}(),eventsTTLInDays:null,permutiveDataMiscKey:"permutive-data-misc",permutiveDataQueriesKey:"permutive-data-queries",stateNamespace:"",sendClientErrors:!0,metricsSamplingPercentage:20,eventsCacheLimitBytes:25e5,segmentSyncApiHost:"4b91477e-f67b-4d81-86db-a9742bd41e9c.partner.permutive.app",consentRequired:!1,sdkType:"stable",viewId:null,localStorageDebouncedKeys:[],localStorageWriteDelay:1e3,localStorageWriteMaxDelay:1500,watson:{enabled:!0},secureSignalsApiHost:"secure-signals.permutive.app",prebidAuctionsRandomDownsamplingThreshold:0},production:{},development:{apiProtocol:"http",loggingEnabled:!0,tracingEnabled:!0,sendClientErrors:!1}},g=e=>{const t={consentRequired:!0,loggingEnabled:!0,sendClientErrors:!0,tracingEnabled:!0},r={eventsTTLInDays:!0,eventsCacheLimitBytes:!0,metricsSamplingPercentage:!0,requestTimeout:!0,localStorageWriteDelay:!0,localStorageWriteMaxDelay:!0,prebidAuctionsRandomDownsamplingThreshold:!0};return Object.keys(e).reduce(((n,i)=>{if(t.hasOwnProperty(i)){const t="true"===e[i];return{...n,[i]:t}}if(r.hasOwnProperty(i)){const t=Number(e[i]);return isNaN(t)?n:{...n,[i]:t}}return{...n,[i]:e[i]}}),{})},p=function(){let{getQueryParams:e=u.zM}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e=>Object.entries(e).reduce(((e,t)=>{let[r,n]=t;if(!(0===r.indexOf(l)))return e;const i=r.replace(l,"");return[...e,[i,n]]}),[]);return(0,s.zG)(a.Y3((()=>(0,s.zG)(e(),t,(e=>(0,c.m8)(...e)),g,(e=>m({queryConfig:e})))),(e=>`Failed to parse query params. Got ${(0,n.w)(e).message}`)))},m=e=>{let{queryConfig:t}=e;const r=(0,s.zG)(o.Y3((()=>window.sessionStorage.getItem(d))),o.tS(o.ij),o.tS((0,s.ls)(i.A,o.ij)),o.fS((()=>({}))));return(0,c.PM)(r,t)},h=(e,t)=>{const r=(e.environment&&f[e.environment])??{};return(0,c.PM)(f.default,r,e,t)}},7385:(e,t,r)=>{r.d(t,{v:()=>n});const n=(e,t,r)=>function(){const n=r()?t:e;return n(...arguments)}},9539:(e,t,r)=>{r.d(t,{S:()=>m});var n=r(2169),i=r(8236),a=r(9912),o=r(3567),s=r(7536),c=r(1876);var u=r(1822);class l{wait_prev;block_next;task;started;complete;constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.wait_prev=t.wait_prev||!1,this.block_next=t.block_next||!1,this.started=!1,this.complete=!1,this.task=e}waits(){return this.wait_prev}blocks(){return this.block_next}execute(e){this.started=!0,this.task((()=>{this.complete=!0,e()}))}}var d=r(6924);r(6636),r(50);class f{logger;api;activationManager;sessionManager;metrics;viewId;userId;network;clientContext;unprocessedEvents;taskQueue;identities;permutiveReset;messages;addons;trace;permutiveRealtime;state;customProperties;config;permutiveData;externalData;cookies;identitiesIngestor;global;nextGen;pageviewState;tcf;initialisedAddons=[];constructor(e,t,r,n,i,a,o,s,c,u,l,d,f,g,p,m,h,_,v,b,y,w,I,S,k,E,P,G){this.logger=e,this.api=t,this.activationManager=r,this.sessionManager=n,this.metrics=i,this.viewId=a,this.userId=o,this.network=s,this.clientContext=c,this.unprocessedEvents=u,this.taskQueue=l,this.identities=d,this.permutiveReset=f,this.messages=g,this.addons=p,this.trace=m,this.permutiveRealtime=h,this.state=_,this.customProperties=v,this.config=b,this.permutiveData=y,this.externalData=w,this.cookies=I,this.identitiesIngestor=S,this.global=k,this.nextGen=E,this.pageviewState=P,this.tcf=G}identify(e){const t="[Identify]";this.logger.debug("<call> identify",e);const r=(0,u.b2)(),{left:o,right:c}=this.identities.parseCustomerDefinedIdentities(e);if(o.length>0)throw new Error(o.join(" "));const f={...this.identities.getIdentitiesMap(),...c.reduce(((e,t)=>{let{tag:r,id:n,priority:i,expiry:a}=t;return{...e,[r]:{id:n,...void 0!==i?{priority:i}:{},...void 0!==a?{expiry:a}:{}}}}),{})},g=(0,n.zG)(Object.values(f),a.DZ((e=>i.ij(e.id)))),p=this.identities.getPrioritizedIdentities(f);if("string"==typeof e&&(0,s.Bt)("4b91477e-f67b-4d81-86db-a9742bd41e9c","4b91477e-f67b-4d81-86db-a9742bd41e9c",g,window.location.hostname,this.userId.get()))return r.resolve(),r.promise;const m=async e=>{await(0,d.Yj)({clientContext:this.clientContext,global:this.global,identities:this.identities,logger:this.logger,reset:this.permutiveReset,userId:this.userId},e.user_id)};return this.taskQueue.add(new l((async e=>{this.logger.debug("<task> identify",c);const n=async()=>{this.logger.log(t,"request identity");const e=await this.api.identify(this.metrics,this.userId,p);this.userId.isEqual(e.user_id)?this.metrics.track({name:"sdk_identity_remained_total",value:1,labels:{identify_reason:"identify_call"}}):(this.metrics.track({name:"sdk_identity_changed_total",value:1,labels:{identify_reason:"identify_call"}}),await m(e))};this.identities.setIdentities(c).identifyRequestRequired()?await n():this.logger.log(t,"skip request"),this.logger.debug("<done> identify",c),e(),r.resolve(),await this.identitiesIngestor.ingestIfEligible(c).catch((e=>this.api.reportError(`Couldn't ingest identities, got ${e}`,this.userId.get())))}),{wait_prev:!0,block_next:!0})),r.promise}on(e,t){return this.nextGen.eventHandlerAfterUpload.addListener({name:e,callback:t,once:!1})}once(e,t){return this.nextGen.eventHandlerAfterUpload.addListener({name:e,callback:t,once:!0})}pageviewTracked=!1;track(){const[e,t,r]=[arguments.length<=0?void 0:arguments[0],(arguments.length<=1?void 0:arguments[1])||{},(arguments.length<=2?void 0:arguments[2])||{}],n=this.trace.startSpan(`track("${e}")`);this.logger.log("<call> track",e);const i=(0,u.b2)();this.pageviewTracked||"Pageview"!==e||(this.pageviewTracked=!0,this.metrics.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"pageview_tracked",time_origin:"sdk_init"})),this.metrics.trackCounter({name:"sdk_event_track_count_total",labels:{event_name:e},value:1}),i.promise.then((()=>{this.metrics.trackCounter({name:"sdk_event_track_success_count_total",labels:{event_name:e},value:1}),n.finish()}),(()=>{this.metrics.trackCounter({name:"sdk_event_track_fail_count_total",labels:{event_name:e},value:1}),n.finish()}));const a=r.unprocessedData??{},o=a.sessionId??this.sessionManager.getSessionId(),s=a.viewId??this.viewId.get(),c={success:r.success||(e=>{}),error:r.error||((e,t)=>{})};return this.taskQueue.add(new l((n=>{this.logger.log("<task> track",e);return(a.client?Promise.resolve(a.client):this.clientContext.getClientAsync()).then((a=>{const l={name:e,properties:{...t,client:t.client?(0,u.PM)(a,t.client):a},session_id:o,view_id:s,time:new Date};return this.nextGen.trackEvent.current({event:l,useBeacon:r.useBeacon??!1}).then((e=>{this.logger.log("<done> track",l.name),c.success(e),i.resolve(l),n()})).catch((e=>{c.error(e),this.api.reportError(e,this.userId.get()),i.reject(e)}))}))}))),i.promise}trigger(e,t,r){const n=(0,u.b2)();this.logger.log("<call> trigger",e);const i=t=>(i,a)=>{if(i.properties.segment_number===e){const o={result:t};this.logger.debug("<fire> trigger",{event:i,error:a,segmentCode:e,payload:o}),r(o),n.resolve(o)}};return this.nextGen.eventHandlerAfterUpload.addListener({name:"SegmentEntry",callback:i(!0),once:!1}),this.nextGen.eventHandlerAfterUpload.addListener({name:"SegmentExit",callback:i(!1),once:!1}),this.logger.log("<done> trigger",e),n.promise}query(){return Promise.resolve({result:!1})}segment(e,t){const r=(0,u.b2)();this.logger.log("<call> segment",e);return this.taskQueue.add(new l((n=>{this.logger.log("<task> segment",e);const i=this.nextGen.queryLanguageCohorts.all.current.includes(e)||!1;t(i),r.resolve(),this.logger.log("<done> segment",e),n()}))),r.promise}segments(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";const r=(0,u.b2)();this.logger.log("<call> segments");return this.taskQueue.add(new l((n=>{this.logger.log("<task> segments ("+t+")");const i=i=>{e(i),r.resolve(i),this.logger.log("<done> segments ("+t+")"),n()};"dfp"===t?this.messages.once("permutive:dfp:ready",(()=>{this.addons.dfp&&i([...this.addons.dfp.segments.liveSegments])})):i([...this.nextGen.queryLanguageCohorts.all.current])}))),r.promise}reset(){return Promise.all([this.api.reset(this.metrics),this.identities.reset(),this.permutiveReset.reset(),this.nextGen.reset(),this.userId.reset()]).then((()=>{this.messages.emit("permutive:reset")})).catch((e=>{this.api.reportError(`Error resetting internals. Got ${e}`)}))}addon(e,t){this.logger.debug("[Addon]",`Called for ${e}`,t);const a={...t,permutive:this,api:this.api,activationManager:this.activationManager,network:this.network,clientContext:this.clientContext,logger:this.logger,unprocessedEvents:this.unprocessedEvents,metrics:this.metrics,state:this.state,messages:this.messages,userId:this.userId,viewId:this.viewId,customProperties:this.customProperties,config:this.config,permutiveData:this.permutiveData,sessionManager:this.sessionManager,addons:this.addons,externalData:this.externalData,cookies:this.cookies,nextGenOutput:this.nextGen,identities:this.identities,pageviewState:this.pageviewState,tcf:this.tcf},s=(0,n.zG)(this.nextGen.pbjsPair,o.UI(i.UI((0,u.vg)("pbjs")))),l=e=>{this.initialisedAddons.push(e),this.messages.emit("permutive:addon:preinit",e)};if("contextual"===e&&i.pC(this.nextGen.addons.contextual))return"contextual"in this.addons||(l(e),this.addons.contextual=this.nextGen.addons.contextual.value),this.addons.contextual(t),this.addons.contextual;if(-1===this.initialisedAddons.indexOf(e))switch(l(e),e){case"web":Promise.resolve().then(r.bind(r,8223)).then((e=>this.addons.web=new e.WebAddon(a))).then((()=>this.messages.emit("permutive:web:ready")));break;case"publishers":case"overlays":case"scriptrunner":case"nativo":case"freewheel":case"facebook_pixel_v2":case"eyeota_pixel":case"rubicon":case"rubicon_ssp":case"tracking_pixel":case"twitter_pixel":case"pinterest_pixel":case"appnexus_adserver":case"classification_models":case"prebid_analytics":case"gam_log":case"smart":case"tradedesk":case"pubmatic":case"ssp":0;break;case"dfp":Promise.resolve().then(r.bind(r,8021)).then((async e=>this.addons.dfp=await e.createAddon(a)));break;case"tiktok_pixel":Promise.resolve().then(r.bind(r,4805)).then((e=>this.addons.tiktok_pixel=new e.TikTokPixel({...a,tcfStatus:{type:"missing"}})));break;case"local_storage":Promise.resolve().then(r.bind(r,6816)).then((e=>this.addons.local_storage=new e.LocalStorageAddon(a)));break;case"prebid":Promise.resolve().then(r.bind(r,8577)).then((e=>this.addons.prebid=new e.PrebidAddon({...a,pbjs:s})));break;case"clean_room":Promise.resolve().then(r.bind(r,2377)).then((e=>this.addons.clean_room=new e.CleanRoomAddon));break;case"ddp":case"dbm":Promise.resolve().then(r.bind(r,6482)).then((e=>this.tcf.registerVendorOnValidConsent("ddp",(t=>this.addons.ddp=new e.DDPPixel({...a,tcfStatus:t})))));break;case"appnexus":Promise.resolve().then(r.bind(r,1798)).then((e=>this.tcf.registerVendorOnValidConsent("appnexus",(t=>this.addons.appnexus=new e.AppnexusPixel({...a,tcfStatus:t})))));break;case"amazon_publisher_services":(0,n.zG)(i.YP,i.UI((e=>this.addons.amazon_publisher_services=e)));break;case"adswizz_keyvalue":(0,n.zG)(i.YP,i.UI((e=>this.addons.adswizz_keyvalue=e)))}else"web"===e&&!0!==t.auto_init&&((e,t,r,n)=>new Promise(((a,o)=>{const s=(0,i.Y3)(e);if((0,i.pC)(s))return a(s.value);r.once(t,(()=>(0,i.g_)((()=>o(new Error(`Error after waiting for event ${t}`))),a)((0,i.Y3)(e))));const u=n?.timeout??1e4;(0,c.HJ)((()=>o(new Error(`Event ${t} was not received within the timeout period ${u}ms`))),u)})))((()=>{if(!this.addons.web)throw new Error('"web" addon not ready');return this.addons.web.reset(t)}),"permutive:web:ready",this.messages).catch((e=>{this.api.reportError(`Got error while trying to reset web. Got ${e.message}`,this.state.userId.get())}))}ready(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"initialised";const r=(0,u.b2)(),n=()=>{e(),r.resolve()};switch(t){case"initialised":this.permutiveRealtime.isReady()?n():this.messages.on("permutive:ready",n);break;case"realtime":this.permutiveRealtime.isRealtime()?n():this.messages.once("permutive:realtime",n)}return r.promise}}var g=r(7385);const p=e=>{const{logger:t,consentTracking:r}=e,i=function(){return t.debug("Methods[track]: Cannot track as consent is revoked"),Promise.resolve(null)};return e=>class extends e{constructor(){super(...arguments),r.isRevoked()&&this.consentRevoked(),r.listenForConsent((()=>this.consentRevoked()),n.Q1)}async consentRevoked(){return await this.sessionManager.reset(),this.reset()}track=(()=>(0,g.v)(super.track.bind(this),i,r.isRevoked))()}},m=(e,t,r,i,a,o,s,c,u,l,d,g,m,h,_,v,b,y,w,I,S,k,E,P,G,U,z,D,C)=>new((0,n.zG)(f,p({consentTracking:U,logger:e})))(e,t,r,i,a,o,s,c,u,l,d,g,m,h,_,v,b,y,w,I,S,k,E,P,G,z,D,C)},6924:(e,t,r)=>{r.d(t,{Yj:()=>c,TZ:()=>s});var n=r(5654),i=r(1822);var a=r(7536);const o=async e=>{await e.identities.thirdParty,await function(e,t){return(0,a.Bt)("4b91477e-f67b-4d81-86db-a9742bd41e9c","4b91477e-f67b-4d81-86db-a9742bd41e9c",e.identities.getPrioritizedIdentities(e.identities.getIdentitiesMap()).map((e=>e.id)),window.location.hostname,e.userId.get())?t.reset():Promise.resolve()}(e,e.permutiveMethods);const t=await function(e){const t=e.trace.startSpan("identify");0;return(async e=>{const t="[Identify Init]",{logger:r,api:n,userId:a,identities:o,metrics:s,identitiesIngestor:c,messages:u,sessionManager:l}=e,d=await o.thirdParty,f=o.extractIdentifyFromQueue(e),g={...o.getIdentitiesMap(),...f.reduce(((e,t)=>{let{tag:r,id:n,priority:i,expiry:a}=t;return{...e,[r]:{id:n,...a?{expiry:a}:{},...void 0!==i?{priority:i}:{}}}}),{})},p=o.setIdentities(Object.entries(g).map((e=>{let[t,{id:r,priority:n,expiry:i}]=e;return{tag:t,id:r,...i?{expiry:i}:{},...void 0!==n?{priority:n}:{}}})));o.setReady();const m=o.getPrioritizedIdentities(g);r.log("Begin identification");const h=e.sessionCount>1&&l.sessionHasChanged()||d.identifyRequestRequired()||p.identifyRequestRequired()?await(r.debug(t,"request identity"),n.identify(s,a,m).then((e=>{const n=e.user_id;return a.isEqual(n)?{identityChanged:!1}:(r.debug(t,"fetch received new user id",n),{identityChanged:!0,userId:n})})).catch((e=>(n.reportError(`${t} Fetch failed. Got ${e}`,a.get()),{identityChanged:!1}))).then((0,i.bw)((t=>e.metrics.track({name:`sdk_identity_${t.identityChanged?"changed":"remained"}_total`,value:1,labels:{identify_reason:"sdk_init"}}))))):(r.debug(t,"skip request"),{identityChanged:!1});return c.ingestIfEligible(m).catch((e=>n.reportError(`Couldn't ingest identities, got ${e}`,h.identityChanged?h.userId:a.get()))),u.emit("permutive:user:ready"),r.debug(t,"result",h),h})(e).catch((t=>(e.api.reportError(`Failed to identify. Got ${(0,n.w)(t)}`),{identityChanged:!1}))).then((e=>(t.finish(),e)))}(e);return t.identityChanged?await c(e,t.userId):e.logger.log("Identity has not changed"),t},s=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>{};o(e).then(t),u(e.global,e.clientContext)};async function c(e,t){e.logger.log("Identity has changed"),await e.reset.reset(),e.userId.set(t),u(e.global,e.clientContext),e.identities.setIdentities([])}function u(e,t){return e.context=t.getContext()}},6226:(e,t,r)=>{function n(e,t,r,n){n.debug("set SDK as ready"),e.emit("permutive:api:ready"),e.emit("permutive:queries:initialised"),t.track({name:"sdk_local_storage_byte_total",value:r.getStateSizeInBytes(),labels:{}}),n.warn("sdk_query_states_byte_total metric needs re-implementing")}r.d(t,{R:()=>n})},7403:(e,t,r)=>{r.d(t,{LA:()=>s});var n=r(9912),i=r(856),a=r(1822);const o=(e,t,r)=>{let{api:n,state:i}=r;n.reportError(`Function "permutive.${t.functionName}" caused an error: ${e.message}`,i.userId.get())};function s(e,t,r,n,i,a){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:d;const u=c(e),l=a.startSpan("queued_methods"),f={api:i,state:t},g=e=>{if(e.functionName in r){r[e.functionName].apply(n,e.arguments)}else o(new Error("Does not exist."),e,f)},p=e=>!s.includes(e);u.forEach((e=>{try{p(e.functionName)&&g(e)}catch(t){const r=t instanceof Error?t:new Error("Unknown error.");o(r,e,f)}})),l.finish()}function c(e){const t=(0,n.uK)((e=>-1!==l.indexOf(e.functionName)))(e),r=t.right,o=t.left.filter((e=>"consent"!==e.functionName)),s=(0,i.Zt)(((e,t)=>u(e)&&u(t)?(0,a.lW)(f).compare(e.arguments[0],t.arguments[0]):(0,a.lW)(l).compare(e.functionName,t.functionName)));return(0,n.DY)(s)(r).concat(o)}const u=e=>"addon"===e.functionName,l=["identify","trigger","addon","track"],d=["identify"],f=["dfp","appnexus_adserver","web"]},7422:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{initialiseWebSDK:()=>initialiseWebSDK});var _permutive_permutive_utils_ts_error__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(5654),fp_ts_Option__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(8236),fp_ts_Either__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(7144),fp_ts_function__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(2169),fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(132),_framework_ref__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3567),_identity_legacy_NeustarFabrickIdentitiesIngestor__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6942),_identity_legacy_PermutiveIdentities__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(7536),_identity_legacy_PermutiveIdentitiesIngestorNoOp__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(8923),_sdkql_blockers__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(2615),_core_activations_PermutiveActivationManagerWeb__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(4836),_core_activations_PermutiveAddons__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(50),_sdkql_event_collection_events_cache_store_crypto_HashcodeDigest__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(8970),_sdkql_event_collection_events_cache_store_crypto_SHA256Digest__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(1921),_sdkql_event_collection_PermutiveEventCustomProps__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(6663),_core_events_unprocessed_UnprocessedPrebidAuctions__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(2223),_core_metrics_MetricReporter__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(1141),_core_state_PermutiveRealtime__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(9537),_core_state_PermutiveReset__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(1597),_core_state_PermutiveStateWeb__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(3576),_core_state_PermutiveViewId__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(9427),_core_store_LocalStorage__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(9955),_core_tcf_TCF__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(8493),_dynamic_addons_LoadAddons__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(9782),_dynamic_messages_PermutiveMessages__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(5883),_http_PermutiveApi__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(7902),_utils_PermutiveUtils__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(1822),_utils_task_queue_PermutiveTaskQueue__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(7137),_Config__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(8972),_initialisation_identity__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(6924),_initialisation_initialisationLifecycle__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(6226),_initialisation_queuedMethods__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(7403),_PermutiveMethodsWeb__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(9539),_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(1876),fp_ts_Task__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(7226),main_core_store_SessionStorage__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(8904),main_http_PermutiveNetwork__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(7499);const prefix="[Initialisation Web]",initialiseWebSDK=_ref=>{let{cookieStore,clientContext,currentScript,consentModule,core,externalData,localStorage,logger,messages,metrics,namespace,pageviewState,partialTagWithKey,permutiveData,sessionManager,tag,trace,configFromQueryParams,urls,userId}=_ref;return(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_21__.Y3)((async()=>{const windowKey=partialTagWithKey.key,permutiveGlobal=window[windowKey],config=tag.config,viewId=(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)(pageviewState.ref,_framework_ref__WEBPACK_IMPORTED_MODULE_0__.UI((e=>e.viewId)),(e=>new _core_state_PermutiveViewId__WEBPACK_IMPORTED_MODULE_23__.W(e))),network=new main_http_PermutiveNetwork__WEBPACK_IMPORTED_MODULE_20__.E(logger,metrics),sessionStorage=(0,main_core_store_SessionStorage__WEBPACK_IMPORTED_MODULE_19__.u)(namespace,logger,consentModule.consentTracking.consentRef),{consentTracking,consentValidation}=consentModule;(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)(consentTracking.consentRef,_framework_ref__WEBPACK_IMPORTED_MODULE_0__.YP((e=>{e?sessionStorage.put(configFromQueryParams,_Config__WEBPACK_IMPORTED_MODULE_14__.iq).then(fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.Q1,(e=>{logger.warn(prefix,`Failed to cache "${_Config__WEBPACK_IMPORTED_MODULE_14__.iq}".`,(0,_permutive_permutive_utils_ts_error__WEBPACK_IMPORTED_MODULE_24__.w)(e))})):sessionStorage.delete(_Config__WEBPACK_IMPORTED_MODULE_14__.iq)}))),window[windowKey].consent=consentValidation;const createInternalsSpan=trace.startSpan("internals");(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)(viewId.ref,_framework_ref__WEBPACK_IMPORTED_MODULE_0__.YP((e=>clientContext.updateContext(["view_id",e])))),(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)(userId.ref,_framework_ref__WEBPACK_IMPORTED_MODULE_0__.YP((e=>clientContext.updateContext(["user_id",e]))));const api=new _http_PermutiveApi__WEBPACK_IMPORTED_MODULE_11__.F(urls,config,network,metrics,logger),tcf=(0,_core_tcf_TCF__WEBPACK_IMPORTED_MODULE_9__.SD)(window,logger),identityProviderEnv={permutive:permutiveGlobal,network,api,userId,metrics,permutiveData,messages,config,cookies:cookieStore,logger,tcf},identities=new _identity_legacy_PermutiveIdentities__WEBPACK_IMPORTED_MODULE_2__.lg(metrics,trace,permutiveData,identityProviderEnv,logger),identitiesIngestor=new _identity_legacy_PermutiveIdentitiesIngestorNoOp__WEBPACK_IMPORTED_MODULE_25__.z,permutiveRealtime=new _core_state_PermutiveRealtime__WEBPACK_IMPORTED_MODULE_26__.u(trace,metrics,messages),unprocessedArgs={consent:consentTracking.consentRef,logger,namespace},unprocessedEvents={PrebidAuctions:new _core_events_unprocessed_UnprocessedPrebidAuctions__WEBPACK_IMPORTED_MODULE_27__.J(unprocessedArgs)},customProperties=new _sdkql_event_collection_PermutiveEventCustomProps__WEBPACK_IMPORTED_MODULE_7__.X,permutiveReset=new _core_state_PermutiveReset__WEBPACK_IMPORTED_MODULE_28__.a(config,localStorage,logger,permutiveData,cookieStore,externalData),taskQueue=new _utils_task_queue_PermutiveTaskQueue__WEBPACK_IMPORTED_MODULE_13__.i(messages),activationManager=new _core_activations_PermutiveActivationManagerWeb__WEBPACK_IMPORTED_MODULE_3__.v(logger,permutiveGlobal,clientContext),[addonsLoadedRef,setAddonsLoaded]=_framework_ref__WEBPACK_IMPORTED_MODULE_0__.Ue(!1),webClient=(()=>{const[e,t]=_framework_ref__WEBPACK_IMPORTED_MODULE_0__.Ue(Date.now());return(0,_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_18__.UM)((()=>t(Date.now())),1e3),(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)(_framework_ref__WEBPACK_IMPORTED_MODULE_0__.vP(viewId.ref,e),_framework_ref__WEBPACK_IMPORTED_MODULE_0__.UI((()=>clientContext.getClient())),_framework_ref__WEBPACK_IMPORTED_MODULE_0__.D8(((e,t)=>e===t||JSON.stringify(e)===JSON.stringify(t))))})(),eventCacheStoreFactory=()=>(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)((0,_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_18__.N1)((0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)((0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_21__.Y3)((()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,1230))),String),trace.traceTask("import-DBStore-main-thread"))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_21__.UI)((e=>{let{DBStore:t}=e;return new t((0,_core_store_LocalStorage__WEBPACK_IMPORTED_MODULE_29__.E)(namespace,logger,consentTracking.consentRef))}))),eventsCacheFactory=()=>(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)((0,_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_18__.SF)((0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)((0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_21__.Y3)((()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,8799))),String),trace.traceTask("import-events-cache"))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_21__.tS)((e=>{let{EventsCache:t}=e;return(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)(t.initialise(config,logger,(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};api.reportError(e,t?.userId,t?.timestamp)}),trace,metrics,userId.ref,eventCacheStoreFactory),trace.traceTask("initialise-events-cache-main-thread"))}))),nextGen=await(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)((0,_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_18__.SF)((()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,7557)))),trace.traceTask("import-next-gen"),fp_ts_Task__WEBPACK_IMPORTED_MODULE_30__.Qt("configureCore",core),fp_ts_Task__WEBPACK_IMPORTED_MODULE_30__.tS((e=>{let{runNextGenFeatures:t,configureCore:r}=e;return(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)((0,_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_18__.N1)((async()=>t({activationManager,addonsLoaded:addonsLoadedRef,api,currentScript,clientContext,config,consentTracking:fp_ts_Option__WEBPACK_IMPORTED_MODULE_31__.G(consentTracking),core:r({eventsCacheFactory,migratedStateMaps:()=>({internal:(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)(permutiveData.getData("internal_query_states"),fp_ts_Option__WEBPACK_IMPORTED_MODULE_31__.DT(_utils_PermutiveUtils__WEBPACK_IMPORTED_MODULE_12__.Kn)),external:(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)(permutiveData.getData("external_query_states"),fp_ts_Option__WEBPACK_IMPORTED_MODULE_31__.DT(_utils_PermutiveUtils__WEBPACK_IMPORTED_MODULE_12__.Kn))})}),externalData,identities:identities.ref,logger,messages,metrics,namespace,network,permutiveData,sessionManager,urls,userId,viewId,pageviewState:pageviewState.ref,trace,webClient:(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)(webClient,_framework_ref__WEBPACK_IMPORTED_MODULE_0__.UI(fp_ts_Option__WEBPACK_IMPORTED_MODULE_31__.G))}))),trace.traceTask("run-next-gen-features"))})))();(0,_core_metrics_MetricReporter__WEBPACK_IMPORTED_MODULE_8__.p)({api,context:nextGen.metricContext,logger,messages,metrics});const state=new _core_state_PermutiveStateWeb__WEBPACK_IMPORTED_MODULE_32__.u(permutiveData,permutiveReset,userId,viewId,logger),addons={},permutiveMethods=(0,_PermutiveMethodsWeb__WEBPACK_IMPORTED_MODULE_17__.S)(logger,api,activationManager,sessionManager,metrics,viewId,userId,network,clientContext,unprocessedEvents,taskQueue,identities,permutiveReset,messages,addons,trace,permutiveRealtime,state,customProperties,config,permutiveData,externalData,cookieStore,identitiesIngestor,permutiveGlobal,consentTracking,nextGen,pageviewState,tcf);createInternalsSpan.finish();const context=clientContext.getMutableContextUNSAFE();[].forEach((s=>{fp_ts_Either__WEBPACK_IMPORTED_MODULE_33__.Y3((()=>eval(s)),(e=>{api.reportError({...e,message:`Error running custom script ${s}`},userId.get())}))}));const blockers=(0,_sdkql_blockers__WEBPACK_IMPORTED_MODULE_34__.X)({logger,messages});blockers.addBlocker("permutive:queries:initialised");const initialIdentifyResult=(0,_utils_PermutiveUtils__WEBPACK_IMPORTED_MODULE_12__.b2)();let globalIdentifyBound=!1;messages.on("permutive:user:ready",(()=>{permutiveGlobal.identify=permutiveMethods.identify.bind(permutiveMethods),globalIdentifyBound=!0;const e=identities.extractIdentifyFromQueue({global:permutiveGlobal});e.length>0?initialIdentifyResult.resolve(permutiveGlobal.identify(e)):initialIdentifyResult.resolve()})),messages.on("permutive:blockers:empty",(()=>{if(!globalIdentifyBound){const e=permutiveGlobal.identify;permutiveGlobal.identify=t=>(e(t),initialIdentifyResult.promise)}permutiveGlobal.on=permutiveMethods.on.bind(permutiveMethods),permutiveGlobal.once=permutiveMethods.once.bind(permutiveMethods),permutiveGlobal.track=permutiveMethods.track.bind(permutiveMethods),permutiveGlobal.trigger=permutiveMethods.trigger.bind(permutiveMethods),permutiveGlobal.query=permutiveMethods.query.bind(permutiveMethods),permutiveGlobal.segment=permutiveMethods.segment.bind(permutiveMethods),permutiveGlobal.segments=permutiveMethods.segments.bind(permutiveMethods),permutiveGlobal.reset=permutiveMethods.reset.bind(permutiveMethods),permutiveGlobal.ready=permutiveMethods.ready.bind(permutiveMethods),permutiveGlobal.addon=permutiveMethods.addon.bind(permutiveMethods),permutiveGlobal.context=clientContext.getMutableContextUNSAFE(),permutiveGlobal.addons=addons,permutiveGlobal.config=config,permutiveRealtime.setAsReady(),(0,_initialisation_queuedMethods__WEBPACK_IMPORTED_MODULE_16__.LA)(permutiveGlobal.q,state,permutiveGlobal,permutiveMethods,api,trace),setAddonsLoaded(!0)}));const loadAddonsSpan=trace.startSpan("load_addons");(0,_dynamic_addons_LoadAddons__WEBPACK_IMPORTED_MODULE_10__.C)({extMessages:new _dynamic_messages_PermutiveMessages__WEBPACK_IMPORTED_MODULE_35__.a(messages),nextGen,messages,viewId,state,sessionManager,api,clientContext,externalData,logger,metrics,namespace,network,permutive:permutiveGlobal,q:permutiveGlobal.q,userId}),loadAddonsSpan.finish(),await(0,_initialisation_identity__WEBPACK_IMPORTED_MODULE_15__.TZ)({api,clientContext,externalData,global:permutiveGlobal,identities,identitiesIngestor,logger,messages,metrics,network,permutiveMethods,reset:permutiveReset,trace,userId,sessionManager,sessionCount:nextGen.metricContext.current.session_count}),(0,_initialisation_initialisationLifecycle__WEBPACK_IMPORTED_MODULE_36__.R)(messages,metrics,state,logger),(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)(_framework_ref__WEBPACK_IMPORTED_MODULE_0__.vP(nextGen.realtime,nextGen.queryLanguageCohorts.all),_framework_ref__WEBPACK_IMPORTED_MODULE_0__.D8(((e,t)=>e[0]===t[0])),_framework_ref__WEBPACK_IMPORTED_MODULE_0__.bw((e=>{let[t,r]=e;t&&permutiveRealtime.setAsRealtime(r.length)})))}),(e=>`Exception during initialisation. Got ${e}`))}},5526:(e,t,r)=>{r.r(t),r.d(t,{runSdk:()=>pe});var n=r(7144),i=r(2169);var a=r(132),o=r(7226),s=r(8236);var c=r(1778);class u{namespace;config;logger;constructor(e,t,r){this.namespace=e,this.config=t,this.logger=r}makeCookie(e,t,r){return[encodeURIComponent(this.namespace.getNamespacedStorageKey(e)),"=",t?encodeURIComponent(t):"","; expires=",r,"; domain=",this.config.cookieDomain,"; path=/; samesite=none; secure"].join("")}setCookie(e,t){if(!(t&&e&&this.config.cookieExpiry&&this.config.cookieDomain)){const{cookieExpiry:r,cookieDomain:n}=this.config??{};throw this.logger.warn(`Unable to set cookie. ${c.LP}`,{value:t,cookieName:e,cookieExpiry:r,cookieDomain:n}),new Error(c.LP)}const r=this.makeCookie(e,t,this.config.cookieExpiry);if(r.length>c.dG)throw this.logger.warn(`Unable to set cookie ${this.namespace.getNamespacedStorageKey(e)}. ${c.eP}`),new Error(c.eP);return this.logger.debug(`Setting cookie ${r}`),document.cookie=r,!0}getCookie(e){const t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?e:this.namespace.getNamespacedStorageKey(e),r=new RegExp("\\b"+encodeURIComponent(t)+"=([^;]+)").exec(document.cookie);return null!==r?decodeURIComponent(r[1]):null}deleteCookie(e){if(!e||!this.config.cookieDomain)return!1;const t=this.makeCookie(e,void 0,"Thu, 01 Jan 1970 00:00:00 UTC");return this.logger.debug(`Deleting cookie ${t}`),document.cookie=t,!0}}var l=r(7385);const d=e=>{const{logger:t,consentTracking:r}=e,n=e=>(t.debug(`Cookie: Failed to set cookie ${e} as consent is revoked`),!1);return e=>class extends e{setCookie=(()=>(0,l.v)(super.setCookie.bind(this),n,r.isRevoked))()}};var f=r(5654),g=r(842),p=r(9144);class m{namespace;constructor(e){this.namespace=e}getExternalData(e){const t=this.namespace.getNamespacedStorageKey(e);return window.localStorage.getItem(t)}getExternalJsonData(e){const t=this.getExternalData(e);return null===t?null:(0,g.A)(t)}setExternalData(e,t){const r=this.namespace.getNamespacedStorageKey(e);try{window.localStorage.setItem(r,t)}catch(e){}}setExternalJsonData(e,t){return(0,i.zG)((0,p.P)(t),(0,n.UI)((t=>this.setExternalData(e,t))),(0,n.g_)((e=>{throw(0,f.w)(e)}),i.Q1))}removeExternalData(e){const t=this.namespace.getNamespacedStorageKey(e);window.localStorage.removeItem(t)}}const h=e=>{const{logger:t,consentTracking:r}=e,n=e=>{t.debug(`External Data: Failed to set key ${e} as consent is revoked`)},i=n,a=n;return e=>class extends e{setExternalData=(()=>(0,l.v)(super.setExternalData.bind(this),i,r.isRevoked))();setExternalJsonData=(()=>(0,l.v)(super.setExternalJsonData.bind(this),a,r.isRevoked))()}};var _=r(1876),v=r(3643),b=v.li,y=v.Yg;v.Kl,v.Lx,v.u4,v.nq;class w{sdkInitTimestamp;prefix;constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w.initialPrefix;this.sdkInitTimestamp=e,this.prefix=t}static initialPrefix=(()=>[S("Permutive"),self.document?S("M","#43dde2"):S("W","#FF5C00")])();get timeDeltaFromInit(){return`[${(new Date).getTime()-this.sdkInitTimestamp}ms]`}log(){return console.log.bind(self.console,`%s${this.prefixTemplate}`,this.timeDeltaFromInit,...this.prefixContent)(...arguments)}debug(){return console.debug.bind(self.console,`%c%s${this.prefixTemplate}`,"color: blue;",this.timeDeltaFromInit,...this.prefixContent)(...arguments)}warn(){return console.warn.bind(self.console,`%s${this.prefixTemplate}`,this.timeDeltaFromInit,...this.prefixContent)(...arguments)}error(){return console.error.bind(self.console,`%s${this.prefixTemplate}`,this.timeDeltaFromInit,...this.prefixContent)(...arguments)}withPrefix(e,t){return new w(this.sdkInitTimestamp,[...this.prefix,S(e,t)])}get prefixTemplate(){return this.prefix.map(b).join("")}get prefixContent(){return this.prefix.map(y).flat()}}class I{log(){}debug(){}warn(){}error(){}withPrefix(){return this}}function S(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#0469d0";const r=[`background-color: ${t}`,"color:white",`border:1px solid ${t}`,"padding: 0px 2px","margin: 0px 1px","border-radius: 2px"].join(";");return["%c%s",[r,e]]}const k="[MESSAGES]";class E{logger;messageListenerMap={};replayQueue={};onceTracker={};defaultMessageOptions={withReplay:!1,once:!1};constructor(e){this.logger=e}on(e,t,r){const n=this.mergeMessageOptions(r);n.withReplay&&this.processReplayQueue(e,t);const i=P(e,this.messageListenerMap).push(t)-1;return n.once&&this.addToOnceTracker(e,i),i}once(e,t){return this.on(e,t,{once:!0})}off(e,t){if(null==t)return this.messageListenerMap[e]=[],void(this.replayQueue[e]=[]);t<0?this.logError('Index for "off" fell out of range',{index:t}):P(e,this.messageListenerMap)[t]=i.Q1}emit(e,t,r){const n=this.mergeMessageOptions(r);P(e,this.messageListenerMap).length>0?(this.logDebug(`Emitting Event: ${e}`),this.emitMessageWithPayload(e,t)):n.withReplay&&this.addToReplayQueue(e,t)}addToReplayQueue(e,t){P(e,this.replayQueue).push(t)}processReplayQueue(e,t){this.replayQueue[e]?.forEach((e=>t(e)))}emitMessageWithPayload(e,t){this.messageListenerMap[e]?.forEach(((r,n)=>{r(t),this.removeListenerIfSetToFireOnlyOnce(e,n)}))}addToOnceTracker(e,t){P(e,this.onceTracker).push(t)}removeListenerIfSetToFireOnlyOnce(e,t){this.onceTracker[e]?.includes(t)&&this.off(e,t)}mergeMessageOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...this.defaultMessageOptions,...e}}logError(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.error(k,...t)}logDebug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.debug(k,...t)}}const P=(e,t)=>t[e]??=[];var G=r(2945);class U{sdkInitTimestamp;timeOriginSdkInit;logger;prefix="[Metrics]";timeOriginForContext=(()=>C())();pendingMetrics=[];pendingCounters={};pendingTimers={};noMetricsTracked=0;constructor(e,t,r){this.sdkInitTimestamp=e,this.timeOriginSdkInit=t,this.logger=r}isEnabled(){return!0}getNoMetricsTracked(){return this.noMetricsTracked}consume(){const e=this.pendingMetrics.concat(Object.values(this.pendingCounters).flat());return this.pendingMetrics=[],this.pendingCounters={},e}track(e){this.noMetricsTracked++,this.logDebug(`Tracking ${e.name}`,{metric:e}),this.pendingMetrics.push(e)}trackCounter(e){if(this.noMetricsTracked++,this.logDebug(`Tracking ${e.name}`,{metric:e}),e.name in this.pendingCounters){const t=Object.keys(e.labels),r=this.pendingCounters[e.name].findIndex((r=>Object.keys(r.labels).length===t.length&&t.every((t=>r.labels[t]===e.labels[t]))));-1===r?this.pendingCounters[e.name].push(e):this.pendingCounters[e.name][r]=D(this.pendingCounters[e.name][r],e.value)}else this.pendingCounters[e.name]=[e]}synchroniseTimeBetweenContexts(e){return(0,i.zG)(G.gz(s.G5)(this.timeOriginForContext,this.timeOriginSdkInit),s.UI((t=>{let[r,n]=t;return e+r-n})))}trackTimeSinceInit(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:performance.now();(0,i.zG)(this.synchroniseTimeBetweenContexts(r),s.UI((e=>(e-this.sdkInitTimestamp)/1e3)),s.UI((r=>this.track({name:e,value:r,labels:t}))))}startTimer(e,t){const r=performance.now(),n=this.generateRandomKey(e);return this.pendingTimers[n]={startTime:r,labels:t},n}stopTimer(e,t){const r=this.pendingTimers[t];if(r){const n=(performance.now()-r.startTime)/1e3;this.logDebug("timer stopped",e,n),this.track({name:e,value:n,labels:r.labels}),delete this.pendingTimers[t]}}generateRandomKey(e){return`${e}-${[...Array(24)].map((()=>Math.random().toString(36)[2])).join("")}`}logDebug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.debug(this.prefix,...t)}}class z{isEnabled(){return!1}getNoMetricsTracked(){return 0}consume(){return[]}track(e){}trackCounter(e){}trackTimeSinceInit(e,t){}startTimer(e,t){return""}stopTimer(e,t){}}const D=(e,t)=>({...e,value:e.value+t}),C=()=>(0,i.zG)(s.Y3((()=>performance.timeOrigin)),s.hX((e=>"number"==typeof e&&!Number.isNaN(e))));var x=r(1822),O=r(2867),M=r(5870);class T{config;namespace;logger;prefix="[Data Store]";permutiveData={};permutiveDataSize=0;localStorageScheduler;localStorageQueue=(()=>new Set)();debouncedStorageKeys;debouncedFlush;constructor(e,t,r){this.config=e,this.namespace=t,this.logger=r,this.localStorageScheduler=new O.b(e.localStorageWriteDelay,e.localStorageWriteMaxDelay),this.debouncedFlush=this.localStorageScheduler.schedule(this.flushLocalStorageQueue.bind(this)),this.debouncedStorageKeys=new Set(e.localStorageDebouncedKeys),this.localStorageScheduler.scheduleForPageUnload(this.flushLocalStorageQueue.bind(this)),this.permutiveData=this.buildData()}reset(){this.permutiveData={}}getDataSize(){return this.permutiveDataSize}getData(e){return this.permutiveData[e]}setData(e,t){this.permutiveData[e]=t,this.requestWrite(e)}deleteKey(e){delete this.permutiveData[e],this.requestWrite(e)}requestWrite(e){this.debouncedStorageKeys.has(e)?(this.localStorageQueue.add(e),this.debouncedFlush()):this.writeData(e)}flushLocalStorageQueue(){for(let e of this.localStorageQueue)this.writeData(e);this.localStorageQueue.clear()}buildData(){return{...this.getDataChunk("misc"),...this.getDataChunk("queries")}}getDataChunk(e){const t=this.namespace.getNamespacedStorageKey(this.chunkKeyToStorageKey(e)),r=window.localStorage.getItem(t),n=null===r?null:(0,g.A)(r);return r&&n?(this.permutiveDataSize+=2*r.length,n):{}}chunkKeyToStorageKey(e){switch(e){case"queries":return this.config.permutiveDataQueriesKey;case"misc":return this.config.permutiveDataMiscKey;default:throw new Error(`Unhandled chunk key "${e}"`)}}writeData(e){this.logger.debug(`Data Store: Writing ${e} to localStorage`);const[t,r]=this.dataKeyToChunkInfo(e);return n.Y3((()=>window.localStorage.setItem(this.namespace.getNamespacedStorageKey(t),JSON.stringify(r))),(t=>{const r=(0,f.w)(t);return this.logError(`Failed to set ${e}. Got ${r}`),r}))}dataKeyToChunkInfo(e){const t=e=>(0,x.eu)(this.permutiveData,e);switch(e){case"internal_query_states":case"external_query_states":case"event-source-id":return[this.chunkKeyToStorageKey("queries"),t(q)];case M.Kd:case"identities":case"amp_ready":case"metricsEnabled":case"addon:tradedesk":case"addon:tracking_pixel":case"addon:eyeota_pixel":case"addon:pinterest_pixel":case"addon:facebook_pixel_v2":case"addon:tiktok_pixel":case"addon:appnexus":case"addon:ddp":case"addon:gigya":case"addon:neustar_fabrick":case"pubmatic":case"lotame":return[this.chunkKeyToStorageKey("misc"),t(A)];default:throw new Error(`Unhandled data key "${e}"`)}}logError(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.error(this.prefix,...t)}}const q=["internal_query_states","external_query_states","event-source-id"],A=[M.Kd,"identities","amp_ready","metricsEnabled","addon:tradedesk","addon:tracking_pixel","addon:eyeota_pixel","addon:pinterest_pixel","addon:facebook_pixel_v2","addon:tiktok_pixel","addon:appnexus","addon:ddp","addon:gigya","addon:neustar_fabrick","pubmatic","lotame"],R=e=>{const{logger:t,consentTracking:r}=e,i=e=>(t.debug(`Data Store: Failed to write ${e} as consent is revoked`),n.F2(void 0));return e=>class extends e{writeData=(()=>(0,l.v)(super.writeData.bind(this),i,r.isRevoked))()}};class j{config;constructor(e){this.config=e}getNamespacedStorageKey(e){return`${this.config.stateNamespace}${e}`}}var L=r(3567);class ${config;cookies;externalData;ref;isNewlyGenerated;setState;constructor(e,t,r,n){this.config=e,this.cookies=t,this.externalData=r;const[a,o]=L.Ue(this.getOrGenerateUserId());this.ref=(0,i.zG)(a,L.UI((e=>e.userId))),this.isNewlyGenerated=(0,i.zG)(a,L.UI((e=>e.isNewlyGenerated))),this.setState=o,(0,i.zG)(L.vP(this.ref,n),L.YP((e=>{let[t,r]=e;r?(this.cookies.setCookie(this.config.cookieName,t),this.externalData.setExternalData(this.config.cookieName,t)):(this.cookies.deleteCookie(this.config.cookieName),this.externalData.removeExternalData(this.config.cookieName))})))}isEqual(e){return this.ref.current===e}get(){return this.ref.current}set(e){this.setState({userId:e,isNewlyGenerated:!1})}reset(){this.setState({userId:(0,x.k$)(),isNewlyGenerated:!0})}getOrGenerateUserId(){return(0,i.zG)(this.getUserIdFromCookie(),s.wp((()=>this.getUserIdFromLocalStorage())),s.UI((e=>({userId:e,isNewlyGenerated:!1}))),s.fS((()=>({userId:(0,x.k$)(),isNewlyGenerated:!0}))))}getUserIdFromCookie(){return this.getUserIdFromStorageIfValid("cookie")}getUserIdFromLocalStorage(){return this.getUserIdFromStorageIfValid("localStorage")}getUserIdFromStorageIfValid(e){const t=s.DT(x.Gz);return(0,i.zG)("cookie"===e?this.cookies.getCookie(this.config.cookieName):this.externalData.getExternalData(this.config.cookieName),s.ij,s.tS(t))}}class F{config;PATH_JOINER_Q="?";PATH_JOINER_A="&";constructor(e){this.config=e}getBaseUrl(){return`${this.config.apiProtocol}://${this.config.apiHost}`}getEndpointUrl(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("base",e,t,r)}getSdkErrorsUrl(e,t){return this.getUrl("sdk-errors",e,t,[])}getAdvertiserEndpointUrl(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("adv",e,t,r)}getClassificationModelsEndpointUrl(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("clm",e,t,r)}getAudienceMatchingEndpointUrl(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];const i=`${e}/${r}/audiences`;return this.getUrl("audience-matching",i,t,n)}getCCSCohortMembershipEndpointUrl(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("ccs",e,t,r)}makeAuthenticatedUrl(e){return this.makeUrlWithQueryParams(e,[["k",this.config.apiKey]])}getUrlPrefix(e){switch(e){case"base":return"";case"adv":return"/adv";case"sdk-errors":return"/sdk-errors";case"clm":return"/clm";case"audience-matching":return"/audience-matching";case"ccs":return"/ccs"}}getUrl(e,t,r,n){const i=this.getUrlPrefix(e),a=(0,s.g_)((()=>""),(e=>`/${e}`))(r),o=`${this.getBaseUrl()}${i}${a}${t}`;return this.makeUrlWithQueryParams(o,n.concat([["k",this.config.apiKey]]))}makeUrlWithQueryParams(e,t){const r=t.map((e=>{let[t,r]=e;return`${t}=${r}`})).join(this.PATH_JOINER_A),n=e.includes(this.PATH_JOINER_Q)?this.PATH_JOINER_A:this.PATH_JOINER_Q;return`${e}${n}${r}`}}const B=`permutive.${self.document?"main":"worker"}.`;class N{config;shouldUsePerformanceMark=!1;constructor(e){this.config=e,this.shouldUsePerformanceMark=(self.performance?.mark&&this.config.tracingEnabled)??!1}startSpan(e){const t=this.generateSpan(e);return t.start(),{spanId:t.spanId,finish:t.finish}}measureSinceInit(e){const t=this.generateSpan(`${e}_since_init`);return t.start({startTime:_.NC}),{spanId:t.spanId,finish:t.finish}}traceTask(e){return t=>async()=>{const r=this.startSpan(e),n=await t();return r.finish(),n}}measureBetween(e,t,r){const n=this.generateSpan(e);n.start({startTime:t}),n.finish({startTime:r})}generateSpan(e){if(!this.shouldUsePerformanceMark)return{spanId:null,start:()=>{},finish:()=>{}};const{spanName:t,startMarkerName:r,endMarkerName:n}=N.generateUniqueMarkerNames(e);return{spanId:r,start:e=>self.performance?.mark(r,e),finish:e=>{self.performance?.mark(n,{startTime:e?.startTime??performance.now()}),self.performance?.measure?.(t,r,n)}}}static generateUniqueMarkerNames(e){const t=`${B}${e}`,r=`${t}${N.generateId()}`;return{spanName:t,startMarkerName:`${r}_start`,endMarkerName:`${r}_end`}}static generateId(){return"_"+Math.random().toString(36).substr(2,9)}}var K=r(8972),Y=r(7900);const Q="permutive-consent",H=(e,t)=>(0,i.zG)((0,s.ij)(t),(t=>!1===e&&(0,s.Wi)(t)?{isValid:!0,consentData:W()}:(e=>(0,s.pC)(e)&&(e=>null!==e&&"object"==typeof e)(e.value)&&(e=>!0===e.opt_in&&"string"==typeof e.token&&e.token?.length>0)(e.value))(t)?{isValid:!0,consentData:t.value}:{isValid:!1,consentData:V()})),W=()=>({opt_in:!0,token:Q}),V=()=>({opt_in:!1,token:""}),J=e=>{return(0,i.ls)((t=e,e=>(0,i.zG)(H(t.consentRequired,e),(e=>{let{consentData:r,isValid:n}=e;return t.consentDatabase.put(r,Q),n}))),(e=>{let{logger:t,messages:r}=e;return e=>{const n=e?"given":"revoked";return t.log("Consent has been",n),r.emit(`permutive:consent:${n}`),e}})(e));var t},X=e=>(t,r)=>{e.on("permutive:consent:revoked",t),e.on("permutive:consent:given",r)},Z=async e=>{const{logger:t,namespace:r,consentRequired:o,messages:s}=e,c=new Y.oP(window.localStorage,r),u=H(o,await c.get(Q)),l=await(0,i.zG)(a.Y3((()=>c.put(u.consentData,Q)),(e=>new Error(`LocalStorage access is required. ${(0,f.w)(e).message}`))),(e=>e()));if(n.nM(l))return l;const{consentRef:d,giveConsent:g,revokeConsent:p,isRevoked:m,isGiven:h}=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const[t,r]=L.Ue(e),n=()=>!0===t.current;return{consentRef:t,revokeConsent:()=>(r(!1),t.current),giveConsent:()=>(r(!0),t.current),isRevoked:()=>!n(),isGiven:n}}(u.isValid),_={consentRef:d,isGiven:h,isRevoked:m,listenForConsent:X(s)};_.listenForConsent(p,g);const v=J({consentDatabase:c,consentRequired:o,logger:t,messages:s});return n.F2({consentTracking:_,consentValidation:v,consentDatabase:c})};var ee=r(9912),te=r(7422);const re=e=>{const{partialTagWithKey:t}=e,r=t.key;var a;window[r].consent=(a=e,(0,i.ls)(a.consentModule.consentValidation,s.DT(Boolean),s.UI((0,te.initialiseWebSDK)(a)),i.Q1));const c=(0,s.EQ)((()=>{return t={consentDatabase:e.consentModule.consentDatabase,consentRequired:e.tag.config.consentRequired},(0,i.zG)((0,i.a9)(t.consentDatabase.get(Q)),(0,o.UI)((e=>H(t.consentRequired,e).isValid)));var t}),o.of);return(0,i.zG)((0,i.zG)((e=>{let{consentModule:t,tag:r}=e;const n=(0,ee.Ew)((function(e){return"consent"===e.functionName}))(r.q);return(0,s.UI)((e=>t.consentValidation(e.arguments[0])))(n)})(e),c),(0,o.UI)((e=>e?(0,n.F2)(!0):(0,n.t$)("No consent to run on the page"))))},ne=e=>(0,i.zG)((e=>"function"==typeof e.Map?(0,n.F2)(new e.Map([["a",1]])):(0,n.t$)("Maps not supported"))(e),n.tS((e=>1===e.size?(0,n.F2)(null):(0,n.t$)("Iterable Maps not supported")))),ie=e=>(0,i.zG)((e=>"function"==typeof e.Set?(0,n.F2)(new e.Set([1,2])):(0,n.t$)("Sets not supported"))(e),n.tS((e=>2===e.size?(0,n.F2)(null):(0,n.t$)("Iterable Sets not supported")))),ae=e=>(0,i.zG)((0,G.gz)(n.G5)(ne(e),ie(e),(e=>e.Worker&&e.Blob?(0,n.F2)(null):(0,n.t$)("WebWorkers not supported"))(e)),(e=>(0,n.UI)(i.Q1)(e)));const oe=()=>{const e=(0,r(9575).Z)(),t=(e=>{const t=[],r=[],n=()=>{for(;t.length>0&&r.length>0;)r.shift()()},i=e=>new Promise((t=>{r.push((()=>t(e()))),(0,_.HJ)(n)}));return e.addEventListener("message",(0,_.GL)((e=>{null!==e.data&&(t.push(e.data),(0,_.HJ)(n))}))),{next:()=>i((()=>t.shift())),read:()=>i((()=>t.splice(0)))}})(e);return e.postMessage(null),n=>function(e){let{worker:t,trace:n,metrics:a,...c}=e;return t.send({...c,globals:self._____workerGlobals,initialTimestampSecs:(0,i.zG)(s.lo(!1),s.UI((()=>Math.floor(Date.now()/1e3)))),metricsEnabled:a.isEnabled(),timeOriginMainContext:C()}),(0,i.zG)((0,_.SF)((()=>Promise.resolve().then(r.bind(r,925)))),n.traceTask("import-master-low-priority"),o.UI((e=>r=>e.startMaster({...r,metrics:a,trace:n,worker:t}))))}({...n,worker:{...t,send:t=>e.postMessage(t),stop:()=>e.terminate()}})};var se=r(9955);class ce{db;options;constructor(e,t){this.db=e,this.options=t}getSessionId(){return this.options.session_id}sessionHasChanged(){return this.options.hasChanged}static decodeSessionData(e){return e&&"object"==typeof e&&e.hasOwnProperty("session_id")&&e.hasOwnProperty("last_updated")?{...e,last_updated:new Date(e.last_updated)}:null}reset(){return this.db.delete(this.options.session_data_key)}async persistSessionData(e){const t=e.last_updated.toISOString();await this.db.put({...e,last_updated:t},this.options.session_data_key)}static generateNewSession(e){return{session_id:(0,x.k$)(),last_updated:e}}static hasExpired(e,t,r){if(isNaN(t.getTime()))return!0;return e>new Date(t.getTime()+1e3*r)}static async initialise(e,t,r){const n={timeout_seconds:1800,session_data_key:"permutive-session",hasChanged:!1,logger:r};e.deleteCookie(n.session_data_key);const a=new Date,o=await t.get(n.session_data_key).catch(i.gn),s=ce.decodeSessionData(o),c=null===s||ce.hasExpired(a,s.last_updated,n.timeout_seconds)?{...ce.generateNewSession(a),hasChanged:!0}:{...s,last_updated:a,hasChanged:!1},u=new ce(t,(0,x.PM)(n,c));return await u.persistSessionData(c),u}}var ue=r(4085),le=r(7812);class de{getContextFromEnvironment;context;lastContextFromEnvironment;constructor(e,t){this.getContextFromEnvironment=t,this.lastContextFromEnvironment=t(),this.context=e,this.updateContext(...Object.entries(this.lastContextFromEnvironment),...Object.entries(e))}getMutableContextUNSAFE(){return this.refresh(),this.context}getContext(){return this.refresh(),{...this.context}}getClient(){return this.refresh(),{domain:this.context.domain,referrer:this.context.referrer,title:this.context.title,type:this.context.type,url:this.context.url,user_agent:de.applyUserAgentExtension(this.context.user_agent)}}static applyUserAgentExtension(e){const t="PermutiveWebSDK/v20.51.0";return e?`${e} ${t}`:t}refresh(){const e=this.getContextFromEnvironment(),t=t=>this.lastContextFromEnvironment[t]===this.context[t]?e[t]:this.context[t]||e[t];this.updateContext(...(0,i.zG)(Object.keys(e),le.UI((e=>(0,i.bc)(e,t(e)))))),this.lastContextFromEnvironment=e}updateContext(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t.forEach((e=>{let[t,r]=e;this.context[t]=r}))}}class fe extends de{constructor(e,t){super(e,(()=>({type:"web",user_agent:navigator.userAgent,url:(0,ue.bk)(window.location.href),domain:window.location.hostname||"",title:document.title,referrer:(0,ue.bk)(document.referrer),path:window.location.pathname,view_id:t()})))}async getClientAsync(){return this.getClient()}}const ge=e=>(0,i.zG)(a.Do,(0,i.ls)(a.Qt("support",a.Uo(ae(self))),a.Qt("partialTagWithKey",a.Uo((e=>{const t="4b91477e-f67b-4d81-86db-a9742bd41e9c",r=void 0!==e[t]?.q&&void 0!==e[t]?.config?t:"permutive";return(0,i.zG)(e[r],(0,n.ij)("Can't find permutive tag on the page"),(0,n.UI)((e=>({tag:e,key:r}))))})(window))),a.UI((e=>{const t=e.partialTagWithKey.key;return window[t].sdkVersion="v20.51.0",e})),a.Qt("configFromQueryParams",a.Uo((0,K.B9)())),a.Hr("tag",(e=>((e,t)=>{let{tag:r,key:n}=e;return{...r,config:(0,K.ti)({...r.config,windowKey:n},t)}})(e.partialTagWithKey,e.configFromQueryParams))),a.UI((e=>{{const r=e.partialTagWithKey.key,n=window[r];t=n,window.googletag=window.googletag||{cmd:[]},window.googletag.cmd.push((()=>{const e=googletag.pubads(),r=()=>{t.track("AdRequest",{ad_server_id:"dfp",cohorts:e.getTargeting("permutive")})},n=e.getSlots().filter((e=>e.getResponseInformation())).length;for(let e=0;e<n;e++)r();e.addEventListener("slotRequested",r)}))}var t;return e})),a.Hr("trace",(e=>{let{tag:t}=e;return new N(t.config)})),a.Hr("namespace",(e=>{let{tag:t}=e;return new j(t.config)})),a.Hr("logger",(e=>{let{tag:t}=e;return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_.RP;return e.loggingEnabled&&void 0!==self.console?.log?new w(t):new I}(t.config)}))),a.Hr("urls",(e=>{let{tag:t}=e;return new F(t.config)})),a.Hr("messages",(e=>{let{logger:t}=e;return new E(t)})),a.Hr("worker",(()=>oe())),a.ak("consentModule",(e=>(0,i.zG)((()=>Z({...e,consentRequired:e.tag.config.consentRequired})),a.Vn((e=>e.message))))),a.Hr("cookieStore",(e=>{let{consentModule:t,logger:r,namespace:n,tag:a}=e;return((e,t,r,n)=>new((0,i.zG)(u,d({consentTracking:n,logger:r})))(e,t,r))(n,a.config,r,t.consentTracking)})),a.Hr("externalData",(e=>{let{consentModule:t,logger:r,namespace:n}=e;return((e,t,r)=>new((0,i.zG)(m,h({consentTracking:r,logger:t})))(e))(n,r,t.consentTracking)})),a.Hr("userId",(e=>{let{cookieStore:t,consentModule:r,externalData:n,tag:i}=e;return new $(i.config,t,n,r.consentTracking.consentRef)})),a.Hr("permutiveData",(e=>{let{tag:t,namespace:r,logger:n,consentModule:a}=e;return((e,t,r,n)=>new((0,i.zG)(T,R({consentTracking:n,logger:r})))(e,t,r))(t.config,r,n,a.consentTracking)})),a.Hr("metrics",(t=>{let{tag:r,logger:n,permutiveData:i}=t;return function(e,t,r,n,i){const a=n.getData("metricsEnabled")??(()=>{const e=Math.random()<=r.metricsSamplingPercentage/100;return n.setData("metricsEnabled",e),e})()?new U(e,t,i):new z;return a.track({name:"sdk_initialisation_start_time_seconds",value:e/1e3,labels:{}}),a}(e.contextsInitTimestampPerformance,C(),r.config,i,n)})),a.Hr("pageviewState",(e=>{let{tag:t}=e;return(e=>{const t={viewId:(0,i.zG)(e.viewId,s.DT((e=>"string"==typeof e&&(0,x.Gz)(e))),s.fS(x.k$)),watsonEnabled:e.watson.enabled};return(0,i.zG)(L.Ue(t),(e=>{let[r,n]=e;return{ref:r,setState:(0,i.ls)((e=>e(r.current,t)),n)}}))})(t.config)})),(0,i.ls)(a.Hr("localStorage",(e=>{let{logger:t,namespace:r,consentModule:n}=e;return(0,se.E)(r,t,n.consentTracking.consentRef)})),a.ak("sessionManager",(e=>{let{cookieStore:t,localStorage:r,logger:n}=e;return a.Y3((()=>ce.initialise(t,r,n)),(e=>`Failed to initialise session manager: ${e.message}`))})),a.Hr("clientContext",(e=>{let{tag:t,pageviewState:r}=e;return new fe(t.context||{},(()=>r.ref.current.viewId))})),a.Hr("core",(t=>{let{clientContext:r,consentModule:n,metrics:a,pageviewState:o,permutiveData:c,sessionManager:u,trace:l,tag:d,userId:f,worker:g}=t;const{eventSourceId:p,isFirstPageview:m}=(0,i.zG)(s.ij(c.getData("event-source-id")),s.hX(x.Gz),s.UI((e=>({eventSourceId:e,isFirstPageview:!1}))),s.fS((()=>({eventSourceId:(0,x.k$)(),isFirstPageview:!0})))),h=n.consentTracking.consentRef;if(m)if(h.current)c.setData("event-source-id",p);else{let e=!1;h.onChange((()=>{e||(e=!0,c.setData("event-source-id",p))}))}return g({consent:h.current,eventSourceId:p,isFirstPageview:m,isSecureContext:(_=d.config,"development"===_.environment?self.isSecureContext:"https:"===self.location.protocol),metrics:a,permutiveConfig:d.config,organizationId:"4b91477e-f67b-4d81-86db-a9742bd41e9c",pageviewState:o.ref.current,sdkInitTimestampPerformance:e.contextsInitTimestampPerformance,sdkInitTimestampDate:e.contextsInitTimestamp,sessionId:u.getSessionId(),trace:l,trackPageviewComplete:!0,userId:f.get(),userIdIsNewlyGenerated:f.isNewlyGenerated.current,webClient:r.getClient()});var _})),a.Hr("currentScript",(()=>s.ij(e.currentScript))),a.ak("consent",(e=>re(e))),a.tS((e=>(0,i.zG)((0,_.SF)((()=>Promise.resolve().then(r.bind(r,7422)))),e.trace.traceTask("permutive.main.import_permutiveWebLowPriority"),o.tS((t=>t.initialiseWebSDK(e)))))))),pe=e=>(e=>{e().then((0,n.g_)((e=>console.warn(`Permutive was not initialized. ${e}`)),i.Q1))})(ge(e))},1822:(e,t,r)=>{r.d(t,{Bf:()=>v,G6:()=>S,Gz:()=>y,HP:()=>D,Kn:()=>l,Or:()=>P,PM:()=>f,PQ:()=>k,Z_:()=>U,a4:()=>p,aT:()=>_,b2:()=>g,bw:()=>O,cO:()=>E,eu:()=>m,k$:()=>b,lW:()=>G,lo:()=>M,m8:()=>w,mQ:()=>C,qh:()=>d,rH:()=>q,rO:()=>x,vg:()=>z});var n=r(9912),i=r(2169),a=r(8236),o=r(856),s=r(4327),c=r(229),u=r(1876);const l=e=>"object"==typeof e&&!Array.isArray(e)&&null!==e,d=e=>Object.entries(e);function f(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(((e,t)=>({...e,...t})),{})}s.ff(c.xb);function g(){let e,t;return{promise:new Promise(((r,n)=>{e=r,t=n})),reject:t,resolve:e}}function p(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n={waitTimeInMs:50,exponentialBackOff:!1,maxAttempts:20},{waitTimeInMs:o,exponentialBackOff:s,maxAttempts:c}=f(n,r);let l=0;const d=r=>new Promise((n=>Promise.resolve(t()).then((t=>t?Promise.resolve(e()).then((e=>n((0,a.G)(e)))):(0,i.zG)(l++,(e=>e<c?(0,u.HJ)((()=>n(d(r*(s?2:1)))),r):n(a.YP)))))));return d(o)}function m(e,t){const r=Object.create(null);for(const n of t)r[n]=e[n];return r}let h=[];function _(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:navigator.userAgent;if(h.unshift(e),h.length>1)return;const r=["beforeunload","pagehide"],n=r.concat(["visibilitychange"]),i=e=>{if(!a&&e){a=!0;const e=h;h=[],e.forEach((e=>{try{e()}catch{}}))}};let a=!1;n.forEach((e=>{window.addEventListener(e,(()=>{const r=("visibilitychange"!==e||document.hidden)&&I(t);i(r)}))})),r.forEach((e=>{window.addEventListener(e,(()=>i(!0)))}))}function v(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t={capture:!0,...t};const r=["visibilitychange","pagehide"];r.forEach((r=>window.addEventListener(r,(()=>a.Y3((()=>{"pagehide"!==r&&"hidden"!==document.visibilityState||e()}))),{capture:t.capture})))}function b(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(e^(self.crypto||self.msCrypto).getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))}function y(e){return 36===e.length&&/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i.test(e)}function w(){const e={},t=arguments.length;for(let r=0;r<t;r++){const[t,n]=r<0||arguments.length<=r?void 0:arguments[r];e[t]=n}return e}function I(e){return/Mobi|Android/i.test(e)}function S(e){return/^((?!chrome|android).)*safari/i.test(e)}function k(e,t){return new Promise((r=>{(0,u.HJ)((()=>{Promise.resolve(e()).then(r)}),t?.timeout??0)}))}function E(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}const P=()=>({equals:(e,t)=>Object.is(e,t)});function G(e){return(0,o.Zt)(((t,r)=>{const n=e.indexOf(t),i=e.indexOf(r);switch(!0){case-1===n&&-1===i:return 0;case-1!==n&&-1===i:return-1;case-1===n&&-1!==i:return 1;default:return n<=i?-1:1}}))}function U(e,t,r){return function(){try{return r(...arguments)}catch(r){e.reportError(r,t.get())}}}function z(e){return t=>null!=t&&e in t?t[e]:void 0}function D(e){let t=a.YP;const r=(0,a.fS)((()=>{const r=e();return t=(0,a.G)(r),r}));return()=>r(t)}const C=e=>{const t=new Map;return r=>(t.has(r)||t.set(r,e(r)),t.get(r))},x=e=>t=>{const r={...t};for(const n in e)r[n]=e[n]?.(t[n]);return r};function O(e){return t=>(e(t),t)}const M=e=>t=>{const r=e.slice(0,-1),o=e.slice(-1)[0];return(0,i.zG)(r,n.f2((e=>{let[r,n]=e;return(0,i.zG)(t,a.DT(r),a.UI(n))})),a.fS((()=>o(t))))},T=e=>t=>{if("number"==typeof t)return t;if("string"==typeof t){const r=e(t);return Number.isNaN(r)?void 0:r}},q=T(parseInt);T(parseFloat)},2867:(e,t,r)=>{r.d(t,{b:()=>a});var n=r(1822),i=r(1876);class a{timeoutDurationInMilliseconds;maxTimeOutDurationInMilliseconds;constructor(e,t){this.timeoutDurationInMilliseconds=e,this.maxTimeOutDurationInMilliseconds=t}schedule(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeoutDurationInMilliseconds,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.maxTimeOutDurationInMilliseconds;return this.debounce(e,t,r)}scheduleAccumulated(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeoutDurationInMilliseconds,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.maxTimeOutDurationInMilliseconds;return this.debounce(e,r,n,t)}scheduleForPageUnload(e){return(0,n.aT)(e)}debounce(e,t,r,a){let o,s,c,u=[];return l=>{a&&(c=a.concat(c??a.empty,l));const d=(0,n.b2)();u.push(d);return o?.(),o=(0,i.HJ)((()=>{s?.(),s=void 0;const t=e(c||l);u.forEach((e=>e.resolve(t))),c=a?.empty,u=[]}),t),s||(s=(0,i.HJ)((()=>{o?.(),s=void 0;const t=e(c||l);u.forEach((e=>e.resolve(t))),c=a?.empty,u=[]}),r)),d.promise}}}},7137:(e,t,r)=>{r.d(t,{i:()=>i});var n=r(1876);class i{messages;queue=[];nextNotify=null;constructor(e){this.messages=e,e.on("permutive:taskQueue:update",(()=>{this.execute()}))}add(e){this.queue.push(e),this.notify()}notify(){const e=()=>{this.messages.emit("permutive:taskQueue:update")},t=(new Date).getTime();null===this.nextNotify||this.nextNotify<t-50?(this.nextNotify=t,e()):this.nextNotify<=t&&(this.nextNotify=t+50,(0,n.HJ)(e,50))}execute(){if(0===this.queue.length)return;let e=!1,t=!1,r=0;for(let n=0;n<this.queue.length;n++){const i=this.queue[n];if(i.complete)r+=1;else if(i.started)t=!0,e=e||i.blocks();else{if(i.waits()&&t)break;e||(t=!0,e=e||i.blocks(),i.execute((()=>{this.notify()})))}}this.queue.splice(0,r)}size(){return this.queue.length}}},4085:(e,t,r)=>{r.d(t,{_Y:()=>o,bk:()=>a,zM:()=>i});var n=r(2169);const i=()=>{const e=window.location.href.split("?")[1]?.split("#")[0]?.split("&");return void 0===e?{}:e.reduce(((e,t)=>{const[r,n]=t.split("=");return{...e,[r]:n}}),{})},a=e=>{if(!e)return"";return(0,n.zG)(e,(e=>{const t=e.length-1;return"/"===e[t]?e.slice(0,t):e}))};function o(e){const t=e.match(/\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b/),r=e.match(/[a-z0-9][a-z0-9-]+\.[a-z.]{2,24}$/i),n=e.match(/localhost/);if(r&&r.length>0){const t=e.split(".").reverse();return t.length>=3&&t[1].match(/^(com|edu|gov|net|mil|org|nom|co|ac|name|info|biz)$/i)?t[2]+"."+t[1]+"."+t[0]:t[1]+"."+t[0]}return t&&t?.length>0?t[0]:n&&n?.length>0?"localhost":""}},6636:(e,t,r)=>{r(50),r(1822),r(1876)},70:(e,t,r)=>{r.d(t,{$7:()=>h,Cg:()=>g,Qd:()=>m,cs:()=>p,dN:()=>d,zi:()=>f});var n=r(7144),i=r(2169),a=r(8236),o=r(7812),s=r(6805),c=r(3567),u=r(1822);const l="[PrebidJS]";function d(e){const t=(()=>{const e=["pbjs",...window._pbjsGlobals||[]];return[...new Set(e)]})();e.logger.debug(l,"Found keys",t);return s.K4((()=>(0,i.zG)(t,o.UI((0,i.ls)((e=>(e=>{const t={maxAttempts:100,waitTimeInMs:50};let r;return{windowPropertyKey:e,pbjs:(0,u.a4)((()=>r),(()=>{const t=(0,i.zG)(window,(0,u.vg)(e));return!(!t?.que||"function"!=typeof t?.getEvents||(r=t,0))}),t)}})(e)),(t=>(0,i.zG)(c.p4(t.pbjs),c.UI((r=>{const o=n.pF((r=>(r.message=`Failed to resolve key "${t.windowPropertyKey}". ${r.message}`,e.reportError(`${l} ${r.toString()}`),a.YP)));return(0,i.zG)(r,(0,u.bw)(a.UI((r=>e.logger.debug(l,`Completed check for key "${t.windowPropertyKey}"`,{result:r})))),a.UI(o),a.UI(a.UI((e=>({windowPropertyKey:t.windowPropertyKey,pbjs:e})))))})))))),(e=>c.vP(...e)),c.UI((e=>({completedChecks:e.every(a.pC),pbjsKeyPairs:e.map(a.xH)}))),c.UI((e=>{let{pbjsKeyPairs:t,completedChecks:r}=e;const n=t.filter(a.pC),[s,...c]=n;return{completedChecks:r,mainPair:s??a.YP,otherPairs:(0,i.zG)(c,o.DZ(i.yR))}})))))}const f=e=>"function"==typeof e.readConfig?e.readConfig():e.getConfig();function g(e){const t=e.meta?.advertiserDomains;if("string"==typeof t)return[t];if(Array.isArray(t)){const e=t.filter((e=>"string"==typeof e));return e.length>0?e:void 0}}const p=e=>{const t=e.appnexus&&"object"==typeof e.appnexus&&"buyerMemberId"in e.appnexus&&e.appnexus.buyerMemberId,r=e.rubicon&&"object"==typeof e.rubicon&&"networkId"in e.rubicon&&e.rubicon.networkId,n=t||r||e?.meta?.networkId;return n?`${n}`:void 0},m=e=>{const t=e=>isNaN(e)?void 0:e;try{return"number"==typeof e.cpm?t(e.cpm):(0,i.zG)(e.cpm??"",parseFloat,t)}catch{return}},h=e=>e.dealId?`${e.dealId}`:void 0},2615:(e,t,r)=>{r.d(t,{X:()=>n});const n=e=>{let t=!0;const r=[];return{addBlocker:n=>{r.push(n),e.logger.log("<blockers> added blocker "+n),e.messages.on(n,(()=>{if(t){const i=r.indexOf(n);i>=0&&(r.splice(i,1),e.logger.log("<blockers> removed blocker "+n)),0===r.length&&(t=!1,e.messages.emit("permutive:blockers:empty"),e.logger.log("<blockers> complete"))}}))}}}},6663:(e,t,r)=>{r.d(t,{X:()=>i});var n=r(3567);class i{ref;setCustomProps;constructor(){const[e,t]=n.Ue({});this.ref=e,this.setCustomProps=t}getCustomProps(){return this.ref.current}}},8799:(e,t,r)=>{r.r(t),r.d(t,{EventsCache:()=>I,RESET_HISTORICAL:()=>b});var n=r(5654),i=r(2945),a=r(7812),o=r(7144),s=r(2169),c=r(8236),u=r(7226),l=r(132);const d=e=>({id:e.id,name:e.name,time:new Date(e.time),properties:e.properties||{},session_id:e.session_id,view_id:e.view_id}),f=e=>({id:e.id,name:e.name,time:(g(e.time)?e.time:new Date).toISOString(),properties:e.properties||{},session_id:e.session_id,view_id:e.view_id}),g=e=>isFinite(e)&&e instanceof Date;var p=r(1822),m=r(2867);class h extends Error{constructor(e){super(e),this.name="StoreClosingError"}}const _="permutive-events-cache",v="permutive-events-for-page",b="historical",y="[EVENTSCACHE]",w=e=>"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name;class I{config;logger;reportError;trace;metrics;userId;makeEventsStore;eventStore;eventsCache=(()=>this.makeEventsRepository(_))();eventsForPage=(()=>this.makeEventsRepository(v))();eventsTTLInMilliseconds;readiness;debouncedReportError=(()=>new m.b(5e3,5e3).schedule((e=>this.reportError(e.errorMessage,{userId:e.userId}))))();static initialise(e,t,r,n,i,a,o){return(0,s.zG)(o(),l.UI((s=>new I(e,t,r,n,i,a,o,s))))}constructor(e,t,r,n,i,a,o,l){this.config=e,this.logger=t,this.reportError=r,this.trace=n,this.metrics=i,this.userId=a,this.makeEventsStore=o,this.eventStore=l,this.eventsTTLInMilliseconds=(0,s.zG)((0,c.ij)(this.config.eventsTTLInDays),(0,c.tS)((e=>"number"==typeof e&&e>0?(0,c.G)(24*e*3600):c.YP))),this.eventsCache.events=(0,p.HP)((()=>(0,p.PQ)((0,s.zG)(u.tD((()=>this.trace.startSpan("load_event_cache"))),u.tS((e=>(0,s.zG)(this.loadFromDisk(),u.At((t=>()=>{e.finish(),this.logDebug(`Event cache loaded, #e ${t.length}`)}))))))))),this.readiness=this.eventsCache.events().then((()=>this.migratePreviousPagesEvents())),a.onChange((()=>this.reset()))}async migratePreviousPagesEvents(){const e=this.trace.startSpan("migrate_previous_for_page_events"),t=(0,u.pE)((e=>(0,l.Y3)((()=>e.flush()),n.w)));return(0,s.zG)([this.eventsForPage,this.eventsCache],t,(0,u.UI)((t=>{const r=a.bj(t);return r.length>0&&this.reportError(`Migrate previous events failed. Got:\n${r.join("\n ")}`,{userId:this.userId.current}),e.finish()})),(e=>e()))}all(){return Promise.all([this.eventsCache.events(),this.eventsForPage.events()]).then(a.xH)}async add(e,t){let{persistOnDisk:r}=t;return this.logDebug("Adding to cache",e),this.eventsForPage.events=(0,s.zG)(this.eventsForPage.events,u.UI((t=>[...t,e])),p.HP),r&&this.readiness.then((()=>this.eventsForPage.flush())),e}filterEventsByWorkspace(e){return e}pruneEventsToSizeLimit(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.config.eventsCacheLimitBytes;if(r<=0||t<=r)return this.logDebug(`Event size of ${t} less than limit of ${r}`),{events:e,sizeInBytes:t};this.logDebug("Events before pruning",{count:e.length,sizeInBytes:t,byteLimit:r});let n=1,i=[...e];for(;t>r;)i.splice(0,n),n*=2,t=2*JSON.stringify(i).length;return this.logDebug("Events after pruning",{count:i.length,sizeInBytes:t}),{events:i,sizeInBytes:t}}loadFromDisk(){const e=()=>[],t=(0,s.zG)(this.eventsTTLInMilliseconds,c.EQ((()=>s.yR),(e=>a.hX((t=>e>Date.now()-t.time.getTime())))));return(0,s.zG)(u.tD((()=>(this.logLog("Loading event cache..."),this.metrics.startTimer("sdk_load_events_cache_task_duration_seconds",{})))),u.YO("loadEventsCacheTask"),u.ak("eventsFromDisk",(()=>(0,s.zG)(a.nI([this.eventStore.get(_),this.eventStore.get(v)]),a.UI(l.LV((0,p.lo)([[e=>e instanceof h,(0,s.ls)(e,u.of)],t=>(0,s.zG)(u.tD((()=>this.reportError(`Error fetching data from store. Got ${t}`,{userId:this.userId.current}))),u.tS((()=>()=>this.reset("historical"))),u.UI(e))]),(0,s.ls)(c.fS(e),u.of))),a.vP(u.qA)))),u.At((e=>{let{eventsFromDisk:t,loadEventsCacheTask:r}=e;return()=>{this.logDebug("Read events from store:",t),this.metrics.stopTimer("sdk_load_events_cache_task_duration_seconds",r)}})),u.UI((0,s.ls)((0,p.vg)("eventsFromDisk"),a.xH,this.filterEventsByWorkspace,(e=>this.pruneEventsToSizeLimit(e,2*JSON.stringify(e).length)),(e=>(this.eventsCache.sizeInBytes=e.sizeInBytes,this.eventsCache.sizeInBytesLastSuccessfulWrite=e.sizeInBytes,e.events.length>0&&(this.metrics.track({name:"sdk_events_cache_byte_total",value:e.sizeInBytes,labels:{}}),this.metrics.track({name:"sdk_events_cache_size_total",value:e.events.length,labels:{}})),e.events)),a.UI(d),t)))}async reset(e){return(0,s.zG)(u.tD((()=>this.logDebug("Resetting Events Cache"))),u.tS((()=>this.eventStore.deleteStore())),l.tS((()=>this.makeEventsStore())),l.Zl((t=>(this.eventStore=t,e===b?i.gz(l.Ij)(this.eventsCache.reset,this.eventsForPage.flush):i.gz(l.Ij)(this.eventsCache.reset,this.eventsForPage.reset)))),l.wE((()=>()=>this.all())),l.fS((()=>u.of(S()))),(e=>e()))}getStateSizeInBytes(){return this.eventsForPage.sizeInBytes+this.eventsCache.sizeInBytes}makeEventsRepository(e){const t=(()=>{let e=Promise.resolve(o.F2((0,s.Q1)()));return t=>e=e.then(t)})(),r=e=>(0,s.zG)(u.tD((()=>this.logDebug(`Writing ${e.length} events to ${_.key}`))),u.tS((()=>this.eventStore.put(e.map(f),_.key))),l.UI(s.Q1)),i=(0,s.zG)(u.tD((()=>this.logDebug(`Deleting events for ${_.key}`))),u.tS((()=>this.eventStore.delete(_.key))),l.Vn(n.w)),a=(0,s.ls)(u.of,u.At((e=>()=>this.logError(`Events cache failed to put ${_.key}. Got ${e}`))),u.tS((0,p.lo)([[e=>w(e)&&_.retryAttempts<9,()=>(0,s.zG)(u.tD((()=>{_.retryAttempts+=1,this.logDebug(`Attempt #${_.retryAttempts} to write ${_.key} to EventsStore`)})),u.tS((()=>h)),u.tS((()=>d)))],[e=>w(e),e=>(0,s.zG)(u.tD((()=>this.logDebug(`Attempted ${_.retryAttempts} rewrite attempts and reached limit of 9 max writes.`,"Reporting QuotaExceededError to API"))),u.tS((()=>()=>this.debouncedReportError({errorMessage:`Events cache failed to put ${_.key}. Got ${e}`,userId:this.userId.current}))),u.tS((()=>l.t$(e))))],l.t$]))),c=e=>l.tD((()=>{this.logDebug(`Successfully wrote events for ${_.key} after ${_.retryAttempts} attempts`),_.retryAttempts=0,_.sizeInBytes=2*JSON.stringify(e).length,_.sizeInBytesLastSuccessfulWrite=_.sizeInBytes})),d=(0,s.zG)((()=>_.events()),u.tS((e=>(0,s.zG)(r(e),u.mU(o.EQ(a,(()=>c(e)))))))),g=(e,t)=>(0,s.zG)(e.events,u.UI((r=>{const n=2*JSON.stringify(r).length,i=this.pruneEventsToSizeLimit(r,n,t);return e.events=u.of(i.events),e.sizeInBytes=i.sizeInBytes,t-e.sizeInBytes}))),m=(e,t)=>{let[r,...n]=e;return r&&0!==t?(0,s.zG)(g(r,t),u.tS((e=>(this.logDebug(`${e} left after pruning ${r.key}`),m(n,e))))):u.of((0,s.Q1)())},h=(0,s.zG)(l.tD((()=>this.eventsForPage.sizeInBytes-this.eventsForPage.sizeInBytesLastSuccessfulWrite)),l.fX(o.DT((e=>e>0),(e=>new Error(`${this.eventsForPage.key} failed to write the same or smaller events cache of size ${e}`)))),l.tS((e=>{const t=1.2*e,r=[this.eventsCache,this.eventsForPage];return this.logDebug(`Pruning ${t} bytes from`,r),(0,s.zG)(m(r,t),l.fF)}))),_={key:e,events:u.of([]),sizeInBytes:0,sizeInBytesLastSuccessfulWrite:0,retryAttempts:0,flush:()=>(0,s.zG)(u.tD((()=>this.trace.startSpan(`write_${_.key}`))),u.tS((e=>(0,s.zG)(d,u.At((()=>()=>e.finish()))))),t),reset:()=>(0,s.zG)(u.tD((()=>{_.events=u.of([]),_.sizeInBytes=0,_.sizeInBytesLastSuccessfulWrite=0})),u.tS((()=>i)),t)};return _}logDebug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.debug(y,...t)}logWarn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.warn(y,...t)}logError(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.error(y,...t)}logLog(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.log(y,...t)}}const S=()=>[]},1230:(e,t,r)=>{r.r(t),r.d(t,{DBStore:()=>o});var n=r(5654),i=r(8236),a=r(132);class o{db;constructor(e){this.db=Promise.resolve(e)}put(e,t){return(0,a.Y3)((()=>this.db.then((r=>r.put(e,t)))),n.w)}get(e){return(0,a.Y3)((()=>this.db.then((t=>t.get(e))).then(i.ij)),n.w)}delete(e){return(0,a.Y3)((()=>this.db.then((t=>t.delete(e)))),(e=>String(e)))}deleteStore(){return(0,a.Y3)((()=>this.db.then((e=>e.deleteStore()))),(e=>String(e)))}}},8970:(e,t,r)=>{r(1822)},1921:(e,t,r)=>{r(1876)},8577:(e,t,r)=>{r.r(t),r.d(t,{PrebidAddon:()=>b,load:()=>v});var n=r(50),i=r(9912),a=r(7144),o=r(2169),s=r(8236),c=r(3567),u=r(1822),l=r(70);const d="prebidAddonLoadingtime",f="prebidAddonInitStart",g="prebidAddonInitEnd",p=(0,n.Hn)("prebid")("revenue_insights_enabled",!1);class m{logger;options;permutive;trackedBids=[];constructor(e){this.logger=e.logger,this.permutive=e.permutive,this.options=e,this.startRevenueInsights()}async startRevenueInsights(){if(this.logger.debug("[Revenue Insights]","revenue insights enabled",p),!1===p)return;performance.mark(f);const e={maxAttempts:200,waitTimeInMs:50};(0,o.zG)(this.options.pbjs,c.UI(s.UI((t=>(0,u.a4)((()=>this.runRevenueInsights(t)),(()=>!!window.googletag?.pubads),e)))))}runRevenueInsights(e){this.trackMetrics();const t=()=>{e.getAllWinningBids().forEach((e=>r(e,!0))),e.onEvent("bidWon",(e=>r(e,!0)))},r=(e,t)=>(0,a.Y3)((()=>d(e,t)),(e=>{})),n=e=>{const t=e?.meta?.brandName||e?.meta?.clickUrl||e?.adomain?.[0]||e?.meta?.advertiserName||((0,l.Cg)(e)??[])[0]||e?.adserverTargeting?.hb_adomain;return t?`${t}`:void 0},o=e=>{const t=e.rubicon&&"object"==typeof e.rubicon&&"advertiserId"in e.rubicon&&e.rubicon.advertiserId||e?.meta?.brandId||e?.meta?.buyerId||e?.meta?.advertiserId;return t?`${t}`:void 0},s={equals:(e,t)=>e.ad_unit_code===t.ad_unit_code&&e.ad_id===t.ad_id&&e.auction_id===t.auction_id&&e.winning_bid===t.winning_bid},c=e=>!(0,i.t9)(s)(e,this.trackedBids),d=(t,r)=>{const i=(0,l.zi)(e),a=((e,t,r)=>({ad_id:e.adId??"",ad_unit_code:e.adUnitCode??"",bidder:e.bidder,bidder_timeout:r,deal_id:(0,l.$7)(e),cpm:(0,l.Qd)(e),hb_pb:e.adserverTargeting&&e.adserverTargeting.hb_pb,height:(0,u.rH)(e.height),width:(0,u.rH)(e.width),time_to_respond:e.timeToRespond,bid_available:"string"==typeof e.statusMessage&&e.statusMessage.indexOf("empty")<0,winning_bid:t,advertiser_id:o(e),advertiser_name:n(e),advertiser_domains:(0,l.Cg)(e),dsp_id:(0,l.cs)(e),auction_id:e.auctionId}))(t,r,(0,u.rH)(i.bidderTimeout));c(a)&&(a.cpm&&a.cpm>0&&r&&this.permutive.track("PrebidBid",a),this.updateTrackedBids(a))};e.que.push((()=>{window.googletag.cmd.push(t)}))}trackMetrics(){performance.mark(g),performance.measure(d,f,g);const e=performance.getEntriesByName(d)[0].duration;this.options.metrics.track({name:"sdk_addon_init_duration_seconds",value:e,labels:{addon:"prebid"}})}updateTrackedBids(e){const t=this.trackedBids.findIndex((t=>e.ad_id===t.ad_id&&e.winning_bid!==t.winning_bid));t>-1?this.trackedBids[t]={...this.trackedBids[t],...e}:this.trackedBids.push(e)}}const h="prebid",_=(0,n.Hn)("prebid")("data_provider_config",{ac_bidders:[]}),v=e=>{(0,n.Hn)(h)("auto_init",!1)&&e.q.push({functionName:"addon",arguments:[h,{}]})};class b extends m{externalData;dataProviderParamsFromIntegrationConfig={};constructor(e){super(e),this.externalData=e.externalData,this.parsePrebidConfig()}getPermutiveRtdConfig(){return this.logDebug("RTD config retrieved",this.dataProviderParamsFromIntegrationConfig),this.dataProviderParamsFromIntegrationConfig}storeAndSetPermutiveRtdConfig(e){this.externalData.setExternalJsonData("permutive-prebid-rtd",e),this.dataProviderParamsFromIntegrationConfig=e}parsePrebidConfig(){this.logDebug("data provider config",_);const{ac_bidders:e}=_;this.storeAndSetPermutiveRtdConfig({acBidders:e})}logDebug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.log("[prebid]",...t)}}},3465:(e,t,r)=>{r.r(t),r.d(t,{eventCacheService:()=>u,eventNameBlacklist:()=>l});var n=r(3567),i=r(6805),a=r(4694),o=r(2169),s=r(7812),c=r(1822);const u=e=>i.K4((()=>({newEvents:(0,o.zG)(e.newEvents,n.UI(a.UI((0,c.bw)(s.UI((t=>{let[,r]=t;l.has(r.name)||e.eventsCache.add(r,{persistOnDisk:!0})})))))),priorEvents:()=>e.eventsCache.all()}))),l=new Set(["AdRequest","PageviewEngagement","PrebidAuctions","Reaction","SegmentEntry","SegmentExit","SlotRendered","ThirdPartySegments","VideoEngagement"])},5870:(e,t,r)=>{r.d(t,{Kd:()=>i,eJ:()=>a});r(50);var n=r(6805);r(3567),r(1822);const i="addon:twitter_pixel",a=function(e){return n.K4((()=>{}))}},9575:(e,t,r)=>{r.d(t,{Z:()=>a});var n=r(1005),i=r.n(n);function a(){return i()('/*! @permutive/javascript-sdk v20.51.0 (web) (built 2025-10-01T00:19:47.132Z) */(()=>{"use strict";var __webpack_modules__={654:(e,t,r)=>{function n(e){return e instanceof Error?e:new Error("string"==typeof e?e:JSON.stringify(e))}r.d(t,{w:()=>n})},987:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{N:()=>runtimeFactory});const runtimeFactory=deps=>{const{provideEnvironment,...lookups}=generateLookupMethods(deps.runtimeInput),env=generateRuntimeEnvironment({lookups,hash:deps.hash});return provideEnvironment(env),{env,locallyLiftedQueries:deps.runtimeInput.queries(env)||{},cloudLiftedQueries:"function"==typeof deps.runtimeInput.interpretOnlyQueries?deps.runtimeInput.interpretOnlyQueries(env):{},queriesByEvent:deps.runtimeInput.eventSegments(env)||{},createCloudLiftQueries:cloudLiftQueries=>{const createQueries=eval?.(`"use strict";${cloudLiftQueries}`);return createQueries(env)}}};function generateRuntimeEnvironment(e){const t=e=>()=>{throw new Error(`${e} lookup has not been provided`)};let r=t("events"),n=t("literals"),i=t("properties"),a=t("ahoCorasick"),o=t("subexpressions"),s=t("rootCompression");function c(e){return u(e)&&!f(e)}function u(e){return Boolean(e&&"object"==typeof e&&!Array.isArray(e))}function f(e){for(const t in e)return!1;return!0}function l(e){return(t,r)=>{const n=null!=t&&null!=r?e(t,r):t||r;return null==n||u(n)&&f(n)?null:n}}function d(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g;const n=i(t);function a(e,t){return e&&null!=e[t]?e[t]:null}const o=n.reduce(a,e);return null===o?null:r(o)}function p(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g;return e.properties?d(e.properties,t,r):null}e.lookups.onReady((e=>{const{ahoCorasick:t,events:c,literals:u,properties:f,subexpressions:l,rootCompression:d}=e;r=e=>"number"==typeof e?c[e]:e,n=e=>"number"==typeof e?u[e]:e,i=e=>"number"==typeof e?f[e]:e,a=e=>t[e],o=e=>l[e],s=e=>d[e]}));let g=e=>e,m=e=>!0;function b(e,t){return function(r){for(let n=0;n<e.length;n++){if((e[n](r)||!1)===t)return t}return!t}}function h(e){return b(e,!0)}function _(e){return b(e,!1)}let y=e=>t=>!e(t),v=(e,t)=>r=>r>=e&&r<=t,w=e=>new Date(e).getTime(),S=e=>d(e,["time"],w),I=(e,t)=>d(t,e,w),G=(e,t,r,n,i,a)=>o=>{const s=d(o,e,(e=>e.filter(n).map((e=>d(e,t))).reduce(i,a)));return r(null===s?a:s)};function z(e,t,r,n){for(const i of e)if(r(i)&&t(i)===n)return n;return!n}let k=e=>t=>("string"==typeof e||"number"==typeof e)&&"string"==typeof t&&t.toLowerCase().indexOf(n(e).toLowerCase())>-1,U=e=>t=>null!=t&&Array.isArray(t)&&t.indexOf(e)>=0;const E=(e,t)=>({l:n=>d(n,["name"])===r(e)&&t(n)?["p",1]:null,a:(e,t)=>["p",e[1]+t[1]],i:e=>e?Array.isArray(e)?e.slice(-1)[0]:e:0,c:e=>Array.isArray(e)&&e[1]?e:null});const P=()=>null,q=e=>({a:{m:P,z:null},r:t=>e(t),d:{a:P,l:P,i:P,c:P}}),x=(e,t,r,n)=>q((i=>function(e,t,r,n,i){const a=d(e.getSegments(),[t,r])||!1;return i&&(n||a)&&e.setSegmentActivation(t,r,i),a}(i,e,t,r,n))),C=x;function O(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:18e5;return n=>{function i(e,t,r){if(c(t)){if(c(r)){const n={...t,...r};for(const i in r)if(t[i]){const o=a(e,t[i],r[i]);null!=o&&(n[i]=o)}return n}return t}return r}function a(e,t,r){if(c(t)){if(c(r)){const i={...t,...r};for(const a in r)if(t[a]){const o=Array.isArray(t[a])?[e,...t[a]]:[e,t[a]],s=Array.isArray(r[a])?[e,...r[a]]:[e,r[a]],c=n.d.a(o,s);if(null!=c){const[e,...t]=c;i[a]=t}}return i}return t}return r}const o=e=>Array.isArray(e)&&"object"==typeof e[3];return{a:{m:(e,t)=>[t[0],n.a.m(null!=e[0]&&e[0][0]===t[0][0]?e[1]:n.a.z,t[1])],z:[[],n.a.z]},r:(t,r)=>n.r(t,0!==r[0].length&&r[0][0]===e(t)?r[1]:n.a.z),d:n.d.sq||{a:(e,t)=>{if(!o(e))return o(t)?t:null;if(!o(t))return o(e)?e:null;const[r,,,n]=e;return[r,"u",null,i(r,n,t[3])]},l:(i,a)=>{let o=d(i,t),s=e(a);if(o!==s)return null;let c=n.d.l(i,a);if(!(Array.isArray(c)&&c.length>1))return null;let[u,...f]=c,l=+(S(i)||a.getCurrentTime()),p=Math.floor(l/r),g={};return g[p]={},g[p][s]=1===f.length?f[0]:f,[u,"u",null,g]},i:(t,r)=>{if(!o(t))return[[],n.a.z];let i=e(r),a=t[3];return[[i],Object.keys(a).map((e=>a[e]?.[i])).filter(T).map((e=>n.d.i([t[0]].concat(e),r))).reduce(n.a.m,n.a.z)]},c:g}}}}let D=O((e=>e.getCurrentSession()),["session_id"],18e5),A=O((e=>e.getCurrentView()),["view_id"],3e5);const T=e=>!!e;function M(e){return function(t){return{d:{i:(r,n)=>{const i=e(n),a=(Array.isArray(r)?r:[])[3]||{},o=Object.keys(a).map((e=>{const t=a[e]?.[i];return Array.isArray(t)?t[0]:t})).filter(T).reduce(((e,t)=>e+t),0);return t.d.i(["p",o],n)},c:g}}}}let R=M((e=>e.getCurrentSession())),j=M((e=>e.getCurrentView()));function L(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return{a:{m:(e,t)=>e.concat(t).slice(-r),z:[]},r:(t,r)=>e.r(t,r.reduce(((t,r)=>e.a.m(t,r)),e.a.z)),d:e.d.ftn||{a:(e,t)=>{const n=Object.entries({...e[3],...t[3]}).sort(((e,t)=>{let[r]=e,[n]=t;return Number(r)-Number(n)})).slice(-r);return[e[0],e[1],null,Object.fromEntries(n)]},l:(t,i)=>{const a=e.d.l(t,i),o=d(t,["time"],w)*n;return a&&[a[0],"x"+r,null,{[o]:2==a.length?a[1]:a.slice(1)}]},i:(t,r)=>t?Object.keys(t[3]||{}).sort().reverse().map((e=>Array.isArray(e)?[t[0],...t[3][e]]:[t[0],t[3][e]])).map((t=>e.d.i(t,r))):[],c:g}}}function F(e,t){return{d:{i:(t,r)=>{const n=Array.isArray(t)?t:[],i=Object.keys(n[3]||{}).reduce(((e,t)=>n[3][t]+e),0);return e.d.i(["p",i],r)},c:g}}}const Q=F,N=F;let Y=(e,t)=>null==e?null==t?null:{b:t}:null==t?{a:e}:{a:e,b:t};function $(e,t){return r=>{if(!r||null==r.a&&null==r.b)return null;const n=null==r.a?void 0:e.d.c(r.a)??void 0,i=null==r.b?void 0:t.d.c(r.b)??void 0;return n===r.a&&i===r.b?r:Y(n,i)}}function B(e,t){return{a:(r,n)=>{const i=null!=r.a&&null!=n.a?e.d.a(r.a,n.a):r.a||n.a,a=null!=r.b&&null!=n.b?t.d.a(r.b,n.b):r.b||n.b;return Y(i,a)},l:(r,n)=>Y(e.d.l(r,n),t.d.l(r,n)),i:(r,n)=>r?[e.d.i(r.a||null,n),t.d.i(r.b||null,n)]:[e.a.z,t.a.z],c:$(e,t)}}function H(e,t,r,n){let i=e,a=t.map(r),o=(e,r)=>n(t[e])(r);for(let e=t.length-1;e>0&&i;e--)i.b&&(a[e]=o(e,i.b)),i.a&&1===e&&(a[0]=o(0,i.a)),i=i.a;return a}const K=e=>function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length-1;if(!t||null==t.a&&null==t.b)return null;const n=e[r];if(!n)return null;if(1===r)return $(e[0],n)(t);const i=null==t.a?void 0:K(e)(t.a,r-1)??void 0,a=null==t.b?void 0:n.d.c(t.b)??void 0;return i===t.a&&a===t.b?t:Y(i,a)};let V=e=>t=>{function r(e){let t=e[0];for(let r=1;r<e.length;r++)t=[t,e[r]];return t}function n(e){let r=e,n=Array(t.length);for(let e=t.length-1;e>0;e--)n[e]=r[1],r=r[0];return n[0]=r,n}function i(e,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length-1;if(0==n)throw new Error("subquery index out of bounds.");const a=(1==n?l(t[0].d.a)(e?.a,r?.a):i(e?.a,r?.a,n-1))||void 0,o=l(t[n].d.a)(e?.b,r?.b)||void 0;return Y(a,o)}return{r:(r,i)=>{const a=n(i);return e(t.map(((e,t)=>()=>e.r(r,a[t]))))({})},a:{z:r(t.map((e=>e.a.z))),m:(e,i)=>{const a=n(e),o=n(i);return r(t.map(((e,t)=>function(e,t,r){return null===t?r:null===r?t:e.a.m(t,r)}(e,a[t],o[t]))))}},d:{a:(e,r)=>1==t.length?l(t[0].d.a)(e,r):i(e,r),l:(e,r)=>function(e){let t=e[0];for(let r=1;r<e.length;r++)t=Y(t,e[r]);return t}(t.map((t=>t.d.l(e,r)))),i:(e,n)=>((e,n)=>r(H(e,t,(e=>e.a.z),(e=>t=>e.d.i(t,n)))))(e,n),c:K(t)}}},W=V(h),X=V(_);let J=e=>t=>({d:{i:(r,n)=>e(H(r,t,(e=>e.d.i(null,n)),(e=>t=>e.d.i(t,n))).map((e=>t=>e)))({}),c:K(t)}}),Z=J(_),ee=J(h);function te(e,t){let r=a(e);if(!t||!r)return!1;if(!r.length)return!0;let n=0,i=!1,o=(e=>{let t=[];for(let r=0;r<e.length;++r){let n=e.charCodeAt(r);if(n>=55296&&n<=56319){let n=e.charCodeAt(r+1);if(n>=56320&&n<=57343){t.push(e.slice(r,r+2)),++r;continue}}t.push(e.charAt(r))}return t})(t.toLowerCase());for(let e=0;e<o.length;e++){let t=o[e];for(;n>0&&!r[n][t];)n=r[n].su?r[n].su:0;if(r[n][t]&&(n=r[n][t],i=!!r[n].te,i))break}return i}let re=(t,r)=>{let n,i,a=e.hash(t);if(0===r.length)return!1;if(r[0]===a)return!0;let o=0,s=r.length,c=!1;for(;(c=(n=r[i=o+(s-o>>1)])!==a)&&(n<a?o=i:s=i,!(o>=s-1)););return!c},ne=(e,t)=>r=>re(d(r,e),t),ie=(e,t)=>r=>re(p(r,e),t);return{q:function(e){return{lift:(t,r)=>e.d.l(t,r),append:l(e.d.a),interpret:(t,r)=>((t,r)=>({result:e.r(t,r)}))(r,e.d.i(t,r)),compact:e.d.c,migrate:g,m:e.a.m,z:e.a.z,r:e.r,i:e.d.i}},i_q:function(e){return{interpret:(t,r)=>({result:e.d.i(t,r)}),compact:e.d.c}},a:_,acq:function(e,t){return{r:(r,n)=>e.r(r,n[0])&&t.r(r,n[1]),a:{z:[e.a.z,t.a.z],m:(r,n)=>[e.a.m(r[0],n[0]),t.a.m(r[1],n[1])]},d:B(e,t)}},acqs:X,acs:te,acs_:(e,t)=>r=>te(t,d(r,e)),af_i:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m;return n=>d(n,e,(e=>z(e,t,r,!1)))&&!0},af_l:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m;return n=>{const i=d(n,e,(e=>e.filter(r).length));return t(null===i?0:i)}},af_m:function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:m;return i=>{const a=d(i,e,(e=>e.filter(n)));return null===a||0===a.length?r(0):r(a.map((e=>d(e,t))).reduce(((e,t)=>e+t),0)/a.length)}},af_n:function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:m;return G(e,t,r,n,((e,t)=>Math.min(e,t)),Number.POSITIVE_INFINITY)},af_p:function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:m;return G(e,t,r,n,((e,t)=>e*t),1)},af_s:function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:m;return G(e,t,r,n,((e,t)=>e+t),0)},af_u:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m;return n=>d(n,e,(e=>z(e,t,r,!0)))||!1},af_x:function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:m;return G(e,t,r,n,((e,t)=>Math.max(e,t)),Number.NEGATIVE_INFINITY)},as:(e,t,r)=>n=>{const i=p(n,t),a=r.length;let o=!0;for(let t=0;t<a;t++){const n=r[t];if(o=e(n)(i),!o)break}return o},c:U,c_:(e,t)=>r=>U(t)(d(r,e)),cl_:(e,t)=>r=>U(n(t))(d(r,e)),cx:e=>t=>U(n(e))(t),cw:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g;return{a:{m:(e,t)=>e+t,z:0},r:(e,t)=>r(t),d:E(e,t)}},cb:function(e,t,n,i){return{a:{m:(e,t)=>Math.min(e+t,i),z:0},r:(e,t)=>n(t),d:{l:n=>d(n,["name"])===r(e)&&t(n)?[`b${i}p`,1]:null,a:(e,t)=>[`b${i}p`,Math.min(e[1]+t[1],i)],i:e=>e?Array.isArray(e)?e.slice(-1)[0]:e:0,c:e=>Array.isArray(e)&&e[1]?e:null}}},e:e=>t=>t===e,e_:(e,t)=>r=>d(r,e)===t,fm:function(e,t){return{r:(r,n)=>e(t.r(r,n)),a:t.a,d:t.d}},frontDecode:function(e){const t=e.split("\\t");if(0===t.length)return[];var r=t[0],n=new Array(Math.ceil(t.length/2));n[0]=t[0];for(var i=1;i<t.length/2;i+=1){const e=t[2*i-1],a=t[2*i];if(""===e)r=a;else{const t=parseInt(e);r=r.slice(0,t)+a}n[i]=r}return n},ftn:function(e,t,r){return{a:{m:(e,t)=>e.concat(t.slice(0,r-e.length)),z:[]},r:(t,r)=>e.r(t,r.reduce(((t,r)=>e.a.m(t,r)),e.a.z)),d:L(e,t,r,-1).d}},g:e=>t=>t>e,g_:(e,t)=>r=>d(r,e)>t,ge:e=>t=>t>=e,ge_:(e,t)=>r=>d(r,e)>=t,bse:(t,r)=>n=>{let i=d(n,t);return e.hash(i)===r},bsne:(t,r)=>n=>{let i=d(n,t);return e.hash(i)!==r},bsc:ne,bsnc:(e,t)=>y(ne(e,t)),bsc_:ie,bsnc_:(e,t)=>y(ie(e,t)),i_:g,ifp:e=>q((t=>function(e,t,r){return d(e.getSegments(),[t,r])||!1}(t,"1p",e))),isp:C,itp:x,i_cw:function(e){return{d:{i:t=>{let r=t?Array.isArray(t)?t.slice(-1)[0]:t:0;return e(r)},c:e=>Array.isArray(e)&&e[1]?e:null}}},i_acqs:Z,i_ocqs:ee,i_tw:function(e,t,r){const n=r||100,i=Math.ceil(t/n);return{d:{i:(r,n)=>{const a=Array.isArray(r)?r:[],o=n.getCurrentTime(),s=(c=o.getTime()-t,Math.floor(c/i));var c;const u=Object.keys(a[3]||{}).reduce(((e,t)=>parseInt(t)>=s?a[3][t]+e:e),0);return e.d.i(["p",u],n)},c:g}}},i_ltn:Q,i_ftn:N,i_sq:R,i_vq:j,k:d,l:e=>t=>t<e,l_:(e,t)=>r=>{const n=d(r,e);return null!==n&&n<t},le:e=>t=>t<=e,le_:(e,t)=>r=>{const n=d(r,e);return null!==n&&n<=t},lm:(e,t)=>{let r=t=>function(e,t,r){if(void 0===t[r])return NaN;const n=e||{};if(0==(n["1p"]||[]).length)return NaN;const i=t[r]||{};let a=(i["1p"]||{}).const||0;return Object.keys(n).forEach((e=>{n[e].forEach((t=>{const r=(i[e]||{})[t]||0;a+=r}))})),o=a,1/(1+Math.pow(Math.E,-o));var o}(t.getSegmentsArray(),t.getLookalikeModels(),e);return q((e=>t(r(e))))},ltn:L,mnw:function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:g;const a=Number.POSITIVE_INFINITY;return{a:{m:(e,t)=>e<t?e:t,z:a},r:(e,t)=>i(t),d:{a:(e,t)=>e[1]<t[1]?e:t,l:i=>d(i,["name"])===r(e)&&t(i)?["n",d(i,n)]:null,i:e=>e?Array.isArray(e)?e.slice(-1)[0]:e:a,c:e=>Array.isArray(e)&&e[1]!==a?e:null}}},mxw:function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:g;const a=Number.NEGATIVE_INFINITY;return{a:{m:(e,t)=>e>t?e:t,z:a},r:(e,t)=>i(t),d:{l:i=>d(i,["name"])===r(e)&&t(i)?["v",d(i,n)]:null,a:(e,t)=>e[1]>t[1]?e:t,i:e=>e?Array.isArray(e)?e.slice(-1)[0]:e:a,c:e=>Array.isArray(e)&&e[1]!==a?e:null}}},n0:y(g),n:e=>t=>t!==e,nt:y,n_:(e,t)=>r=>d(r,e)!==t,o:h,ocq:function(e,t){return{r:(r,n)=>e.r(r,n[0])||t.r(r,n[1]),a:{z:[e.a.z,t.a.z],m:(r,n)=>[e.a.m(r[0],n[0]),t.a.m(r[1],n[1])]},d:B(e,t)}},ocqs:W,oe:function(e){const t=Object.keys(e);let r=t.length,n=new Array(r);for(;r--;)n[r]=[t[r],e[t[r]]];return n},os:(e,t,r)=>n=>{const i=p(n,t),a=r.length;let o=!1;for(let t=0;t<a;t++){const n=r[t];if(o=e(n)(i),o)break}return o},pacs:(e,t)=>r=>te(t,p(r,e)),pb:(e,t,r)=>n=>v(t,r)(p(n,e)),pc:(e,t)=>r=>{const n=p(r,e);return null!=n&&Array.isArray(n)&&n.indexOf(t)>=0},pc_:(e,t)=>r=>{const i=p(r,e),a=n(t);return null!=i&&Array.isArray(i)&&i.indexOf(a)>=0},pe:(e,t)=>r=>p(r,e)===t,pg:(e,t)=>r=>p(r,e)>t,pge:(e,t)=>r=>p(r,e)>=t,pl:(e,t)=>r=>{let n=p(r,e);return null!==n&&n<t},ple:(e,t)=>r=>{let n=p(r,e);return null!==n&&n<=t},pn:(e,t)=>r=>p(r,e)!==t,ps:(e,t)=>r=>k(t)(p(r,e)),r:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return s(e)(...r)},ref:function(e){return t=>o(e)(t)},rle:function(e){let t=0;for(let r=0;r<e.length;r++){let n=e[r];"number"==typeof n?(t+=n,r+=1):t+=1}let r=Array(t),n=0;for(let t=0;t<e.length;t++){let i=e[t];"number"==typeof i?(r.fill(e[t+1],n,n+i),t+=1,n+=i):(r[n]=i,n++)}return r},s:k,s_:(e,t)=>r=>k(t)(d(r,e)),scq:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g;return{r:(n,i)=>r(e.r(n,i[0])+t.r(n,i[1])),a:{z:[e.a.z,t.a.z],m:(r,n)=>[e.a.m(r[0],n[0]),t.a.m(r[1],n[1])]},d:B(e,t)}},sq:D,dscq:function(e,t,n,i){const a=`x${i}`,o=e=>e?2===e.length?["p",a,"",e[1]]:e:null,s=n=>{const i=(e=>d(e,["session_id"]))(n);return i&&d(n,["name"])===r(e)&&t(n)?["p",a,"",{[i]:1}]:null},c=(e,t)=>{const r=o(e),n=o(t);return r?n?["p",a,"",{...r[3],...n[3]}]:r:n};return{a:{m:c,z:null},r:(e,t)=>{const r=t&&t[3]&&"object"==typeof t[3]?Object.keys(t[3]).length:0;return n(r)},d:{a:l(c),l:(e,t)=>s(e),i:(e,t)=>o(e),c:g}}},sw:function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:g;const a=0;let o=e=>e<0?["p2",null,-e]:["p2",e],s=e=>(e[0]||0)-(e[1]||0),c=n=>d(n,["name"])===r(e)&&t(n);return{a:{m:(e,t)=>e+t,z:a},r:(e,t)=>i(t),d:{a:(e,t)=>{const r=new Array(Math.max(e.length,t.length));r[0]="p2";for(let n=1;n<r.length;n++)r[n]=(e[n]??0)+(t[n]??0);return r},l:e=>c(e)?o(d(e,n)):null,i:e=>e?Array.isArray(e)?s("p2"===e[0]?e.slice(1):e):e:a,c:e=>Array.isArray(e)&&(e[1]||e[2])?e:null}}},t:m,tb:(e,t)=>r=>v(e,t)(S(r)),te:e=>t=>S(t)===e,te_:(e,t)=>r=>I(e,r)===t,tg:e=>t=>S(t)>e,tg_:(e,t)=>r=>I(e,r)>t,tge:e=>t=>S(t)>=e,tge_:(e,t)=>r=>I(e,r)>=t,ti:w,tl:e=>t=>S(t)<e,tl_:(e,t)=>r=>I(e,r)<t,tle:e=>t=>S(t)<e,tle_:(e,t)=>r=>I(e,r)<t,tn:e=>t=>S(t)!==e,tn_:(e,t)=>r=>I(e,r)!==t,tw:function(e,t,r){const n=r||100,i=Math.ceil(t/n),a=e=>Math.floor(e/i),o=(e,r,n)=>[a(e.getTime()-t),{[a(r)]:n}],s=(t,r)=>{const n=Math.max(t[0],r[0]),i=Object.keys(t[1]).filter((e=>e>=n)).concat(Object.keys(r[1]).filter((e=>e>=n))).filter(((e,t,r)=>r.indexOf(e)===t)).reduce(((n,i)=>{const a=e.a.m(t[1][i]||e.a.z,r[1][i]||e.a.z);return a!==e.a.z&&(n[i]=a),n}),{});return[n,i]},c=[Number.NEGATIVE_INFINITY,{}],u=e=>{const t=t=>t.map((t=>{let[r,n,i]=t;return o(e.t,i,r)})).reduce(s,c);return s(t(e.in),t(e.out))};return{a:{m:(e,t)=>{const r=e.w?u(e):e;return s(r,t)},z:c},r:(t,r)=>{const n=(r.w?u(r):r)[1];return e.r(t,Object.keys(n).reduce(((t,r)=>e.a.m(t,n[r])),e.a.z))},d:e.d.tw||{a:(e,t)=>{let[r,,...n]=e,[,,...i]=t;return[r,"w",...s(n,i)]},l:(t,r)=>{const n=e.d.l(t,r),i=e.d.i(n,r);return n&&[n[0],"w",...o(r.getCurrentTime(),d(t,["time"],w),i)]},i:(e,r)=>{const n=Array.isArray(e)?e:[],i=r.getCurrentTime(),o=a(i.getTime()-t);return[n[2]||null,Object.keys(n[3]||{}).map((e=>({[e]:n[3][e]}))).reduce(((e,t)=>(Object.keys(t).filter((e=>parseInt(e)>=o)).forEach((r=>e[r]=t[r])),e)),{})]},c:g}}},vq:A,w:e=>t=>t===n(e),x:e=>t=>t!==n(e),y:(e,t)=>r=>p(r,e)===n(t),y_:(e,t)=>r=>d(r,e)===n(t),z:(e,t)=>r=>p(r,e)!==n(t),z_:(e,t)=>r=>d(r,e)!==n(t)}}function generateLookupMethods(e){let t,r=!1,n=[];return{onReady:e=>{r?e(t):n.push(e)},provideEnvironment:i=>{t={events:e.eventsLookup(i),literals:e.literalsLookup(i),properties:e.propertiesLookup(i),ahoCorasick:e.ahoCorasickLookup(i),subexpressions:e.subexpressionsLookup(i),rootCompression:e.rootCompressionLookup(i)},n.forEach((e=>e(t))),n=[],r=!0}}}},945:(e,t,r)=>{r.d(t,{N:()=>o,Qt:()=>c,Yt:()=>g,a1:()=>s,ap:()=>a,gM:()=>u,gz:()=>p});var n=r(169),i=r(614);function a(e,t){return function(r){return function(n){return e.ap(e.map(n,(function(e){return function(r){return t.ap(e,r)}})),r)}}}function o(e){return function(t){return function(r){return e.ap(e.map(r,(function(e){return function(){return e}})),t)}}}function s(e){return function(t){return function(r){return e.ap(e.map(r,(function(){return function(e){return e}})),t)}}}function c(e){return function(t,r){return function(n){return e.ap(e.map(n,(function(e){return function(r){var n;return Object.assign({},e,((n={})[t]=r,n))}})),r)}}}function u(e){return function(t){return{concat:function(r,n){return e.ap(e.map(r,(function(e){return function(r){return t.concat(e,r)}})),n)}}}}function f(e,t,r){return function(n){for(var i=Array(r.length+1),a=0;a<r.length;a++)i[a]=r[a];return i[r.length]=n,0===t?e.apply(null,i):f(e,t-1,i)}}var l={1:function(e){return[e]},2:function(e){return function(t){return[e,t]}},3:function(e){return function(t){return function(r){return[e,t,r]}}},4:function(e){return function(t){return function(r){return function(n){return[e,t,r,n]}}}},5:function(e){return function(t){return function(r){return function(n){return function(i){return[e,t,r,n,i]}}}}}};function d(e){return i.e$.call(l,e)||(l[e]=f(n.bc,e-1,[])),l[e]}function p(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var n=t.length,i=d(n),a=e.map(t[0],i),o=1;o<n;o++)a=e.ap(a,t[o]);return a}}function g(e){return function(t){for(var r=Object.keys(t),n=r.length,i=function(e){var t=e.length;switch(t){case 1:return function(t){var r;return(r={})[e[0]]=t,r};case 2:return function(t){return function(r){var n;return(n={})[e[0]]=t,n[e[1]]=r,n}};case 3:return function(t){return function(r){return function(n){var i;return(i={})[e[0]]=t,i[e[1]]=r,i[e[2]]=n,i}}};case 4:return function(t){return function(r){return function(n){return function(i){var a;return(a={})[e[0]]=t,a[e[1]]=r,a[e[2]]=n,a[e[3]]=i,a}}}};case 5:return function(t){return function(r){return function(n){return function(i){return function(a){var o;return(o={})[e[0]]=t,o[e[1]]=r,o[e[2]]=n,o[e[3]]=i,o[e[4]]=a,o}}}}};default:return f((function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];for(var i={},a=0;a<t;a++)i[e[a]]=r[a];return i}),t-1,[])}}(r),a=e.map(t[r[0]],i),o=1;o<n;o++)a=e.ap(a,t[r[o]]);return a}}},340:(e,t,r)=>{r.d(t,{Ce:()=>u,DY:()=>I,Eh:()=>R,GY:()=>S,Gb:()=>g,KB:()=>l,Lx:()=>D,Od:()=>c,Qp:()=>y,Su:()=>P,UI:()=>U,YM:()=>p,f2:()=>v,fw:()=>T,hX:()=>O,ke:()=>m,md:()=>_,oA:()=>C,pR:()=>j,tS:()=>E,yL:()=>G,yW:()=>L,zT:()=>h});var n=r(169),i=(r(289),r(614)),a=r(606),o=r(812),s=(r(49),r(226),function(e){return 0===e.length}),c=a.Od,u=a.Ce,f=(a.ws,a.R3),l=(a.Im,function(e,t){return e<=0?[]:a.KB(t)(e)});var d=a.dC,p=(o.P5,o.YM),g=(o.Z$,function(e){return c(e)?i.G(a.Gb(e)):i.YP}),m=function(e){return function(t){return d(e,t)?w(t):t.slice(0,e)}};var b=function(e,t){for(var r=e.length,n=0;n<r&&t(e[n]);n++);return n};function h(e){return function(t){var r=z(b(t,e))(t);return{init:r[0],rest:r[1]}}}var _=function(e){return function(t){return e<=0||s(t)?w(t):e>=t.length?[]:t.slice(e,t.length)}};function y(e){return function(t){return t.slice(b(t,e))}}o.cx;var v=o.f2;o.JO,o.qr;var w=function(e){return e.slice()},S=function(e){return s(e)?[]:e.slice().reverse()},I=function(e){return function(t){return t.length<=1?w(t):t.slice().sort(e.compare)}},G=function(e,t,r){for(var n=[],i=Math.min(e.length,t.length),a=0;a<i;a++)n[a]=r(e[a],t[a]);return n};o.t9;var z=function(e){return function(t){return e>=1&&c(t)?a.lx(e)(t):s(t)?[w(t),[]]:[[],w(t)]}};o.kp,o.Eq;var k=a.of,U=function(e){return function(t){return t.map((function(t){return e(t)}))}},E=function(e){return function(t){return(0,n.zG)(t,function(e){return function(t){for(var r=[],n=0;n<t.length;n++)r.push.apply(r,e(n,t[n]));return r}}((function(t,r){return e(r)})))}},P=function(e){return function(t){return t.map((function(t,r){return e(r,t)}))}},q=function(e){return function(t){for(var r=[],n=0;n<t.length;n++){var a=e(n,t[n]);i.pC(a)&&r.push(a.value)}return r}},x=function(e){return q((function(t,r){return e(r)}))},C=x(n.yR),O=function(e){return function(t){return t.filter(e)}},D=o.Lx,A=(o.xP,o.u4,o.OE),T=(o.nq,o.iw,function(e){var t=M(e);return function(e){return t((function(t,r){return e(r)}))}}),M=function(e){return function(t){return A(e.of([]),(function(r,i,a){return e.ap(e.map(i,(function(e){return function(t){return(0,n.zG)(e,f(t))}})),t(r,a))}))}},R=(o.ZN,o.Eh),j=o.pR,L=(o.pJ,o.oR,a.oo,o.yW);o.j0,i.F4,a.w6,a.QI,a.Ss},335:(e,t,r)=>{function n(e){return function(t){return function(r){return e.chain(r,(function(r){return e.map(t(r),(function(){return r}))}))}}}function i(e){return function(t,r){return function(n){return e.chain(n,(function(n){return e.map(r(n),(function(e){var r;return Object.assign({},n,((r={})[t]=e,r))}))}))}}}r.d(t,{a:()=>i,m:()=>n})},144:(e,t,r)=>{r.d(t,{g1:()=>v,G5:()=>y,dO:()=>b,Pd:()=>G,ak:()=>N,YO:()=>Q,tS:()=>S,g_:()=>O,ij:()=>M,Yo:()=>E,DT:()=>U,Eh:()=>g,fS:()=>D,nM:()=>P,t$:()=>c,UI:()=>m,Vn:()=>z,EQ:()=>C,aD:()=>x,of:()=>h,vx:()=>T,F2:()=>u,LF:()=>A,KC:()=>F,i$:()=>L,Y3:()=>R,it:()=>j});var n=r(335),i=r(906),a=r(169),o=r(289),s=r(614),c=s.t$,u=s.F2,f=function(e,t){return(0,a.zG)(e,m(t))},l=function(e,t){return(0,a.zG)(e,_(t))},d=function(e,t){return(0,a.zG)(e,S(t))},p="Either",g=function(e,t){return{equals:function(r,n){return r===n||(P(r)?P(n)&&e.equals(r.left,n.left):q(n)&&t.equals(r.right,n.right))}}},m=function(e){return function(t){return P(t)?t:u(e(t.right))}},b={URI:p,map:f},h=u,_=function(e){return function(t){return P(t)?t:P(e)?e:u(t.right(e.right))}},y={URI:p,map:f,ap:l},v={URI:p,map:f,ap:l,of:h},w=function(e){return function(t){return P(t)?t:e(t.right)}},S=w,I={URI:p,map:f,ap:l,chain:d},G=function(e,t){return function(r){return P(r)?c(e(r.left)):u(t(r.right))}},z=function(e){return function(t){return P(t)?c(e(t.left)):t}},k={URI:p,fromEither:a.yR},U=(0,i.DT)(k),E=(0,i.Yo)(k),P=s.nM,q=s.tO,x=function(e,t){return function(r){return P(r)?e(r.left):t(r.right)}},C=x,O=C,D=function(e){return function(t){return P(t)?e(t.left):t.right}},A=function(e){return P(e)?u(e.left):c(e.right)},T=function(e){return function(t){return P(t)?e(t.left):t}},M=function(e){return function(t){return null==t?c(e):u(t)}},R=function(e,t){try{return u(e())}catch(e){return c(t(e))}},j=function(e,t){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return R((function(){return e.apply(void 0,r)}),t)}},L=x(a.yR,a.yR);function F(e){return e instanceof Error?e:new Error(String(e))}s.F4;var Q=(0,o.YO)(b),N=(0,n.a)(I);s.Xl},125:(e,t,r)=>{r.d(t,{EQ:()=>v,F2:()=>s,KQ:()=>d,LF:()=>k,LU:()=>z,LV:()=>w,NG:()=>p,Pd:()=>_,UI:()=>g,Vn:()=>y,ap:()=>m,dQ:()=>G,fS:()=>S,i$:()=>U,ij:()=>l,m8:()=>u,pk:()=>f,t$:()=>c,tS:()=>b,vx:()=>I,wp:()=>h});var n=r(945),i=r(144),a=r(169),o=r(289);function s(e){return(0,a.ls)(i.F2,e.of)}function c(e){return(0,a.ls)(i.t$,e.of)}function u(e){return function(t){return e.map(t,i.F2)}}function f(e){return function(t){return e.map(t,i.t$)}}function l(e){return function(t){return(0,a.ls)(i.ij(t),e.of)}}function d(e){var t=l(e);return function(e){var r=t(e);return function(e){return(0,a.ls)(e,r)}}}function p(e){var t=b(e),r=d(e);return function(e){var n=r(e);return function(e){return t(n(e))}}}function g(e){return(0,o.UI)(e,i.dO)}function m(e){return(0,n.ap)(e,i.G5)}function b(e){return function(t){return function(r){return e.chain(r,(function(r){return i.nM(r)?e.of(r):t(r.right)}))}}}function h(e){return function(t){return function(r){return e.chain(r,(function(r){return i.nM(r)?t():e.of(r)}))}}}function _(e){return function(t,r){return function(n){return e.map(n,i.Pd(t,r))}}}function y(e){return function(t){return function(r){return e.map(r,i.Vn(t))}}}function v(e){return function(t,r){return function(n){return e.map(n,i.EQ(t,r))}}}function w(e){return function(t,r){return function(n){return e.chain(n,i.EQ(t,r))}}}function S(e){return function(t){return function(r){return e.chain(r,i.EQ(t,e.of))}}}function I(e){return function(t){return function(r){return e.chain(r,(function(r){return i.nM(r)?t(r.left):e.of(r)}))}}}function G(e){var t=I(e);return function(r){return t((function(t){return e.map(r(t),(function(e){return i.nM(e)?e:i.t$(t)}))}))}}function z(e){return function(t){return function(r){return e.chain(r,i.EQ((function(r){return e.map(t(r),i.t$)}),(function(t){return e.of(i.F2(t))})))}}}function k(e){return function(t){return e.map(t,i.LF)}}function U(e){return function(t){return e.map(t,i.i$)}}},689:(e,t,r)=>{r.d(t,{MW:()=>c,Uz:()=>o,bc:()=>a,f7:()=>n,n_:()=>i,w4:()=>s});r(169);var n=function(e){return{equals:function(t,r){return t===r||e(t,r)}}},i=function(e){return n((function(t,r){for(var n in e)if(!e[n].equals(t[n],r[n]))return!1;return!0}))},a=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n((function(t,r){return e.every((function(e,n){return e.equals(t[n],r[n])}))}))},o=function(e){return function(t){return n((function(r,n){return t.equals(e(r),e(n))}))}},s={equals:function(e,t){return e===t}},c=i;s.equals},906:(e,t,r)=>{r.d(t,{DT:()=>o,Dj:()=>s,Yo:()=>a,fX:()=>c});var n=r(169),i=r(614);function a(e){return function(t){return function(r){return e.fromEither(i.Wi(r)?i.t$(t()):i.F2(r.value))}}}function o(e){return function(t,r){return function(n){return e.fromEither(t(n)?i.F2(n):i.t$(r(n)))}}}function s(e){return function(t){return(0,n.ls)(t,e.fromEither)}}function c(e,t){var r=s(e);return function(e){return function(n){return t.chain(n,r(e))}}}},755:(e,t,r)=>{r.d(t,{At:()=>o,oU:()=>a});var n=r(335),i=r(169);function a(e,t){return function(r){var n=(0,i.ls)(r,e.fromIO);return function(e){return t.chain(e,n)}}}function o(e,t){var r=(0,n.m)(t);return function(t){return r((0,i.ls)(t,e.fromIO))}}},241:(e,t,r)=>{r.d(t,{oU:()=>a,wt:()=>i});var n=r(169);function i(e){return function(t){return(0,n.ls)(t,e.fromTask)}}function a(e,t){return function(r){var i=(0,n.ls)(r,e.fromTask);return function(e){return t.chain(e,i)}}}},289:(e,t,r)=>{function n(e,t){return function(r){return function(n){return e.map(n,(function(e){return t.map(e,r)}))}}}function i(e){return function(t){return function(r){return e.map(r,(function(e){return e(t)}))}}}function a(e){return function(t){return function(r){return e.map(r,(function(e){var r;return(r={})[t]=e,r}))}}}function o(e){return function(t,r){return function(n){return e.map(n,(function(e){var n;return Object.assign({},e,((n={})[t]=r(e),n))}))}}}r.d(t,{Hr:()=>o,OV:()=>i,UI:()=>n,YO:()=>a})},694:(e,t,r)=>{r.d(t,{G5:()=>p,PM:()=>d,RD:()=>y,UA:()=>m,UI:()=>c,dO:()=>l,of:()=>u,qo:()=>g});var n=r(169),i=(r(289),r(614)),a=function(e,t){return function(){return t(e())}},o=function(e,t){return function(){return e()(t())}},s=function(e,t){return function(){return t(e())()}},c=function(e){return function(t){return a(t,e)}},u=n.a9,f="IO",l={URI:f,map:a},d={URI:f,of:u},p={URI:f,map:a,ap:o},g={URI:f,map:a,ap:o,chain:s},m={URI:f,map:a,ap:o,of:u,chain:s},b=(n.yR,n.yR,i.F4,u(i.Xl)),h=function(e){var t=function(e){return function(t){return function(){for(var r=[e(0,i.YM(t))()],n=1;n<t.length;n++)r.push(e(n,t[n])());return r}}}(e);return function(e){return i.Od(e)?t(e):b}},_=function(e){return h((function(t,r){return e(r)}))},y=_(n.yR)},606:(e,t,r)=>{r.d(t,{Ce:()=>f,Eh:()=>S,Gb:()=>G,Im:()=>l,KB:()=>b,Od:()=>s,QI:()=>k,R3:()=>d,Ss:()=>U,dC:()=>c,lx:()=>w,nI:()=>m,of:()=>y,oo:()=>p,ur:()=>z,w6:()=>h,ws:()=>u,yL:()=>v});var n=r(169),i=(r(289),r(614)),a=r(214),o=function(e,t,r){if(r||2===arguments.length)for(var n,i=0,a=t.length;i<a;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},s=function(e){return e.length>0},c=function(e,t){return e<0||e>=t.length},u=function(e){return function(t){return o([e],t,!0)}},f=u,l=function(e){return function(t){return o(o([],t,!0),[e],!1)}},d=l,p=function(e,t,r){if(s(r)){var n=g(r);return n.splice(e,0,t),n}return[t]},g=i.r1,m=function(e){return s(e)?i.G(e):i.YP},b=function(e){return function(t){for(var r=Math.max(0,Math.floor(t)),n=[e(0)],i=1;i<r;i++)n.push(e(i));return n}},h=function(e,t){return e<=t?b((function(t){return e+t}))(t-e+1):[e]};var _=g,y=function(e){return[e]},v=function(e,t,r){for(var n=[r(e[0],t[0])],i=Math.min(e.length,t.length),a=1;a<i;a++)n[a]=r(e[a],t[a]);return n};a.xP,a.Lx;var w=function(e){return function(t){var r=Math.max(1,e);return r>=t.length?[_(t),[]]:[(0,n.zG)(t.slice(1,r),f(I(t))),t.slice(r)]}},S=(a.u4,a.OE,a.nq,a.iw,a.YM,a.ZN,a.Eh),I=(i.F4,a.YM),G=function(e){return e.slice(1)},z=(a.Z$,a.VV,a.Fp,function(e){return function(t){return t.reduce(e.concat)}});a.j0;function k(e,t){return void 0===t?f(e):(0,n.zG)(t,f(e))}var U=function(e,t){return(0,n.zG)(e,d(t))};a.ur},507:(e,t,r)=>{r.d(t,{DT:()=>g,Dj:()=>ue,Do:()=>_e,EK:()=>b,EQ:()=>ne,Eh:()=>z,FS:()=>he,G:()=>p,G5:()=>O,Gk:()=>M,Hr:()=>ve,IS:()=>m,KQ:()=>ge,NG:()=>me,OV:()=>se,Qt:()=>Se,Ri:()=>$,UI:()=>E,Uo:()=>J,WG:()=>be,Wi:()=>te,Y3:()=>de,YO:()=>ye,YP:()=>d,aD:()=>re,ak:()=>we,bM:()=>j,dO:()=>P,fS:()=>oe,fX:()=>fe,fw:()=>X,g1:()=>D,g_:()=>ie,hX:()=>B,ij:()=>le,it:()=>pe,lo:()=>F,pC:()=>ee,pF:()=>ae,pR:()=>k,tS:()=>A,uZ:()=>U,wp:()=>R,xH:()=>ce,xu:()=>W});var n=r(945),i=r(335),a=r(906),o=r(169),s=r(289),c=r(614),u=r(327),f=r(49),l=(r(226),r(302)),d=c.YP,p=c.G;function g(e){return function(t){return e(t)?p(t):d}}var m=function(e){return"Right"===e._tag?d:p(e.left)},b=function(e){return"Left"===e._tag?d:p(e.right)},h=function(e,t){return(0,o.zG)(e,E(t))},_=function(e,t){return(0,o.zG)(e,C(t))},y=function(e,t){return(0,o.zG)(e,A(t))},v=function(e,t){return(0,o.zG)(e,B(t))},w=function(e,t){return(0,o.zG)(e,H(t))},S=function(e,t){return(0,o.zG)(e,K(t))},I=function(e,t){return(0,o.zG)(e,V(t))},G="Option",z=function(e){return{equals:function(t,r){return t===r||(te(t)?te(r):!te(r)&&e.equals(t.value,r.value))}}},k=function(e){return{equals:z(e).equals,compare:function(t,r){return t===r?0:ee(t)?ee(r)?e.compare(t.value,r.value):1:-1}}},U=function(e){return{concat:function(t,r){return te(t)?r:te(r)?t:p(e.concat(t.value,r.value))},empty:d}},E=function(e){return function(t){return te(t)?d:p(e(t.value))}},P={URI:G,map:h},q=p,x={URI:G,of:q},C=function(e){return function(t){return te(t)||te(e)?d:p(t.value(e.value))}},O={URI:G,map:h,ap:_},D={URI:G,map:h,ap:_,of:q},A=function(e){return function(t){return te(t)?d:e(t.value)}},T={URI:G,map:h,ap:_,chain:y},M=function(e){return function(t){return te(t)?e():t}},R=M,j=function(){return d},L={URI:G,zero:j},F=(0,l.l)(L,x),Q=A(o.yR),N=(0,f.s4)(d,d),Y=function(e){return te(e)?N:(0,f.s4)(m(e.value),b(e.value))},$={URI:G,compact:Q,separate:Y},B=function(e){return function(t){return te(t)?d:e(t.value)?t:d}},H=function(e){return function(t){return te(t)?d:e(t.value)}},K=function(e){return function(t){return(0,f.s4)(v(t,(0,u.ff)(e)),v(t,e))}},V=function(e){return(0,o.ls)(E(e),Y)},W={URI:G,map:h,compact:Q,separate:Y,filter:v,filterMap:w,partition:S,partitionMap:I},X=function(e){return function(t){return function(r){return te(r)?e.of(d):e.map(t(r.value),p)}}},J=b,Z={URI:G,fromEither:J},ee=c.pC,te=function(e){return"None"===e._tag},re=function(e,t){return function(r){return te(r)?e():t(r.value)}},ne=re,ie=ne,ae=function(e){return function(t){return te(t)?e():t.value}},oe=ae,se=(0,s.OV)(P),ce=Q,ue=(0,a.Dj)(Z),fe=(0,a.fX)(Z,T),le=function(e){return null==e?d:p(e)},de=function(e){try{return p(e())}catch(e){return d}},pe=function(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return de((function(){return e.apply(void 0,t)}))}},ge=function(e){return(0,o.ls)(e,le)},me=function(e){return function(t){return te(t)?d:le(e(t.value))}},be=ne(o.gn,o.yR),he=ne(o.r5,o.yR);var _e=q(c.F4),ye=(0,s.YO)(P),ve=(0,s.Hr)(P),we=(0,i.a)(T),Se=(0,n.Qt)(O);c.Xl},856:(e,t,r)=>{r.d(t,{Fp:()=>d,Uz:()=>s,VV:()=>l,Zt:()=>o,gf:()=>f,gt:()=>u,lt:()=>c});var n=r(689),i=r(169),a=function(e){return function(t,r){return t===r||0===e(t,r)}},o=function(e){return{equals:a(e),compare:function(t,r){return t===r?0:e(t,r)}}},s=function(e){return function(t){return o((function(r,n){return t.compare(e(r),e(n))}))}},c=(i.W8,function(e){return function(t,r){return-1===e.compare(t,r)}}),u=function(e){return function(t,r){return 1===e.compare(t,r)}},f=function(e){return function(t,r){return-1!==e.compare(t,r)}},l=function(e){return function(t,r){return t===r||e.compare(t,r)<1?t:r}},d=function(e){return function(t,r){return t===r||e.compare(t,r)>-1?t:r}};n.w4.equals},327:(e,t,r)=>{r.d(t,{ff:()=>n,xD:()=>i});r(169);var n=function(e){return function(t){return!e(t)}},i=function(e){return function(t){return function(r){return t(r)&&e(r)}}}},812:(e,t,r)=>{r.d(t,{Ce:()=>m,DZ:()=>X,EQ:()=>y,Eh:()=>de,Eq:()=>Q,Ew:()=>E,G:()=>Ge,Hr:()=>ke,JO:()=>q,Lx:()=>ne,N7:()=>O,OE:()=>ie,OV:()=>me,Od:()=>g,P5:()=>w,R3:()=>b,Su:()=>K,UI:()=>H,YM:()=>S,Yo:()=>h,Z$:()=>I,ZN:()=>ue,aD:()=>_,bM:()=>Y,bj:()=>C,cS:()=>Se,cx:()=>U,f2:()=>P,hX:()=>V,iw:()=>oe,j0:()=>ze,jG:()=>fe,jj:()=>A,kp:()=>F,lo:()=>_e,md:()=>k,nI:()=>we,nq:()=>ae,oA:()=>J,oR:()=>ve,of:()=>N,pJ:()=>ye,pO:()=>T,pR:()=>pe,pc:()=>R,qr:()=>x,t9:()=>D,tS:()=>$,u4:()=>re,uK:()=>Z,uZ:()=>le,vP:()=>se,xH:()=>B,xP:()=>te,xb:()=>p,yW:()=>Ie,zT:()=>z});var n=r(689),i=r(169),a=r(289),o=r(614),s=r(52),c=r(856),u=r(214),f=r(49),l=(r(226),r(302)),d=function(e,t,r){if(r||2===arguments.length)for(var n,i=0,a=t.length;i<a;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},p=function(e){return 0===e.length},g=u.Od,m=u.Ce,b=(u.ws,u.R3);u.Im;var h=function(e){return o.Wi(e)?Se:[e.value]},_=function(e,t){return function(r){return g(r)?t(r):e()}},y=_,v=u.dC;function w(e,t){return void 0===t?function(t){return w(e,t)}:v(e,t)?o.YP:o.G(t[e])}var S=function(e){return g(e)?o.G(u.YM(e)):o.YP},I=function(e){return g(e)?o.G(u.Z$(e)):o.YP};var G=function(e,t){for(var r=e.length,n=0;n<r&&t(e[n]);n++);return n};function z(e){return function(t){var r=M(G(t,e))(t);return{init:r[0],rest:r[1]}}}var k=function(e){return function(t){return e<=0||p(t)?t:e>=t.length?Se:t.slice(e,t.length)}};var U=function(e){return function(t){for(var r=0;r<t.length;r++)if(e(t[r]))return o.G(r);return o.YP}};function E(e){return function(t){for(var r=0;r<t.length;r++)if(e(t[r]))return o.G(t[r]);return o.YP}}var P=function(e){return function(t){for(var r=0;r<t.length;r++){var n=e(t[r]);if(o.pC(n))return n}return o.YP}};var q=function(e){return function(t){for(var r=t.length-1;r>=0;r--){var n=e(t[r]);if(o.pC(n))return n}return o.YP}},x=function(e){return function(t){for(var r=t.length-1;r>=0;r--)if(e(t[r]))return o.G(r);return o.YP}},C=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];"Left"===n._tag&&t.push(n.left)}return t};var O=function(e){for(var t=[],r=[],n=0;n<e.length;n++)t[n]=e[n][0],r[n]=e[n][1];return[t,r]};function D(e){return function(t,r){if(void 0===r){var n=D(e);return function(e){return n(t,e)}}for(var i,a=0;a<r.length;a++)if(i=r[a],e.equals(i,t))return!0;return!1}}var A=function(e){var t=u.jj(e);return function(e){return g(e)?t(e):e}},T=function(e){var t=u.pO(e);return function(e){return g(e)?t(e):Se}},M=function(e){return function(t){return e>=1&&g(t)?u.lx(e)(t):p(t)?[t,Se]:[Se,t]}},R=function(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return h(e.apply(void 0,t))}};var j=function(e,t){return(0,i.zG)(e,H(t))},L=function(e,t,r){return(0,i.zG)(e,re(t,r))},F=function(e,t){return(0,i.zG)(e,ye(t))},Q=function(e,t){return(0,i.zG)(e,ve(t))},N=u.of,Y=function(){return Se},$=function(e){return function(t){return(0,i.zG)(t,function(e){return function(t){if(p(t))return Se;for(var r=[],n=0;n<t.length;n++)r.push.apply(r,e(n,t[n]));return r}}((function(t,r){return e(r)})))}},B=$(i.yR),H=function(e){return function(t){return t.map((function(t){return e(t)}))}},K=function(e){return function(t){return t.map((function(t,r){return e(r,t)}))}},V=function(e){return function(t){return t.filter(e)}},W=function(e){return function(t){for(var r=[],n=0;n<t.length;n++){var i=e(n,t[n]);o.pC(i)&&r.push(i.value)}return r}},X=function(e){return W((function(t,r){return e(r)}))},J=X(i.yR),Z=function(e){return ee((function(t,r){return e(r)}))},ee=function(e){return function(t){for(var r=[],n=[],i=0;i<t.length;i++){var a=t[i];e(i,a)?n.push(a):r.push(a)}return(0,f.s4)(r,n)}},te=function(e){return function(t){return function(r){return r.reduce((function(r,n,i){return e.concat(r,t(i,n))}),e.empty)}}},re=function(e,t){return ie(e,(function(e,r,n){return t(r,n)}))},ne=function(e){var t=te(e);return function(e){return t((function(t,r){return e(r)}))}},ie=function(e,t){return function(r){for(var n=r.length,i=e,a=0;a<n;a++)i=t(a,i,r[a]);return i}},ae=function(e,t){return oe(e,(function(e,r,n){return t(r,n)}))},oe=function(e,t){return function(r){return r.reduceRight((function(e,r,n){return t(n,r,e)}),e)}},se=function(e){return function(t){return L(t,e.of(Y()),(function(t,r){return e.ap(e.map(t,(function(e){return function(t){return(0,i.zG)(e,b(t))}})),r)}))}},ce="ReadonlyArray",ue=function(e){return{show:function(t){return"[".concat(t.map(e.show).join(", "),"]")}}},fe=function(){return{concat:function(e,t){return p(e)?t:p(t)?e:e.concat(t)}}},le=function(){return{concat:fe().concat,empty:Se}},de=function(e){return(0,n.f7)((function(t,r){return t.length===r.length&&t.every((function(t,n){return e.equals(t,r[n])}))}))},pe=function(e){return(0,c.Zt)((function(t,r){for(var n=t.length,i=r.length,a=Math.min(n,i),o=0;o<a;o++){var c=e.compare(t[o],r[o]);if(0!==c)return c}return s.Df.compare(n,i)}))},ge={URI:ce,map:j},me=(0,a.OV)(ge),be={URI:ce,of:N},he={URI:ce,zero:Y},_e=(0,l.l)(he,be),ye=function(e){return function(t){for(var r=d([],e(t),!0),n=[];r.length>0;){var i=r.shift();o.nM(i)?r.unshift.apply(r,e(i.left)):n.push(i.right)}return n}},ve=function(e){return function(t){var r=e(t),n=[],i=[];function a(t){o.nM(t)?e(t.left).forEach((function(e){return n.push(e)})):i.push(t.right)}for(var s=0,c=r;s<c.length;s++){a(c[s])}for(;n.length>0;)a(n.shift());return i}},we=(u.oo,function(e){return p(e)?Se:e.slice()}),Se=u.cS;function Ie(e){return function(t){return t.every(e)}}var Ge=function(e){return function(t){return t.some(e)}},ze=function(e){var t=u.j0(e);return function(r){return y((function(){return e.empty}),t(r))}},ke=(o.F4,(0,a.Hr)(ge));u.w6,u.QI,u.Ss},214:(e,t,r)=>{r.d(t,{Ce:()=>d,Eh:()=>A,Fp:()=>F,Im:()=>p,Lx:()=>E,OE:()=>q,Od:()=>u,QI:()=>B,R3:()=>g,Ss:()=>H,UI:()=>z,VV:()=>L,YM:()=>T,Z$:()=>R,ZN:()=>D,aL:()=>N,c2:()=>h,cS:()=>c,dC:()=>f,iw:()=>C,j0:()=>$,jj:()=>b,lx:()=>I,nq:()=>P,of:()=>G,oo:()=>m,pO:()=>S,u4:()=>U,ur:()=>Q,ut:()=>Y,w6:()=>y,ws:()=>l,xP:()=>x});var n=r(689),i=r(169),a=(r(289),r(614)),o=r(794),s=function(e,t,r){if(r||2===arguments.length)for(var n,i=0,a=t.length;i<a;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},c=a.Xl,u=a.Od,f=function(e,t){return e<0||e>=t.length},l=function(e){return function(t){return s([e],t,!0)}},d=l,p=function(e){return function(t){return s(s([],t,!0),[e],!1)}},g=p,m=function(e,t,r){if(u(r)){var n=a.r1(r);return n.splice(e,0,t),n}return[t]},b=function(e){return function(t){if(1===t.length)return t;for(var r=[T(t)],n=function(t){r.every((function(r){return!e.equals(r,t)}))&&r.push(t)},i=0,a=M(t);i<a.length;i++){n(a[i])}return r}},h=function(e){return u(e)?a.G(e):a.YP},_=function(e){return function(t){for(var r=Math.max(0,Math.floor(t)),n=[e(0)],i=1;i<r;i++)n.push(e(i));return n}},y=function(e,t){return e<=t?_((function(t){return e+t}))(t-e+1):[e]};function v(e,t){return t?e.concat(t):function(t){return t.concat(e)}}var w=function(e){return function(t){for(var r=[e,t[0]],n=1;n<t.length;n++)r.push(e,t[n]);return r}},S=function(e){return function(t){for(var r=e(t),n=[r[0]],i=r[1];u(i);){var a=e(i),o=a[0],s=a[1];n.push(o),i=s}return n}},I=function(e){return function(t){var r=Math.max(1,e);return r>=t.length?[t,c]:[(0,i.zG)(t.slice(1,r),d(T(t))),t.slice(r)]}},G=a.ri,z=function(e){return k((function(t,r){return e(r)}))},k=function(e){return function(t){for(var r=[e(0,T(t))],n=1;n<t.length;n++)r.push(e(n,t[n]));return r}},U=function(e,t){return q(e,(function(e,r,n){return t(r,n)}))},E=function(e){return function(t){return function(r){return r.slice(1).reduce((function(r,n){return e.concat(r,t(n))}),t(r[0]))}}},P=function(e,t){return C(e,(function(e,r,n){return t(r,n)}))},q=function(e,t){return function(r){return r.reduce((function(e,r,n){return t(n,e,r)}),e)}},x=function(e){return function(t){return function(r){return r.slice(1).reduce((function(r,n,i){return e.concat(r,t(i+1,n))}),t(0,r[0]))}}},C=function(e,t){return function(r){return r.reduceRight((function(e,r,n){return t(n,r,e)}),e)}},O=a.YM,D=function(e){return{show:function(t){return"[".concat(t.map(e.show).join(", "),"]")}}},A=function(e){return(0,n.f7)((function(t,r){return t.length===r.length&&t.every((function(t,n){return e.equals(t,r[n])}))}))},T=(a.F4,O),M=a.Gb,R=function(e){return e[e.length-1]},j=function(e){return e.slice(0,-1)},L=function(e){var t=o.VV(e);return function(e){return e.reduce(t.concat)}},F=function(e){var t=o.Fp(e);return function(e){return e.reduce(t.concat)}},Q=function(e){return function(t){return t.reduce(e.concat)}},N=function(e){return function(t){return e(T(t),M(t))}},Y=function(e){return function(t){return e(j(t),R(t))}},$=function(e){var t=Q(e);return function(e){return(0,i.ls)(function(e){return function(t){var r=M(t);return u(r)?(0,i.zG)(r,w(e),d(T(t))):t}}(e),t)}};function B(e,t){return void 0===t?d(e):(0,i.zG)(t,d(e))}var H=function(e,t){return(0,i.zG)(e,v([t]))}},450:(e,t,r)=>{r.d(t,{Bu:()=>h,CC:()=>j,DZ:()=>re,EG:()=>b,EW:()=>B,Eh:()=>le,G:()=>D,HA:()=>T,Hd:()=>E,I8:()=>F,P5:()=>_,RF:()=>L,RJ:()=>N,SW:()=>K,Su:()=>v,UI:()=>w,Ub:()=>W,V_:()=>$,XP:()=>l,Yz:()=>x,_Y:()=>Y,_r:()=>U,cS:()=>y,dp:()=>c,dx:()=>g,e$:()=>m,hX:()=>te,jt:()=>P,kp:()=>R,mK:()=>Z,mS:()=>Q,nn:()=>M,nr:()=>pe,nu:()=>H,oA:()=>ce,oh:()=>ue,qS:()=>J,ri:()=>z,sq:()=>C,t9:()=>A,tV:()=>ie,uK:()=>ne,uZ:()=>de,vA:()=>X,vP:()=>k,xb:()=>u,yW:()=>O,z7:()=>q,zV:()=>V});var n=r(689),i=r(169),a=r(614),o=r(49),s=r(229),c=(r(226),function(e){return Object.keys(e).length}),u=function(e){for(var t in e)if(a.e$.call(e,t))return!1;return!0},f=function(e){return function(t){return Object.keys(t).sort(e.compare)}},l=f(s.Df);function d(e){if("function"==typeof e)return d(s.Df)(e);var t=f(e);return function(e){return function(r){for(var n=[],i=0,a=t(r);i<a.length;i++){var o=a[i];n.push(e(o,r[o]))}return n}}}var p=d(s.Df)((function(e,t){return[e,t]}));var g=function(e,t){return function(r){if(a.e$.call(r,e)&&r[e]===t)return r;var n=Object.assign({},r);return n[e]=t,n}},m=function(e,t){return a.e$.call(t,e)};function b(e){return function(t){if(!a.e$.call(t,e))return t;var r=Object.assign({},t);return delete r[e],r}}function h(e){return function(t,r){if(void 0===r){var n=h(e);return function(e){return n(e,t)}}for(var i in t)if(!a.e$.call(r,i)||!e.equals(t[i],r[i]))return!1;return!0}}function _(e,t){return void 0===t?function(t){return _(e,t)}:a.e$.call(t,e)?a.G(t[e]):a.YP}var y={};function v(e){return function(t){var r={};for(var n in t)a.e$.call(t,n)&&(r[n]=e(n,t[n]));return r}}function w(e){return v((function(t,r){return e(r)}))}function S(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(2===e.length)return S(s.Df).apply(void 0,e);var r=f(e[0]);return function(e,t){return function(n){for(var i=e,a=r(n),o=a.length,s=0;s<o;s++){var c=a[s];i=t(c,i,n[c])}return i}}}function I(e){if("compare"in e){var t=f(e);return function(e){return function(r){return function(n){for(var i=e.empty,a=t(n),o=a.length,s=0;s<o;s++){var c=a[s];i=e.concat(i,r(c,n[c]))}return i}}}}return I(s.Df)(e)}function G(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(2===e.length)return G(s.Df).apply(void 0,e);var r=f(e[0]);return function(e,t){return function(n){for(var i=e,a=r(n),o=a.length-1;o>=0;o--){var s=a[o];i=t(s,n[s],i)}return i}}}var z=function(e,t){var r;return(r={})[e]=t,r};function k(e){return Z(s.Df)(e)}function U(e){return function(t){var r={},n={};for(var i in t)if(a.e$.call(t,i)){var s=e(i,t[i]);switch(s._tag){case"Left":r[i]=s.left;break;case"Right":n[i]=s.right}}return(0,o.s4)(r,n)}}function E(e){return function(t){var r={},n={};for(var i in t)if(a.e$.call(t,i)){var s=t[i];e(i,s)?n[i]=s:r[i]=s}return(0,o.s4)(r,n)}}function P(e){return function(t){var r={};for(var n in t)if(a.e$.call(t,n)){var i=e(n,t[n]);a.pC(i)&&(r[n]=i.value)}return r}}function q(e){return function(t){var r={},n=!1;for(var i in t)if(a.e$.call(t,i)){var o=t[i];e(i,o)?r[i]=o:n=!0}return n?r:t}}var x=p,C=function(e){for(var t={},r=0,n=e;r<n.length;r++){var i=n[r];t[i[0]]=i[1]}return t};function O(e){return function(t){for(var r in t)if(!e(t[r]))return!1;return!0}}function D(e){return function(t){for(var r in t)if(e(t[r]))return!0;return!1}}function A(e){return function(t,r){if(void 0===r){var n=A(e);return function(e){return n(t,e)}}for(var i in r)if(e.equals(r[i],t))return!0;return!1}}var T=function(e,t){return(0,i.zG)(e,w(t))},M=function(e,t){return(0,i.zG)(e,v(t))},R=function(e){var t=ae(e);return function(e,r,n){return(0,i.zG)(e,t(r,n))}},j=function(e){return function(t){var r=oe(e)(t);return function(e,t){return(0,i.zG)(e,r(t))}}},L=function(e){var t=se(e);return function(e,r,n){return(0,i.zG)(e,t(r,n))}},F=function(e,t){return(0,i.zG)(e,te(t))},Q=function(e,t){return(0,i.zG)(e,re(t))},N=function(e,t){return(0,i.zG)(e,ne(t))},Y=function(e,t){return(0,i.zG)(e,ie(t))},$=function(e){var t=S(e);return function(e,r,n){return(0,i.zG)(e,t(r,n))}},B=function(e){var t=I(e);return function(e){var r=t(e);return function(e,t){return(0,i.zG)(e,r(t))}}},H=function(e){var t=G(e);return function(e,r,n){return(0,i.zG)(e,t(r,n))}},K=function(e,t){return(0,i.zG)(e,U(t))},V=function(e,t){return(0,i.zG)(e,E(t))},W=function(e,t){return(0,i.zG)(e,P(t))},X=function(e,t){return(0,i.zG)(e,q(t))},J=function(e){var t=ee(e);return function(e){var r=t(e);return function(e,t){return r(e,(0,i.ls)(i.SK,t))}}},Z=function(e){var t=J(e);return function(e){var r=t(e);return function(e){return r(e,i.yR)}}},ee=function(e){return function(t){var r=f(e);return function(e,n){var i=r(e);if(0===i.length)return t.of(y);for(var a=t.of({}),o=function(r){a=t.ap(t.map(a,(function(e){return function(t){var n;return Object.assign({},e,((n={})[r]=t,n))}})),n(r,e[r]))},s=0,c=i;s<c.length;s++){o(c[s])}return a}}},te=function(e){return q((function(t,r){return e(r)}))},re=function(e){return P((function(t,r){return e(r)}))},ne=function(e){return E((function(t,r){return e(r)}))},ie=function(e){return U((function(t,r){return e(r)}))};function ae(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var r=S(e[0]);return function(e,t){return r(e,(function(e,r,n){return t(r,n)}))}}return ae(s.Df).apply(void 0,e)}function oe(e){if("compare"in e){var t=I(e);return function(e){var r=t(e);return function(e){return r((function(t,r){return e(r)}))}}}return oe(s.Df)(e)}function se(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var r=G(e[0]);return function(e,t){return r(e,(function(e,r,n){return t(r,n)}))}}return se(s.Df).apply(void 0,e)}var ce=function(e){var t={};for(var r in e)if(a.e$.call(e,r)){var n=e[r];a.pC(n)&&(t[r]=n.value)}return t},ue=function(e){var t={},r={};for(var n in e)if(a.e$.call(e,n)){var i=e[n];a.nM(i)?t[n]=i.left:r[n]=i.right}return(0,o.s4)(t,r)},fe="ReadonlyRecord";function le(e){var t=h(e);return(0,n.f7)((function(e,r){return t(e)(r)&&t(r)(e)}))}function de(e){return{concat:function(t,r){if(u(t))return r;if(u(r))return t;var n=Object.assign({},t);for(var i in r)a.e$.call(r,i)&&(n[i]=a.e$.call(t,i)?e.concat(t[i],r[i]):r[i]);return n},empty:y}}s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df;function pe(e,t){return a.e$.call(void 0===t?this:t,e)}s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df},643:(e,t,r)=>{r.d(t,{H5:()=>s,Kl:()=>c,Lx:()=>f,Pd:()=>a,Yg:()=>i,li:()=>n,nq:()=>l,pL:()=>o,u4:()=>u});r(169);function n(e){return e[0]}function i(e){return e[1]}var a=function(e,t){return function(r){return[t(n(r)),e(i(r))]}},o=function(e){return function(t){return[e(n(t)),i(t)]}},s=function(e){return function(t){return[n(t),e(i(t))]}},c=n,u=function(e,t){return function(r){return t(e,n(r))}},f=function(){return function(e){return function(t){return e(n(t))}}},l=function(e,t){return function(r){return t(n(r),e)}}},794:(e,t,r)=>{r.d(t,{Z$:()=>u,Fp:()=>s,VV:()=>o,n_:()=>c});var n,i=r(614),a=r(856),o=function(e){return{concat:a.VV(e)}},s=function(e){return{concat:a.Fp(e)}},c=function(e){return{concat:function(t,r){var n={};for(var a in e)i.e$.call(e,a)&&(n[a]=e[a].concat(t[a],r[a]));return n}}},u=function(){return{concat:function(e,t){return t}}};n=void 0},49:(e,t,r)=>{r.d(t,{F2:()=>o,Vn:()=>i,s4:()=>n});r(169);var n=function(e,t){return{left:e,right:t}},i=function(e){return function(t){return n(e(a(t)),o(t))}},a=function(e){return e.left},o=function(e){return e.right}},46:(e,t,r)=>{r.d(t,{At:()=>k,Do:()=>U,Hi:()=>v,Hr:()=>P,PM:()=>y,UA:()=>I,UI:()=>p,YO:()=>E,ak:()=>q,ap:()=>g,dO:()=>_,gw:()=>u,mU:()=>G,of:()=>m,pE:()=>A,qA:()=>w,qo:()=>S,tD:()=>c,tS:()=>b,uU:()=>D});var n=r(335),i=r(755),a=r(169),o=r(289),s=r(614),c=function(e){return function(){return Promise.resolve().then(e)}};function u(e){return function(t){return function(){return new Promise((function(r){setTimeout((function(){Promise.resolve().then(t).then(r)}),e)}))}}}var f=function(e,t){return(0,a.zG)(e,p(t))},l=function(e,t){return(0,a.zG)(e,g(t))},d=function(e,t){return(0,a.zG)(e,b(t))},p=function(e){return function(t){return function(){return Promise.resolve().then(t).then(e)}}},g=function(e){return function(t){return function(){return Promise.all([Promise.resolve().then(t),Promise.resolve().then(e)]).then((function(e){return(0,e[0])(e[1])}))}}},m=function(e){return function(){return Promise.resolve(e)}},b=function(e){return function(t){return function(){return Promise.resolve().then(t).then((function(t){return e(t)()}))}}},h="Task";var _={URI:h,map:f},y={URI:h,of:m},v={URI:h,map:f,ap:l},w={URI:h,map:f,ap:l,of:m},S={URI:h,map:f,ap:l,chain:d},I={URI:h,map:f,of:m,ap:l,chain:d},G=(a.yR,(0,n.m)(S)),z={URI:h,fromIO:c},k=(0,i.At)(z,S),U=m(s.F4),E=(0,o.YO)(_),P=(0,o.Hr)(_),q=(0,n.a)(S),x=m(s.Xl),C=function(e){var t=function(e){return function(t){return function(){return Promise.all(t.map((function(t,r){return Promise.resolve().then((function(){return e(r,t)()}))})))}}}(e);return function(e){return s.Od(e)?t(e):x}},O=function(e){var t=function(e){return function(t){return function(){return s.Gb(t).reduce((function(t,r,n){return t.then((function(t){return Promise.resolve().then(e(n+1,r)).then((function(e){return t.push(e),t}))}))}),Promise.resolve().then(e(0,s.YM(t))).then(s.ri))}}}(e);return function(e){return s.Od(e)?t(e):x}},D=function(e){return C((function(t,r){return e(r)}))},A=function(e){return O((function(t,r){return e(r)}))}},6:(e,t,r)=>{r.d(t,{At:()=>te,DT:()=>J,EQ:()=>z,F2:()=>b,Hi:()=>K,Hr:()=>ae,Ij:()=>ce,LV:()=>k,OV:()=>H,Op:()=>v,QM:()=>h,Qt:()=>se,UI:()=>T,Vn:()=>R,Y3:()=>E,YO:()=>ie,Zl:()=>F,ak:()=>oe,dk:()=>y,fF:()=>S,fS:()=>U,fX:()=>X,fj:()=>G,it:()=>P,lk:()=>_,oU:()=>ee,of:()=>N,t$:()=>m,tD:()=>w,tS:()=>L,wE:()=>ne,wp:()=>Q});var n=r(945),i=r(335),a=r(125),o=r(906),s=r(755),c=r(241),u=r(169),f=r(289),l=r(614),d=r(46),p=function(e,t,r,n){return new(r||(r=Promise))((function(i,a){function o(e){try{c(n.next(e))}catch(e){a(e)}}function s(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,s)}c((n=n.apply(e,t||[])).next())}))},g=function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},m=a.t$(d.PM),b=a.F2(d.PM),h=a.m8(d.dO),_=a.pk(d.dO),y=(0,u.ls)(d.tD,h),v=(0,u.ls)(d.tD,_),w=y,S=h,I=d.of,G=d.tD,z=a.EQ(d.dO),k=a.LV(d.UA),U=a.fS(d.UA),E=function(e,t){return function(){return p(void 0,void 0,void 0,(function(){var r;return g(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e().then(l.F2)];case 1:return[2,n.sent()];case 2:return r=n.sent(),[2,l.t$(t(r))];case 3:return[2]}}))}))}},P=function(e,t){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return E((function(){return e.apply(void 0,r)}),t)}},q=(d.dO,d.PM,d.PM,d.UA,d.UA,d.UA,d.UA,d.dO,function(e,t){return(0,u.zG)(e,T(t))}),x=function(e,t){return(0,u.zG)(e,j(t))},C=function(e,t){return(0,u.zG)(e,L(t))},O=function(e,t,r){return(0,u.zG)(e,M(t,r))},D=function(e,t){return(0,u.zG)(e,R(t))},A=function(e,t){return(0,u.zG)(e,Q(t))},T=a.UI(d.dO),M=a.Pd(d.dO),R=a.Vn(d.dO),j=a.ap(d.Hi),L=a.tS(d.UA),F=L,Q=a.wp(d.UA),N=b,Y=m,$="TaskEither";var B={URI:$,map:q},H=(0,f.OV)(B),K={URI:$,map:q,ap:x},V={URI:$,map:q,ap:x,chain:C},W={URI:$,fromEither:I},X=(0,o.fX)(W,V),J=(0,o.DT)(W),Z={URI:$,fromIO:w},ee=(0,s.oU)(Z,V),te=(0,s.At)(Z,V),re={URI:$,fromIO:w,fromTask:S},ne=(0,c.oU)(re,V);l.F4;var ie=(0,f.YO)(B),ae=(0,f.Hr)(B),oe=(0,i.a)(V),se=(0,n.Qt)(K),ce=(l.Xl,{URI:$,bimap:O,mapLeft:D,map:q,of:N,ap:x,chain:C,alt:A,fromIO:w,fromTask:S,throwError:Y})},644:(e,t,r)=>{r.d(t,{H5:()=>o,Yg:()=>a,li:()=>i});var n=r(643),i=(r(169),n.li),a=n.Yg;var o=function(e){return function(t){return[i(t),e(a(t))]}};n.Kl,n.Lx,n.u4,n.nq},226:(e,t,r)=>{function n(e,t){return function(r){var n=e.traverse(r);return function(e,i){return r.map(n(e,i),t.separate)}}}function i(e,t){return function(r){var n=e.traverse(r);return function(e,i){return r.map(n(e,i),t.compact)}}}r.d(t,{BL:()=>i,Fj:()=>n})},302:(e,t,r)=>{function n(e,t){return function(r){return r?t.of(void 0):e.zero()}}r.d(t,{l:()=>n})},169:(e,t,r)=>{r.d(t,{MZ:()=>a,Q1:()=>f,SK:()=>g,W8:()=>s,a9:()=>o,bc:()=>d,gn:()=>c,ls:()=>l,nn:()=>n,r5:()=>u,yR:()=>i,zG:()=>p});var n=function(e){return function(t){return t(e)}};function i(e){return e}var a=i;function o(e){return function(){return e}}var s=o(!0),c=o(null),u=o(void 0),f=u;function l(e,t,r,n,i,a,o,s,c){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return r(t(e.apply(this,arguments)))};case 4:return function(){return n(r(t(e.apply(this,arguments))))};case 5:return function(){return i(n(r(t(e.apply(this,arguments)))))};case 6:return function(){return a(i(n(r(t(e.apply(this,arguments))))))};case 7:return function(){return o(a(i(n(r(t(e.apply(this,arguments)))))))};case 8:return function(){return s(o(a(i(n(r(t(e.apply(this,arguments))))))))};case 9:return function(){return c(s(o(a(i(n(r(t(e.apply(this,arguments)))))))))}}}function d(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e}function p(e,t,r,n,i,a,o,s,c){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return r(t(e));case 4:return n(r(t(e)));case 5:return i(n(r(t(e))));case 6:return a(i(n(r(t(e)))));case 7:return o(a(i(n(r(t(e))))));case 8:return s(o(a(i(n(r(t(e)))))));case 9:return c(s(o(a(i(n(r(t(e))))))));default:for(var u=arguments[0],f=1;f<arguments.length;f++)u=arguments[f](u);return u}}var g=function(e,t){return t}},614:(e,t,r)=>{r.d(t,{F2:()=>l,F4:()=>h,G:()=>s,Gb:()=>m,Od:()=>p,Wi:()=>i,Xl:()=>b,YM:()=>g,YP:()=>o,e$:()=>_,nM:()=>c,pC:()=>a,r1:()=>y,ri:()=>d,t$:()=>f,tO:()=>u});var n=function(e,t,r){if(r||2===arguments.length)for(var n,i=0,a=t.length;i<a;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},i=function(e){return"None"===e._tag},a=function(e){return"Some"===e._tag},o={_tag:"None"},s=function(e){return{_tag:"Some",value:e}},c=function(e){return"Left"===e._tag},u=function(e){return"Right"===e._tag},f=function(e){return{_tag:"Left",left:e}},l=function(e){return{_tag:"Right",right:e}},d=function(e){return[e]},p=function(e){return e.length>0},g=function(e){return e[0]},m=function(e){return e.slice(1)},b=[],h={},_=Object.prototype.hasOwnProperty,y=function(e){return n([e[0]],e.slice(1),!0)}},52:(e,t,r)=>{r.d(t,{Df:()=>i,Eq:()=>n,Pc:()=>o});var n={equals:function(e,t){return e===t}},i={equals:n.equals,compare:function(e,t){return e<t?-1:e>t?1:0}},a=(n.equals,i.compare,{concat:function(e,t){return e+t}}),o={concat:a.concat,empty:0}},229:(e,t,r)=>{r.d(t,{Df:()=>i,Eq:()=>n,HD:()=>a,xb:()=>o});var n={equals:function(e,t){return e===t}},i={equals:n.equals,compare:function(e,t){return e<t?-1:e>t?1:0}},a=function(e){return"string"==typeof e},o=function(e){return 0===e.length}},876:(e,t,r)=>{r.d(t,{GL:()=>s,HJ:()=>c,N1:()=>l,NC:()=>n,RP:()=>i,UM:()=>u,t_:()=>f});const n=performance.now(),i=(new Date).getTime();let a=[],o=!1;const s=e=>function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return c((()=>e(...r)))},c=(e,t)=>{if(!o){const r=self.setTimeout(e,t);return()=>self.clearTimeout(r)}let r;const n=()=>{void 0!==r&&o&&a.length<1e4&&a.push([r,performance.now()]),r=void 0},i=[self.setTimeout((()=>{r=performance.now(),self.requestAnimationFrame(n),e()}),t),self.setTimeout(n,t)];return()=>{void 0===r&&i.forEach((e=>self.clearTimeout(e)))}},u=(e,t)=>{if(!o){const r=self.setInterval(e,t);return()=>self.clearInterval(r)}let r=!1,n=()=>{};const i=self.setInterval((()=>{n=c((()=>{r||e()}))}),t);return()=>{r=!0,n(),self.clearInterval(i)}},f=e=>new Promise(((t,r)=>e.then(s(t),s(r)))),l=e=>()=>f(e())},567:(e,t,r)=>{r.d(t,{g1:()=>G,YO:()=>w,oQ:()=>O,a9:()=>h,Ue:()=>g,gS:()=>m,D8:()=>C,VS:()=>z,xH:()=>k,En:()=>b,fF:()=>x,Hr:()=>S,UI:()=>y,u4:()=>U,Rp:()=>E,vP:()=>P,bw:()=>D,YP:()=>_});var n=r(169),i=r(507),a=r(812),o=r(822);function s(e){let t=e,r=[],n=!1;return{addListener(e){if(n)return()=>{};let i=t;const a=()=>{Object.is(t,i)||(i=t,e(t))};r=[...r,a];return()=>{r=r.filter((e=>e!==a))}},notify(e){if(n)throw new Error("Ref bug: Attempted to notify a terminated notifier");Object.is(e,t)||(t=e,r.forEach((e=>e())))},terminate(){n=!0,r=[]}}}function c(e,t){let r=0;return function(){try{if(r++>0)throw new Error(e);return t(...arguments)}finally{r--}}}function u(e,t){let r=[...new Set(e)].filter((e=>"final"!==e.state));if(0===r.length)return{state:"final",onStateChange:()=>()=>{}};const n=()=>0===r.length?"final":r.some((e=>"might_change"===e.state))?"might_change":"nominal",[i,a]=f(n(),(e=>"might_change"!==e&&t())),o=()=>a(n());return r.forEach((t=>{t.onStateChange((t=>{switch(t){case"final":r=e.filter((e=>"final"!==e.state)),o();break;case"might_change":a("might_change");break;case"nominal":o();break;default:throw new Error(`Ref bug: Invalid state ${t}`)}}))})),i}function f(e,t){if("final"===e)return[{state:"final",onStateChange:()=>()=>{}},()=>{}];const{terminate:r,notify:n,addListener:i}=s(e),a={state:e,onStateChange:i},o=c("Disallowed recursion in Branch.",(e=>{if("final"===a.state){if("final"===e)return;throw new Error(`Attempted to change state of final branch to ${e}.`)}try{t?.(e),a.state=e,n(e)}finally{"final"===e&&r()}}));return[a,o]}var l=r(289),d=r(694);const p="Ref";function g(e){const[t,r,n]=function(){const[e,t]=f("nominal"),r=c("Disallowed recursion in Branch.",(r=>{if("final"===e.state)throw new Error("Attempted to mutate a finalized Ref.");const n=e.state;try{t("might_change"),r()}finally{t(n)}}));return[e,r,()=>t("final")]}(),[i,a]=A(t,e);return[i,e=>r((()=>a(e))),n]}function m(e){let t=e.empty;const r=()=>()=>{const r=t;return t=e.empty,r},[n,i,a]=g(r());return[n,n=>{t=e.concat(t,n),i(r())},a]}function b(e,t){return r=>{let i=new Array(e).fill(t.empty);return new Array(e).fill(null).map(((e,a)=>(0,n.zG)(r,y(d.UI((e=>{const r=t.concat(i[a],e);return i=i.map(((r,n)=>n===a?t.empty:t.concat(r,e))),r}))))))}}function h(e){return{get current(){return e},onChange:()=>()=>{},branch:{state:"final",onStateChange:()=>()=>{}}}}function _(e){return t=>{const r=t.onChange(e);return e(t.current),r}}function y(e,t){if(t){const[r,n]=A(t.branch,e(t.current));return t.onChange((t=>n(e(t)))),r}return t=>y(e,t)}const v={URI:p,map:(e,t)=>y(t)(e)},w=l.YO(v),S=l.Hr(v),I=e=>z((t=>y(t)(e))),G={URI:p,of:h,map:v.map,ap:(e,t)=>I(t)(e)};function z(e,t){return t?k(y(e,t)):t=>k(y(e,t))}function k(e){if("final"===e.branch.state)return e.current;const[t,r]=function(e,t){let r=t;const n=[e.state,r.state].includes("might_change")?"might_change":"nominal",[i,a]=f(n),o=e=>t=>{switch(t){case"final":a(e().state);break;case"might_change":a("might_change");break;case"nominal":"might_change"===e().state?a("might_change"):a("nominal");break;default:throw new Error(`Ref bug: Unexpected upstream state ${t}`)}};e.onStateChange(o((()=>r)));const s=o((()=>e));let c=r.onStateChange(s);return[i,e=>{r=e,c(),c=e.onStateChange(s),s(r.state)}]}(e.branch,e.current.branch),[n,i]=A(t,e.current.current);let a=e.current.onChange(i);return e.onChange((e=>{a(),a=e.onChange(i),r(e.branch),i(e.current)})),n}function U(e){return t=>{if("final"===t.branch.state)return t;let r=i.YP;return y((t=>{if(i.Wi(r))return r=i.G(t),t;const n=e(r.value,t);return r=i.G(n),n}),t)}}function E(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>{if(2===t.length){let r=t[0];return y((e=>(r=t[1](r,e),r)),e)}let r=i.bM();return y((e=>{const n=t[0](r,e);return r=i.G(n),n}),e)}}function P(){if(0===arguments.length||T(arguments.length<=0?void 0:arguments[0]))return q(...arguments);const e=arguments.length<=0?void 0:arguments[0],t=Object.keys(e);return(0,n.zG)(Object.values(e),(e=>q(...e)),y((0,n.ls)(a.Su(((e,r)=>[t[e],r])),Object.fromEntries)))}function q(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)return h([]);if(1===t.length)return y((e=>[e]))(t[0]);let n=!1;t.forEach((e=>e.onChange((()=>{if("might_change"!==e.branch.state)throw new Error("Ref bug: Received a change notification without a `might_change` state.");n=!0}))));const i=t.map((0,o.vg)("branch")),a=()=>{n&&(n=!1,f(t.map((e=>e.current))))},s=u(i,a),[c,f]=A(s,t.map((e=>e.current)));return c}function x(e){const[t,r,a]=g(i.YP);return e().then((0,n.ls)(i.G,r,a)),t}function C(e){const t=e.hasOwnProperty("equals")?e.equals:e;return U(((e,r)=>t(e,r)?e:r))}function O(e){return T(e)?e:h(e)}function D(e){return t=>(_(e)(t),t)}function A(e,t){if("final"===e.state)return[h(t),()=>{}];const r=s(t);e.onStateChange((e=>{"final"===e&&r.terminate()}));let n=t;return[{get current(){return n},onChange:r.addListener,branch:e},c("Disallowed recursion in Ref.",(e=>{n=e,r.notify(n)}))]}function T(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)&&"function"==typeof e.onChange}},805:(e,t,r)=>{r.d(t,{Hr:()=>b,K4:()=>c,KD:()=>y,UI:()=>l,VS:()=>p,YO:()=>h,ak:()=>m,bw:()=>d,dQ:()=>u,kR:()=>v,of:()=>f,vP:()=>g,yi:()=>_});var n=r(567),i=r(169),a=r(822),o=r(450),s=r(507);const c=e=>(0,i.ls)((t=>{let{previousState:r,...n}=t;return e(n)}),(e=>({value:e,state:n.a9(void 0)}))),u=i.yR,f=(0,i.ls)(i.a9,c),l=e=>t=>(0,i.ls)(t,(0,a.rO)({value:e})),d=e=>t=>(0,i.ls)(t,(0,a.rO)({value:(0,a.bw)(e)}));function p(e){return t=>r=>{let{previousState:i,...a}=r;const o=t({previousState:Array.isArray(i)?i[0]:void 0,...a}),s=e(o.value)({previousState:Array.isArray(i)?i[1]:void 0,...a});return{value:s.value,state:n.vP(o.state,s.state)}}}function g(e){return t=>{let{previousState:r,...a}=t;const s=I(r)?r:{},c=(0,i.zG)(e,o.Su(((e,t)=>t({previousState:s[e],...a}))));return{value:(0,i.zG)(c,o.UI((e=>e.value))),state:(0,i.zG)(c,o.UI((e=>e.state)),(e=>n.vP(e)))}}}function m(e,t){return r=>(0,i.ls)((0,a.rO)({previousState:S}),(a=>{const o=r(a),s=t(o.value)({...a,previousState:a.previousState[e]});return{value:(0,i.zG)([o.value,s.value],(t=>{let[r,n]=t;if(!I(r))throw new Error("Service.bind() was passed an upstream Service with a non-record value.");return{...r,[e]:n}})),state:(0,i.zG)(n.vP(o.state,s.state),n.UI((t=>{let[r,n]=t;if(void 0===r)return{[e]:n};if(!I(r))throw new Error("Service.bind() was passed an upstream Service with a non-record state.");return{...r,[e]:n}})))}}))}const b=(e,t)=>l((r=>({...r,[e]:t(r)})));function h(e){return t=>(0,i.ls)((0,a.rO)({previousState:(0,i.ls)(S,(t=>t[e]))}),t,(0,a.rO)({value:t=>({[e]:t}),state:n.UI((t=>({[e]:t})))}))}const _=(e,t)=>{const r=t||(t=>t===e);return t=>u((o=>{let{previousState:s,...c}=o;const u=Array.isArray(s)&&2===s.length&&r(s[0])?s[1]:void 0;return(0,i.zG)({previousState:u,...c},t,(0,a.rO)({state:n.UI((t=>[e,t]))}))}))},y=e=>{const t=e.slice(0,-1),r=e.slice(-1)[0],n=[...t.map((e=>{let[t,r]=e;return[t,(0,i.a9)(r)]})),(0,i.a9)(r)];return v((0,a.lo)(n))};function v(e){return(0,i.ls)(n.UI(e),w)}function w(e){const t=(0,i.zG)(e,n.Rp(0,(e=>e+1)));return r=>{let{previousState:a,stopped:o,...c}=r;return(0,i.zG)(n.vP(e,t),n.Rp(((e,r)=>{let[u,f]=r;return(0,i.zG)(e,s.UI((e=>e.state.current)),s.fS((()=>a)),(e=>u({previousState:e,stopped:(0,i.zG)(n.vP(o,t),n.UI((e=>{let[t,r]=e;return t||r!==f}))),...c})))})),(e=>({value:n.UI((e=>e.value),e),state:n.VS((e=>e.state),e)})))}}function S(e){return I(e)?e:{}}function I(e){return"object"==typeof e&&null!==e}},230:(e,t,r)=>{r.d(t,{d:()=>l,m:()=>f});var n=r(169),i=r(144),a=r(507),o=r(567),s=r(822),c=r(805),u=r(689);const f=e=>c.dQ((t=>{let{stopped:r,previousState:c}=t;const u=function(e){return b(e)?e:{validityKey:"",lastSuccess:a.YP}}(c),f=(0,n.zG)(u,(e=>({...e,inFlight:a.YP,lastSuccess:(0,n.zG)(e.lastSuccess,a.UI(i.F2))}))),l=(0,n.zG)(e,o.UI((e=>"currentTimestampSecs"in e&&"freshness"in e&&"validity"in e?e:{currentTimestampSecs:0,validity:{key:e.validityKey,maxAge:Number.MAX_SAFE_INTEGER},freshness:{key:e.freshnessKey,maxAge:Number.MAX_SAFE_INTEGER},refresh:e.refresh})),(e=>o.vP(e,r)),o.Rp(o.a9(f),((e,t)=>{let[r,c]=t;if(c)return e;const u=r.validity.key(),f=a.hX((e=>r.currentTimestampSecs-e.timestamp<=r.validity.maxAge)),l=(0,s.HP)(r.freshness.key),d=a.hX((e=>r.currentTimestampSecs-e.timestamp<=r.freshness.maxAge&&e.freshnessKey===l())),p=(0,n.zG)(e,o.UI((0,n.ls)(a.DT((e=>e.validityKey===u)),a.EQ((()=>({validityKey:u,inFlight:a.YP,lastSuccess:a.YP})),(0,s.rO)({inFlight:f,lastSuccess:a.tS(i.EQ((e=>a.G(i.t$(e))),(0,n.ls)(a.G,f,a.UI((e=>i.F2(e))))))})))),o.D8(g()));if((0,n.zG)(p.current,(e=>(0,n.zG)(e.inFlight,a.wp((()=>(0,n.zG)(e.lastSuccess,a.tS(a.Uo)))),d,a.pC))))return p;const m=()=>({timestamp:r.currentTimestampSecs,freshnessKey:l(),output:a.YP});return(0,n.zG)(r.refresh,a.EQ((()=>p),(0,n.ls)((0,n.nn)({previous:(0,n.zG)(p.current.lastSuccess,a.tS(a.Uo),a.tS((e=>e.output)))}),o.fF,o.UI(a.EQ((()=>(0,n.zG)(p,o.UI((0,s.rO)({inFlight:()=>a.G(m())})))),i.EQ((e=>(0,n.zG)(p,o.UI((0,s.rO)({inFlight:()=>a.YP,lastSuccess:(0,n.ls)(a.tS((0,n.ls)(a.Uo,a.hX((e=>a.pC(e.output))))),i.Yo((()=>e)),a.G)})))),(e=>o.a9({validityKey:u,inFlight:a.YP,lastSuccess:a.G(i.F2({...m(),output:a.G(e)}))}))))),o.xH)))})),o.xH,o.D8(g())),d=(0,n.zG)(l,o.UI((e=>({validityKey:e.validityKey,lastSuccess:(0,n.zG)(e.lastSuccess,a.tS(a.Uo))}))),o.D8(m())),p=(0,n.zG)(d,o.Rp(-1,(e=>e+1)));return{value:(0,n.zG)(l,o.UI((0,n.ls)((0,s.vg)("lastSuccess"),a.UI(i.UI((e=>e.output))),a.fS((()=>i.F2(a.YP)))))),state:(0,n.zG)(o.vP(d,p),o.UI((e=>{let[t,r]=e;return r>0?t:m().equals(t,u)?c:t})))}})),l=e=>t=>(0,n.ls)((0,s.rO)({previousState:(0,n.ls)(a.DT(b),a.YO("s1"),a.Hr("s2",(t=>{let{s1:r}=t;return(0,n.zG)(r,(0,s.rO)({lastSuccess:a.UI((0,s.rO)({output:a.tS(e)}))}))})),a.UI((e=>{let{s1:t,s2:r}=e;return m().equals(t,r)?t:r})),a.FS)}),t),d=()=>u.n_({freshnessKey:(0,s.Or)(),timestamp:(0,s.Or)(),output:a.Eh((0,s.Or)())});function p(e){return"object"==typeof e&&null!==e&&(!(!("freshnessKey"in e)||!h(e.freshnessKey))&&("timestamp"in e&&"number"==typeof e.timestamp&&!(!("output"in e)||!(0,s.El)(e.output))))}const g=()=>u.n_({validityKey:(0,s.Or)(),inFlight:a.Eh(d()),lastSuccess:a.Eh(i.Eh((0,s.Or)(),d()))}),m=()=>u.n_({validityKey:(0,s.Or)(),lastSuccess:a.Eh(d())});function b(e){return"object"==typeof e&&null!==e&&(!(!("validityKey"in e)||!h(e.validityKey))&&!!("lastSuccess"in e&&(0,s.El)(e.lastSuccess)&&(0,n.zG)(e.lastSuccess,a.EQ((()=>!0),p))))}function h(e){return null===e||"string"==typeof e||"number"==typeof e}},836:(e,t,r)=>{r.r(t),r.d(t,{PermutiveActivationManagerWeb:()=>o,optimisedActivationsConfig:()=>a});class n{logger;permutive;id;segmentCode;triggerType;config;workspaceLevelConfig;prefix="[Activation]";constructor(e,t,r,n,i,a,o){this.logger=e,this.permutive=t,this.id=r,this.segmentCode=n,this.triggerType=i,this.config=a,this.workspaceLevelConfig=o}getSegmentCode(){return this.segmentCode}getTriggerType(){return this.triggerType}getConfig(){return this.config}getWorkspaceLevelConfig(){return this.workspaceLevelConfig}trackImpression(e){return this.trackActivation("impression",e)}trackConversion(e){return this.trackActivation("conversion",e)}trackActivation(e,t){const r={reaction_id:this.id,type:e};this.permutive.track("Reaction",r,t),this.logger.log(this.prefix,r.type,r)}}var i=r(50);const a={dfp:{dfp:[192971,201901,201910,202140,211186,223407,223408,223410,223415,223418,223419,223422,223427,223426,223424,223421,223430,223431,223432,223433,223477,223478,223479,223480,223482,223483,223484,223485,223486,223487,223488,224414,224387,224343,224299,224229,224218,224206,224196,224185,224173,223900,223915,223924,223937,223968,223984,224019,224021,224035,223732,227114,227748,227756,227765,227771,227775,227777,228024,228091,228169,224439,223880,223779,223859,223861,223896,224033,224118,228283,228284,228288,228325,223774,223850,223860,223862,223892,224107,224149,224159,224163,202336,202335,202334,202279,202281,202280,202332,202330,202327,202282,202326,202333,202331,202325,202329,202328,224082,224214,224086,224315,224430,224079,224080,224083,224087,224089,224085,224081,224084,224090,224088,224091,224132,224094,224134,224112,224098,224093,224100,224096,224106,224101,224102,224126,224104,224103,224109,224095,224105,224168,224092,224097,224099,224119,224140,224117,224114,224120,224164,224121,224122,224127,224142,224123,224170,224137,224108,224139,224136,224111,224115,224124,224157,224110,224113,224131,224148,224130,224133,224166,224125,224135,224116,224228,224146,224147,224129,224141,224155,224150,224156,224128,224158,224154,224161,224171,224160,224176,224167,224162,224239,224138,224145,224144,224152,224202,224189,224193,224191,224244,224247,224252,224234,224276,224273,224271,224272,224326,224310,224143,224153,224151,224169,224172,224178,224209,224204,224213,224230,224201,224220,224231,224259,224253,224216,224227,224165,224175,224174,224182,224179,224177,224195,224187,224186,224180,224199,224190,224181,224192,224184,224205,224240,224183,224400,224405,223744,223837,223838,223836,223894,223860,223896,223898,223911,223913,223908,223926,223933,223929,224198,224203,224200,224194,224235,224208,224188,224219,224223,224215,224212,224222,224225,224197,224238,224207,224224,224217,224210,224211,224236,224242,224221,224251,224255,224257,224243,224233,224245,224226,224241,224249,224256,224237,224258,224250,224232,224254,224246,224248,224261,224263,224262,224265,224268,224270,224277,224280,224285,224281,224283,224286,224287,224260,224264,224267,224269,224266,224274,224278,224275,224282,224279,224284,224289,224295,224290,224298,224302,224296,224323,224288,224293,224294,224291,224300,224292,224304,224303,224301,224305,224309,224321,224325,224322,224327,224320,224329,224307,224306,224313,224308,224311,224316,224317,224319,224318,224331,224328,224335,224337,224339,224338,224341,224312,224314,224324,224358,224362,224365,224372,224383,224386,224393,224409,224408,224406,224412,224416,223737,224333,224330,224332,224334,224336,224340,224344,224346,224349,224342,224348,224368,224354,224347,224351,224345,224350,224353,224352,224360,224363,224367,224366,224373,224378,224375,224374,224385,224388,224389,224394,224356,224355,224357,224359,224361,224364,224370,224369,224371,224376,224382,224377,224379,224381,224380,224384,224391,224392,224390,224395,224397,224396,224399,224401,224403,224404,224398,224402,224425,224407,224411,224410,224413,224417,224418,224431,224429,224434,224439,223733,223743,223749,223750,223755,223763,223758,223769,223768,223770,224415,224423,224422,224419,224427,224421,224420,224424,224428,224433,224435,224426,224436,224437,224438,223735,223736,223738,223740,223739,223741,223742,223760,223746,223748,223752,223747,223751,223753,223754,223759,223765,223757,223745,223772,223784,223771,223786,223858,223859,223863,223865,223991,224022,224043,224057,223756,223762,223761,223766,223767,223764,223775,223776,223781,223777,223783,223782,223787,223791,223798,223790,223778,223773,223780,223789,223788,223793,223800,223802,223806,223814,223809,223815,223813,223827,223835,223819,223796,223795,223797,223794,223799,223801,223803,223804,223805,223811,223808,223810,223822,223812,223820,223823,223919,223830,223834,223818,223821,223816,223829,223828,223833,223832,223824,223845,223841,223842,223840,223844,223825,223831,223826,223839,223843,223846,223877,223852,223851,223849,223855,223861,223866,223864,223870,223873,223876,223848,223847,223853,223856,223857,223867,223868,223869,223872,223871,223881,223875,223890,223879,223885,223888,223882,223874,223878,223886,223887,223889,223891,223897,223904,223903,223917,223957,223930,223942,223972,223977,223970,223932,223931,223884,223895,223883,223893,223901,223899,223906,223907,223905,223910,223914,223912,223916,223956,223946,223965,223920,223969,223938,223944,223922,223939,223918,223978,223936,223941,223950,223959,223952,223980,223987,223955,223960,223958,223988,223927,223928,223934,223921,223943,223940,223945,223976,223947,223973,223951,223997,223948,223967,223964,223954,223971,223961,223935,223925,223923,224026,224029,224037,224050,224049,224051,224055,224052,224061,224059,224067,223862,224387,223963,223981,223962,223979,223986,224003,223975,223992,224e3,223990,223985,223993,223989,223995,224007,224010,223983,223966,223998,223982,224013,224012,224017,223996,224002,223999,224009,224015,224018,224030,224024,224025,224020,224005,224006,224008,223994,224016,224001,224004,224014,224011,224023,224028,224031,224027,224046,224038,224033,224032,224041,224036,224045,224047,223807,224042,224044,224058,224068,224062,224063,224074,224054,224069,224060,224034,224039,223937,224218,224040,224053,224056,224064,224070,224066,223854,224078,223974,223902,223924,224021,224075,224073,224076,223915,223817,223968,223785,223792,223909,224071,224019,224048,223984,224414,224035,224299,224206,224185,223892,223953,224118,224173,223732,224159,224163,223850,223774,223880,224107,223779,224149,224343,224196,224229,224077,224072,230350,230352,230353,230355,230357,230356,230386,230387,230893,231568,231573,231575,231616,231615,231485,202304,202305,202307,211185,202309,202286,202288,202289,202290,211184,202311,202286,202287,202306,202291,202292,202293,202308,231734,231735,231736,231737,231738,231739,231740,231741,231743,231744,231745,231746,231747,231748,231749,231750,231751,231752,231753,231754,231755,231756,231757,231758,231759,231760,231761,231762,231763,231764,231765,231766,231767,231768,231769,231772,231980,232803,232334,233814,233938,233937,233932,233934,233935,233936,234208,234209,234649,234650,234652,234823,234824,234827,234826,234832,234837,234838,235158,236872,238938,239060,239488,239491,239917,239918,239920,239922,239927,239929,239951,240040,240048,240260,240261,240347,240348,240349,240350,240351,240352,240353,240354,240358,240359,240360,240361,240362,240363,240364,240365,240366,240367,240368,240369,240370,240371,240372,240373,240550,240741,240744,240746,240748,240769,240770,239441,239442,239443,239444,239445,239446,241366,241365,241364,241363,241522,241718,241767,241768,241792,241793,241802,241936,242075,242077,242383,242478,242479,242994,242993,243126,243087,243392,243542,243543,243493,243871,243872,243873,243874,243759,243976,243974,243975,243977,243978,244387,244891,246101,246110,246100,244914,246099,246825,246820,246821,246822,246823,246830,246832],dfp_legacy:{}},eyeota_pixel:[],dbm:{omitted:2},appnexus:{202279:40132466,202280:40132467,202281:40132464,202282:40132463,202286:40146823,202325:40132465,202326:40132462,202327:40132461,202328:40132460,202329:40132459,202330:40132458,202331:40132457,202332:40132456,202333:40132434,202334:40132435,202335:40132436,202336:40132437,211184:40146763,211186:40146764,223407:40132100,223408:40132364,223410:40132365,223415:40132366,223418:40131273,223419:40132367,223421:40132368,223422:40132369,223424:40132370,223426:40132371,223427:40132372,223430:40132342,223431:40132343,223432:40132344,223433:40132345,223477:40132348,223478:40132349,223479:40132350,223480:40132351,223482:40132352,223483:40132353,223484:40132354,223485:40132355,223486:40132357,223487:40132358,223488:40132359,223732:40146762,223733:40146761,223735:40146760,223736:40146759,223737:40146758,223738:40146757,223739:40146756,223740:40146755,223741:40146753,223742:40146754,223743:40146751,223744:40146752,223745:40146661,223746:40146662,223747:40146659,223748:40146658,223749:40146656,223750:40146657,223751:40146660,223752:40146654,223753:40146655,223754:40146652,223755:40146651,223756:40146653,223757:40146650,223758:40146649,223759:40146648,223760:40146647,223761:40146646,223762:40146645,223763:40146643,223764:40146644,223765:40146639,223766:40146637,223767:40146642,223768:40146636,223769:40146634,223770:40146641,223771:40146640,223772:40146638,223773:40146629,223774:40146635,223775:40146631,223776:40146630,223777:40146628,223778:40146626,223779:40146633,223780:40146632,223781:40146624,223782:40146623,223783:40146620,223784:40146622,223785:40146627,223786:40146625,223787:40146619,223788:40146618,223789:40146621,223790:40146616,223791:40146617,223792:40146615,223793:40146613,223794:40146612,223795:40146614,223796:40146611,223797:40146609,223798:40146610,223799:40146608,223800:40146607,223801:40146606,223802:40146605,223803:40146604,223804:40146603,223805:40146600,223806:40146596,223807:40146601,223808:40146597,223809:40146599,223810:40146594,223811:40146595,223812:40146593,223813:40146592,223814:40146591,223815:40146590,223816:40146589,223817:40146587,223818:40146585,223819:40146588,223820:40146582,223821:40146572,223822:40146573,223823:40146581,223824:40146577,223825:40146571,223826:40146570,223827:40146569,223828:40146568,223829:40146567,223830:40146566,223831:40146565,223832:40146560,223833:40146563,223834:40146562,223835:40146559,223836:40146558,223837:40146557,223838:40146556,223839:40146555,223840:40146553,223841:40146551,223842:40146554,223843:40146552,223844:40146550,223845:40146545,223846:40146544,223847:40146543,223848:40146541,223849:40146540,223850:40146542,223851:40146537,223852:40146536,223853:40146538,223854:40146539,223855:40146535,223856:40146534,223857:40146533,223858:40146532,223859:40146531,223860:40146527,223861:40146529,223862:40146530,223863:40146528,223864:40146523,223865:40146524,223866:40146525,223867:40146521,223868:40146522,223869:40146520,223870:40146518,223871:40146519,223872:40146516,223873:40146517,223874:40146515,223875:40146514,223876:40146513,223877:40146510,223878:40146512,223879:40146511,223880:40146508,223881:40146509,223882:40146461,223883:40146460,223884:40146459,223885:40146456,223886:40146457,223887:40146452,223888:40146454,223889:40146455,223890:40146448,223891:40146450,223892:40146451,223893:40146447,223894:40146449,223895:40146446,223896:40146444,223897:40146443,223898:40146445,223899:40146442,223900:40146441,223901:40146440,223902:40146439,223903:40146438,223904:40146437,223905:40146436,223906:40146434,223907:40146435,223908:40146431,223909:40146433,223910:40146429,223911:40146428,223912:40146430,223913:40146426,223914:40146425,223915:40146424,223916:40146423,223917:40146421,223918:40146422,223919:40146420,223920:40146419,223921:40146418,223922:40146417,223923:40146416,223924:40146414,223925:40146412,223926:40146410,223927:40146415,223928:40146409,223929:40146413,223930:40146411,223931:40146408,223932:40146405,223933:40146401,223934:40146407,223935:40146400,223936:40146394,223937:40146395,223938:40146392,223939:40146393,223940:40146391,223941:40146386,223942:40146363,223943:40146362,223944:40146361,223945:40146351,223946:40146349,223947:40146350,223948:40146347,223950:40146348,223951:40146345,223952:40146344,223953:40146346,223954:40146342,223955:40146343,223956:40146341,223957:40146339,223958:40146338,223959:40146340,223960:40146337,223961:40146336,223962:40146335,223963:40146334,223964:40146333,223965:40146332,223966:40146331,223967:40146329,223968:40146328,223969:40146323,223970:40146313,223971:40146315,223972:40146309,223973:40146311,223974:40146305,223975:40146304,223976:40146306,223977:40146307,223978:40146302,223979:40146301,223980:40146300,223981:40146303,223982:40146299,223983:40146298,223984:40146297,223985:40146295,223986:40146233,223987:40146240,223988:40146239,223989:40146230,223990:40146234,223991:40146231,223992:40146227,223993:40146226,223994:40146225,223995:40146223,223996:40146228,223997:40146224,223998:40146229,223999:40146221,224e3:40146222,224001:40146215,224002:40146214,224003:40146213,224004:40146216,224005:40146207,224006:40146204,224007:40146205,224008:40146212,224009:40146200,224010:40146206,224011:40146196,224012:40146199,224013:40146188,224014:40146191,224015:40146183,224016:40146186,224017:40146181,224018:40146184,224019:40146180,224020:40146178,224021:40146179,224022:40146177,224023:40146173,224024:40146170,224025:40146169,224026:40146146,224027:40146148,224028:40146142,224029:40146140,224030:40146133,224031:40146127,224032:40146124,224033:40146132,224034:40146125,224035:40146139,224036:40146135,224037:40146136,224038:40146128,224039:40146126,224040:40146122,224041:40146123,224042:40146120,224043:40146121,224044:40146119,224045:40146117,224046:40145978,224047:40146118,224048:40145979,224049:40145981,224050:40145982,224051:40145983,224052:40145988,224053:40145987,224054:40145984,224055:40145985,224056:40145986,224057:40145990,224058:40145989,224059:40145991,224060:40146114,224061:40146113,224062:40146112,224063:40146042,224064:40146043,224066:40146110,224067:40146038,224068:40146039,224069:40146040,224070:40146036,224071:40146037,224072:40146033,224073:40146035,224074:40146034,224075:40146106,224076:40146105,224077:40146104,224078:40146029,224079:40146028,224080:40146031,224081:40146030,224082:40146027,224083:40146025,224084:40146023,224085:40146021,224086:40146022,224087:40146020,224088:40146019,224089:40146101,224090:40146100,224091:40146097,224092:40146099,224093:40146098,224094:40146096,224095:40146094,224096:40146095,224097:40146108,224098:40146001,224099:40146e3,224100:40145999,224101:40145998,224102:40145997,224103:40145995,224104:40145994,224105:40145993,224106:40145992,224107:40145752,224108:40145756,224109:40145750,224110:40145747,224111:40145749,224112:40145743,224113:40145742,224114:40145739,224115:40145738,224116:40145736,224117:40145731,224118:40145721,224119:40145724,224120:40145720,224121:40145719,224122:40145695,224123:40145692,224124:40145691,224125:40145687,224126:40145684,224127:40145614,224128:40145616,224129:40145611,224130:40145610,224131:40145609,224132:40145607,224133:40145599,224134:40145600,224135:40145591,224136:40145584,224137:40145592,224138:40145581,224139:40145575,224140:40145571,224141:40145570,224142:40145567,224143:40145566,224144:40145564,224145:40145551,224146:40145548,224147:40145544,224148:40145540,224149:40145525,224150:40145523,224151:40145519,224152:40145502,224153:40145493,224154:40145495,224155:40145487,224156:40145490,224157:40145481,224158:40145483,224159:40145476,224160:40145475,224161:40145473,224162:40145472,224164:40145471,224165:40145470,224166:40145469,224167:40145456,224168:40145457,224169:40145454,224170:40145453,224171:40145455,224172:40145452,224173:40145450,224174:40145448,224175:40145447,224176:40145449,224177:40145444,224178:40145446,224179:40145443,224180:40145442,224183:40145441,224184:40145440,224185:40145439,224186:40145438,224187:40145436,224188:40145435,224189:40145434,224190:40145432,224191:40145433,224192:40145430,224193:40145431,224194:40145428,224195:40145427,224196:40145429,224197:40145426,224198:40145424,224199:40145425,224200:40145422,224201:40145420,224202:40145419,224203:40145417,224204:40145418,224205:40145416,224206:40145415,224207:40145410,224208:40145409,224209:40145407,224210:40145408,224211:40145406,224212:40145403,224213:40145405,224214:40145402,224215:40145404,224216:40145399,224217:40145395,224218:40145396,224219:40145390,224220:40145385,224221:40145392,224222:40145388,224223:40145382,224224:40145381,224225:40145380,224226:40145379,224227:40145376,224228:40145377,224229:40145378,224230:40145374,224231:40145375,224232:40145372,224233:40145369,224234:40145368,224235:40145367,224236:40145364,224237:40145359,224238:40145351,224239:40145352,224240:40145350,224241:40145349,224242:40145348,224243:40145346,224244:40145347,224245:40145345,224246:40145344,224247:40145325,224248:40145326,224249:40145323,224250:40145324,224251:40145322,224252:40145321,224253:40145317,224254:40145320,224255:40145316,224256:40145318,224257:40145319,224258:40145315,224259:40145313,224260:40145309,224261:40145308,224262:40145307,224263:40145306,224264:40145301,224265:40145285,224266:40145282,224267:40145281,224268:40145280,224269:40145279,224270:40145278,224271:40145264,224272:40145263,224273:40145251,224274:40145245,224275:40145246,224276:40145244,224277:40145242,224278:40145243,224279:40145240,224280:40145239,224281:40145238,224282:40145237,224283:40145236,224284:40145235,224285:40132360,224286:40145234,224287:40145231,224288:40145230,224289:40145229,224290:40145228,224291:40145226,224292:40145227,224293:40145225,224294:40145224,224295:40145222,224296:40145220,224298:40145152,224299:40145153,224300:40145151,224301:40145150,224302:40145149,224303:40145148,224304:40145147,224305:40145145,224306:40145146,224307:40145144,224328:40145040,224329:40145042,224330:40145044,224331:40145045,224332:40145049,224333:40145047,224334:40145046,224335:40145051,224336:40145066,224337:40145068,224338:40145069,224339:40145071,224340:40145079,224341:40145078,224342:40145082,224343:40145083,224344:40145084,224345:40145085,224346:40145087,224347:40145088,224348:40145016,224349:40145015,224350:40145014,224351:40145013,224352:40145011,224353:40145009,224354:40145006,224355:40145007,224356:40145010,224357:40145004,224358:40145008,224359:40145e3,224360:40145005,224361:40144999,224362:40144996,224363:40144995,224364:40144990,224365:40144856,224366:40144854,224367:40144853,224368:40144852,224369:40144849,224370:40144850,224371:40144848,224372:40144846,224373:40144847,224374:40144844,224375:40144841,224376:40144843,224377:40144840,224378:40144839,224379:40144834,224380:40144837,224381:40144829,224382:40144830,224383:40144826,224384:40144823,224385:40144822,224386:40144820,224387:40144799,224388:40144755,224389:40144754,224390:40144753,224391:40144751,224392:40144745,224393:40144740,224394:40144738,224395:40144736,224397:40144723,224398:40144722,224399:40144718,224400:40144717,224401:40144542,224402:40144716,224403:40144651,224404:40144657,224405:40144653,224406:40144643,224407:40144640,224408:40144641,224409:40144639,224410:40144570,224411:40144478,224412:40144460,224413:40144462,224414:40144458,224415:40144455,224416:40144451,224417:40144453,224418:40144449,224419:40144448,224420:40144446,224421:40144445,224422:40144444,224423:40144441,224424:40144443,224425:40144440,224426:40144438,224427:40144437,224428:40144424,224429:40144422,224430:40144423,224431:40144421,224433:40144420,224434:40144418,224435:40132230,224436:40132229,224437:40132228,224438:40132227,224439:40132226,227114:40132439,227748:40132441,227756:40132442,227765:40132445,227771:40132443,227775:40132444,227777:40132446,228024:40132448,228091:40132447,228169:40132449,228283:40132451,228284:40132450,228288:40132452,228325:40132454,230350:40132273,230352:40132274,230353:40132275,230355:40132276,230356:40132277,230357:40132278,230386:40132279,230387:40132280,230893:40132453,231568:40132361,231573:40132362,231575:40132363,231615:40144338,231616:40144337,231734:40147193,231735:40147196,231736:40147285,231737:40147389,231738:40147461,231739:40147465,231740:40147467,231741:40147473,231743:40147483,231744:40147497,231745:40147502,231746:40147505,231747:40147514,231748:40147523,231749:40147533,231750:40147577,231751:40147597,231752:40147599,231753:40147603,231754:40147608,231755:40147611,231756:40147612,231757:40147718,231758:40147729,231759:40147743,231760:40147747,231761:40147751,231762:40147752,231763:40147753,231764:40147756,231765:40147758,231766:40147759,231767:40147760,231768:40147761,231769:40147762,231772:40148153,231980:40215994,232803:40243252,233814:40309208,233932:40309178,233934:40309189,233935:40309201,233936:40309202,233937:40309203,233938:40309166,234208:40320605,234209:40320609,234649:40356e3,234650:40356118,234652:40356201,234823:40362234,234824:40362255,234827:40362292,234832:40363847,235158:40405991,236872:40429438,238938:40617846,239060:40636936,239441:40807102,239442:40807103,239443:40807107,239444:40807108,239445:40807113,239446:40807126,239488:40672404,239491:40672420,239917:40683068,239918:40683098,239920:40683612,239922:40683713,239927:40683905,239929:40683995,239951:40684214,240040:40684789,240048:40685684,240261:40719321,240347:40730831,240348:40730832,240349:40730834,240350:40730836,240351:40730838,240352:40730840,240353:40730857,240354:40730860,240358:40731565,240359:40731569,240360:40731570,240361:40731620,240362:40731632,240363:40731648,240364:40731665,240365:40731669,240366:40731671,240367:40731672,240368:40731673,240369:40731676,240370:40731677,240371:40731684,240372:40731686,240373:40731688,240550:40742834,240741:40763488,240744:40763658,240746:40763926,240748:40764050,240769:40764761,240770:40764760,241363:40836317,241364:40836316,241365:40836315,241366:40836313,241522:40841612,241718:40859071,241767:40863805,241768:40863807,241792:40867803,241793:40867811,241802:40868206,241936:40882807,242075:40901735,242077:40901755,242478:40929629,242479:40929635,243493:41058278,243542:41049490,243543:41049498,243759:41083280,243871:41072580,243872:41072577,243873:41072611,243874:41072612,243974:41085966,243975:41085967,243976:41086017,243977:41086026,243978:41086027,244387:41118858,244891:41152712,246099:41229660,246101:41185916,246110:41189292,246820:41266007,246821:41266015,246822:41266034,246823:41266048,246825:41266055,246830:41267072,246832:41267542},appnexus_adserver:[],nativo:[],rubicon_ssp:[],smart:[],freewheel:[],adswizz_keyvalue:[],curation_platforms:{adv:["adv"]}};class o{logger;permutive;clientContext;constructor(e,t,r){this.logger=e,this.permutive=t,this.clientContext=r}getSpecializedActivations(e){return a[e]}getActivations(e){return(0,i.Hn)(e)("activationConfigs",[]).filter((e=>this.areContextCriteriaSatisfied(e))).map((e=>new n(this.logger,this.permutive,e.id,e.sc,e.tt,e.c,e.wc)))}areContextCriteriaSatisfied(e){const t=e.cc,r=e=>{const t=this.clientContext.getContext()[e.key];switch(e.comparison){case"EQUALS":return t===e.value;case"NOT_EQUALS":return t!==e.value;case"CONTAINS":return"string"==typeof t&&t.indexOf(e.value)>=0;case"NOT_CONTAINS":return"string"==typeof t&&t.indexOf(e.value)<0}};return!t||("AND"===(n=t).operator?n.criteria.every(r):n.criteria.some(r));var n}}},50:(e,t,r)=>{r.d(t,{Hn:()=>i});const n={tiktok_pixel:{auto_init:!0,activationConfigs:[]},contextual_data:{auto_init:!0,activationConfigs:[]},dbm:{auto_init:!0,entity_id:416687,product_type:"INVITE_PARTNER",activationConfigs:[]},curation_platforms:{auto_init:!0,prebid_ssp_codes:["pubmatic","appnexus","ix","openx"],activationConfigs:[]},local_storage:{auto_init:!0,activationConfigs:[]},appnexus:{auto_init:!0,member_id:7739,activationConfigs:[]},clean_room:{auto_init:!0,cohort_ssp_config:[],activationConfigs:[]},prebid:{auto_init:!0,revenue_insights_enabled:!0,data_provider_config:{ac_bidders:[]},activationConfigs:[]},web:{auto_init:!1,track_pageview_engagement:!0,track_form_submission:!1,track_link_click:!0,track_pageview_complete:!0,add_alchemy_taxonomy:!1,add_alchemy_entities:!1,engagement_edge_only:!0,segment_transition_edge_only:!0,activationConfigs:[]},dfp:{auto_init:!0,track_slot_rendered:!1,track_slot_viewable:!0,track_slot_clicked:!0,activationConfigs:[]},privacy_sandbox_topics:{auto_init:!0,prebid:!0,topics_iframe_url:"https://cdn.permutive.app/topics.html",activationConfigs:[]}},i=e=>{const t=n[e];return(e,r)=>t?.[e]??r};i("web"),i("dfp"),i("facebook_pixel_v2")},270:(e,t,r)=>{r.d(t,{X:()=>i,k:()=>n});const n=e=>({id:e.id,name:e.name,time:new Date(e.time),properties:e.properties||{},session_id:e.session_id,view_id:e.view_id}),i=e=>({id:e.id,name:e.name,time:(a(e.time)?e.time:new Date).toISOString(),properties:e.properties||{},session_id:e.session_id,view_id:e.view_id}),a=e=>isFinite(e)&&e instanceof Date},235:(e,t,r)=>{r.d(t,{F:()=>u,I:()=>c});var n=r(567),i=r(694),a=r(812),o=r(169),s=r(822);const c=(e,t)=>{let r=!1;return n.UI(i.UI((0,s.bw)((n=>{r||(r=(0,o.zG)(n,a.G((e=>{let[,t]=e;return"Pageview"===t.name}))),r&&e.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:t,time_origin:"sdk_init"}))}))))},u=(e,t)=>{const r=c(e,t);return(0,o.ls)(n.En(2,a.uZ()),(e=>{let[t,i]=e;return(0,o.zG)(i,r,n.UI((e=>e()))),t}))}},646:(e,t,r)=>{r.r(t),r.d(t,{service:()=>Qa});var n=r(169),i=r(805),a=r(567),o=r(507),s=r(643);const c=e=>{const t=e.current;return(0,n.zG)(e,a.UI((e=>e===t?{segmentsEntered:[],segmentsExited:[]}:{segmentsEntered:(0,n.zG)(e,f(t)),segmentsExited:(0,n.zG)(t,f(e))})))},u=e=>new Set(e),f=e=>t=>(0,n.zG)(t,l((t=>!e.has(t)))),l=e=>t=>{const r=[];return t.forEach((t=>e(t)&&r.push(t))),r};var d=r(694),p=r(876),g=r(822);const m=()=>({kind:"null",value:null}),b=e=>({kind:"string",value:e}),h=e=>({kind:"number",value:e}),_=e=>({kind:"array",value:e}),y=e=>({kind:"object",value:e}),v=e=>e,w=()=>({kind:"bottom"}),S=e=>({kind:"inner",a:e}),I=e=>({kind:"top",error:e}),G=e=>({kind:"unbounded",group:e}),z=(e,t)=>({kind:"windowed",key:t,group:e}),k=(e,t,r)=>({kind:"countLimit",n:r,limit:t,group:e}),U=(e,t,r)=>({kind:"uniqueLimit",n:r,limit:t,group:e}),E=e=>({kind:"numberGroup",group:e}),P=e=>({kind:"stringGroup",group:e}),q=e=>({kind:"tuple",tuple:e}),x=e=>({state:e}),C=(e,t)=>({commands:e,payload:t});var O=r(856),D=r(229);const A=(e,t)=>{switch(e.kind){case"bottom":return{kind:"bottom"};case"inner":return S(t(e.a));case"top":return I(e.error)}},T=e=>(0,O.Zt)(((t,r)=>{if("bottom"===t.kind&&"bottom"===r.kind)return 0;if("bottom"===t.kind)return-1;if("bottom"===r.kind)return 1;if("top"===t.kind&&"top"===r.kind)return D.Df.compare(t.error,r.error);if("top"===t.kind)return 1;if("top"===r.kind)return-1;if("inner"===t.kind&&"inner"===r.kind)return e.compare(t.a,r.a);throw new Error("Non exhaustive match in extendedAlgebraOrd")}));var M=r(606),R=r(340),j=r(144),L=function(e){return-1===e?1:1===e?-1:0};function F(e,t){return(0,R.oA)(e.map(t))}function Q(e,t,r,n){const i=(e,t)=>{if(0===e.length)return(0,R.oA)(t.map((e=>(0,o.G)({1:e[1],2:r(o.YP,(0,o.G)(e[2]))}))));if(0===t.length)return(0,R.oA)(e.map((e=>(0,o.G)({1:e[1],2:r((0,o.G)(e[2]),o.YP)}))));if(e.length>0&&t.length>0&&(0,O.lt)(n)(e[0][1],t[0][1])){const[n,...a]=e,s=n[1],c=n[2];return(0,R.Ce)({1:s,2:r((0,o.G)(c),o.YP)})(i(a,t))}if(e.length>0&&t.length>0&&(0,O.gt)(n)(e[0][1],t[0][1])){const[n,...a]=t,s=n[1],c=n[2];return(0,R.Ce)({1:s,2:r(o.YP,(0,o.G)(c))})(i(e,a))}if(e.length>0&&t.length>0){const[n,...a]=e,[s,...c]=t,u=n[1],f=n[2],l=s[2];return(0,R.Ce)({1:u,2:r((0,o.G)(f),(0,o.G)(l))})(i(a,c))}throw new Error("Non exhaustive match in mapOption2")},a=(0,O.Uz)((e=>e[1]))(n),s=(e=>{const t=F(e,(e=>(0,o.pC)(e[2])?(0,o.G)({1:e[1],2:e[2].value}):o.YP));return 0===t.length?o.YP:(0,o.G)(t)})(i((0,R.DY)(a)([...e].map((e=>({1:e[0],2:e[1]})))),(0,R.DY)(a)([...t].map((e=>({1:e[0],2:e[1]}))))));return(0,o.UI)((e=>new Map(e.map((e=>[e[1],e[2]])))))(s)}function N(e,t,r,n){const i=(0,O.Uz)((e=>e[0]))(n),a=(0,R.DY)(i)([...t]).reduceRight(((e,t)=>{if((0,j.nM)(e)){const n=r(t[1],e.left);return(0,o.pC)(n)?(0,j.t$)(n.value):(0,j.F2)(t[0])}return e}),(0,j.t$)(e));return(0,o.Uo)(a)}function Y(e,t){return new Map([...e].map(t))}function $(e,t){return new Map([...e].filter(t))}var B=r(689),H=r(52);function K(e){return JSON.stringify(V(e))}function V(e){switch(e.kind){case"null":return J.encode(e);case"string":return Z.encode(e);case"number":return ee.encode(e);case"array":return te.encode(e);case"object":return re.encode(e)}}function W(e){return null===e?J.decode(e):"number"==typeof e?ee.decode(e):"string"==typeof e?Z.decode(e):Array.isArray(e)?te.decode(e):re.decode(e)}const X=(e,t)=>(0,j.t$)(`Failed to decode. Input was ${JSON.stringify(e)}. Codec type was ${t}`),J={encode:e=>null,decode:e=>null===e?(0,j.F2)({kind:"null",value:null}):X(e,"SimpleNull")},Z={encode:e=>e.value,decode:e=>"string"==typeof e?(0,j.F2)(b(e)):X(e,"SimpleString")},ee={encode:e=>e.value,decode:e=>"number"==typeof e?(0,j.F2)(h(e)):X(e,"SimpleNumber")},te={encode:e=>e.value.map(V),decode:e=>{if(Array.isArray(e)){const t=(0,R.fw)(j.g1)(W)(e);return(0,j.UI)(_)(t)}return X(e,"SimpleArray")}},re={encode:e=>{const t=[...e.value.entries()];return Object.assign({},...Array.from(t,(e=>{let[t,r]=e;return{[t]:V(r)}})))},decode:e=>{if(e&&e.constructor===Object){const t=(0,R.fw)(j.g1)((e=>{let[t,r]=e;return(0,n.zG)(W(r),(0,j.UI)((e=>(0,n.bc)(t,e))))}))(Object.entries(e));return(0,j.UI)((e=>y(new Map([...e]))))(t)}return X(e,"SimpleObject")}};function ne(e){return(0,n.zG)(e,ae,(0,o.UI)(K),(0,o.fS)((()=>"<encode error>")))}function ie(e){return(0,o.UI)(le)(function(e){switch(e.state.kind){case"top":return(0,o.G)(b(e.state.error));case"bottom":return o.YP;case"inner":return ae(e.state.a)}}(e))}function ae(e){return function(e){switch(e.kind){case"numberGroup":case"stringGroup":return oe(e.group);case"tuple":return e.tuple.length>0}}(e.payload)?(0,o.G)(_(function(e,t){const r=(0,o.UI)((e=>(0,R.Ce)(e)(t)))(e);return(0,o.fS)((()=>t))(r)}((0,o.UI)((e=>b(function(e){const t=e=>(0,o.EQ)((()=>""),(e=>"b"+JSON.stringify(e)))(e.bound),r=e=>{switch(e.operation){case"add":return"p";case"mul":return"m";case"max":return"v";case"min":return"n"}},n=e=>{const n=t(e[1])+r(e[1]);return 1===e[2]?n:n+JSON.stringify(e[2])};return e.map(n).join("")}(e))))(e.commands),function(e){const t=e=>{switch(e.kind){case"bottom":return{kind:"null",value:null};case"top":return b(e.error);case"inner":return h(e.a)}},r=e=>F([se,ce,e=>(0,n.zG)(e,fe,y,o.G)],(t=>t(e))),i=e=>F([se,ue,e=>(0,n.zG)(e,fe,(e=>Y(e,(e=>{let[t,r]=e;return[JSON.stringify(t),r]}))),y,o.G)],(t=>t(e)));switch(e.kind){case"tuple":return e.tuple.map(t);case"stringGroup":return r(e.group);case"numberGroup":return i(e.group)}}(e.payload)))):o.YP}function oe(e){switch(e.kind){case"unbounded":return e.group.size>0;case"windowed":return e.group.size>0||(0,o.pC)(e.key);case"countLimit":case"uniqueLimit":return e.group.size>0||(0,o.pC)(e.limit)}}function se(e){switch(e.kind){case"unbounded":return o.YP;case"windowed":return(0,o.G)(b("w"));case"countLimit":return(0,o.G)(b(1===e.n?"x":`x${e.n}`));case"uniqueLimit":return(0,o.G)(b(1===e.n?"u":`u${e.n}`))}}function ce(e){switch(e.kind){case"unbounded":return o.YP;case"windowed":return(0,o.G)(b((0,o.pC)(e.key)?e.key.value:""));case"countLimit":case"uniqueLimit":return(0,o.G)(b((0,o.pC)(e.limit)?e.limit.value:""))}}function ue(e){switch(e.kind){case"unbounded":return o.YP;case"windowed":return(0,o.pC)(e.key)?(0,o.G)(h(e.key.value)):(0,o.G)({kind:"null",value:null});case"countLimit":case"uniqueLimit":return(0,o.pC)(e.limit)?(0,o.G)(h(e.limit.value)):(0,o.G)({kind:"null",value:null})}}function fe(e){switch(e.kind){case"unbounded":case"windowed":case"countLimit":case"uniqueLimit":return e.group}}function le(e){switch(e.kind){case"array":return 0===e.value.length?{kind:"null",value:null}:1===e.value.length?le(e.value[0]):_(e.value.map(le));case"object":return(0,n.zG)($(e.value,(e=>{let[t,r]=e;return"null"!==r.kind})),(e=>Y(e,(e=>[e[0],le(e[1])]))),y);default:return e}}function de(e){const t=e=>{if(0===e.length)return{kind:"bottom"};const t=(e=>{if(4!==e.length)return o.YP;const[t,r,n,i]=e;if("string"===t.kind&&"string"===r.kind&&"object"===i.kind){const e=(0,o.DT)((e=>pe(e[1].value)&&ge(e[2].value)))({1:t,2:r});return(0,o.UI)((e=>({prim:e[1].value,grp:e[2].value,cutoff:n,m:i.value})))(e)}return o.YP})(e);if((0,o.pC)(t)){const{prim:e,grp:r,cutoff:n,m:i}=t.value,a=me(n,i,be(r));return"string"==typeof a?I(a):S(C(he(e),a))}const r=(e=>{if(3!==e.length)return o.YP;const[t,r,n]=e;if("string"===t.kind&&"object"===n.kind){const e=(0,o.DT)((e=>ge(e.value)))(t);return(0,o.UI)((e=>({grp:e.value,cutoff:r,m:n.value})))(e)}return o.YP})(e);if((0,o.pC)(r)){const{grp:e,cutoff:t,m:n}=r.value,i=me(t,n,be(e));return"string"==typeof i?I(i):S(C(o.YP,i))}const n=(e=>{if(2!==e.length)return o.YP;const[t,r]=e;if("string"===t.kind&&"object"===r.kind){const e=(0,o.DT)((e=>pe(e.value)))(t);return(0,o.UI)((e=>({prim:e.value,m:r.value})))(e)}return o.YP})(e);if((0,o.pC)(n)){const{prim:e,m:t}=n.value;return S(C(he(e),P(G(t))))}const i=(e=>{if(1!==e.length)return o.YP;const[t]=e;return"object"===t.kind?(0,o.G)({m:t.value}):o.YP})(e);if((0,o.pC)(i)){const{m:e}=i.value;return S(C(o.YP,P(G(e))))}const a=(e=>{if(e.length<1)return o.YP;const[t,...r]=e;if("string"===t.kind){const e=(0,o.DT)((e=>pe(e.value)))(t);return(0,o.UI)((e=>({prim:e.value,rest:r})))(e)}return o.YP})(e);if((0,o.pC)(a)){const{prim:e,rest:t}=a.value;return S(C(he(e),ye(t)))}return S(C(o.YP,ye(e)))},r=e=>"array"===e.kind?(0,R.tS)(r)(e.value):[e];return"null"===e.kind?x({kind:"bottom"}):x(t(r(e)))}function pe(e){const t=e.split("");if(!0==(0===t.length))return!1;{const[e,...r]=t;return-1!=="bpmvn".indexOf(e)&&r.every((e=>-1!=="bpmvn0123456789.".indexOf(e)))}}function ge(e){const t=e.split("");switch(!0){case 0===t.length:return!1;case"w"===t[0]&&void 0===t[1]:return!0;default:{const[e,...r]=t;return-1!=="ux".indexOf(e)&&-1===r.map((e=>!isNaN(parseInt(e)))).indexOf(!1)}}}function me(e,t,r){switch(e.kind){case"string":return P(r({1:(0,o.G)(e.value),2:t}));case"number":case"null":return E(r({1:"null"===e.kind?o.YP:(0,o.G)(e.value),2:$(Y(t,(e=>{let[t,r]=e;return[Number(t),r]})),(e=>!isNaN(e[0])))}));default:return"{bad cutoff}"}}function be(e){const t=e=>t=>U(t[2],t[1],e),r=e=>t=>k(t[2],t[1],e),n=e.split("");switch(!0){case"w"===n[0]&&void 0===n[1]:return e=>z(e[2],e[1]);case"u"===n[0]&&void 0===n[1]:return t(1);case"u"===n[0]&&void 0!==n[1]:return t(parseInt(n.slice(1).join("")));case"x"===n[0]&&void 0===n[1]:return r(1);case"x"===n[0]&&void 0!==n[1]:return r(parseInt(n.slice(1).join("")));default:throw new Error("This should never happen if you use isGroupCommand")}}function he(e){const t=e=>(0,o.Wi)(e.bound)||"add"===e.operation||"mul"===e.operation?(0,o.G)(e):o.YP,r=(e,r,i)=>{const a=((e,r)=>(0,n.zG)(e,(e=>{switch(e){case"p":return(0,o.G)("add");case"m":return(0,o.G)("mul");case"v":return(0,o.G)("max");case"n":return(0,o.G)("min");default:return o.YP}}),o.UI((e=>({operation:e,bound:r}))),o.tS(t)))(e,i);return(0,o.UI)((e=>{const{init:t,rest:n}=(0,R.zT)((e=>{return"number"==typeof(t=parseInt(e))&&isFinite(t)&&Math.floor(t)===t;var t}))(r);return{1:{1:e,2:0===t.length?1:parseInt(t.join(""))},2:n.join("")}}))(a)};return(0,o.UI)(v)((0,M.nI)(_e(e,(e=>{const t=e.split("");if(0===t.length)return o.YP;const[i,...a]=t;if("b"===i){const{init:e,rest:t}=(0,n.zG)(a,(0,R.zT)((e=>-1!=="1234567890.".indexOf(e))));if(0===e.length||0===t.length)return o.YP;const i=parseFloat(e.join("")),[s,...c]=t;return r(s,c,(0,o.G)(i))}return r(i,a,o.YP)}))))}function _e(e,t){const r=t(e);return(0,o.fS)((()=>[]))((0,o.UI)((e=>[e[1]].concat(_e(e[2],t))))(r))}function ye(e){return q(e.map(ve))}function ve(e){switch(e.kind){case"number":return S(e.value);case"string":return I(e.value);case"null":return{kind:"bottom"};case"object":return I("{object}");case"array":return I("{array}")}}var we=r(945);const Se={strategy:(e,t,r)=>n=>{if((0,o.Wi)(r))return t;if("delta"===e&&(0,o.Wi)(t))return o.YP;if((0,o.Wi)(t))return r;if((0,o.pC)(t)&&(0,o.pC)(r))return n(t.value,r.value);throw new Error("Non exhaustive match in combineCommand.strategy")},operation:(e,t,r,i,a,s)=>{const c=(0,R.pR)(T(s)),u=(0,n.zG)(t.bound,o.EQ((()=>n.yR),(e=>t=>(0,O.VV)(s)(a.fromNumber(e),t))));if("append"===e&&"add"===t.operation)return(0,R.yL)(r,i,Pe("append",(0,n.ls)(a.plus,u)));if("append"===e&&"mul"===t.operation)return(0,R.yL)(r,i,Pe("append",(0,n.ls)(a.times,u)));if("append"===e&&"max"===t.operation)return(0,O.Fp)(c)(r,i);if("join"===e&&"add"===t.operation)return(0,R.yL)(r,i,Pe("join",(0,O.Fp)(s)));if("join"===e&&"mul"===t.operation)return(0,R.yL)(r,i,Pe("join",(0,O.Fp)(s)));if("join"===e&&"max"===t.operation)return(0,O.Fp)(c)(r,i);if("min"===t.operation)return Se.operation(e,{operation:"max",bound:t.bound},r,i,a,function(e){return(0,O.Zt)(((t,r)=>L(e.compare(t,r))))}(s));if("delta"===e&&"max"===t.operation)return(0,O.gt)(c)(r,i)?r:i.map(w);if("delta"===e)return(0,R.yL)(r,i,((e,t)=>(0,O.gt)(T(s))(e,t)?A(e,u):{kind:"bottom"}));throw new Error("Non exhaustive match in combineCommand.operation")},extend:(e,t,r,n)=>{if("delta"===e&&"top"===r.kind&&"top"===n.kind)return(0,O.gt)(D.Df)(r.error,n.error)?I(r.error):{kind:"bottom"};if("delta"===e&&"bottom"===n.kind)return r;if("delta"===e&&"bottom"===r.kind)return{kind:"bottom"};if("top"===r.kind&&"top"===n.kind)return I((0,O.Fp)(D.Df)(r.error,n.error));if("top"===r.kind)return r;if("top"===n.kind)return n;if("inner"===r.kind&&"inner"===n.kind)return t(r.a,n.a);if("bottom"===r.kind)return n;if("bottom"===n.kind)return r;throw new Error("Non exhaustive match in extend")}},Ie={fromNumber:n.yR,plus:(e,t)=>e+t,times:(e,t)=>e*t};function Ge(e,t,r,n){if("unbounded"===e.kind&&"unbounded"===t.kind){const i=e.group,a=t.group;return(0,o.fS)(w)((0,o.UI)((e=>S(G(e))))(Q(i,a,r,n)))}if("windowed"===e.kind&&"windowed"===t.kind){const i=e.key,a=e.group,s=t.key,c=t.group,u=(0,O.Fp)((0,o.pR)(n))(i,s);return(0,o.fS)(w)((0,o.UI)((e=>S(z(e,u))))(Q(a,c,r,n)))}if("countLimit"===e.kind&&"countLimit"===t.kind){const i=e.n,a=t.n;if(i===a){const a=e.limit,s=e.group,c=t.limit,u=t.group,f=(0,O.Fp)((0,o.pR)(n))(a,c);return(0,o.fS)(w)((0,o.UI)((e=>S(k(e,f,i))))(Q(s,u,r,n)))}return I("Non matching counts")}if("uniqueLimit"===e.kind&&"uniqueLimit"===t.kind){const i=e.n,a=t.n;if(i===a){const a=e.limit,s=e.group,c=t.limit,u=t.group,f=(0,O.Fp)((0,o.pR)(n))(a,c);return(0,o.fS)(w)((0,o.UI)((e=>S(U(e,f,i))))(Q(s,u,r,n)))}return I("Non matching counts")}return I("Non matching group types")}function ze(e,t,r){return(0,o.fS)(m)(ke(e,o.YP)(t,r))}function ke(e,t){const r=t=>(r,n)=>Se.strategy(e,r,n)(ke(e,t)),i=(t,n,i)=>{if("stringGroup"===n.kind&&"stringGroup"===i.kind){const e=Ge(n.group,i.group,r(t),D.Df);return A(e,(e=>P(Ee(e,D.Df))))}if("numberGroup"===n.kind&&"numberGroup"===i.kind){const e=Ge(n.group,i.group,r(t),H.Df);return A(e,(e=>E(Ee(e,H.Df))))}if("tuple"===n.kind&&"tuple"===i.kind){const r=(0,o.pC)(t)?t.value:[];return S(q(function(e,t,r,n,i,a){const s=(e,t)=>({1:(0,R.ke)(e)(t).concat((0,R.KB)(Math.max(0,e-t.length),w)),2:(0,R.md)(e)(t)}),c=(t,r,n)=>{if(0===t.length)return Se.operation(e,{operation:"max",bound:o.YP},r,n,i,a);if(t.length>0){const[o,...u]=t,f=s(o[2],r),l=f[1],d=f[2],p=s(o[2],n),g=p[1],m=p[2];return Se.operation(e,o[1],l,g,i,a).concat(c(u,d,m))}throw new Error("Non exhaustive match in recurse")};return(0,R.GY)((0,R.Qp)((e=>"bottom"===e.kind))((0,R.GY)(c(t,r,n))))}(e,r,n.tuple,i.tuple,Ie,H.Df)))}throw new Error(`Non matching payload. Got ${n.kind} and ${i.kind}`)},a=(e,r)=>{if((0,o.Eh)((0,M.Eh)((0,B.n_)({1:(0,B.n_)({operation:D.Eq,bound:(0,o.Eh)(H.Eq)}),2:H.Eq}))).equals(e.commands,r.commands)){const n=(0,o.Wi)(e.commands)?t:e.commands,a=i(n,e.payload,r.payload);return A(a,(t=>C(e.commands,t)))}if(a=e.commands,s=r.commands,(0,o.Eh)((0,M.Eh)((0,B.n_)({1:(0,B.n_)({operation:D.Eq}),2:H.Eq}))).equals(a,s)){const a=(0,n.zG)(((e,t)=>(0,n.zG)((0,we.gz)(o.G5)(e,t),(0,o.UI)((e=>{let[t,r]=e;return M.yL(t,r,((e,t)=>({1:{operation:e[1].operation,bound:(0,n.zG)((0,we.gz)(o.G5)(e[1].bound,t[1].bound),o.UI((e=>{let[t,r]=e;return Math.min(t,r)})),o.wp((()=>e[1].bound)),o.wp((()=>t[1].bound)))},2:e[2]})))}))))(e.commands,r.commands),o.wp((()=>t))),s=i(a,e.payload,r.payload);return A(s,(e=>C(a,e)))}throw new Error(`Non matching primitive strings. Got ${ne(e)} and ${ne(r)}`);var a,s};return(t,r)=>ie(x(Se.extend(e,a,de(t).state,de(r).state)))}function Ue(e,t,r){const n=(0,o.UI)((t=>$(e,(e=>{let[n,i]=e;return(0,O.gf)(r)(n,t)}))))(t);return(0,o.fS)((()=>e))(n)}function Ee(e,t){switch(e.kind){case"unbounded":return e;case"windowed":return(0,o.Wi)(e.key)?e:z(Ue(e.group,e.key,t),e.key);case"countLimit":{const r=e.limit,n=e.n,i=e.group,a=N(n,i,((e,t)=>t<=1?o.YP:(0,o.G)(t-1)),t),s=(0,O.Fp)((0,o.pR)(t))(r,a);return k(Ue(i,s,t),s,n)}case"uniqueLimit":{const r=e.limit,n=e.n,i=e.group,a=(e,t)=>{if("object"===e.kind){const r=[...e.value.keys(),...t.keys()],i=new Set(r);return i.size>=n?o.YP:(0,o.G)(i)}return o.YP},s=N(new Set,i,a,t),c=(0,O.Fp)((0,o.pR)(t))(r,s);return U(Ue(i,c,t),c,n)}}}function Pe(e,t){return(r,n)=>Se.extend(e,((e,r)=>S(t(e,r))),r,n)}function qe(e,t){return ze("append",e,t)}function xe(e,t){return ze("join",e,t)}var Ce=r(450),Oe=r(327),De=r(6),Ae=r(335),Te=r(289),Me=r(49);function Re(e,t){return function(r){return e.map(r,t.compact)}}function je(e,t,r){var i=Re(e,t),a=(0,Te.UI)(e,r);return function(e){return Me.s4(i((0,n.zG)(e,a(o.IS))),i((0,n.zG)(e,a(o.EK))))}}function Le(e,t){return function(r){return function(n){return e.map(n,(function(e){return t.filter(e,r)}))}}}function Fe(e,t){return function(r){return function(n){return e.map(n,(function(e){return t.filterMap(e,r)}))}}}function Qe(e,t){var r=Le(e,t);return function(e){var t=r((0,Oe.ff)(e)),n=r(e);return function(e){return(0,Me.s4)(t(e),n(e))}}}function Ne(e,t){var r=Fe(e,t);return function(e){return function(t){return(0,Me.s4)((0,n.zG)(t,r((function(t){return(0,o.IS)(e(t))}))),(0,n.zG)(t,r((function(t){return(0,o.EK)(e(t))}))))}}}var Ye=r(755),$e=r(241),Be=r(614);function He(e){return(0,n.ls)(o.G,e.of)}function Ke(e){return(0,n.a9)(e.of(o.YP))}function Ve(e){return function(t){return e.map(t,o.G)}}function We(e){return(0,n.ls)(o.ij,e.of)}function Xe(e){var t=We(e);return function(e){return(0,n.ls)(e,t)}}function Je(e){var t=ct(e),r=Xe(e);return function(e){return t(r(e))}}function Ze(e){return function(t){return(0,n.ls)(t,e.of)}}function et(e){var t=ct(e),r=Ze(e);return function(e){return t(r(e))}}function tt(e){return function(t){return function(r){return e.of(o.DT(t)(r))}}}function rt(e){return(0,n.ls)(o.Uo,e.of)}function nt(e){return function(t,r){return function(n){return e.map(n,o.EQ(t,r))}}}function it(e){return function(t,r){return function(n){return e.chain(n,o.EQ(t,r))}}}function at(e){return function(t){return function(r){return e.chain(r,o.EQ(t,e.of))}}}function ot(e){return(0,Te.UI)(e,o.dO)}function st(e){return(0,we.ap)(e,o.G5)}function ct(e){var t=Ke(e);return function(r){return function(n){return e.chain(n,o.EQ((function(){return t()}),r))}}}function ut(e){var t=He(e);return function(r){return function(n){return e.chain(n,o.EQ(r,t))}}}var ft=r(46),lt=He(ft.PM),dt=(ft.PM,ft.of),pt=(ft.PM,function(e){return gt(ft.tD(e))}),gt=Ve(ft.dO),mt=ft.UI(o.Uo),bt=(ft.dO,it(ft.qo)),ht=(ft.UA,ft.PM,ft.PM,ft.UA,ft.PM,et(ft.UA)),_t=ot(ft.dO),yt=st(ft.Hi),vt=lt,wt=ct(ft.UA),St=(ft.UA,ft.PM,ft.dO,o.Ri,ft.dO,o.Ri,o.dO,Le(ft.dO,o.xu)),It=(ft.dO,o.xu,ft.dO,o.xu,ft.dO,o.xu,function(e,t){return(0,n.zG)(e,_t(t))}),Gt=function(e,t){return(0,n.zG)(e,yt(t))},zt=function(e,t){return(0,n.zG)(e,wt(t))},kt="TaskOption",Ut={URI:kt,map:It},Et={URI:kt,map:It,ap:Gt,chain:zt},Pt={URI:kt,fromIO:pt},qt=(0,Ye.At)(Pt,Et),xt={URI:kt,fromIO:pt,fromTask:gt},Ct=(0,$e.wt)(xt),Ot=(0,$e.oU)(xt,Et),Dt=(Be.F4,(0,Te.Hr)(Ut)),At=(0,Ae.a)(Et),Tt=(Be.Xl,He(d.PM)),Mt=(d.PM,d.of,d.PM,d.dO,o.Uo,d.dO,d.qo,d.UA,d.UI(o.FS),d.UI(o.WG),d.PM,d.PM,d.UA,d.PM,d.UA,d.dO,d.G5,Tt),Rt=(d.UA,ut(d.UA)),jt=(d.PM,d.dO,o.Ri,d.dO,o.Ri,o.dO,d.dO,o.xu,d.dO,o.xu,d.dO,o.xu,d.dO,o.xu,Be.F4,Be.Xl,r(812));const Lt=new Set(["AdRequest","Reaction","PageviewEngagement","SegmentEntry","SegmentExit"]),Ft=e=>i.dQ((t=>{let{previousState:r}=t;const[i,s]=a.Ue(!1);const[c,u]=a.gS({empty:o.YP,concat:(e,t)=>(0,n.zG)(jt.oA([e,t]),o.DT(jt.Od),o.UI((e=>e.reduce(((e,t)=>({...e,...t}))))))}),f=(0,n.zG)((0,g.Kn)(r)?r:{},(0,g.rO)({stateOffset:(0,n.ls)(o.DT(g.BJ),o.fS((()=>0))),fetchUnseenKey:(0,n.ls)(o.DT(g.HD),o.fS((()=>"")))})),l=(0,n.zG)(a.gS(o.uZ({concat:function(e,t){return Object.assign({},e,t)}})),(t=>{let[r,i]=t;return(0,n.zG)(a.vP(e.lastProcessedEvents,e.internalStateDiff,e.queryLanguageProcessing),a.bw((e=>{let[t,r,n]=e;if(n)return;return t().filter((e=>!Lt.has(e.name))).length>0?i(r()):void 0}))),(0,n.zG)(a.vP({internalStateDiff:r,internalStateMap:e.internalStateMap}),a.D8(((e,t)=>e.internalStateDiff===t.internalStateDiff)))})),d=(0,n.zG)(a.vP(e.sessionId,l,i),a.Rp(a.a9({...f,inFlightRequest:!1,previousDecodedState:(0,n.zG)(e.internalStateMap.current,Nt,W,j.fS((()=>y(new Map)))),sendFullStateWithUnseen:!1}),((t,r)=>{let[i,{internalStateDiff:s,internalStateMap:c},f]=r;return(0,n.zG)(t,a.VS((t=>{if(t.inFlightRequest)return a.a9(t);const r=!f&&t.sendFullStateWithUnseen,l=r||!e.groupIdIsNewlyGenerated&&i!==t.fetchUnseenKey;return(0,n.zG)(r?Mt(c):s,Rt((()=>()=>(0,n.zG)({},o.DT((()=>l))))),ft.tD,wt((0,n.ls)($t(t.previousDecodedState),De.Vn((0,g.bw)((t=>e.logger.error(t)))),mt)),bt((()=>ft.of({...t,inFlightRequest:!1})),(0,n.ls)(ft.of,ft.ak("processed",(r=>(0,n.zG)(e,Qt({delta:r.delta,stateOffset:t.stateOffset,fetchUnseen:l}),ft.UI((0,g.bw)((0,n.ls)(o.UI((0,g.vg)("stateDelta")),o.hX(Oe.ff(Ce.xb)),u)))))),ft.UI((e=>({fetchUnseenKey:i,inFlightRequest:!1,sendFullStateWithUnseen:t.sendFullStateWithUnseen&&!r,previousDecodedState:e.decodedState,stateOffset:(0,n.zG)(e.processed,o.UI((e=>e.response.state_offset)),o.fS((()=>t.stateOffset)))}))))),a.fF,a.UI(o.fS((()=>({...t,inFlightRequest:!0})))))})))})),a.xH,a.UI((e=>({stateOffset:e.stateOffset,fetchUnseenKey:e.fetchUnseenKey}))),a.D8((0,B.MW)({stateOffset:H.Eq,fetchUnseenKey:D.Eq})));return{state:d,value:{externalStateDelta:c}}})),Qt=e=>t=>(0,n.zG)(e,o.DT((e=>e.fetchUnseen||Oe.ff(Ce.xb)(e.delta))),dt,wt((e=>{return(0,n.zG)(t,(r={event_source_id:t.eventSourceId,fetch_unseen:e.fetchUnseen,group_id:t.groupId,last_seen_offset:e.stateOffset,state:e.delta},e=>De.Y3((()=>e.permutiveApi.req({url:e.permutiveUrls.getEndpointUrl("/state",o.G("v1.0"),[["fetch_unseen",JSON.stringify(r.fetch_unseen)]]),method:"POST",payload:{group_id:r.group_id,event_source_id:r.event_source_id,state:JSON.stringify(r.state),last_seen_offset:r.last_seen_offset},contentType:"text/plain",dataType:"json",withCredentials:!1})),(e=>`Error sending state delta. Got ${j.KC(e)}`))),De.Vn((0,g.bw)((e=>t.reportError(e)))),mt,St((e=>!!e)),ht((0,n.ls)(j.of,j.YO("response"),j.ak("stateDelta",(e=>{return t=e.response.state,(0,j.Y3)((function(){return JSON.parse(t)}),n.yR);var t})),j.Vn((0,g.bw)((e=>t.reportError(`Failed to parse State API response, got ${e}`)))),o.Uo)));var r}))),Nt=e=>(0,g.b0)(e,((e,t)=>t.state?o.G({[t.checksum]:t.state}):o.YP)),Yt=e=>t=>{const r=(0,n.zG)(t,Nt,W,j.fS((()=>y(new Map))),(t=>ze("delta",t,e)));return{decodedState:xe(r,e),delta:(0,n.zG)(r,V,o.ij,o.fS((()=>({}))))}},$t=e=>t=>()=>new Promise((r=>(0,p.HJ)((()=>(0,n.zG)(t,j.it(Yt(e),(e=>`Failed to compute delta for state sync. Got ${e}`)),r)))));r(226),Ce.dp;var Bt=Ce.xb,Ht=function(e){return function(t){return Object.keys(t).sort(e.compare)}};D.Df;Ce.dx,Ce.e$;Ce.Bu,Ce.P5,Ce.Su;var Kt=Ce.UI;Ce.ri;function Vt(e){return Ce.vP(e)}Ce._r;Ce.jt;Ce.yW,Ce.G,Ce.t9;var Wt=Ce.HA,Xt=(Ce.nn,Ce.kp),Jt=Ce.CC,Zt=Ce.RF,er=(Ce.I8,Ce.mS,Ce.RJ,Ce._Y,Ce.V_),tr=Ce.EW,rr=Ce.nu,nr=(Ce.SW,Ce.zV,Ce.Ub,Ce.vA,Ce.qS),ir=(Ce.mK,function(e){return function(t){var r=Ht(e);return function(e,n){var i=r(e);if(0===i.length)return t.of({});for(var a=t.of({}),o=function(r){a=t.ap(t.map(a,(function(e){return function(t){return e[r]=t,e}})),n(r,e[r]))},s=0,c=i;s<c.length;s++){o(c[s])}return a}}}),ar=Ce.hX;Ce.DZ,Ce.uK,Ce.tV;Ce.oA,Ce.oh;var or="Record";var sr=Ce.Eh,cr=(Ce.uZ,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,Ce.nr,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,D.Df,r(654)),ur=r(214),fr=function(e){return function(t){return[void 0,e(t)]}},lr=function(e){return function(t){return[e(t),t]}},dr=function(e,t){return(0,n.zG)(e,mr(t))},pr=function(e,t){return(0,n.zG)(e,br(t))},gr=function(e,t){return(0,n.zG)(e,_r(t))},mr=function(e){return function(t){return function(r){var n=t(r),i=n[0],a=n[1];return[e(i),a]}}},br=function(e){return function(t){return function(r){var n=t(r),i=n[0],a=n[1],o=e(a),s=o[0],c=o[1];return[i(s),c]}}},hr=function(e){return function(t){return[e,t]}},_r=function(e){return function(t){return function(r){var n=t(r),i=n[0],a=n[1];return e(i)(a)}}},yr="State",vr={URI:yr,map:dr},wr={URI:yr,map:dr,ap:pr},Sr=(0,we.N)(wr),Ir=(0,we.a1)(wr),Gr={URI:yr,map:dr,ap:pr,of:hr},zr={URI:yr,map:dr,ap:pr,chain:gr},kr=(0,Ae.m)(zr),Ur=(n.yR,(0,Te.YO)(vr)),Er=(0,Ae.a)(zr),Pr=function(e){var t=function(e){return function(t){return function(r){for(var n=e(0,Be.YM(t))(r),i=[n[0]],a=n[1],o=1;o<t.length;o++){var s=e(o,t[o])(a),c=s[0],u=s[1];i.push(c),a=u}return[i,a]}}}(e);return function(e){return Be.Od(e)?t(e):hr(Be.Xl)}},qr=function(e){return Pr((function(t,r){return e(r)}))},xr=qr(n.yR);const Cr=e=>({aggregations:{PageviewEngagement:{engaged_time:0},SegmentEntry:new Set,SegmentExit:new Set,CohortEntry:new Set,CohortExit:new Set},customProperties:{},sessionId:e.sessionId,viewId:e.viewId}),Or=e=>t=>{const r=new Set(t);return r.add(e),r},Dr=e=>t=>{const r=new Set(t);return r.delete(e),r},Ar=e=>[...e];var Tr,Mr,Rr=r(270);!function(e){e.init=function(e){return e&&"object"==typeof e&&"externalStateMap"in e&&"internalStateMap"in e?e:{externalStateMap:o.YP,internalStateMap:{},migrationVersion:mn}}}(Tr||(Tr={})),function(e){e.sequenceNonEmptyArray=e=>{if(1===e.length)return e[0];const t=(0,n.bc)([],{},[]);for(const r of e){t[0].push(...r[0]);for(const e in r[1])t[1][e]=r[1][e];t[2].push(...r[2])}return t},e.sequenceArray=t=>(0,n.zG)(t,o.DT(jt.Od),o.UI(e.sequenceNonEmptyArray)),e.empty=[jt.cS,Ce.cS,jt.cS],e.error=e=>[jt.of(e),Ce.cS,jt.cS],e.ofOutputEvent=e=>[jt.cS,Ce.cS,[e]]}(Mr||(Mr={}));const jr=e=>gn((t=>(0,n.zG)(Lr((e=>({...e,getCurrentSession:()=>t.environment.sessionId,getCurrentView:()=>t.environment.viewId}))),_r((()=>{return xr([Fr(e),$r(t.environment.thirdPartyData),(i=t.environment.lookalikeModels,(0,n.zG)((function(e){return[e,e]}),_r((e=>cn.equals(e.lal,i)?hr(jt.cS):(0,n.zG)(fr((0,g.rO)({lal:(0,n.a9)(i)})),Sr(Lr(function(e){const t=(0,n.zG)(e,o.fS((()=>({}))));return e=>({...e,getLookalikeModels:()=>t})}(i))),_r((()=>(0,n.zG)(jt.Yo(i),qr((()=>Vr("updateLAL"))),mr(jt.xH))))))))),(0,n.zG)(t.externalStateDelta,o.UI(Kr),o.fS((()=>hr(jt.bM())))),(r=t.cloudLiftedState,(0,n.zG)(r,jt.tS((e=>Object.entries(e))),qr((e=>{let[t,r]=e;return lr((e=>(0,n.bc)(t,e.queries.runtime.cloudLiftedQueries[t],r)))})),_r((e=>Jr(j.F2(e)))))),Wr(t.newEvents)]);var r,i})),mr((0,n.ls)(jt.xH,o.DT(jt.Od),o.tS(Mr.sequenceArray))),(e=>t=>{let[r,i]=e(t);if(o.pC(r)){let e=r.value,t=0;const a=100;let s;for(s=0;s<a&&e[2].length>t;s++){const r=e[2],[a,o]=(0,n.zG)(Wr(r.slice(t)),mr((t=>Mr.sequenceNonEmptyArray([e,...t]))),(0,n.nn)(i));e=a,i=o,t=r.length}s>=a&&(e=Mr.sequenceNonEmptyArray([e,Mr.error(`Exceeded ${a} iterations when producing transition events`)])),r=o.G(e)}return(0,n.bc)(r,i)}),pn(e,"query_language_process_duration")))),Lr=e=>fr((0,g.rO)({effects:e}));function Fr(e){return(0,n.zG)((function(e){return[e,e]}),_r((t=>{let{bootstrapped:r,effects:i,eventsForReplay:a}=t;return r?hr(jt.cS):(0,n.zG)(fr((e=>({...e,bootstrapped:!0,eventsForReplay:[]}))),kr(Qr),_r((()=>(0,n.zG)(a,jt.R3(dn(i)),qr(Xr("bootstrap")),mr(jt.xH)))),pn(e,"query_language_bootstrap_duration"))})))}const Qr=()=>fr((e=>(0,n.zG)(e.invalidatedQueries,jt.EQ((()=>e),Nr(e))))),Nr=e=>t=>{const r=(0,n.zG)(t,jt.UI((t=>(0,n.bc)(t,{checksum:e.queries.metadata[t]}))),(e=>Object.fromEntries(e)));return(0,n.zG)(e,(0,g.rO)({persistentState:(0,g.rO)({internalStateMap:e=>({...r,...e})})}))},Yr=(0,n.zG)(lr((e=>e.tpdQueries)),_r(o.EQ((()=>(0,n.zG)(lr((e=>new Set([...e.queries.runtime.queriesByEvent["!UpdateSecondPartyData"]||[],...e.queries.runtime.queriesByEvent["!UpdateThirdPartyData"]||[]]))),kr((e=>fr((0,g.rO)({tpdQueries:()=>o.G(e)})))))),hr)));function $r(e){const t=(0,n.zG)(e,o.UI(s.li));return(0,n.zG)((function(e){return[e,e]}),_r((r=>{if(o.Eh(H.Eq).equals(t,r.tpdHashInEffectsObject))return hr(jt.cS);const i=o.FS(t);return(0,n.zG)(fr((0,g.rO)({persistentState:(0,g.rO)({tpdHash:(0,n.a9)(i)}),tpdHashInEffectsObject:(0,n.a9)(t),tpdReady:(0,n.a9)(o.pC(e))})),mr((()=>(0,n.zG)(e,o.UI(s.Yg)))),kr((e=>Lr(function(e){const t=un((()=>(0,n.zG)(e,o.fS((()=>({"3p":{}}))))));return e=>{const r=un((()=>({...t(),...e.get1PSegments()})));return{...e,getSegments:r,getSegmentsArray:un((()=>ln(r()))),get3PSegments:t}}}(e)))),_r(o.fw(Gr)((()=>(0,n.zG)(r.tpdEventsToProcess,jt.EQ((()=>i!==r.persistentState.tpdHash?Vr("updateTPD"):hr(jt.cS)),(0,n.ls)(qr(Xr("updateTPD")),Sr(fr((e=>({...e,tpdEventsToProcess:[]})))),mr(jt.xH))))))),mr(o.fS((()=>jt.bM()))))})))}const Br=e=>Ce.jt(((t,r)=>(0,n.zG)(Ce.P5(t,e.metadata),o.tS((e=>Ce.P5(e,r))),o.tS((r=>(0,n.zG)(Ce.P5(t,e.runtime.locallyLiftedQueries),o.wp((()=>Ce.P5(t,e.runtime.cloudLiftedQueries))),o.NG((e=>e.compact(r)))))),o.tS((0,n.ls)(W,o.Uo))))),Hr=(e,t)=>{if(Ce.xb(e))return t;if(Ce.xb(t))return e;const r={...e};for(const e in t)r[e]=(0,n.zG)(o.ij(r[e]),o.EQ((()=>t[e]),(r=>(0,n.zG)(o.Y3((()=>xe(r,t[e]))),o.fS((()=>t[e]))))));return r};function Kr(e){return(0,n.zG)(lr((t=>(0,n.zG)(e,Br(t.queries),(e=>(0,n.zG)(t.persistentState.externalStateMap,o.UI(Ce.DZ((0,n.ls)(W,o.Uo))),o.EQ((()=>e),(t=>Hr(t,e))))),Ce.UI(V)))),_r((e=>fr((0,g.rO)({persistentState:(0,g.rO)({externalStateMap:(0,n.a9)(o.G(e))})})))),_r((()=>Vr("updateExternalState"))))}function Vr(e){return(0,n.zG)(lr((e=>dn(e.effects))),_r(Xr(e)))}function Wr(e){return(0,n.zG)(e,jt.EQ((()=>hr(jt.bM())),(0,n.ls)(tn,_r(qr((e=>{let[t,r]=e;return(0,n.zG)(r,Xr(t))}))),mr(jt.xH))))}function Xr(e){return(0,n.ls)(hr,kr((e=>"Pageview"!==e.name?hr(void 0):fr((0,g.rO)({pageviewProperties:(0,n.a9)(e.properties)})))),"bootstrap"===e?n.yR:kr((e=>{return fr((0,g.rO)({unprocessedPageviewComplete:(t=e,e=>{switch(t.name){case"Pageview":return t.view_id!==e.viewId?e:{...e,customProperties:t.properties};case"SegmentEntry":{const r=t.properties.segment_number;return(0,n.zG)(e,(0,g.rO)({aggregations:e=>e.SegmentExit.has(r)?(0,n.zG)(e,(0,g.rO)({CohortExit:Dr(String(r)),SegmentExit:Dr(r)})):(0,n.zG)(e,(0,g.rO)({CohortEntry:Or(String(r)),SegmentEntry:Or(r)}))}))}case"SegmentExit":{const r=t.properties.segment_number;return(0,n.zG)(e,(0,g.rO)({aggregations:e=>e.SegmentEntry.has(r)?(0,n.zG)(e,(0,g.rO)({CohortEntry:Dr(String(r)),SegmentEntry:Dr(r)})):(0,n.zG)(e,(0,g.rO)({CohortExit:Or(String(r)),SegmentExit:Or(r)}))}))}case"PageviewEngagement":{if(t.view_id!==e.viewId)return e;const r=t.properties;return(0,n.zG)(e,(0,g.rO)({aggregations:(0,g.rO)({PageviewEngagement:()=>({engaged_time:r.total_engaged_time,completion:r.total_completion})})}))}default:return e}})}));var t})),kr((e=>{return an(e)?Lr((t=e.properties.segment_number,r="SegmentEntry"===e.name,e=>{return(0,n.zG)(e,(i={"1p":{...e.get1PSegments()["1p"],[t]:r}},e=>{const t=un((()=>({...i,...e.get3PSegments()})));return{...e,getSegments:t,getSegmentsArray:un((()=>ln(t()))),get1PSegments:()=>i}}));var i})):hr(void 0);var t,r})),Ur("event"),Er("queriesToProcess",(t=>{let{event:r}=t;return function(e,t){return(0,n.zG)((function(e){return[e,e]}),Ur("state"),Er("tpdQueriesToReject",(e=>{let{state:{tpdReady:t}}=e;return t?hr(o.bM()):(0,n.zG)(Yr,mr(o.DT((e=>e.size>0))))})),_r((r=>{let{state:i,tpdQueriesToReject:a}=r;const s=(0,n.zG)(a,o.UI((e=>jt.hX((t=>!e.has(t))))),o.fS((()=>e=>e)));switch(e){case"bootstrap":return hr((0,n.zG)(i.queriesForReplay,s));case"event":const e=i.tpdReady?hr(void 0):fr((0,g.rO)({tpdEventsToProcess:jt.R3(t)}));return(0,n.zG)(hr(i.locallyLiftedQueriesByEvent[t.name]||[]),mr(s),Sr(e));case"lookalikeTransition":return hr(i.locallyLiftedQueriesByEvent[t.name]||[]);case"transition":const r=i.locallyLiftedQueriesByEvent[t.name]||[];if(o.pC(i.lal)){const e=i.locallyLiftedQueriesByEvent["!UpdateLookalikeModels"]||[];return hr(r.concat(e))}return hr(r);case"updateExternalState":return hr((0,n.zG)(i.persistentState.externalStateMap,o.fS((()=>({}))),Ce.XP));case"updateLAL":return hr(i.locallyLiftedQueriesByEvent["!UpdateLookalikeModels"]||[]);case"updateTPD":return hr([...i.locallyLiftedQueriesByEvent["!UpdateSecondPartyData"]||[],...i.locallyLiftedQueriesByEvent["!UpdateThirdPartyData"]||[]]);default:return hr([])}})))}(e,r)})),_r((t=>{let{event:r,queriesToProcess:i}=t;return(0,n.zG)(i,jt.EQ((()=>hr(jt.bM())),(t=>(0,n.zG)(lr((t=>"bootstrap"!==e?t.effects:{...t.effects,getCurrentTime:()=>r.time,getCurrentView:()=>r.view_id,getCurrentSession:()=>r.session_id})),_r((e=>(0,n.zG)(lr((e=>(0,n.zG)(t,jt.DZ((t=>(0,n.zG)(Ce.P5(t,e.queries.runtime.locallyLiftedQueries),o.wp((()=>Ce.P5(t,e.cloudLiftQueriesForReplay))),o.UI((e=>(0,n.bc)(t,e))))))))),_r((t=>Jr(j.t$((0,n.bc)(t,r)),e))))))))))})))}const Jr=(e,t)=>(0,n.zG)(e,j.EQ((e=>{let[r,i]=e;return(0,n.zG)(r,qr((e=>{let[r,n]=e;return Zr(r,j.t$([n,i]),t)})))}),qr((e=>{let[t,r,n]=e;return Zr(t,j.F2([r,n]))}))),mr(Mr.sequenceArray),kr(o.fw(Gr)((e=>{let[,t]=e;return fr((0,g.rO)({persistentState:(0,g.rO)({internalStateMap:e=>({...e,...t})})}))}))),mr(jt.Yo)),Zr=(e,t,r)=>(0,n.zG)(lr(j.it((i=>{const a=r??i.effects,c=(0,n.zG)(t,j.EQ(s.li,s.li)),[u,f]=(0,n.zG)(t,j.aD((e=>{let[t,r]=e;return(0,n.bc)(t.lift(r,a),sn({null:null,encode:n.yR,decode:j.of,append:t.append}))}),(e=>{let[,t]=e;return(0,n.bc)(t,sn(on()))}))),l=(0,n.zG)(i.persistentState.externalStateMap,o.tS(Ce.P5(e))),d=i.persistentState.internalStateMap[e]||{checksum:i.queries.metadata[e]},p=f(e,a,c,d,l,u),g=Boolean(p.result?.result)!==Boolean(i.persistentState.internalStateMap[e]?.result?.result),m=(0,n.zG)(jt.lo(g),jt.UI((()=>({name:p.result?.result?"SegmentEntry":"SegmentExit",time:a.getCurrentTime(),view_id:a.getCurrentView(),session_id:a.getCurrentSession(),properties:{...i.pageviewProperties,segment_number:Number(e)}}))));return(0,n.bc)(p,m)}),(t=>`Failed to interpret query ${e}. Got ${t}`))),_r(j.EQ((e=>hr([[e],Ce.cS,jt.cS])),(t=>{let[r,i]=t;return(0,n.zG)(r.dropExternalState?en(e):hr(void 0),mr((()=>[jt.cS,{[e]:r},i])))})))),en=e=>fr((0,g.rO)({persistentState:(0,g.rO)({externalStateMap:o.UI(Ce.EG(e))})}));function tn(e){const t=e=>t=>(0,n.bc)(e,t);return lr((r=>(0,n.zG)(e,jt.pO(ur.aL(((e,t)=>{const r=an(e);return(0,n.zG)(t,jt.zT((e=>an(e)===r)),(e=>{let{init:t,rest:r}=e;return(0,n.bc)(t,r)}),(0,s.pL)(((e,t)=>r=>(0,n.bc)(e,(0,n.zG)(r,jt.Ce(t))))(r,e)))}))),jt.tS((e=>{let[i,a]=e;if(!i)return(0,n.zG)(a,jt.UI(t("event")));const o=(0,n.zG)(a,jt.yW((e=>r.lookalikeTransitionSegmentNumbers.has(e.properties.segment_number))),(e=>e?"lookalikeTransition":"transition"));return(0,n.zG)(a,ur.ut(((e,r)=>(0,n.zG)(e,jt.UI(t("event")),jt.R3((0,n.zG)(r,t(o)))))))})))))}const rn=(0,n.ls)(Ce.hX((e=>Boolean(e.result?.result))),Ce.XP,jt.UI(parseInt)),nn=(0,n.ls)(Kt((e=>e.activations??{})),ar((0,n.zG)(Boolean,(0,Oe.xD)((0,Oe.ff)(Bt)))));function an(e){return("SegmentEntry"===e.name||"SegmentExit"===e.name)&&void 0!==e.properties?.segment_number}const on=()=>({null:{kind:"null",value:null},encode:V,decode:W,append:qe}),sn=e=>(t,r,i,a,s,c)=>{const u={...a.activations},f={...r,setSegmentActivation:(e,r,n)=>{if(n!=t)throw new Error(`QL called setSegmentActivation for query ${n} while interpreting query ${t}`);e in u?u[e].includes(r)||(u[e]=[...u[e],r]):u[e]=[r]}},l=o.ij(a.state),d=o.ij(c),p=(0,n.zG)((0,we.gz)(o.G5)(l,d),o.UI((t=>{let[r,i]=t;const a=(0,n.zG)(e.decode(r),j.fS((()=>e.null))),o=(0,n.zG)(e.decode(i),j.fS((()=>e.null)));try{return j.F2(e.append(a,o))}catch(e){throw(0,cr.w)(`Failed to append lifted event ${JSON.stringify(i)} to internal state ${JSON.stringify(r)}. Got ${e}`)}})),o.Gk((()=>(0,n.zG)(l,o.wp((()=>d)),o.UI(j.t$))))),m=(0,n.zG)(p,o.UI(j.EQ(n.yR,e.encode)),o.tS(o.ij)),{overallState:b,dropExternalState:h}=(0,n.zG)((0,we.gz)(o.G5)(p,s),o.UI((t=>{let[r,i]=t;return(0,n.zG)(o.Uo(e.decode(i)),o.tS((t=>(0,n.zG)(r,j.vx(e.decode),j.fS((()=>e.null)),o.it((r=>e.append(r,t)))))),o.EQ((()=>({overallState:m,dropExternalState:!0})),(t=>({overallState:o.ij(e.encode(t)),dropExternalState:!1}))))})),o.fS((()=>(0,n.zG)(m,o.Gk((()=>s)),(e=>({overallState:e,dropExternalState:!1}))))),(0,g.rO)({overallState:o.WG})),_=i.interpret(b,f);return{checksum:a.checksum,...(0,n.zG)(m,o.aD((()=>({})),(e=>({state:e})))),...!1===_.result?{}:{result:_},...Bt(u)?{}:{activations:u},...!1===h?{}:{dropExternalState:h}}},cn=o.Eh({equals:(e,t)=>e===t});function un(e){let t,r=!1;return()=>(r||(t=e(),r=!0),t)}function fn(e){const t=un((()=>(0,n.zG)(e,Ce.hX((e=>Boolean(e.result?.result))),Ce.UI((()=>!0)),(e=>({"1p":e}))))),r={"3p":{}},i=un((()=>({...t(),...r})));return{getSegments:i,getSegmentsArray:un((()=>ln(i()))),get1PSegments:t,get3PSegments:()=>r}}function ln(e){return Object.keys(e).reduce(((t,r)=>{const n=Object.keys(e[r]),i=[];return n.forEach((t=>{!0===e[r][t]&&i.push(t)})),t[r]=i,t}),{})}const dn=e=>({name:"",properties:{},session_id:e.getCurrentSession(),view_id:e.getCurrentView(),time:e.getCurrentTime()}),pn=(e,t)=>r=>n=>{const i=e.startSpan(t),a=r(n);return i.finish(),a},gn=e=>t=>(0,n.zG)(fr((0,g.rO)({unprocessedPageviewComplete:(0,n.ls)(o.DT((e=>e.viewId===t.environment.viewId)),o.fS((()=>Cr(t.environment))))})),Ir(lr((e=>(0,n.zG)(o.ij(e.persistentState.unprocessedPVC),o.hX((e=>e.view_id!==t.environment.viewId)),o.UI(Rr.k))))),Ur("flushedPvc"),Er("processingResult",(r=>{let{flushedPvc:i}=r;return e({...t,newEvents:(0,n.zG)(i,o.EQ((()=>t.newEvents),(e=>[...t.newEvents,e])))})})),kr((()=>fr((e=>{return{...e,persistentState:{...e.persistentState,unprocessedPVC:(0,Rr.X)((t=new Date,r=e.unprocessedPageviewComplete,{name:"PageviewComplete",time:t,session_id:r.sessionId,view_id:r.viewId,properties:{...r.customProperties,aggregations:(0,n.zG)(r.aggregations,(0,g.rO)({SegmentEntry:Ar,SegmentExit:Ar,CohortEntry:Ar,CohortExit:Ar}))}}))}};var t,r})))),mr((e=>{let{flushedPvc:t,processingResult:r}=e;const i=(0,n.zG)(t,o.UI(Mr.ofOutputEvent));return(0,n.zG)((0,we.gz)(o.G5)(i,r),o.UI(Mr.sequenceNonEmptyArray),o.wp((()=>i)),o.wp((()=>r)))}))),mn=2,bn=e=>t=>{const r=t.migrationVersion??(t.stateIsCompact?1:0);return(0,n.zG)([hn,_n],jt.md(r),jt.EQ((()=>t),(0,n.ls)(jt.OV(e),jt.u4(t,((e,t)=>t(e))),(0,g.rO)({migrationVersion:()=>mn}))))},hn=e=>(0,g.rO)({externalStateMap:o.UI(Ce.jt(((t,r)=>(0,n.zG)(Ce.P5(t,e.locallyLiftedQueries),o.wp((()=>Ce.P5(t,e.cloudLiftedQueries))),o.NG((e=>e.compact(r))))))),internalStateMap:Ce.Su(((t,r)=>{if(null==r?.state)return r;const n=e.locallyLiftedQueries[t]||e.cloudLiftedQueries[t];return{...r,state:n.compact(r.state)}}))}),_n=e=>{const t=new Set(e.queriesByEvent.PageviewEngagement??[]),r=new Set(e.queriesByEvent.PageviewComplete??[]);return(0,g.rO)({internalStateMap:Ce.z7((0,Oe.ff)((e=>t.has(e)&&r.has(e))))})},yn=(e,t)=>Ce.xb(t)?e:(0,n.zG)(e,Ce.z7((e=>!(e in t))));var vn=r(644),wn=r(235);const Sn=()=>e=>((0,n.zG)(e,a.UI((e=>e()))),a.a9({newResults:d.of(jt.cS),pendingEvents:jt.cS})),In=()=>()=>De.of((()=>({}))),Gn=e=>[e,ft.of(e)],zn=s.li,kn=s.Yg,Un=e=>t=>(0,n.zG)(kn(t),(t=>()=>new Promise((r=>{const n=t();n.then(o.G).then(r);const i=(0,p.HJ)((()=>r(o.YP)),e);n.then(i)})))),En="RefEventual",Pn=a.UI(Gn),qn=e=>a.a9(Gn(e)),xn=e=>t=>a.vP((0,n.zG)(t,a.UI(zn),a.UI(e)),(0,n.zG)(t,a.UI(kn),a.UI(ft.UI(e)))),Cn=e=>t=>a.vP((0,n.zG)(a.vP((0,n.zG)(e,a.UI(zn)),(0,n.zG)(t,a.UI(zn))),a.UI((e=>{let[t,r]=e;return r(t)}))),(0,n.zG)(a.vP((0,n.zG)(e,a.UI(kn)),(0,n.zG)(t,a.UI(kn))),a.UI((e=>{let[t,r]=e;return ft.ap(t)(r)})))),On=e=>t=>(0,n.zG)(t.current,Un(e),ft.UI(o.fS((()=>(e=>zn(e.current))(t))))),Dn=a.UI(zn),An=a.UI(kn),Tn={URI:En,map:(e,t)=>xn(t)(e)},Mn={URI:En,map:Tn.map,ap:(e,t)=>Cn(t)(e)},Rn=e=>i.dQ((t=>{let{previousState:r}=t;const[i,c]=(0,n.zG)(e.newEvents,a.En(2,jt.uZ()),(0,vn.H5)(Sn(e.permutiveApi,e.permutiveUrls,(u=e.customQueries.runtime,(0,n.zG)(Object.entries(u.queriesByEvent),jt.hX((e=>{let[,t]=e;return(0,n.zG)(t,jt.G((e=>e in u.cloudLiftedQueries)))})),jt.UI(s.li))))));var u;const f=a.vP({lookalikeModels:e.lookalikeModels,sessionId:e.sessionId,thirdPartyData:(0,n.zG)(e.thirdPartyData,a.UI(o.UI((0,vn.H5)(Ce.UI((e=>{const t={};return e.forEach((e=>t[e]=!0)),t})))))),viewId:e.viewId}),l=(0,n.zG)(a.vP({cloudLiftedState:(0,n.zG)(c,a.UI((e=>e.newResults))),environment:f,externalStateDelta:e.externalStateDelta,newEvents:(0,n.zG)(i,(0,wn.I)(e.metrics,"query_language_began_processing_pageview"))}),a.UI((0,g.rO)({environment:e=>d.of(e)})),a.UI((0,we.Yt)(d.G5))),p=Tr.init(r);const m=In(e.permutiveApi,e.permutiveUrls),b=(0,n.zG)(r?ft.of({processedState:p,stateMigratedThisInitialisation:!1}):(e.metrics.track({name:"sdk_query_state_migrated_workerisation_count_total",labels:{},value:1}),(0,n.zG)(e.migratedStateMaps,ft.UI((e=>{let{internal:t,external:r}=e;return{stateMigratedThisInitialisation:!0,processedState:{externalStateMap:r,internalStateMap:(0,n.zG)(t,o.fS((()=>({}))))}}})))),ft.Hr("environment",(()=>f.current)),ft.ak("process",(t=>{let{environment:r,processedState:i}=t;return(0,n.zG)((a={downloadCloudLiftQueries:m,environment:r,initialState:i,pastEvents:e.priorEvents,queries:e.customQueries},(0,n.zG)(ft.Do,ft.Hr("persistentState",(()=>(0,n.zG)(a.initialState,(0,g.rO)({internalStateMap:Ce.z7(((e,t)=>t.checksum===a.queries.metadata[e]))}),bn(a.queries.runtime)))),ft.Hr("invalidatedLocalQueries",(e=>{let{persistentState:{internalStateMap:t}}=e;return yn(a.queries.runtime.locallyLiftedQueries,t)})),ft.Hr("invalidatedCloudLiftQueries",(e=>{let{persistentState:{internalStateMap:t}}=e;return yn(a.queries.runtime.cloudLiftedQueries,t)})),ft.Hr("hasInvalidatedQueries",(e=>{let{invalidatedCloudLiftQueries:t,invalidatedLocalQueries:r}=e;return!(Ce.xb(t)&&Ce.xb(r))})),ft.ak("eventsForReplay",(e=>{let{hasInvalidatedQueries:t}=e;return t?a.pastEvents:ft.of(jt.bM())})),ft.ak("cloudLiftQueriesForReplay",(0,n.ls)(o.DT((e=>e.eventsForReplay.length>0)),o.UI((e=>Object.keys(e.invalidatedCloudLiftQueries))),o.hX(jt.Od),o.UI((0,n.ls)(a.downloadCloudLiftQueries,De.OV(a.queries.runtime),ft.UI(j.fS((()=>({})))))),o.fS((()=>ft.of({}))))),ft.Hr("queriesForReplay",(e=>{let{cloudLiftQueriesForReplay:t,invalidatedLocalQueries:r}=e;return[...Object.keys(r),...Object.keys(t)]})),ft.UI((e=>{let{cloudLiftQueriesForReplay:t,eventsForReplay:r,invalidatedCloudLiftQueries:i,invalidatedLocalQueries:s,queriesForReplay:c,persistentState:u}=e;return{bootstrapped:!1,cloudLiftQueriesForReplay:t,effects:{getCurrentTime:()=>new Date,getCurrentSession:()=>a.environment.sessionId,getCurrentView:()=>a.environment.viewId,getLookalikeModels:()=>({}),setSegmentActivation:(e,t,r)=>{throw new Error(`setSegmentActivation() called for segment ${r} without being overridden first.`)},...fn(u.internalStateMap)},eventsForReplay:r,invalidatedQueries:[...Object.keys(i),...Object.keys(s)],lal:o.YP,locallyLiftedQueriesByEvent:(0,n.zG)(a.queries.runtime.queriesByEvent,Ce.DZ(o.KQ(jt.hX((e=>e in a.queries.runtime.locallyLiftedQueries))))),lookalikeTransitionSegmentNumbers:(0,n.zG)(a.queries.runtime.queriesByEvent["!UpdateLookalikeModels"]||jt.cS,jt.UI(parseInt),(e=>new Set(e))),pageviewProperties:{},numEventsForReplay:r.length,queries:a.queries,queriesForReplay:c,persistentState:u,tpdEventsToProcess:jt.cS,tpdHashInEffectsObject:o.YP,tpdQueries:o.YP,tpdReady:!1,unprocessedPageviewComplete:Cr({sessionId:a.environment.sessionId,viewId:a.environment.viewId})}})))),e.trace.traceTask("query_language_initialisation_duration"),ft.UI((0,g.bw)((t=>{var r;e.metrics.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"query_language_ready",time_origin:"sdk_init"},performance.now()),e.metrics.trackCounter({name:"sdk_queries_to_replay_count",value:(r=t,0===r.numEventsForReplay?0:r.queriesForReplay.length),labels:{}})}))),ft.UI((t=>{let r=t;const i=(0,n.zG)(e.validationService,o.OV({downloadCloudLiftQueries:m,externalState:t.persistentState.externalStateMap}));return t=>{const[a,s]=(0,n.zG)(t,jr(e.trace))(r);return(0,n.zG)(i,o.OV((0,n.bc)(t,s))),r=s,[a,s.persistentState]}})));var a})),a.fF),h=(0,n.zG)(b,a.UI(o.UI((e=>e.process)))),_=(0,n.zG)(b,a.UI(o.EQ((()=>!1),(e=>e.stateMigratedThisInitialisation))));let y=jt.bM();const v=(0,n.zG)(a.vP({processInput:h,inputIO:(0,n.zG)(l,a.UI(o.G))}),a.UI((0,we.Yt)(o.G5)),a.UI(o.UI((e=>{let{processInput:t,inputIO:r}=e;const i=r(),[a,c]=(0,n.zG)(i,(0,g.rO)({newEvents:jt.UI(s.Yg),cloudLiftedState:jt.UI((e=>e.state))}),(e=>t({...e}))),u=(0,n.zG)(a,o.EQ((()=>({errors:[],events:i.newEvents,internalStateDiff:o.YP})),(e=>{let[t,r,n]=e;return{errors:t,events:i.newEvents.concat(n.map((e=>[(0,g.k$)(),e]))),internalStateDiff:o.G(r)}})));return y=(0,n.zG)(y,jt.R3(u)),{consumeDeltas:()=>{const e=y;return y=jt.cS,e},modelState:c}})))),w=(0,n.zG)(v,a.UI(o.UI((e=>e.modelState)))),S=(0,n.zG)(v,a.UI(o.UI((e=>e.consumeDeltas))),a.UI(o.fS((()=>d.of(jt.bM()))))),I=(0,n.zG)(a.vP(w,c),a.Rp(((e,t)=>{let[r,i]=t;const a=(0,n.zG)(e,o.UI((e=>{let[,t]=e;return(0,n.zG)(r,o.EQ((()=>t),(e=>(0,n.zG)(t,jt.hX((t=>!t(e,i.pendingEvents)))))))})),o.fS((()=>jt.bM())));if(o.pC(r)&&jt.xb(i.pendingEvents))return[Gn(r.value),a];const s=(0,g.b2)(),c=(0,n.zG)(r,o.fS((()=>p)));var u;return[(0,n.zG)((()=>s.promise),(u=c,e=>[u,e])),(0,n.zG)(a,jt.R3(((e,t)=>{const r=jt.xb(t)||(0,n.zG)(i.pendingEvents,jt.yW((e=>!t.includes(e))));return r&&s.resolve(e),r})))]})),a.UI(s.li)),G=(0,n.zG)(S,a.En(3,jt.uZ()),(t=>{let[r,i,s]=t;return{errors:(0,n.zG)(r,a.UI(d.UI(jt.tS((e=>e.errors))))),events:(0,n.zG)(i,a.UI(d.UI(jt.tS((e=>e.events)))),(0,wn.F)(e.metrics,"query_language_processed_pageview")),internalStateDiff:(0,n.zG)(s,a.UI(d.UI((0,n.ls)(jt.DZ((e=>e.internalStateDiff)),o.DT(jt.Od),o.UI((e=>e.reduce(((e,t)=>({...e,...t})))))))))}})),z=(0,n.zG)(I,xn((e=>e.internalStateMap))),k=Dn(z);return{state:Dn(I),value:{...G,stateMigratedThisInitialisation:_,internalStateMap:k,processing:(0,n.zG)(a.vP(v,c),a.UI((e=>{let[t,r]=e;return o.Wi(t)||jt.Od(r.pendingEvents)}))),segments:(0,n.zG)(z,xn(jn)),tpdUsage:(0,n.zG)(a.vP(e.thirdPartyData,k),a.UI((e=>{let[t,r]=e;return(0,n.zG)(t,o.UI((()=>nn(r))))}))),unprocessedPageviewComplete:(0,n.zG)(w,a.UI(o.NG((e=>e.unprocessedPVC))),a.UI(o.UI(Rr.k)))}}})),jn=e=>(0,n.zG)(rn(e),(e=>(0,n.zG)(e,jt.uK((e=>e<1e7)),(t=>{let{left:r,right:n}=t;return{all:e,custom:n,standard:r}}))));var Ln=r(125);const Fn=e=>Gn(j.F2(e)),Qn="RefEventualEither",Nn=e=>a.a9(Fn(e)),Yn=Te.UI(Tn,j.dO),$n=we.ap(Mn,j.G5),Bn=e=>xn(j.F2)(e),Hn=e=>xn(j.fS(e)),Kn={URI:Qn,map:(e,t)=>Yn(t)(e)},Vn={URI:Qn,map:Kn.map,ap:(e,t)=>$n(t)(e)},Wn=we.gM(Vn),Xn=e=>Dn(e.all),Jn=(e,t)=>r=>({all:(0,n.zG)(r,Yn(e)),byAdServer:(0,g.mQ)((0,n.ls)(t,o.UI((e=>(0,n.zG)(r,Yn(e))))))}),Zn=(e,t)=>(0,n.ls)(xn(j.F2),Jn(e,t)),ei=e=>(0,n.zG)(e,xn(j.F2),Jn(n.yR,(e=>o.G(e.filterCohorts)))),ti=e=>({all:(0,n.zG)(e.all,Hn((()=>jt.bM()))),byAdServer:(0,g.mQ)((0,n.ls)(e.byAdServer,o.UI(Hn((()=>jt.bM())))))}),ri=e=>(0,n.zG)(e,ti,Xn),ni={empty:{all:Nn(jt.bM()),byAdServer:(0,g.mQ)((e=>o.YP))},concat:(e,t)=>({all:(0,n.zG)((0,we.gz)(Vn)(e.all,t.all),Yn(jt.xH)),byAdServer:(0,g.mQ)((r=>(0,n.zG)(jt.oA([e.byAdServer(r),t.byAdServer(r)]),ur.c2,o.UI((e=>e.reduce(((e,t)=>(0,n.zG)((0,we.gz)(Vn)(e,t),Yn(jt.xH)))))))))})},ii=new Set(["AdRequest","PageviewEngagement","PrebidAuctions","Reaction","SegmentEntry","SegmentExit","SlotRendered","ThirdPartySegments","VideoEngagement"]),ai=function(){return(0,n.bc)(...arguments)};var oi=r(794);const si=e=>{let{queries:t,...r}=e;const[i,c]=a.Ue("pending");let u=o.G([]);const f=e=>{const t=Math.ceil(Math.random()*e.length);return(0,n.zG)(e,R.ke(t))};(0,n.zG)((()=>new Promise((e=>setTimeout(e,r.processingDelayMs)))),ft.UI((()=>performance.now())),ft.UI((e=>(0,n.zG)(u,o.UI(f),o.hX(R.Od),o.UI(M.ur(oi.n_({events:jt.jG(),externalStateDeltas:jt.jG(),lookalikeModels:oi.Z$(),modelState:oi.Z$(),thirdPartyData:oi.Z$()}))),(0,g.bw)((()=>{u=o.YP})),o.Hr("startTime",(()=>e))))),ft.UI((0,g.bw)(o.EQ((()=>c("skipped")),(()=>c("in_progress"))))),At("historicalEvents",(()=>gt(r.historicalEvents))),At("cloudLiftQueries",(()=>(0,n.zG)(Object.keys(t.runtime.cloudLiftedQueries),jt.aD((()=>ft.of(Ce.cS)),(e=>(0,n.zG)(r.downloadCloudLiftQueries(e),De.OV(t.runtime),ft.UI(j.fS((()=>Ce.cS)))))),gt))),At("expectedSegmentMemberships",Ct((e=>li({events:{historical:e.historicalEvents,new:e.events},externalState:{historical:r.externalState,deltas:e.externalStateDeltas},lookalikeModels:e.lookalikeModels,queries:{cloudLiftQueries:e.cloudLiftQueries,metadata:t.metadata,runtime:t.runtime},thirdPartyData:e.thirdPartyData})))),Dt("report",(e=>{let{expectedSegmentMemberships:r,modelState:i}=e;return function(e){const t=new Set(e.expectedSegmentMemberships);return(0,n.zG)(function(e){const t=function(e){const t=(0,n.zG)(Object.keys(e.runtime.queriesByEvent),jt.Su(((e,t)=>[t,2**e]))),r={},i=Object.fromEntries(t);for(const t in e.runtime.queriesByEvent){const n=e.runtime.queriesByEvent[t];for(const e of n)r[e]?r[e]+=i[t]:r[e]=i[t]}const a={};for(const e in r){const t=r[e];a[t]?a[t].push(e):a[t]=[e]}return(0,n.zG)(Object.entries(a),jt.UI((0,n.ls)((0,s.pL)((e=>Number(e))),(0,s.pL)((e=>(0,n.zG)(t,jt.DZ((0,n.ls)(o.DT((t=>{let[,r]=t;return(e&r)>0})),o.UI(s.li)))))))))}(e),r=new Set(Object.keys(e.runtime.cloudLiftedQueries));if(0===r.size)return(0,n.zG)(t,jt.UI((0,s.pL)((e=>({triggers:e,cloudLifted:!1})))));return(0,n.zG)(t,jt.tS((e=>{let[t,i]=e;const{left:a,right:o}=(0,n.zG)(i,jt.uK((e=>r.has(e))));return[[{triggers:t,cloudLifted:!1},a],[{triggers:t,cloudLifted:!0},o]]})))}(e.queries),jt.UI((0,s.H5)((r=>({actualSegments:(0,n.zG)(r,jt.hX((t=>Boolean(e.modelState.persistentState.internalStateMap[t]?.result?.result)))),expectedSegments:(0,n.zG)(r,jt.hX((e=>t.has(e))))})))))}({expectedSegmentMemberships:r,modelState:i,queries:t})})),qt((e=>{let{startTime:t}=e;return()=>r.metrics.track({name:"sdk_segmentation_validation_duration_seconds",value:(performance.now()-t)/1e3,labels:{}})})),_t((e=>e.report)),_t(ui(r.metrics)),_t((()=>c("finished"))))();return[i,e=>{let[t,r]=e;(0,n.zG)((0,we.gz)(o.g1)(u,t.environment.lookalikeModels,(0,n.zG)(t.environment.thirdPartyData,o.UI(s.Yg))),o.UI((e=>{let[n,i,a]=e;n.push({externalStateDeltas:jt.Yo(t.externalStateDelta),lookalikeModels:i,events:t.newEvents,modelState:r,thirdPartyData:a})})))}]};const ci=new Set(["SegmentEntry","SegmentExit","PageviewEngagement","PageviewComplete","Pageview","LinkClick","SlotViewable","SlotRendered","UpdateLookalikeModels","UpdateSecondPartyData","UpdateThirdPartyData"]),ui=e=>t=>{for(const[r,{expectedSegments:i,actualSegments:a}]of t){if(0===i.length&&0===a.length)continue;const{correct:t,incorrect:o,missing:s}=fi(i,a),c=(0,n.zG)(r.triggers,jt.UI((e=>e.startsWith("!")?e.slice(1):e)),jt.UI((e=>ci.has(e)?e:"misc")),(e=>[...new Set(e)]),jt.UI((e=>(0,n.bc)(`trigger_${e}`,!0))),jt.R3((0,n.bc)("is_cloud_lifted",r.cloudLifted)),(e=>Object.fromEntries(e))),u=(t,r)=>r.length>0&&e.trackCounter({name:t,value:r.length,labels:c});u("sdk_segmentation_validation_correct_count_total",t),u("sdk_segmentation_validation_incorrect_count_total",o),u("sdk_segmentation_validation_missing_count_total",s)}},fi=(e,t)=>{if(0===t.length)return{correct:[],incorrect:[],missing:e};if(0===e.length)return{correct:[],incorrect:t,missing:[]};const r=new Set(t),i=new Set(e),{right:a,left:o}=(0,n.zG)(t,jt.uK((e=>i.has(e))));return{correct:a,incorrect:o,missing:(0,n.zG)(e,jt.hX((e=>!r.has(e))))}};const li=e=>gi(50,(function*(){const t={...e.queries.runtime.locallyLiftedQueries,...e.queries.cloudLiftQueries},r=(0,n.zG)(e.queries.runtime.queriesByEvent,Ce.DZ((0,n.ls)(o.ij,o.UI(jt.UI((e=>(0,n.bc)(e,t[e]))))))),i=(0,n.zG)(e.externalState.historical,o.fS((()=>({}))),Ce.DZ(o.Dj(W)),(t=>(0,n.zG)(e.externalState.deltas,jt.UI(Br(e.queries)),jt.u4(t,Hr))),Ce.UI(V)),a={},s=new pi(e.lookalikeModels,e.thirdPartyData),c=e=>(s.processEvent(e),(0,n.zG)(r[e.name]??[],jt.DZ((t=>{let[r,i]=t;return(0,n.zG)(o.ij(i.lift(e,s.effects)),o.fX((e=>a[r]?(0,n.zG)(e,di(i,a[r])):j.F2(e))),o.UI((e=>(a[r]=e,r))))})))),u=e=>(0,n.zG)((e=>(0,n.zG)(a[e]??null,(r=>e in i?(0,n.zG)(i[e],di(t[e],r),j.fS((()=>r))):r),(r=>t[e].interpret(r,s.effects)),(e=>e.result)))(e),o.DT((t=>t!==s.getSegmentResult(e))),o.UI((t=>({name:t?"SegmentEntry":"SegmentExit",properties:{segment_number:Number(e)},time:s.effects.getCurrentTime(),session_id:s.effects.getCurrentSession(),view_id:s.effects.getCurrentView()})))),f=e=>{if(0==e.length)return;const t=(0,n.zG)(e,jt.tS((0,n.ls)(u,o.UI(c),o.fS((()=>jt.bM())))));f(t)};for(const t of e.events.historical)yield,c(t);(0,n.zG)(Object.keys(t),f);for(const t of e.events.new)switch(yield,t.name){case"SegmentEntry":case"SegmentExit":case"PageviewComplete":break;default:c(t)}return(0,n.zG)(Object.keys(t),f),s.effects.getSegmentsArray()["1p"]})),di=(e,t)=>r=>j.Y3((()=>e.append(t,r)),(e=>`Failed to append lifted state: ${e}`));class pi{segments;segmentsArray=void 0;lastEvent=(()=>o.YP)();effects;constructor(e,t){const r=(0,n.zG)(t,Ce.UI(Ce.hX((e=>!0===e))));this.segments={...r,"1p":{}};const i=(0,n.zG)(this.segments,Ce.UI(Object.keys));this.effects={getLookalikeModels:()=>e,getSegments:()=>this.segments,getSegmentsArray:()=>(this.segmentsArray||(this.segmentsArray={...i,"1p":Object.keys(this.segments["1p"])}),this.segmentsArray),setSegmentActivation:()=>{},getCurrentTime:()=>(0,n.zG)(this.lastEvent,o.EQ((()=>new Date),(e=>e.time))),getCurrentSession:()=>(0,n.zG)(this.lastEvent,o.EQ((()=>""),(e=>e.session_id))),getCurrentView:()=>(0,n.zG)(this.lastEvent,o.EQ((()=>""),(e=>e.view_id)))}}get1pSegments(){return this.effects.getSegmentsArray()["1p"]}getSegmentResult(e){return this.segments["1p"][e]??!1}processEvent(e){if("SegmentEntry"===e.name){const t=e.properties.segment_number;t&&this.processSegmentEntry([t])}else if("SegmentExit"===e.name){const t=e.properties.segment_number;t&&this.processSegmentExit([t])}else if("PageviewComplete"===e.name){const t=e.properties.aggregations;t?.SegmentEntry&&this.processSegmentEntry(t.SegmentEntry),t?.SegmentExit&&this.processSegmentExit(t.SegmentExit)}this.lastEvent=o.G(e)}processSegmentEntry(e){for(const t of e)t in this.segments["1p"]||(this.segments["1p"][t]=!0,this.segmentsArray=void 0)}processSegmentExit(e){for(const t of e)t in this.segments["1p"]&&(delete this.segments["1p"][t],this.segmentsArray=void 0)}}const gi=(e,t)=>async()=>{let r=performance.now();const n=t();for(;;){performance.now()-r>e&&(await new Promise((e=>setTimeout(e))),r=performance.now());const t=n.next();if(t.done)return t.value}},mi=e=>i.dQ((e=>{let{previousState:t}=e;return{value:o.YP,state:a.a9(t)}})),bi=e=>i.dQ((t=>{let{previousState:r}=t;const i=(0,n.zG)(r,o.DT(g.El),o.xH,o.hX(D.HD)),s=(0,n.zG)(i,o.EQ((()=>!1),(t=>t===e.sessionId)));if(!e.metrics.isEnabled()||Math.random()>.1||s)return{value:o.YP,state:a.a9(r)};const[c,u]=a.Ue(a.a9("pending"));return{value:o.G((t=>{let{downloadCloudLiftQueries:r,externalState:n}=t;const[i,a]=si({downloadCloudLiftQueries:r,externalState:n,historicalEvents:e.priorEvents,metrics:e.metrics,processingDelayMs:6e4,queries:e.customQueries});return u(i),a})),state:(0,n.zG)(a.xH(c),a.UI((0,n.ls)(o.DT((e=>"in_progress"===e||"finished"===e)),o.UI((()=>e.sessionId)),o.wp((()=>i)))))}})),hi=e=>(0,n.zG)(i.K4((t=>{let{stopped:r}=t;const[i,s]=a.Ue(a.a9(d.of(o.YP)));let c;const u=new Promise((e=>{c=e}));return{priorEvents:()=>u.then((e=>e())),externalStateDelta:a.xH(i),newEvents:(0,n.zG)(a.vP(e.newEvents,r),a.UI((e=>{let[t,r]=e;return r?()=>[]:t}))),setCachedPriorEvents:c,setExternalStateDelta:s}})),i.ak("segmentationValidation",(t=>{let{priorEvents:r}=t;return(0,n.zG)(e.eventsCache,j.EQ((()=>mi),(()=>bi)),(t=>t({...e,sessionId:e.sessionId.current,priorEvents:r})))})),i.ak("segmentationService",(t=>{let{newEvents:r,priorEvents:o,externalStateDelta:s,segmentationValidation:c}=t;return(0,n.zG)(Rn({...e,externalStateDelta:s,newEvents:r,priorEvents:o,validationService:c}),i.bw((t=>(0,n.zG)(t.errors,a.UI((t=>(0,n.zG)(t(),jt.UI((t=>e.reportError(`Query Language: ${t}`,{userId:e.groupId}))))))))))})),i.UI((t=>(0,n.zG)(t.segmentationService.events,a.En(4,jt.uZ()),(r=>{let[i,c,u,f]=r;return{...t,newEvents:i,realtime:(0,n.zG)(c,a.Rp(!1,((e,t)=>{const r=t();return e||r.some((e=>{let[,t]=e;return"Pageview"===t.name}))})),(e=>a.vP(e,t.segmentationService.processing)),a.UI((e=>{let[t,r]=e;return t&&!r})),a.u4(((e,t)=>e||t))),currentPageviewSegments:(l={processedEvents:(0,n.zG)(u,a.UI(d.UI(jt.UI(s.Yg)))),segments:t.segmentationService.segments,viewId:e.viewId},(0,n.zG)(a.vP(l.processedEvents,l.viewId,l.segments),a.Rp({pageviewProcessed:!1,resolvePageviewSegments:e=>{},segments:Gn({all:[],custom:[],standard:[]}),viewId:""},((e,t)=>{let[r,i,a]=t;const s=r();return(0,n.zG)(e,o.DT((e=>e.viewId===i)),o.EQ((()=>{if((0,n.zG)(s,jt.G((e=>"Pageview"===e.name&&e.view_id===i))))return{pageviewProcessed:!0,resolvePageviewSegments:()=>{},segments:a,viewId:i};{const e=(0,g.b2)();return{pageviewProcessed:!1,resolvePageviewSegments:t=>e.resolve(kn(t)()),segments:ai(zn(a),(()=>e.promise)),viewId:i}}}),(e=>e.pageviewProcessed?{...e,segments:a}:(0,n.zG)(s,jt.G((e=>"Pageview"===e.name&&e.view_id===i)))?(e.resolvePageviewSegments(a),{pageviewProcessed:!0,resolvePageviewSegments:()=>{},segments:a,viewId:i}):{...e,segments:a})))})),a.UI((e=>e.segments)))),lastProcessedEvents:(0,n.zG)(f,a.UI(d.UI(jt.UI(s.Yg))))};var l})))),i.Hr("cohorts",(t=>{let{segmentationService:r}=t;return(0,n.zG)(a.fF(e.nonQlCohorts),a.UI(o.UI((e=>(0,n.zG)(r.segments,xn((e=>e.all)),xn(jt.UI(String)),ei,(t=>({query_language:t,...e})))))))})),i.ak("stateSync",(t=>{let{segmentationService:r,lastProcessedEvents:n}=t;return Ft({eventSourceId:e.eventSourceId,groupId:e.groupId,groupIdIsNewlyGenerated:e.groupIdIsNewlyGenerated,internalStateDiff:r.internalStateDiff,internalStateMap:r.internalStateMap,lastProcessedEvents:n,logger:e.logger,permutiveApi:e.permutiveApi,permutiveUrls:e.permutiveUrls,queryLanguageProcessing:r.processing,reportError:e.reportError,sessionId:e.sessionId,viewId:e.viewId})})),i.bw((e=>{let{stateSync:t,setExternalStateDelta:r}=e;return r(t.externalStateDelta)})),i.ak("segmentTransitions",(t=>{let{segmentationService:r}=t;return(e=>(0,n.zG)(i.vP({currentSegmentsSet:i.K4((()=>(0,n.zG)(e.segments,a.UI(u))))}),i.ak("transitionsSinceInit",(e=>{let{currentSegmentsSet:t}=e;return i.of(c(t))})),i.UI((e=>{let{currentSegmentsSet:t,...r}=e;return r}))))({segments:(0,n.zG)(Dn(r.segments),a.UI((e=>e.all))),viewId:e.viewId})})),i.Hr("cohortsRef",(e=>{let{cohorts:t}=e;return(0,n.zG)(t,a.VS(o.EQ((()=>a.a9(jt.bM())),(0,n.ls)((e=>Object.values(e)),jt.UI((0,n.ls)(ti,(e=>e.all),Dn,a.D8(jt.Eh(D.Eq)))),jt.vP(a.g1),a.UI(jt.xH)))))})),i.Hr("createTrackRequest",(t=>{let{cohortsRef:r,segmentationService:i}=t;return(0,n.zG)(a.vP({cohorts:(0,n.zG)(r,a.UI(o.G)),qlSegments:(0,n.zG)(Dn(i.segments),a.UI(o.G)),webClient:e.webClient}),a.UI((0,we.Yt)(o.G5)),a.UI(o.UI((t=>{let{cohorts:r,qlSegments:n,webClient:i}=t;return t=>({...t,segments:n.all,user_id:e.groupId,cohorts:r,properties:{...t.properties,client:{...i,...t.properties.client??{}}}})}))))})),i.Hr("eventsToPublishOnPageUnload",(t=>e.trackPageviewComplete?(0,n.zG)(t.segmentationService.unprocessedPageviewComplete,a.UI(jt.pc(o.UI((e=>(0,n.bc)(`PageviewComplete-${e.view_id}`,e))))),(e=>a.vP(t.createTrackRequest,e)),a.UI((e=>{let[t,r]=e;return(0,n.zG)(t,o.EQ((()=>jt.cS),(e=>(0,n.zG)(r,jt.UI((0,s.H5)(e))))))}))):a.a9(jt.cS))),i.ak("eventCache",(t=>{let{newEvents:r,setCachedPriorEvents:o}=t;return(0,n.zG)(e.eventsCache,j.EQ((e=>(o(e),i.of({newEvents:r}))),(e=>(0,n.zG)((e=>i.K4((()=>({newEvents:(0,n.zG)(e.newEvents,a.UI(d.UI((0,g.bw)(jt.UI((t=>{let[,r]=t;ii.has(r.name)||e.eventsCache.add(r,{persistOnDisk:!0})})))))),priorEvents:()=>e.eventsCache.all()}))))({eventsCache:e,newEvents:r}),i.UI((e=>{let{newEvents:t,priorEvents:r}=e;return o(r),{newEvents:t}}))))))})),i.UI((e=>({...e,newEvents:e.eventCache.newEvents}))),i.Hr("eventsToPublish",(t=>{let{cohorts:r,newEvents:i,segmentationService:c}=t;return(0,n.zG)(a.vP(i,e.webClient,c.segments,(0,n.zG)(r,a.UI(o.UI((0,n.ls)((e=>Object.values(e)),jt.UI(ti),jt.UI((e=>e.all)))))),(0,n.zG)(e.viewId,a.Rp(new Set,((e,t)=>new Set([...e,t]))))),a.UI((t=>{let[r,i,a,c,u]=t;return(0,n.zG)(o.Do,o.Qt("webClient",i),o.Qt("cohorts",c),o.ak("events",(()=>(0,n.zG)(r(),jt.hX((e=>{let[,t]=e;return"PageviewComplete"!==t.name||u.has(t.view_id)})),o.DT(jt.Od)))),dt,At("segments",(()=>(0,n.zG)(kn(a),gt))),Ot((e=>(0,n.zG)(e.cohorts,ft.uU(On(1e3)),ft.UI(jt.xH),ft.UI((t=>({...e,cohorts:t})))))),_t((t=>{let{cohorts:r,events:i,segments:a,webClient:o}=t;return(0,n.zG)(i,jt.UI((0,s.H5)((t=>({...t,segments:a.all,user_id:e.groupId,cohorts:r,properties:{...t.properties,client:{...o,...t.properties.client??{}}}})))))})),ft.UI(o.fS((()=>jt.bM()))))})),(e=>{const[t,r]=a.gS(jt.uZ());return(0,n.zG)(e,a.UI((e=>e().then(r)))),t}))})));var _i=r(869);function yi(e){return t=>(0,n.zG)(a.oQ(e),a.UI((0,g.rO)({backoffAfterErrorMs:e=>e??0,backoffAfterSuccessMs:e=>e??0})),(e=>i.dQ((r=>{let{previousState:i}=r;const[s,c]=a.Ue(function(e){if("object"!=typeof e||null===e)return{lastSuccess:0,lastError:0};return e}(i)),u=(0,n.zG)(a.vP(s,e),a.UI((e=>{let[t,r]=e;return Math.max(t.lastError+r.backoffAfterErrorMs,t.lastSuccess+r.backoffAfterSuccessMs)})));return{state:s,value:(0,n.ls)(o.DT((()=>Date.now()>=u.current)),o.UI(t),o.UI((0,g.bw)((e=>e.then((()=>c({...s.current,lastSuccess:Date.now()})),(()=>c({...s.current,lastError:Date.now()})))))))}}))))}const vi=function(e,t){return i.of(o.YP)};var wi=r(230);const Si=function(e,t){return(0,n.zG)(Ii(e),yi({backoffAfterErrorMs:6e5}),i.VS((e=>wi.m((0,n.zG)(t,a.UI((0,g.rO)({tpdUsage:o.UI((0,n.ls)(Ce.UI(Ce.z7((e=>[].includes(e)))),Ce.hX((0,Oe.ff)(Ce.xb))))})),a.UI((t=>{let{tpdUsage:r,userId:i}=t;return{validityKey:()=>i,freshnessKey:(0,n.ls)((()=>r),o.EQ((()=>0),(0,n.ls)(JSON.stringify,g.vp))),refresh:(0,n.zG)(r,o.hX((e=>Object.keys(e).length>0)),o.UI((t=>()=>De.Y3((()=>(0,n.zG)(e({user_id:i,time:new Date,tpd_segments:t}),o.fS((()=>Promise.reject("Blocked by backoff."))))),(e=>`Failed to report TPD usage. Got ${e}`)))))}})))))),i.UI(n.Q1))};const Ii=e=>t=>{const{config:r,metrics:n,permutiveApi:i,permutiveUrls:a}=e,s=n.startTimer("sdk_http_tpd_usage_seconds",{});return i.req({url:a.getEndpointUrl("/tpd/usage",o.G(r.apiVersion)),method:"POST",payload:t,contentType:"text/plain",dataType:"json",withCredentials:!1}).then((e=>(n.stopTimer("sdk_http_tpd_usage_seconds",s),e)))};var Gi=function(e){return function(t){return function(r){return e(t(r))}}},zi=n.a9;Be.F4,Be.Xl;function ki(e){return function(t){return function(){return e.of(t)}}}function Ui(e){return function(t){return function(r){return function(n){return e.map(r(n),t)}}}}function Ei(e){return function(t){return function(r){return function(n){return e.ap(r(n),t(n))}}}}function Pi(e){return function(t){return function(r){return function(n){return e.chain(r(n),(function(e){return t(e)(n)}))}}}}function qi(e){return function(t){return(0,n.ls)(t,e.of)}}ft.PM;var xi=zi,Ci=(ft.tD,Gi(ft.tD),function(e,t){return(0,n.zG)(e,Oi(t))}),Oi=Ui(ft.dO),Di=(ft.Hi,ki(ft.PM)),Ai=(ft.UA,"ReaderTask"),Ti={URI:Ai,map:Ci},Mi={URI:Ai,of:Di};Be.F4,Be.Xl;var Ri=zi,ji=Ln.F2(Mi),Li=(De.QM,De.lk,De.dk,De.Op,De.fj,Ln.UI(Ti)),Fi=ji;Be.F4,Be.Xl;function Qi(e,t){const r=["amp","gigya","pxid","sailthru"],s=(0,n.zG)(t.identities,a.UI(o.UI(Ce.z7((e=>!r.includes(e)))))),c=e=>(0,g.vp)(JSON.stringify(e)),u=e=>[c(e),e];return(0,n.zG)(i.vP({fetchFromNewEndpoint:(0,n.zG)(Ni(e),yi({backoffAfterErrorMs:6e5})),fetchFromLegacyEndpoint:(0,n.zG)(Yi(e),yi({backoffAfterErrorMs:6e5}))}),i.VS((r=>{let{fetchFromNewEndpoint:c,fetchFromLegacyEndpoint:f}=r;return(0,n.zG)(wi.m((0,n.zG)(a.vP(t.userId,t.sessionId,s),a.UI((t=>{let[r,i,a]=t;return{validityKey:()=>r,freshnessKey:()=>`${$i(a)},${i}`,refresh:(0,n.zG)(a,o.UI((t=>()=>Ce.xb(t)?De.of({}):De.Y3((()=>(0,n.zG)((t=>(0,n.zG)(c(t),o.UI((e=>e.catch((()=>(0,n.zG)(f(t.identities),o.fS((()=>e))))))),o.wp((()=>f(t.identities))),o.UI((0,g.bw)((t=>{const r=e.metrics.startTimer("sdk_get_third_party_data_task_duration_seconds",{});t.catch(n.Q1).then((()=>{e.metrics.stopTimer("sdk_get_third_party_data_task_duration_seconds",r)}))})))))({userId:r,identities:t}),o.fS((()=>Promise.reject("Blocked by persistent backoff"))))),(e=>`Error fetching TPD. Got ${e}`)))),o.UI(Li(u)))}})))),wi.d((e=>o.G((e=>Array.isArray(e)?e:u(e))(e)))),i.UI(a.UI(j.fS((t=>(e.logger.warn("[TPD]",`Failed to retrieve usable value, using zero value. ${t}`),o.G(u({}))))))),i.bw((0,n.ls)(a.UI(o.pC),a.UI((t=>{t&&e.metrics.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"audience_matching_ready",time_origin:"sdk_init"})})))))})))}const Ni=e=>async t=>{const r=e.metrics.startTimer("sdk_http_audience_matching_seconds",{}),i=await e.permutiveApi.req({url:e.permutiveUrls.getAudienceMatchingEndpointUrl("/id",o.G("v1"),t.userId),payload:{identities:(0,n.zG)(t.identities,Ce.Yz,jt.UI((e=>{let[t,r]=e;return{tag:t,id:r}})))},method:"POST",withCredentials:!1,dataType:"json"});return e.metrics.stopTimer("sdk_http_audience_matching_seconds",r),i.items},Yi=e=>async t=>{const r=e.metrics.startTimer("sdk_http_tpd_seconds",{}),n=await e.permutiveApi.req({url:e.permutiveUrls.getEndpointUrl("/tpd",o.G(e.config.apiVersion)),method:"POST",payload:{user_id:t},contentType:"text/plain",dataType:"json",withCredentials:!1});return e.metrics.stopTimer("sdk_http_tpd_seconds",r),n},$i=(0,n.ls)(JSON.stringify,g.vp);const Bi=(e,t)=>(0,n.zG)(i.vP({data:Qi(e,{identities:t.identities,sessionId:t.sessionId,userId:t.userId}),usageReporting:Si(e,a.vP({tpdUsage:t.tpdUsage,userId:t.userId}))}),i.ak("analytics",(e=>{let{data:r}=e;return function(e){return i.dQ((t=>{let{previousState:r}=t;const[i,s]=a.gS(jt.uZ());var c;return{state:(0,n.zG)(a.vP(e.userId,e.providerSegments,e.sessionId,e.viewId),a.D8(((e,t)=>{let[r,n]=e,[i,a]=t;return r===i&&n===a})),a.Rp(null!==(c=r)&&"object"==typeof c?c:{userId:"",providerHashes:{}},((e,t)=>{let[r,i,a,c]=t;const u=(0,n.zG)(i,o.fS((()=>({})))),f=(0,n.zG)(u,Ce.UI((0,g.SL)(g.vp))),l=(0,n.zG)(e,o.DT((e=>e.userId===r)),o.UI((e=>e.providerHashes)),o.fS((()=>({}))));return(0,n.zG)(u,Ce.z7((e=>f[e]!==(l[e]||0))),(e=>Object.entries(e)),jt.UI((e=>{let[t,r]=e;return(0,n.bc)((0,g.k$)(),{name:"ThirdPartySegments",properties:{data_provider:t,segments:[...r]},session_id:a,time:new Date,view_id:c})})),s),{userId:r,providerHashes:f}}))),value:i}}))}({providerSegments:(0,n.zG)(r,a.UI(o.UI(vn.Yg))),sessionId:t.sessionId,userId:t.userId,viewId:t.viewId})})),i.UI((e=>{let{data:t,analytics:r}=e;return{data:t,analyticsEvents:r}}))),Hi=function(e){const t={include_geo:!0,include_isp:!0,include_ip_hash:!0,include_ip:!1},r=e.trace.startSpan("geoip_data_retrieval");return(0,n.zG)(wi.m((0,n.zG)(e.sessionId,a.UI((r=>({validityKey:()=>(0,g.vp)(JSON.stringify(t)),freshnessKey:()=>r,refresh:o.G((()=>De.Y3((()=>Ki(e.permutiveApi,e.metrics,e.config,t,e.permutiveUrls)),(e=>`Error fetching geoip. Got ${e}`))))}))))),i.UI(a.UI(j.fS((t=>(e.logger.warn("[geoip]",`Failed to retrieve usable value, using zero value. ${t}`),o.G({})))))),i.bw((0,n.ls)(a.UI(o.pC),a.UI((t=>{t&&(e.metrics.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"geoip_data_ready",time_origin:"sdk_init"},performance.now()),r.finish())})))))};const Ki=(e,t,r,n,i)=>{const a=[];n.include_geo&&a.push(["include","geo"]),n.include_isp&&a.push(["include","isp"]),n.include_ip&&a.push(["include","ip"]),n.include_ip_hash&&a.push(["include","ip_hash"]);const s=t.startTimer("sdk_http_geoip_seconds",{});return e.req({url:i.getEndpointUrl("/geoip",o.G(r.apiVersion),a),method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!1}).then((e=>(t.stopTimer("sdk_http_geoip_seconds",s),e)))},Vi=e=>t=>{const r=n=>{const i={...n};for(let a in n){const o=n[a];t.hasOwnProperty(o)?e?.dropUnenriched&&void 0===t[o]?delete i[a]:i[a]=t[o]:null!==o&&"object"==typeof o&&o.constructor===Object&&(i[a]=r(o))}return i};return r};var Wi=r(240),Xi=r(50);const Ji=function(e,t,r,n,s){return i.of({cohorts:o.YP,externalData:{[Zi]:a.a9(o.YP)}})};const Zi="_pssps",ea=(e,t)=>(0,n.zG)(Ji(e.permutiveApi,e.permutiveUrls,e.reportError,e.logger,t),i.UI((e=>{let{cohorts:t,externalData:r}=e;return{ssp:t,externalData:r}}))),ta="_pssps",ra=(e,t)=>({ssp:o.uZ(ni).concat(e.ssp,t.ssp),externalData:{[ta]:(0,n.zG)(a.vP(e.externalData._pssps,t.externalData._pssps),a.UI((e=>{let[t,r]=e;return o.uZ(na).concat(t,r)})))}}),na={concat:(e,t)=>({cohorts:e.cohorts.concat(t.cohorts),ssps:Array.from(new Set(e.ssps.concat(t.ssps)))})};function ia(e){return e.includes("cur")?e:["cur",...e]}const aa=(e,t)=>i.K4((()=>{return e.logger.log("[curation]: running curation service",t.activationConfigs,["pubmatic","appnexus","ix","openx"]),(0,n.zG)(t.cohorts,Yn((r=e.logger,e=>t=>{const i=(0,n.zG)(t,jt.tS((t=>(0,n.zG)(e[t],o.ij,o.fS((()=>jt.bM()))))),ia);return r.log("[curation]: resolved curated cohorts",i),i})(t.activationConfigs)),Jn((e=>e),(e=>(e.id,o.YP))),(e=>({ssp:o.G(e),externalData:{[ta]:(0,n.zG)(e,ri,a.UI((e=>o.G({ssps:["pubmatic","appnexus","ix","openx"],cohorts:e}))))}})));var r})),oa=(e,t)=>aa(e,t),sa=e=>{const t=(0,n.zG)(e?.dfp??[],jt.UI(String),(e=>new Set(e)));return{id:"dfp",filterCohorts:jt.hX((e=>t.has(e)))}};(0,Xi.Hn)("appnexus_adserver")("auto_init",!1);const ca=e=>{if(!e.metrics.isEnabled())return()=>{};const t=(0,n.zG)(e.adServers,jt.UI((e=>(0,n.bc)(e.id,e))),Ce.sq,Ce.UI((t=>{const r=(0,n.zG)(e.cohorts,Ce.DZ((e=>e.byAdServer(t))),(e=>a.vP(e)),a.UI(Ce.UI((i=5e3,s="Timeout",e=>(0,n.zG)(e,Un(i),ft.UI(o.pF((()=>j.t$(s)))))))),a.UI((0,we.Yt)(ft.Hi)),a.UI(ft.UI((0,n.ls)(Ce.oh,Me.Vn(Ce.Su(((t,r)=>{e.logger.warn("[Targeting Metrics]",`[${t}]`,r)}))),Me.F2))),(e=>()=>e.current));var i,s;return(0,n.ls)(jt.of,jt.UI((e=>e.cohorts)),fa,jt.UI((e=>{let[t,r]=e;return{allCohorts:new Set(t),cohortCountByType:ua(t),requestCount:r}})),(i=>(0,n.zG)(r(),ft.UI(Ce.Su(((t,r)=>(i,a)=>{(0,n.zG)(r,jt.Hr("actualCohortCount",(e=>{let{cohortCountByType:t}=e;return(0,n.zG)(t,Ce.P5(i))})),jt.UI((r=>{const s={cohort_type:i,target:t},c=a.reduce(((e,t)=>r.allCohorts.has(t)?e+1:e),0),u=a.length-c;e.metrics.track({name:"sdk_ad_request_missed_cohorts",labels:s,value:r.requestCount*u}),e.metrics.track({name:"sdk_ad_request_successful_cohorts",labels:s,value:r.requestCount*c}),(0,n.zG)(r.actualCohortCount,o.UI((t=>{const n=t-c;e.metrics.track({name:"sdk_ad_request_superfluous_cohorts",labels:s,value:r.requestCount*n})})))})))})(t.id,i))))),(e=>e()))})));return e=>{if("AdRequest"===e.name)(r=e.properties).ad_server_id in t&&t[r.ad_server_id](r);var r}},ua=e=>({ql:(0,n.zG)(e,jt.u4(0,((e,t)=>isNaN(parseInt(t))?e:e+1)))}),fa=e=>(0,n.zG)(e,jt.pO((e=>{const{init:t,rest:r}=(0,n.zG)(e,jt.zT((t=>t===e[0])));return[t,r]})),jt.UI((e=>[e[0],e.length]))),la=e=>o.YP;const da=B.n_({cohorts:jt.Eh((0,g.Or)()),ctx:(0,g.Or)()}),pa=jt.cS;Promise.resolve(j.F2(pa)),B.n_({userId:(0,g.Or)(),lastSuccess:{equals:(e,t)=>e&&t&&da.equals(e,t)||e===t}});function ga(e,t){return Object.keys(t).reduce(((r,n)=>void 0!==e[n]?{...r,[n]:t[n]+e[n]}:{...r,[n]:t[n]}),e)}function ma(e,t){return(0,n.zG)(ya(e),((e,t)=>r=>(0,n.zG)((e=>r(e)().then((e=>j.nM(e)?Promise.reject(e.left):e.right))),yi(e),i.UI((e=>r=>()=>(0,n.zG)(r,e,o.EQ((()=>Promise.resolve(j.t$(t))),(e=>e.then(j.F2,j.t$))))))))({backoffAfterErrorMs:6e5},"Advertiser segmentation request blocked by rate limiting."),i.VS((r=>i.dQ((i=>{let{previousState:s}=i;return e.logger.debug("[advertiser] previous state:",s),(0,n.zG)(t,a.Rp(a.a9(ha(e)(s)),_a(e)(r)),a.xH,a.bw((t=>e.logger.debug("[advertiser] updated state:",t))),(e=>({state:(0,n.zG)(e,a.UI((e=>{let{userId:t,lastSuccess:r}=e;return{userId:t,lastSuccess:o.FS(r)}})),a.D8(Ea)),value:(0,n.zG)(e,a.UI((e=>{let{eventual:t}=e;return t})))})))})))))}const ba=e=>t=>(0,n.zG)(t,xn(function(e){return t=>(0,n.zG)(t.cohorts,R.hX((r=>(0,n.zG)(r.groups,R.yW((i=>(0,n.zG)(o.ij(t.groups[i]),j.Yo((()=>`cohort [${r.code}] is missing group [${i}]`)),j.Vn((t=>e.error(`[advertiser] ${t}`))),j.UI((e=>e>0)),j.fS((()=>!0)))))))),R.UI((e=>{let{code:t}=e;return t})))}(e)),Zn((e=>e),(e=>"dfp"===e.id?o.G((e=>e)):o.YP)),o.G),ha=e=>t=>(0,n.zG)(t,o.DT(Pa),o.fS((()=>qa())),(e=>j.Y3((()=>({userId:e.userId,inFlight:!1,lastSuccess:o.ij(e.lastSuccess),view:ka(),ctx:(0,n.zG)(o.ij(e.lastSuccess),o.UI((e=>{let[t]=e;return t}))),eventual:xa()})),(e=>`failed to parse existing persistent state: ${e}`))),j.fS((t=>(e.logger.error("[advertiser]",t),za(""))))),_a=e=>t=>(r,i)=>(0,n.zG)(r,a.VS((0,n.ls)(o.DT((e=>{let{userId:t}=e;return t===i.userId})),o.fS((()=>za(i.userId))),(r=>{if(Ua(r)===i.viewId)return e.logger.debug("[advertiser] view id is the same as previous, returning existing state",r),a.a9(r);if(r.inFlight)return e.logger.debug("[advertiser] in flight request",r),a.a9(r);{let s;e.logger.debug("[advertiser] fetching cohorts for view",r);const c=new Promise((e=>{s=e})),u=()=>c;return(0,n.zG)((0,we.gz)(ft.Hi)(i.customCohorts,i.standardCohorts),ft.tS((e=>{let[n,a]=e;return t([i.userId,o.FS(r.ctx),n,a])})),De.YO("response"),De.ak("cohorts",(t=>{let{response:r}=t;return(0,n.zG)(r.c,Sa,(0,g.bw)(j.EQ((t=>{e.logger.error(`[advertiser] failed to decode data from response. ${t}`)}),(t=>{e.logger.debug("[advertiser] decoded data from response",t)}))),ft.of)})),De.Hr("view",(e=>{let{response:t,cohorts:r}=e;return(0,n.bc)(t.ctx,r)})),a.fF,a.UI((0,n.ls)(o.EQ((function(){return{...r,inFlight:!0,eventual:(0,n.bc)((0,n.zG)(r.lastSuccess,o.UI((e=>{let[t,r]=e;return r})),o.fS((()=>Ga()))),u)}}),j.EQ((function(t){e.logger.error(`[advertiser] ${t}`);const a=(0,n.zG)(r.lastSuccess,o.UI((e=>{let[t,r]=e;return r})),o.fS((()=>Ga())));return s(a),{userId:i.userId,lastSuccess:r.lastSuccess,ctx:r.ctx,view:(0,n.bc)(i.viewId,o.YP),inFlight:!1,eventual:[a,u]}}),(function(e){let{response:t,view:r}=e;const[,a]=r;return s(a),(0,n.zG)({userId:i.userId,lastSuccess:o.G(r),view:(0,n.bc)(i.viewId,o.G(a)),ctx:o.G(t.ctx),inFlight:!1,eventual:(0,n.bc)(a,u)})}))))))}})))),ya=e=>De.it((t=>e.permutiveApi.req({url:e.permutiveUrls.getAdvertiserEndpointUrl("/segment",o.G("v4")),method:"POST",payload:va(t),contentType:"text/plain",dataType:"json",withCredentials:!1})),(e=>`Failed to fetch advertiser cohorts: ${e}`)),va=e=>JSON.stringify(e),wa=e=>{const t=(0,n.zG)(e,R.YM,j.Yo((()=>"Expected a value, found empty array")),j.tS((e=>"string"==typeof e?j.F2(e):j.t$("Expected a cohort code, found "+typeof e)))),r=(0,n.zG)(e,R.Gb,o.fS((()=>[])),j.DT(Array.isArray,(()=>"Expected an array of groups [integer], found "+typeof e[1])));return(0,n.zG)(t,j.tS((e=>(0,n.zG)(r,j.UI((t=>({code:e,groups:t})))))))};function Sa(e){const[t,r]=e;return(0,n.zG)(t,R.fw(j.g1)(wa),j.UI((e=>({cohorts:e,groups:r}))))}const Ia=B.n_({cohorts:R.Eh(B.n_({code:D.Eq,groups:R.Eh(H.Eq)})),groups:R.Eh(H.Eq)}),Ga=()=>({cohorts:[],groups:[]}),za=e=>({inFlight:!1,userId:e,lastSuccess:o.YP,view:ka(),ctx:o.YP,eventual:xa()}),ka=()=>["",o.YP],Ua=e=>e.view[0],Ea=B.n_({userId:(0,g.Or)(),lastSuccess:{equals:(e,t)=>e===t||!!e&&!!t&&B.bc(D.Eq,Ia).equals(e,t)}}),Pa=e=>"object"==typeof e&&null!==e&&"userId"in e&&"lastSuccess"in e&&(void 0===e.lastSuccess||Array.isArray(e.lastSuccess)&&2===e.lastSuccess.length&&"string"==typeof e.lastSuccess[0]&&null!==e.lastSuccess[1]&&"object"==typeof e.lastSuccess[1]),qa=()=>({userId:""}),xa=()=>(0,n.bc)(Ga(),(()=>Promise.resolve(Ga()))),Ca=(e,t)=>{const r=(0,n.zG)(t,o.UI((e=>e.all)),o.fS((()=>Nn(jt.cS))),Dn,a.UI(o.Uo));return{_pcrdbs:a.a9(o.YP),_pcrprs:r}},Oa=function(e,t){return(0,n.zG)(t,i.KD([[e=>!e.consent,i.K4((()=>qn(Ga())))],ma(e,t)]),i.UI((0,n.ls)(a.xH,(r=>(0,we.gz)(Mn)(r,Pn((0,n.zG)(t,a.UI((e=>{let{events:t}=e;return t})),(t=>{return(r=e.logger,e=>t=>(0,n.zG)(t,a.UI((t=>(0,n.zG)(j.Y3((()=>{const i=t().filter((t=>{let[,r]=t;return"SlotViewable"===r.name&&(0,n.zG)(o.ij(r.properties.line_item_id),o.UI((e=>e.toString())),o.UI((t=>e.has(t))),o.fS((()=>!1)))})).map((e=>{let[t,r]=e;return r.properties.line_item_id.toString()}));return i.forEach((e=>t=>e.debug("[advertiser] impression event for deal_id:",t))(r)),(e=>e.reduce(((e,t)=>({...e,[t]:1})),{}))(i)}),(e=>`Caught error when processing deal id impressions on events. Got ${e}`)),j.fS((e=>(r.error("[advertiser]",e),{})))))),a.Rp({},ga),a.D8(((e,t)=>Bt(t))),a.D8(sr(H.Eq)),a.bw((e=>r.debug("[advertiser] impressions:",e)))))(new Set([]))(t);var r}))))),xn((e=>{let[t,r]=e;return function(e,t,r){const i=(0,n.zG)(t.groups,R.Su(((i,a)=>{const s=(0,n.zG)((0,n.zG)(t.cohorts,R.hX((e=>{let{groups:t}=e;return t.includes(i)})),R.Lx(H.Pc)((t=>(0,n.zG)(o.ij(e[t.code]),o.fS((()=>[])),R.Lx(H.Pc)((e=>(0,n.zG)(o.ij(r[e]),o.fS((()=>0))))))))));return Math.max(0,a-s)})));return{cohorts:t.cohorts,groups:i}}({},t,r)})),ba(e.logger))),i.bw((t=>{(0,n.zG)(t,o.UI(ri),o.fS((()=>a.a9([]))),(t=>(0,n.zG)(t,a.UI((t=>e.logger.debug("[advertiser] cohorts available for targeting:",t))))))})))};const Da=(0,n.zG)(Oa,(e=>(t,r)=>(0,n.zG)(e(t,r),i.UI((e=>({cohorts:e,externalData:Ca(t.logger,e)})))))),Aa=function(){return i.of(o.YP)};const Ta=i.K4((()=>{}));const Ma=e=>t=>(0,n.zG)(e,Ce.UI((e=>t.reduce(((t,r)=>t+Number(e.has(r))),0))));const Ra=function(e,t){return i.K4((()=>({signalRef:a.a9(o.YP)})))};const ja=e=>t=>i.dQ((r=>{const i=Fa(e.performance),s=(0,n.zG)(r.previousState,o.DT((e=>"string"==typeof e))),c={key:(0,n.zG)(s,o.fS((()=>e.sessionId.current))),reporting:!1},u=(0,n.zG)(e.sessionId,a.Rp(a.a9(c),((r,s)=>(0,n.zG)(r,a.VS((r=>{if(r.reporting)return a.a9(r);if(r.key===s)return a.a9(r);return(0,n.zG)(t,ft.gw(3e4),ft.tS((e=>i(50,(()=>function*(e,t){const r=Date.now(),i={},a=20;let o=0;for(const n of e){if(n.session_id===t)continue;o++,i[n.name]??={age_ms:0,count:0,eventName:n.name,size_bytes:0};const e=i[n.name].age_ms,s=r-n.time.getTime();s>e&&(i[n.name].age_ms=s),i[n.name].size_bytes+=2*JSON.stringify(n).length,i[n.name].count+=1,o%a==0&&(yield)}const s=Object.values(i);if(0===s.length)return[];const c=(0,n.zG)(s,jt.u4({size_bytes:0,count:0,age_ms:0},((e,t)=>({size_bytes:e.size_bytes+t.size_bytes,count:e.count+t.count,age_ms:Math.max(e.age_ms,t.age_ms)}))),(e=>({...e,eventName:"*"})));return(0,n.zG)([...s,c],jt.UI((e=>({...e,used_size_bytes:c.size_bytes}))))}(e,s))))),ft.UI((t=>(t.forEach((t=>{e.metrics.track({name:"sdk_event_cache_age_seconds",labels:{event_count:t.count,event_name:t.eventName,size_bytes:t.size_bytes,used_size_bytes:t.used_size_bytes},value:Math.ceil(t.age_ms/1e3)})})),{key:s,reporting:!1}))),a.fF,a.UI(o.fS((()=>({...r,reporting:!0})))))}))))),a.xH);return{value:void 0,state:a.UI((e=>e.key),u)}})),La=()=>i.dQ((e=>{let{previousState:t}=e;return{value:void 0,state:a.a9(t)}}));const Fa=e=>(t,r)=>async()=>{let n=e.now();const i=r();for(;;){e.now()-n>t&&(await new Promise((e=>setTimeout(e))),n=e.now());const r=i.next();if(r.done)return r.value}},Qa=e=>t=>{const{consent:r,currentTimestampSecs:c,identities:u,sessionId:f,userId:l,viewId:m,pageviewState:b}=t;return(0,n.zG)(i.K4((()=>{let r;const i=new Promise((e=>{r=e})),[s,c]=a.Ue(a.a9(o.YP));return{...t,adServers:[sa(e.optimisedActivationsConfig.dfp),{id:"dfp_contextual",filterCohorts:n.yR}],nonQlCohortsT:()=>i,setNonQlCohorts:r,setTpdUsage:c,tpdUsage:a.xH(s)}})),i.ak("geoip",(()=>(e=>(0,n.zG)(e,Hi,i.YO("data"),i.Hr("replacementMap",(e=>{let{data:t}=e;return(0,n.zG)(t,a.UI(o.UI((e=>({$ip_geo_info:e.geo_info,$ip_geo_info_continent:e.geo_info?.continent,$ip_isp_info:e.isp_info,$ip_address:e.ip,$ip_address_hash:e.ip_hash})))))})),i.Hr("permutiveContext",(e=>{let{data:t}=e;return(0,n.zG)(t,a.UI(o.EQ((()=>({})),(e=>({isp:e.isp_info?.isp,organization:e.isp_info?.organization,autonomous_system_number:e.isp_info?.autonomous_system_number,autonomous_system_organization:e.isp_info?.autonomous_system_organization,continent:e.geo_info?.continent,country:e.geo_info?.country,city:e.geo_info?.city,province:e.geo_info?.province,postal_code:e.geo_info?.postal_code})))))}))))({...e,sessionId:f}))),i.Hr("watson",(t=>{let{webClient:r}=t;return(0,n.zG)(e.watson,o.fS((()=>(0,n.zG)(r,a.UI(o.UI((e=>e.url))),a.D8(o.Eh(D.Eq)),(t=>(0,Wi.watson)({...e,pageUrl:t,watsonEnabled:(0,n.zG)(b,a.UI((e=>e.watsonEnabled)))}))))))})),i.ak("audienceMatching",(t=>{let{tpdUsage:r}=t;return Bi(e,{identities:u,sessionId:f,tpdUsage:r,userId:l,viewId:m})})),i.UI((e=>{let{audienceMatching:{analyticsEvents:t,...r},newEvents:i,...o}=e;return{...o,audienceMatching:r,newEvents:(0,n.zG)(a.vP(i,t),a.UI(d.RD),a.UI(d.UI(jt.xH)))}})),i.UI((e=>{const[t,r,i]=a.Ue(o.bM()),[s,c]=(0,n.zG)(e.newEvents,a.En(2,jt.uZ())),u=(0,n.zG)(a.vP(s,t),a.UI((e=>{let[t,r]=e;return(0,n.zG)(r,o.UI((e=>(0,n.zG)(t,d.UI(jt.UI((0,g.bw)((t=>{let[,r]=t;return e(r)}))))))),o.fS((()=>d.of(jt.bM()))))})));return{...e,newEvents:u,newEventsForAdvertiserSegmentation:c,collectTargetingSuccessMetrics:e=>{r(o.G(e)),i()}}})),i.ak("enrichedEvents",(t=>{let{enrichmentReplacementMap:r,geoip:c,newEvents:u,watson:f}=t;return(0,n.zG)(a.vP({misc:r,geoip:c.replacementMap,watson:f.replacementMap}),a.UI((0,we.Yt)(o.G5)),a.UI(o.UI((e=>{let{misc:t,geoip:r,watson:n}=e;return{...t,...r,...n}}))),(t=>i.K4((()=>((e,t,r,i)=>((0,n.zG)(t,a.UI(o.pC),a.YP((t=>{t&&e.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"event_enrichment_ready",time_origin:"sdk_init"})}))),(0,n.zG)(r,a.VS((()=>(0,n.zG)(a.vP((0,n.zG)(t,a.UI(o.UI(Vi({dropUnenriched:!0})))),i),a.UI((0,n.ls)((e=>{let[t,r]=e;return()=>(0,n.zG)(t,o.EQ((()=>[]),(e=>(0,n.zG)(r(),jt.UI((0,s.H5)((0,g.rO)({properties:e})))))))})))))))))(e.metrics,t,l,u)))))})),i.UI((0,g.rO)({enrichedEvents:(0,wn.F)(e.metrics,"pageview_enriched")})),i.ak("lookalikeModels",(()=>(0,n.zG)(e.lookalikeModels,o.EQ((()=>(0,_i.lookalikeModelsService)({...e,consent:r,currentTimestampSecs:c})),i.of)))),i.ak("userGroupCohorts",(()=>Aa(e,a.vP({currentTimestampSecs:c,userId:l})))),i.ak("queryLanguage",(r=>{let{audienceMatching:o,nonQlCohortsT:s,enrichedEvents:c,lookalikeModels:u,setTpdUsage:f,userIdIsNewlyGenerated:d}=r;return(0,n.zG)((p={...e,...t,newEvents:c,thirdPartyData:o.data,groupId:l,groupIdIsNewlyGenerated:d,nonQlCohorts:s,lookalikeModels:u,migratedStateMaps:e.migratedStateMaps},(0,n.zG)(a.vP(p.eventSourceId,p.groupId,p.groupIdIsNewlyGenerated),a.D8((0,n.zG)(D.Eq,B.Uz((e=>{let[t]=e;return t})))),i.kR((e=>{let[t,r,a]=e;return(0,n.zG)(hi({...p,eventSourceId:t,groupId:r,groupIdIsNewlyGenerated:a,migratedStateMaps:p.migratedStateMaps}),i.yi(t))})),i.UI((e=>({stateMigratedThisInitialisation:(0,n.zG)(e,a.VS((e=>e.segmentationService.stateMigratedThisInitialisation))),cohorts:(0,n.zG)(e,a.VS((e=>e.cohortsRef))),currentPageviewSegments:{all:(0,n.zG)(e,a.VS((e=>e.currentPageviewSegments)),xn((e=>e.all))),custom:(0,n.zG)(e,a.VS((e=>e.currentPageviewSegments)),xn((e=>e.custom))),standard:(0,n.zG)(e,a.VS((e=>e.currentPageviewSegments)),xn((e=>e.standard)))},eventsToPublish:(0,n.zG)(e,a.VS((e=>e.eventsToPublish))),eventsToPublishOnPageUnload:(0,n.zG)(e,a.VS((e=>e.eventsToPublishOnPageUnload))),realtime:(0,n.zG)(e,a.VS((e=>e.realtime)),a.Rp(!1,((e,t)=>e||t)),a.bw((e=>{e&&p.metrics.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"worker_realtime",time_origin:"sdk_init"},performance.now())}))),segments:{all:(0,n.zG)(e,a.VS((e=>Dn(e.segmentationService.segments))),a.UI((e=>e.all))),custom:(0,n.zG)(e,a.VS((e=>Dn(e.segmentationService.segments))),a.UI((e=>e.custom))),standard:(0,n.zG)(e,a.VS((e=>Dn(e.segmentationService.segments))),a.UI((e=>e.standard)))},thirdPartyDataUsage:(0,n.zG)(e,a.VS((e=>e.segmentationService.tpdUsage))),transitionsSinceInit:(0,n.zG)(e,a.VS((e=>e.segmentTransitions.transitionsSinceInit)))}))))),i.bw((e=>{let{thirdPartyDataUsage:t}=e;return f(t)})));var p})),i.ak("classificationModels",(t=>{let{queryLanguage:n}=t;return vi(e,a.vP({consent:r,currentTimestampSecs:c,queryLanguageCohorts:An(n.currentPageviewSegments.all),realtime:n.realtime,userId:l}))})),i.ak("advertiserSegmentation",(t=>{let{queryLanguage:n,newEventsForAdvertiserSegmentation:i}=t;return Da(e,a.vP({consent:r,customCohorts:An(n.currentPageviewSegments.custom),realtime:n.realtime,sessionId:f,standardCohorts:An(n.currentPageviewSegments.standard),userId:l,viewId:m,events:i}))})),i.ak("demandPartnersAndCuration",(r=>{let{queryLanguage:s,advertiserSegmentation:c}=r;const u=Wn(jt.jG()),f=(0,n.zG)(c.cohorts,o.UI((e=>e.all)),o.fS((()=>Nn(jt.cS)))),l=(0,n.zG)(s.currentPageviewSegments.all,Bn);return(0,n.zG)(i.vP({demandPartners:ea(e,{cohorts:l,consent:t.consent,url:(0,n.zG)(t.webClient,a.UI(o.UI((e=>e.url))))}),curation:oa(e,{activationConfigs:e.optimisedActivationsConfig.curation_platforms,cohorts:u.concat(f,l)})}),i.UI((e=>{let{demandPartners:t,curation:r}=e;return ra(t,r)})))})),i.ak("ipIdentifier",(e=>{let{userId:t,geoip:r}=e;return(0,n.zG)(r.data,a.UI(o.tS(o.KQ((e=>e.ip))))),Ta})),i.ak("secureSignal",(t=>{let{advertiserSegmentation:r,demandPartnersAndCuration:o}=t;return(0,n.zG)(Ra(e,(0,n.zG)(l,a.UI((e=>({userId:e,advertiserCohorts:r.cohorts,stdAudienceCohorts:o.ssp}))))),i.UI((e=>{let{signalRef:t}=e;return t})))})),i.Hr("nonQlCohorts",(e=>{let{advertiserSegmentation:t,classificationModels:r,contextualCohorts:i,userGroupCohorts:a,setNonQlCohorts:o,demandPartnersAndCuration:s,viewId:c}=e;return(0,n.zG)(Ce.oA({advertiser:t.cohorts,userGroup:a,classificationModel:r,contextual:la({contextualCohorts:i,viewId:c}),ssp:s.ssp}),(0,g.bw)(o))})),i.Hr("qlCohorts",(e=>{let{queryLanguage:t}=e;return(0,n.zG)(t.segments.all,a.UI(jt.UI(String)))})),i.bw((t=>{return t.collectTargetingSuccessMetrics(ca({adServers:t.adServers,cohorts:{...t.nonQlCohorts,query_language:(r=t.qlCohorts,(0,n.zG)(r,Pn,ei))},logger:e.logger,metrics:e.metrics}));var r})),(0,n.ls)(i.Hr("eventsToPublish",(t=>{let{qlCohorts:r,queryLanguage:i,nonQlCohorts:o}=t;const s=(e=>{if(!e.metrics.isEnabled())return e=>{};const t=(0,n.zG)(e.cohortsByType,Ce.UI(a.Rp(new Set,((e,t)=>new Set([...e,...t])))),(e=>a.vP(e)));return r=>{"Pageview"===r.name&&(0,p.HJ)((()=>(0,n.zG)(r.cohorts,Ma(t.current),Ce.Su(((t,r)=>e.metrics.track({name:"sdk_pageview_cohort_count",labels:{cohort_type:t},value:r}))))))}})({cohortsByType:(0,n.zG)(o,Ce.UI(ri),Ce.dx("query_language",r)),metrics:e.metrics});return(0,n.zG)(i.eventsToPublish,a.UI(d.UI(jt.UI((0,g.bw)((e=>{let[,t]=e;return s(t)}))))))})),i.ak("eventsCacheReports",(()=>(0,n.zG)(e.eventsCache,j.EQ((()=>ft.of(jt.cS)),(e=>()=>e.all())),(e=>{if(e.metrics.isEnabled()&&o.pC(e.performance)){const t=e.performance.value;return ja({...e,performance:t})}return La})({metrics:e.metrics,sessionId:t.sessionId,performance:e.performance})))),i.UI((e=>{let{adServers:t,advertiserSegmentation:r,demandPartnersAndCuration:i,eventsToPublish:o,geoip:s,queryLanguage:c,nonQlCohorts:u,watson:f,secureSignal:l}=e;return{activations:(0,n.zG)(t,jt.UI((e=>(0,n.zG)(Object.values(u),jt.UI(ti),jt.DZ((t=>t.byAdServer(e))),jt.UI(Dn),jt.UI(a.D8(jt.Eh(D.Eq))),(e=>a.vP(...e)),a.UI(jt.xH),a.UI((t=>(0,n.bc)(e.id,t)))))),(e=>a.vP(...e)),a.UI(Ce.sq)),cohorts:{all:c.cohorts,ql:c.segments.all,qlCustom:c.segments.custom,qlStandard:c.segments.standard},context:(0,n.zG)(a.vP(f.permutiveContext,s.permutiveContext),a.UI((e=>{let[t,r]=e;return{...t,...r}}))),eventsToPublish:o,eventsToPublishOnPageUnload:c.eventsToPublishOnPageUnload,externalData:a.vP({...r.externalData,...i.externalData}),geoIP:s.data,realtime:c.realtime,stateMigratedThisInitialisation:c.stateMigratedThisInitialisation,transitionsSinceInit:c.transitionsSinceInit,secureSignal:l}}))))}},822:(e,t,r)=>{r.d(t,{BJ:()=>l,El:()=>q,G6:()=>v,HD:()=>f,HP:()=>G,Kn:()=>u,Or:()=>S,PQ:()=>w,SL:()=>p,aT:()=>b,b0:()=>_,b2:()=>g,bw:()=>U,k$:()=>h,lo:()=>E,mQ:()=>z,rO:()=>k,vg:()=>I,vp:()=>d});var n=r(340),i=r(169),a=r(507),o=r(327),s=r(229),c=r(876);const u=e=>"object"==typeof e&&!Array.isArray(e)&&null!==e,f=e=>"string"==typeof e,l=e=>"number"==typeof e&&!Number.isNaN(e);function d(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t&=t;return t}function p(e){return t=>{let r=0;for(let n of t){r=r+e(n)|0}return r}}o.ff(s.xb);function g(){let e,t;return{promise:new Promise(((r,n)=>{e=r,t=n})),reject:t,resolve:e}}let m=[];function b(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:navigator.userAgent;if(m.unshift(e),m.length>1)return;const r=["beforeunload","pagehide"],n=r.concat(["visibilitychange"]),i=e=>{if(!a&&e){a=!0;const e=m;m=[],e.forEach((e=>{try{e()}catch{}}))}};let a=!1;n.forEach((e=>{window.addEventListener(e,(()=>{const r=("visibilitychange"!==e||document.hidden)&&y(t);i(r)}))})),r.forEach((e=>{window.addEventListener(e,(()=>i(!0)))}))}function h(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(e^(self.crypto||self.msCrypto).getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))}function _(e,t){const r=Object.keys(e),n=r.length,i={};for(let o=0;o<n;o++){const n=r[o],s=t(n,e[n]);(0,a.pC)(s)&&(i[n]=s.value)}return i}function y(e){return/Mobi|Android/i.test(e)}function v(e){return/^((?!chrome|android).)*safari/i.test(e)}function w(e,t){return new Promise((r=>{(0,c.HJ)((()=>{Promise.resolve(e()).then(r)}),t?.timeout??0)}))}const S=()=>({equals:(e,t)=>Object.is(e,t)});function I(e){return t=>null!=t&&e in t?t[e]:void 0}function G(e){let t=a.YP;const r=(0,a.fS)((()=>{const r=e();return t=(0,a.G)(r),r}));return()=>r(t)}const z=e=>{const t=new Map;return r=>(t.has(r)||t.set(r,e(r)),t.get(r))},k=e=>t=>{const r={...t};for(const n in e)r[n]=e[n]?.(t[n]);return r};function U(e){return t=>(e(t),t)}const E=e=>t=>{const r=e.slice(0,-1),o=e.slice(-1)[0];return(0,i.zG)(r,n.f2((e=>{let[r,n]=e;return(0,i.zG)(t,a.DT(r),a.UI(n))})),a.fS((()=>o(t))))},P=e=>t=>{if("number"==typeof t)return t;if("string"==typeof t){const r=e(t);return Number.isNaN(r)?void 0:r}};P(parseInt),P(parseFloat);function q(e){return"object"==typeof e&&null!==e&&"_tag"in e&&["None","Some"].includes(e._tag)}},869:(e,t,r)=>{r.r(t),r.d(t,{lookalikeModelsService:()=>v,realService:()=>S,stubService:()=>w});var n=r(169),i=r(507);const a=(e,t,r,n)=>t+(r-t)*n/(Math.pow(2,e)-1),o=(e,t)=>{const r=(e,t)=>{const r=e.toString(16);return("0".repeat(t)+r).slice(Math.min(-t,-r.length))};return`${r(e.getUint32(t),8)}-${r(e.getUint16(t+4),4)}-${r(e.getUint16(t+6),4)}-${r(e.getUint16(t+8),4)}-${r(e.getUint32(t+10),8)}${r(e.getUint16(t+14),4)}`},s=e=>{const t=[1,2],r=e.getInt8(0);if(1===r)return c(e);if(2===r)return u(e);{const n=(0,i.Y3)((()=>o(e,1))),a=(0,i.g_)((()=>"Couldn\'t decode model id"),(e=>`Model id was ${e}`))(n);throw new Error(`Decoding only supported for version(s): ${t}; Supplied version was ${r}; ${a}`)}},c=e=>f(e,1),u=e=>f(e,2),f=(e,t)=>{const r=o(e,1),n=((e,t)=>{switch(String.fromCharCode(e.getInt8(t))){case"1":return"1p";case"3":return"3p"}})(e,17),i=e.getInt8(18),a=e.getFloat32(19),s=e.getFloat32(23),[c,u]=((e,t,r,n,i,a)=>{const o={};let s=0;do{let r;1===a?(s=e.getUint16(t),r=e.getUint16(t+2),t+=4):(s=e.getUint32(t),r=e.getUint16(t+4),t+=6),o[0===s?"const":s]=r.toString(36)}while(0!==s);return[o,t]})(e,27,0,0,0,t);return[{version:t,id:r,data_preference:n,weights:c,precision:i,min:a,max:s},u]};var l=r(6),d=r(46),p=r(876),g=r(805),m=r(567),b=r(144),h=r(230),_=r(822);const y=()=>i.G({}),v=S;function w(e){return g.K4((()=>m.a9(y())))}function S(e){e.logger.warn("add cleanup of legacy LAL cache");const t=e.trace.startSpan("lookalike_models_data_retrieval_duration");return(0,n.zG)(h.m((0,n.zG)(m.vP(e.consent,e.currentTimestampSecs),m.UI((t=>{let[r,o]=t;return{currentTimestampSecs:o,validity:{maxAge:604800,key:()=>"_"},freshness:{maxAge:86400,key:()=>"_"},refresh:(0,n.zG)(r,i.DT(Boolean),i.UI((()=>()=>l.fF(function(e){const t="Failed fetching binary models, reverting to JSON.\\nError: ",r="Failed fetching json models.\\nError: ";return(0,n.zG)(l.Y3((()=>G(e)),(e=>e.message)),p.N1,l.oU((e=>()=>function(e){const t=[];let r=0;for(;r<e.byteLength;){const[n,i]=s(new DataView(e,r));t.push(n),r+=i}return t}(e))),p.N1,l.UI(I((e=>{let{precision:t,max:r,min:n}=e;return{"1p":{},precision:t,min:n,max:r}}))),l.Vn((r=>(e.logger.log(t+r),e.metrics.track({name:"sdk_binary_models_missing_count",value:1,labels:{}}),r))),l.wp((()=>(0,n.zG)(l.Y3((()=>z(e)),(e=>e.message)),l.UI((e=>e.models)),l.UI(I((()=>({"1p":{}}))))))),l.UI((e=>(e=>{const t=Object.keys(e);return t.length>0&&e[t[0]].hasOwnProperty("precision")})(e)?(e=>{const t={},r=Object.keys(e),n=e=>{const t={"1p":{}},{precision:r,min:n,max:i}=e,o=e["1p"],s=Object.keys(o);for(let e=0;e<s.length;e++){const c=s[e],u=parseInt(o[c],36);t["1p"][c]=a(r,n,i,u)}return t};for(let i=0;i<r.length;i++){const a=r[i],o=e[a];t[a]=n(o)}return t})(e):e)),l.fS((t=>(e.reportError(r+t),d.of({})))))}(e)))))}})))),g.UI(m.UI((0,n.ls)(b.fS((t=>(e.logger.warn("[LAL]",`Failed to refresh, using zero value. ${t}`),y()))),(0,_.bw)(i.UI((()=>{t.finish(),e.metrics.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"lookalike_models_ready",time_origin:"sdk_init"})})))))))}function I(e){return t=>{const r={};for(let n=0;n<t.length;n++){const i=t[n],{id:a,weights:o}=i;if(void 0===a||void 0===o)continue;const s=e(i);Object.keys(o).forEach((e=>{s["1p"][e]=o[e]})),r[a]=s}return r}}const G=e=>{const{permutiveApi:t,config:r,metrics:n}=e,i=n.startTimer("sdk_http_models_seconds",{});return t.req({url:k(r.cdnProtocol,r.cdnBaseUrl,"binary"),method:"GET",contentType:"text/plain",dataType:"binary",withCredentials:!1}).then((e=>(n.stopTimer("sdk_http_models_seconds",i),e)))},z=e=>{const{permutiveApi:t,config:r,metrics:n}=e,i=n.startTimer("sdk_http_models_seconds",{});return t.req({url:k(r.cdnProtocol,r.cdnBaseUrl,"json"),method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!1}).then((e=>(n.stopTimer("sdk_http_models_seconds",i),e)))};function k(e,t,r){const n=`${e}://${t}`;switch(r){case"binary":return`${n}/models/v2/4b91477e-f67b-4d81-86db-a9742bd41e9c-models.bin`;case"json":return`${n}/models/4b91477e-f67b-4d81-86db-a9742bd41e9c-models.json`}}},628:(e,t,r)=>{r.d(t,{K:()=>E,O:()=>k});let n,i;const a=new WeakMap,o=new WeakMap,s=new WeakMap,c=new WeakMap,u=new WeakMap;let f={get(e,t,r){if(e instanceof IDBTransaction){if("done"===t)return o.get(e);if("objectStoreNames"===t)return e.objectStoreNames||s.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return p(e[t])},set:(e,t,r)=>(e[t]=r,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function l(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(i||(i=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.apply(g(this),r),p(a.get(this))}:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return p(e.apply(g(this),r))}:function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];const a=e.call(g(this),t,...n);return s.set(a,t.sort?t.sort():[t]),p(a)}}function d(e){return"function"==typeof e?l(e):(e instanceof IDBTransaction&&function(e){if(o.has(e))return;const t=new Promise(((t,r)=>{const n=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=()=>{t(),n()},a=()=>{r(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));o.set(e,t)}(e),t=e,(n||(n=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,f):e);var t}function p(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,r)=>{const n=()=>{e.removeEventListener("success",i),e.removeEventListener("error",a)},i=()=>{t(p(e.result)),n()},a=()=>{r(e.error),n()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((t=>{t instanceof IDBCursor&&a.set(t,e)})).catch((()=>{})),u.set(t,e),t}(e);if(c.has(e))return c.get(e);const t=d(e);return t!==e&&(c.set(e,t),u.set(t,e)),t}const g=e=>u.get(e);const m=["get","getKey","getAll","getAllKeys","count"],b=["put","add","delete","clear"],h=new Map;function _(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(h.get(t))return h.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,i=b.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!i&&!m.includes(r))return;const a=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let a=t.store;for(var o=arguments.length,s=new Array(o>1?o-1:0),c=1;c<o;c++)s[c-1]=arguments[c];return n&&(a=a.index(s.shift())),(await Promise.all([a[r](...s),i&&t.done]))[0]};return h.set(t,a),a}f=(e=>({...e,get:(t,r,n)=>_(t,r)||e.get(t,r,n),has:(t,r)=>!!_(t,r)||e.has(t,r)}))(f);var y=r(654),v=r(144),w=r(169),S=r(46),I=r(6),G=r(822),z=r(876);const k="[IDB]",U=(e,t,r,n,i,a)=>(0,w.zG)((0,S.of)(e.getNamespacedStorageKey(i)),(0,S.tS)((e=>(0,I.Y3)((async()=>r.put(n,a,e)),y.w))),(0,S.UI)((0,v.g_)((e=>{throw t.error(k,`Failed to store crypto key to ${n} due to unexpected error,\\n`,e),e}),(()=>a))),(e=>e()));class E{namespace;logger;cryptoAlg;idb;mainObjectStore;keyObjectStore;keyObjectKey;cryptoKey;MAX_CONSECUTIVE_PUTS=30;puts=1;hasForcedCompaction=!1;constructor(e,t,r,n,i,a,o,s){this.namespace=e,this.logger=t,this.cryptoAlg=r,this.idb=n,this.mainObjectStore=i,this.keyObjectStore=a,this.keyObjectKey=o,this.cryptoKey=s,this.logDebug("Created",this.idb)}static initialise(e,t,r,n,i,a,o,s,c,u){const f=(0,G.G6)(navigator.userAgent)&&!1,l=[u,n.isAvailable(),!f].every((e=>!0===e)),d=async(t,i,a)=>(0,w.zG)(await t.get(a,e.getNamespacedStorageKey(i)),(async e=>e??n.generateKey(!1)),(async n=>U(e,r,t,o,s,await n))).catch((e=>{const t=(0,y.w)(e);throw r.error(k,"Get crypto key failed. Got\\n",t),t})),p=(e,t,r)=>t.includes(r)?(0,w.Q1)():e.createObjectStore(r),g=()=>P(i,c,{upgrade:e=>{const t=[...e.objectStoreNames];p(e,t,a),p(e,t,o)}}).then((e=>{const t=[...e.objectStoreNames];return t.includes(a)&&t.includes(o)?e:Promise.reject(new Error("Object store(s) missing."))})),m=l?(0,v.Y3)((()=>function(e){if(!(0,G.G6)(navigator.userAgent)||!indexedDB.databases)return Promise.resolve();let t=()=>{},r=0;return new Promise((e=>{const n=()=>(r++,indexedDB.databases().finally((0,z.GL)(e)));t=(0,z.UM)(n,100),n()})).finally((()=>{t(),e.track({name:"sdk_idb_conn_attempt_safari_count",value:r,labels:{}})}))}(t).then((()=>g())).catch((e=>(r.error(`Re-creating IDB database ${i} due to error`,e),q(i).then((()=>g())))))),String):(0,v.t$)("Connection not attempted. Default to localStorage");return(0,v.g_)((e=>(0,I.t$)(e)),(t=>(0,w.zG)((0,I.Y3)((()=>t.then((async e=>({db:e,cryptoKey:await d(e,s,o)})))),String),(0,I.UI)((t=>{let{db:i,cryptoKey:c}=t;return new E(e,r,n,i,a,o,s,c)})))))(m)}async put(e,t){return(0,w.zG)((async()=>(0,w.bc)(JSON.stringify(e),this.cryptoKey)),(0,S.tS)((e=>{let[t,r]=e;return(0,S.of)(this.cryptoAlg.encrypt(r,t))})),(0,S.tS)((e=>async()=>(await this.recreateIfNecessary(this.puts++),e))),(0,S.tS)((e=>(0,I.Y3)((()=>this.idb.put(this.mainObjectStore,e,this.namespace.getNamespacedStorageKey(String(t)))),y.w))),(0,S.UI)((0,v.g_)((r=>{throw this.logError(`Failed to put "${t.toString()}" value`,e,". Got \\n",r),"QuotaExceededError"===r.name&&this.forceCompaction(),r}),(()=>t))),(e=>e()))}get(e){return(0,w.zG)(this.namespace.getNamespacedStorageKey(String(e)),(t=>this.idb.get(this.mainObjectStore,t).then((async e=>e?JSON.parse(await this.cryptoAlg.decrypt(this.cryptoKey,e)):null)).catch((t=>{const r=(0,y.w)(t);throw this.logError(`Get ${e.toString()} failed. Got`,r),r}))))}delete(e){return(0,w.zG)(this.namespace.getNamespacedStorageKey(String(e)),(e=>this.idb.delete(this.mainObjectStore,e)))}deleteStore(){return this.logDebug("Deleting",this.idb),this.idb.close(),q(this.idb.name)}forceCompaction(){if(this.hasForcedCompaction)return null;this.hasForcedCompaction=!0,this.logDebug("Attempting to force compaction");const e=`__${this.mainObjectStore}`;return P(e).then((t=>(t.close(),q(e))))}recreateIfNecessary(e){return(0,G.G6)(navigator.userAgent)&&e%this.MAX_CONSECUTIVE_PUTS==0?this.recreate():Promise.resolve()}async recreate(){const e=this.idb.name,t=this.idb.version,r=await this.idb.getAllKeys(this.mainObjectStore),n=[];for(const e of r)n.push([e,await this.idb.get(this.mainObjectStore,e)]);await this.deleteStore(),this.idb=await P(e,t,{upgrade:e=>{e.createObjectStore(this.mainObjectStore),e.createObjectStore(this.keyObjectStore)}}),await Promise.all(n.map((e=>{let[t,r]=e;return this.idb.put(this.mainObjectStore,r,t)}))),await U(this.namespace,this.logger,this.idb,this.keyObjectStore,this.keyObjectKey,this.cryptoKey),this.logDebug("Reset to",this.idb)}logDebug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.debug(k,...t)}logError(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.error(k,...t)}}const P=(0,w.ls)((function(e,t){let{blocked:r,upgrade:n,blocking:i,terminated:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),s=p(o);return n&&o.addEventListener("upgradeneeded",(e=>{n(p(o.result),e.oldVersion,e.newVersion,p(o.transaction))})),r&&o.addEventListener("blocked",(()=>r())),s.then((e=>{a&&e.addEventListener("close",(()=>a())),i&&e.addEventListener("versionchange",(()=>i()))})).catch((()=>{})),s}),z.t_,(e=>e.then((e=>({close:e.close.bind(e),createObjectStore:(0,w.ls)(e.createObjectStore.bind(e),w.Q1),delete:(0,w.ls)(e.delete.bind(e),z.t_),get:(0,w.ls)(e.get.bind(e),z.t_),getAllKeys:(0,w.ls)(e.getAllKeys.bind(e),z.t_),get name(){return e.name},get objectStoreNames(){return e.objectStoreNames},put:(0,w.ls)(e.put.bind(e),z.t_),get version(){return e.version}}))))),q=(0,w.ls)((function(e){let{blocked:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=indexedDB.deleteDatabase(e);return t&&r.addEventListener("blocked",(()=>t())),p(r).then((()=>{}))}),z.t_)},968:(e,t,r)=>{r.r(t),r.d(t,{make:()=>o});var n=r(169),i=r(628);const a=e=>{const{logger:t,consent:r,prefix:n}=e,i=(e,r)=>(t.debug(`${n} Failed to write ${String(r)} as consent is revoked`),Promise.resolve(r));return e=>class extends e{put=(()=>{return e=super.put.bind(this),t=i,n=()=>!r.current,function(){return(n()?t:e)(...arguments)};var e,t,n})()}},o=(e,t,r,o,s,c,u,f,l,d,p)=>(0,n.zG)(i.K,a({logger:l,consent:d,prefix:i.O})).initialise(e,t,l,r,o,s,c,u,f,p)},240:(e,t,r)=>{r.r(t),r.d(t,{watson:()=>c});var n=r(567),i=r(169),a=r(507),o=r(812),s=r(229);const c=e=>(0,i.zG)(f(e),n.YO("data"),n.Hr("replacementMap",(e=>{let{data:t}=e;return(0,i.zG)(t,a.YO("data"),a.Hr("taxonomyLabels",(e=>{let{data:t}=e;return function(e){const t=e=>{const t=e.split("/").filter((e=>e));return t.map(((e,r)=>"/"+t.slice(0,r+1).join("/")))},r=o.xH(e.filter(Boolean).map((e=>t(e.label))));return o.jj(s.Eq)(r)}(t.taxonomy??[])})),a.UI((e=>{let{data:t,taxonomyLabels:r}=e;return{$alchemy_concepts:t.concepts??[],$alchemy_document_emotion:t.emotion?.document?.emotion??null,$alchemy_document_sentiment:t.sentiment?.document??null,$alchemy_entities:t.entities??[],$alchemy_entity_names:(0,i.zG)(t.entities??[],o.UI((e=>e.text))),$alchemy_keywords:t.keywords??[],$alchemy_taxonomy:t.taxonomy??[],$alchemy_taxonomy_labels:r,$taxonomy_labels:r}})))})),n.Hr("permutiveContext",(e=>{let{data:t}=e;return(0,i.zG)(t,a.EQ((()=>({})),(e=>({watson:e}))))})),(e=>({permutiveContext:(0,i.zG)(e,n.UI((e=>e.permutiveContext))),replacementMap:(0,i.zG)(e,n.UI((e=>e.replacementMap)))}))),u=()=>n.a9(a.G({})),f=u}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{var e=__webpack_require__(876),t=__webpack_require__(567),r=__webpack_require__(169),n=__webpack_require__(805),i=__webpack_require__(507),a=__webpack_require__(812),o=__webpack_require__(822),s=__webpack_require__(6);function c(e,n){return(0,r.zG)(s.Y3((()=>e.get(n)),(e=>`Failed to read previous state from IndexedDB: ${e}.`)),s.UI((e=>e??void 0)),s.UI((i=>a=>(0,r.ls)((0,o.rO)({previousState:()=>i}),a,(a=>{let{value:s,state:c}=a;const[u,f]=t.Ue(!1),l=(0,r.zG)(c,t.Rp(-1,(e=>e+1)));return{value:(0,r.bc)(u,s),state:(0,r.zG)(t.vP(c,l),(0,o.bw)(t.YP((t=>{let[r,a]=t;if(0!==a||r!==i)switch(f(!1),typeof r){case"undefined":e.delete(n).then((()=>f(!0)));break;case"object":null===r?e.delete(n).then((()=>f(!0))):e.put(r,n).then((()=>f(!0)));break;default:e.put(r,n).then((()=>f(!0)))}}))))}})))))}function u(e){return n=>(0,r.ls)((0,o.rO)({previousState:t=>e.current?t:void 0}),n,(0,o.rO)({state:(0,r.ls)((r=>t.vP(e,r)),t.UI((e=>{let[t,r]=e;return t?r:void 0})))}))}var f=__webpack_require__(144);class l extends Error{static errorName="NetworkRequestFailedError";name=(()=>l.errorName)();constructor(){super(l.defaultMessage)}static get defaultMessage(){return"Network request failed"}}class d extends Error{static errorName="NetworkRequestTimeoutError";name=(()=>d.errorName)();constructor(){super(d.defaultMessage)}static get defaultMessage(){return"Network request timed out"}}var p=__webpack_require__(614),g=function(e){return"Left"===e._tag},m=function(e){return"Right"===e._tag};function b(e){return{_tag:"Left",left:e}}function h(e){return{_tag:"Right",right:e}}function _(e,t){return{_tag:"Both",left:e,right:t}}var y=function(e,t,r){return function(n){switch(n._tag){case"Left":return e(n.left);case"Right":return t(n.right);case"Both":return r(n.left,n.right)}}},v=y;v(h,b,(function(e,t){return _(t,e)}));var w=h,S="These";r.yR,r.yR,p.Xl;class I{metrics;logger;constructor(e,t){this.metrics=t,this.logger=e.withPrefix("network")}req(e){return this.logger.withPrefix("request").debug(e.method,e.url,..."POST"===e.method?[{payload:e.payload}]:[]),this.reqImpl(e).then((e=>(0,r.MZ)(e))).then((t=>(this.logger.withPrefix("response").debug(e.method,e.url,{response:t}),t)),(t=>{throw this.logger.withPrefix("response").error(e.method,e.url,t),t}))}reqWithBeacon(e){let{url:t,payload:r}=e;const n=JSON.stringify(r),i=navigator?.sendBeacon?.(t,JSON.stringify(r))??!1;return this.trackRequestMetrics({is_beacon:!0,is_error:!i,request:{method:"POST",url:t,content_length:n.length}}),i}reqImpl(t){const n="arraybuffer",{url:a,dataType:s,contentType:c,method:u,withCredentials:g,timeout:m}=t;return new Promise(((b,y)=>{const v=new XMLHttpRequest,w="POST"===t.method?"string"==typeof(S=t.payload)?S:JSON.stringify(S):null;var S;const I=e=>this.trackRequestMetrics({is_beacon:!1,request:{method:u,url:a,content_length:w?.length??0},response:e});v.onload=(0,e.GL)((()=>{return(0,r.zG)(v.status,f.DT((e=>e<400),(()=>{const e="text"===v.responseType||""===v.responseType?v.responseText:"Couldn\'t access response text";return`Failed ajax request. Status code was ${v.status}. ${e}`})),f.tS((()=>"json"===s?v.responseText?f.Y3((()=>JSON.parse(v.responseText)),(e=>`Failed to parse response as JSON. Response was ${JSON.stringify(v.responseText)}. Got ${e}`)):f.F2(null):"text"===s?f.F2(v.responseText):f.F2(v.response))),(0,o.bw)((0,r.ls)(i.IS,(e={content_length:"text"===v.responseType||""===v.responseType?v.responseText?.length??0:v.responseType===n?v.response.byteLength:0,response_time_ms:self.performance.now()-G,status_code:v.status},function(t){return p.Wi(t)?h(e):_(t.value,e)}),I)),f.EQ(y,b));var e})),v.onerror=(0,e.GL)((()=>{I(f.t$("network error")),y(new l)})),v.ontimeout=(0,e.GL)((()=>{I(f.t$("timeout")),y(new d)})),v.open(u,a,!0),c&&v.setRequestHeader("content-type",c),v.timeout=m||v.timeout,v.withCredentials=g||v.withCredentials,v.responseType="binary"===s?n:v.responseType;const G=self.performance.now();v.send(w)}))}trackRequestMetrics(e){if(!this.metrics?.isEnabled())return;const t=new URL(e.request.url).pathname;if(t.includes("metrics"))return;const n=r=>this.metrics.track({name:"sdk_http_request_count_total",value:1,labels:{request_method:e.request.method,request_path:t,request_content_length:e.request.content_length,...r}});var a;!0===e.is_beacon?n({is_beacon:!0,is_error:e.is_error}):(0,r.zG)((a=e.response,g(a)?p.YP:(m(a),p.G(a.right))),i.aD((()=>({})),(e=>({response_content_length:e.content_length,response_status:e.status_code,response_time_ms:e.response_time_ms}))),(t=>({is_beacon:!1,is_error:!m(e.response),...t})),n)}}class G{config;PATH_JOINER_Q="?";PATH_JOINER_A="&";constructor(e){this.config=e}getBaseUrl(){return`${this.config.apiProtocol}://${this.config.apiHost}`}getEndpointUrl(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("base",e,t,r)}getSdkErrorsUrl(e,t){return this.getUrl("sdk-errors",e,t,[])}getAdvertiserEndpointUrl(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("adv",e,t,r)}getClassificationModelsEndpointUrl(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("clm",e,t,r)}getAudienceMatchingEndpointUrl(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];const i=`${e}/${r}/audiences`;return this.getUrl("audience-matching",i,t,n)}getCCSCohortMembershipEndpointUrl(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("ccs",e,t,r)}makeAuthenticatedUrl(e){return this.makeUrlWithQueryParams(e,[["k",this.config.apiKey]])}getUrlPrefix(e){switch(e){case"base":return"";case"adv":return"/adv";case"sdk-errors":return"/sdk-errors";case"clm":return"/clm";case"audience-matching":return"/audience-matching";case"ccs":return"/ccs"}}getUrl(e,t,r,n){const a=this.getUrlPrefix(e),o=(0,i.g_)((()=>""),(e=>`/${e}`))(r),s=`${this.getBaseUrl()}${a}${o}${t}`;return this.makeUrlWithQueryParams(s,n.concat([["k",this.config.apiKey]]))}makeUrlWithQueryParams(e,t){const r=t.map((e=>{let[t,r]=e;return`${t}=${r}`})).join(this.PATH_JOINER_A),n=e.includes(this.PATH_JOINER_Q)?this.PATH_JOINER_A:this.PATH_JOINER_Q;return`${e}${n}${r}`}}var z=__webpack_require__(628),k=__webpack_require__(945);class U{sdkInitTimestamp;timeOriginSdkInit;logger;prefix="[Metrics]";timeOriginForContext=(()=>q())();pendingMetrics=[];pendingCounters={};pendingTimers={};noMetricsTracked=0;constructor(e,t,r){this.sdkInitTimestamp=e,this.timeOriginSdkInit=t,this.logger=r}isEnabled(){return!0}getNoMetricsTracked(){return this.noMetricsTracked}consume(){const e=this.pendingMetrics.concat(Object.values(this.pendingCounters).flat());return this.pendingMetrics=[],this.pendingCounters={},e}track(e){this.noMetricsTracked++,this.logDebug(`Tracking ${e.name}`,{metric:e}),this.pendingMetrics.push(e)}trackCounter(e){if(this.noMetricsTracked++,this.logDebug(`Tracking ${e.name}`,{metric:e}),e.name in this.pendingCounters){const t=Object.keys(e.labels),r=this.pendingCounters[e.name].findIndex((r=>Object.keys(r.labels).length===t.length&&t.every((t=>r.labels[t]===e.labels[t]))));-1===r?this.pendingCounters[e.name].push(e):this.pendingCounters[e.name][r]=P(this.pendingCounters[e.name][r],e.value)}else this.pendingCounters[e.name]=[e]}synchroniseTimeBetweenContexts(e){return(0,r.zG)(k.gz(i.G5)(this.timeOriginForContext,this.timeOriginSdkInit),i.UI((t=>{let[r,n]=t;return e+r-n})))}trackTimeSinceInit(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:performance.now();(0,r.zG)(this.synchroniseTimeBetweenContexts(n),i.UI((e=>(e-this.sdkInitTimestamp)/1e3)),i.UI((r=>this.track({name:e,value:r,labels:t}))))}startTimer(e,t){const r=performance.now(),n=this.generateRandomKey(e);return this.pendingTimers[n]={startTime:r,labels:t},n}stopTimer(e,t){const r=this.pendingTimers[t];if(r){const n=(performance.now()-r.startTime)/1e3;this.logDebug("timer stopped",e,n),this.track({name:e,value:n,labels:r.labels}),delete this.pendingTimers[t]}}generateRandomKey(e){return`${e}-${[...Array(24)].map((()=>Math.random().toString(36)[2])).join("")}`}logDebug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.debug(this.prefix,...t)}}class E{isEnabled(){return!1}getNoMetricsTracked(){return 0}consume(){return[]}track(e){}trackCounter(e){}trackTimeSinceInit(e,t){}startTimer(e,t){return""}stopTimer(e,t){}}const P=(e,t)=>({...e,value:e.value+t}),q=()=>(0,r.zG)(i.Y3((()=>performance.timeOrigin)),i.hX((e=>"number"==typeof e&&!Number.isNaN(e))));var x=__webpack_require__(644);class C{sdkInitTimestamp;prefix;constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C.initialPrefix;this.sdkInitTimestamp=e,this.prefix=t}static initialPrefix=(()=>[D("Permutive"),self.document?D("M","#43dde2"):D("W","#FF5C00")])();get timeDeltaFromInit(){return`[${(new Date).getTime()-this.sdkInitTimestamp}ms]`}log(){return console.log.bind(self.console,`%s${this.prefixTemplate}`,this.timeDeltaFromInit,...this.prefixContent)(...arguments)}debug(){return console.debug.bind(self.console,`%c%s${this.prefixTemplate}`,"color: blue;",this.timeDeltaFromInit,...this.prefixContent)(...arguments)}warn(){return console.warn.bind(self.console,`%s${this.prefixTemplate}`,this.timeDeltaFromInit,...this.prefixContent)(...arguments)}error(){return console.error.bind(self.console,`%s${this.prefixTemplate}`,this.timeDeltaFromInit,...this.prefixContent)(...arguments)}withPrefix(e,t){return new C(this.sdkInitTimestamp,[...this.prefix,D(e,t)])}get prefixTemplate(){return this.prefix.map(x.li).join("")}get prefixContent(){return this.prefix.map(x.Yg).flat()}}class O{log(){}debug(){}warn(){}error(){}withPrefix(){return this}}function D(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#0469d0";const r=[`background-color: ${t}`,"color:white",`border:1px solid ${t}`,"padding: 0px 2px","margin: 0px 1px","border-radius: 2px"].join(";");return["%c%s",[r,e]]}class A{crypto=(()=>self.crypto||self.msCrypto)();ALG_NAME="AES-GCM";isAvailable(){return!!this.crypto?.subtle}generateKey(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,e.t_)(this.crypto.subtle.generateKey({name:this.ALG_NAME,length:256},t,["encrypt","decrypt"]))}encrypt(e,t){const[r,n]=this._encrypt(e,this.str2bytes(t));return r.then((e=>{const t=new Uint8Array(16+e.byteLength);return t.set(n,0),t.set(new Uint8Array(Uint32Array.of(e.byteLength).buffer),12),t.set(new Uint8Array(e),16),t.buffer}))}decrypt(e,t){const r=new Uint8Array(t,0,12),n=new Uint32Array(t,12,1)[0],i=t.slice(16,16+n);return this._decrypt(e,r,i).then(this.bytes2str)}_encrypt(t,r){const n=this.crypto.getRandomValues(new Uint8Array(12));return[(0,e.t_)(this.crypto.subtle.encrypt({name:this.ALG_NAME,iv:n},t,r)),n]}_decrypt(t,r,n){return(0,e.t_)(this.crypto.subtle.decrypt({name:this.ALG_NAME,iv:r},t,n))}str2bytes(e){return(new TextEncoder).encode(e).buffer}bytes2str(e){return(new TextDecoder).decode(e)}}class T{config;constructor(e){this.config=e}getNamespacedStorageKey(e){return`${this.config.stateNamespace}${e}`}}var M=__webpack_require__(46),R=__webpack_require__(694),j=__webpack_require__(450),L=__webpack_require__(327),F=__webpack_require__(214);var Q=__webpack_require__(654),N=__webpack_require__(270);class Y{timeoutDurationInMilliseconds;maxTimeOutDurationInMilliseconds;constructor(e,t){this.timeoutDurationInMilliseconds=e,this.maxTimeOutDurationInMilliseconds=t}schedule(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeoutDurationInMilliseconds,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.maxTimeOutDurationInMilliseconds;return this.debounce(e,t,r)}scheduleAccumulated(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeoutDurationInMilliseconds,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.maxTimeOutDurationInMilliseconds;return this.debounce(e,r,n,t)}scheduleForPageUnload(e){return(0,o.aT)(e)}debounce(t,r,n,i){let a,s,c,u=[];return f=>{i&&(c=i.concat(c??i.empty,f));const l=(0,o.b2)();u.push(l);return a?.(),a=(0,e.HJ)((()=>{s?.(),s=void 0;const e=t(c||f);u.forEach((t=>t.resolve(e))),c=i?.empty,u=[]}),r),s||(s=(0,e.HJ)((()=>{a?.(),s=void 0;const e=t(c||f);u.forEach((t=>t.resolve(e))),c=i?.empty,u=[]}),n)),l.promise}}}class $ extends Error{constructor(e){super(e),this.name="StoreClosingError"}}const B="permutive-events-cache",H="permutive-events-for-page",K="[EVENTSCACHE]",V=e=>"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name;class W{config;logger;reportError;trace;metrics;userId;makeEventsStore;eventStore;eventsCache=(()=>this.makeEventsRepository(B))();eventsForPage=(()=>this.makeEventsRepository(H))();eventsTTLInMilliseconds;readiness;debouncedReportError=(()=>new Y(5e3,5e3).schedule((e=>this.reportError(e.errorMessage,{userId:e.userId}))))();static initialise(e,t,n,i,a,o,c){return(0,r.zG)(c(),s.UI((r=>new W(e,t,n,i,a,o,c,r))))}constructor(e,t,n,a,s,c,u,f){this.config=e,this.logger=t,this.reportError=n,this.trace=a,this.metrics=s,this.userId=c,this.makeEventsStore=u,this.eventStore=f,this.eventsTTLInMilliseconds=(0,r.zG)((0,i.ij)(this.config.eventsTTLInDays),(0,i.tS)((e=>"number"==typeof e&&e>0?(0,i.G)(24*e*3600):i.YP))),this.eventsCache.events=(0,o.HP)((()=>(0,o.PQ)((0,r.zG)(M.tD((()=>this.trace.startSpan("load_event_cache"))),M.tS((e=>(0,r.zG)(this.loadFromDisk(),M.At((t=>()=>{e.finish(),this.logDebug(`Event cache loaded, #e ${t.length}`)}))))))))),this.readiness=this.eventsCache.events().then((()=>this.migratePreviousPagesEvents())),c.onChange((()=>this.reset()))}async migratePreviousPagesEvents(){const e=this.trace.startSpan("migrate_previous_for_page_events"),t=(0,M.pE)((e=>(0,s.Y3)((()=>e.flush()),Q.w)));return(0,r.zG)([this.eventsForPage,this.eventsCache],t,(0,M.UI)((t=>{const r=a.bj(t);return r.length>0&&this.reportError(`Migrate previous events failed. Got:\\n${r.join("\\n ")}`,{userId:this.userId.current}),e.finish()})),(e=>e()))}all(){return Promise.all([this.eventsCache.events(),this.eventsForPage.events()]).then(a.xH)}async add(e,t){let{persistOnDisk:n}=t;return this.logDebug("Adding to cache",e),this.eventsForPage.events=(0,r.zG)(this.eventsForPage.events,M.UI((t=>[...t,e])),o.HP),n&&this.readiness.then((()=>this.eventsForPage.flush())),e}filterEventsByWorkspace(e){return e}pruneEventsToSizeLimit(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.config.eventsCacheLimitBytes;if(r<=0||t<=r)return this.logDebug(`Event size of ${t} less than limit of ${r}`),{events:e,sizeInBytes:t};this.logDebug("Events before pruning",{count:e.length,sizeInBytes:t,byteLimit:r});let n=1,i=[...e];for(;t>r;)i.splice(0,n),n*=2,t=2*JSON.stringify(i).length;return this.logDebug("Events after pruning",{count:i.length,sizeInBytes:t}),{events:i,sizeInBytes:t}}loadFromDisk(){const e=()=>[],t=(0,r.zG)(this.eventsTTLInMilliseconds,i.EQ((()=>r.yR),(e=>a.hX((t=>e>Date.now()-t.time.getTime())))));return(0,r.zG)(M.tD((()=>(this.logLog("Loading event cache..."),this.metrics.startTimer("sdk_load_events_cache_task_duration_seconds",{})))),M.YO("loadEventsCacheTask"),M.ak("eventsFromDisk",(()=>(0,r.zG)(a.nI([this.eventStore.get(B),this.eventStore.get(H)]),a.UI(s.LV((0,o.lo)([[e=>e instanceof $,(0,r.ls)(e,M.of)],t=>(0,r.zG)(M.tD((()=>this.reportError(`Error fetching data from store. Got ${t}`,{userId:this.userId.current}))),M.tS((()=>()=>this.reset("historical"))),M.UI(e))]),(0,r.ls)(i.fS(e),M.of))),a.vP(M.qA)))),M.At((e=>{let{eventsFromDisk:t,loadEventsCacheTask:r}=e;return()=>{this.logDebug("Read events from store:",t),this.metrics.stopTimer("sdk_load_events_cache_task_duration_seconds",r)}})),M.UI((0,r.ls)((0,o.vg)("eventsFromDisk"),a.xH,this.filterEventsByWorkspace,(e=>this.pruneEventsToSizeLimit(e,2*JSON.stringify(e).length)),(e=>(this.eventsCache.sizeInBytes=e.sizeInBytes,this.eventsCache.sizeInBytesLastSuccessfulWrite=e.sizeInBytes,e.events.length>0&&(this.metrics.track({name:"sdk_events_cache_byte_total",value:e.sizeInBytes,labels:{}}),this.metrics.track({name:"sdk_events_cache_size_total",value:e.events.length,labels:{}})),e.events)),a.UI(N.k),t)))}async reset(e){return(0,r.zG)(M.tD((()=>this.logDebug("Resetting Events Cache"))),M.tS((()=>this.eventStore.deleteStore())),s.tS((()=>this.makeEventsStore())),s.Zl((t=>(this.eventStore=t,"historical"===e?k.gz(s.Ij)(this.eventsCache.reset,this.eventsForPage.flush):k.gz(s.Ij)(this.eventsCache.reset,this.eventsForPage.reset)))),s.wE((()=>()=>this.all())),s.fS((()=>M.of(X()))),(e=>e()))}getStateSizeInBytes(){return this.eventsForPage.sizeInBytes+this.eventsCache.sizeInBytes}makeEventsRepository(e){const t=(()=>{let e=Promise.resolve(f.F2((0,r.Q1)()));return t=>e=e.then(t)})(),n=e=>(0,r.zG)(M.tD((()=>this.logDebug(`Writing ${e.length} events to ${g.key}`))),M.tS((()=>this.eventStore.put(e.map(N.X),g.key))),s.UI(r.Q1)),i=(0,r.zG)(M.tD((()=>this.logDebug(`Deleting events for ${g.key}`))),M.tS((()=>this.eventStore.delete(g.key))),s.Vn(Q.w)),a=(0,r.ls)(M.of,M.At((e=>()=>this.logError(`Events cache failed to put ${g.key}. Got ${e}`))),M.tS((0,o.lo)([[e=>V(e)&&g.retryAttempts<9,()=>(0,r.zG)(M.tD((()=>{g.retryAttempts+=1,this.logDebug(`Attempt #${g.retryAttempts} to write ${g.key} to EventsStore`)})),M.tS((()=>p)),M.tS((()=>u)))],[e=>V(e),e=>(0,r.zG)(M.tD((()=>this.logDebug(`Attempted ${g.retryAttempts} rewrite attempts and reached limit of 9 max writes.`,"Reporting QuotaExceededError to API"))),M.tS((()=>()=>this.debouncedReportError({errorMessage:`Events cache failed to put ${g.key}. Got ${e}`,userId:this.userId.current}))),M.tS((()=>s.t$(e))))],s.t$]))),c=e=>s.tD((()=>{this.logDebug(`Successfully wrote events for ${g.key} after ${g.retryAttempts} attempts`),g.retryAttempts=0,g.sizeInBytes=2*JSON.stringify(e).length,g.sizeInBytesLastSuccessfulWrite=g.sizeInBytes})),u=(0,r.zG)((()=>g.events()),M.tS((e=>(0,r.zG)(n(e),M.mU(f.EQ(a,(()=>c(e)))))))),l=(e,t)=>(0,r.zG)(e.events,M.UI((r=>{const n=2*JSON.stringify(r).length,i=this.pruneEventsToSizeLimit(r,n,t);return e.events=M.of(i.events),e.sizeInBytes=i.sizeInBytes,t-e.sizeInBytes}))),d=(e,t)=>{let[n,...i]=e;return n&&0!==t?(0,r.zG)(l(n,t),M.tS((e=>(this.logDebug(`${e} left after pruning ${n.key}`),d(i,e))))):M.of((0,r.Q1)())},p=(0,r.zG)(s.tD((()=>this.eventsForPage.sizeInBytes-this.eventsForPage.sizeInBytesLastSuccessfulWrite)),s.fX(f.DT((e=>e>0),(e=>new Error(`${this.eventsForPage.key} failed to write the same or smaller events cache of size ${e}`)))),s.tS((e=>{const t=1.2*e,n=[this.eventsCache,this.eventsForPage];return this.logDebug(`Pruning ${t} bytes from`,n),(0,r.zG)(d(n,t),s.fF)}))),g={key:e,events:M.of([]),sizeInBytes:0,sizeInBytesLastSuccessfulWrite:0,retryAttempts:0,flush:()=>(0,r.zG)(M.tD((()=>this.trace.startSpan(`write_${g.key}`))),M.tS((e=>(0,r.zG)(u,M.At((()=>()=>e.finish()))))),t),reset:()=>(0,r.zG)(M.tD((()=>{g.events=M.of([]),g.sizeInBytes=0,g.sizeInBytesLastSuccessfulWrite=0})),M.tS((()=>i)),t)};return g}logDebug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.debug(K,...t)}logWarn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.warn(K,...t)}logError(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.error(K,...t)}logLog(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.log(K,...t)}}const X=()=>[],J=`permutive.${self.document?"main":"worker"}.`;class Z{config;shouldUsePerformanceMark=!1;constructor(e){this.config=e,this.shouldUsePerformanceMark=(self.performance?.mark&&this.config.tracingEnabled)??!1}startSpan(e){const t=this.generateSpan(e);return t.start(),{spanId:t.spanId,finish:t.finish}}measureSinceInit(t){const r=this.generateSpan(`${t}_since_init`);return r.start({startTime:e.NC}),{spanId:r.spanId,finish:r.finish}}traceTask(e){return t=>async()=>{const r=this.startSpan(e),n=await t();return r.finish(),n}}measureBetween(e,t,r){const n=this.generateSpan(e);n.start({startTime:t}),n.finish({startTime:r})}generateSpan(e){if(!this.shouldUsePerformanceMark)return{spanId:null,start:()=>{},finish:()=>{}};const{spanName:t,startMarkerName:r,endMarkerName:n}=Z.generateUniqueMarkerNames(e);return{spanId:r,start:e=>self.performance?.mark(r,e),finish:e=>{self.performance?.mark(n,{startTime:e?.startTime??performance.now()}),self.performance?.measure?.(t,r,n)}}}static generateUniqueMarkerNames(e){const t=`${J}${e}`,r=`${t}${Z.generateId()}`;return{spanName:t,startMarkerName:`${r}_start`,endMarkerName:`${r}_end`}}static generateId(){return"_"+Math.random().toString(36).substr(2,9)}}class ee{db;static version=3;static connect(t,n,i,a,o,c,u,f,l,d){return(0,r.zG)(s.Y3((()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,968))),String),e.N1,s.tS((e=>e.make(t,n,i,a,o,c,u,ee.version,f,l,d))),s.UI((e=>new ee(Promise.resolve(e)))))}constructor(e){this.db=e}shouldThrowStoreClosingError(e){return"NotFoundError"===e.name||"InvalidStateError"===e.name}makeStoreClosingDuringOpertationError(e){return new $(`Attempted ${e} when the current store is closing.`)}put(e,t){return(0,s.Y3)((()=>this.db.then((r=>r.put(e,t)))),(e=>{const t=(0,Q.w)(e);return this.shouldThrowStoreClosingError(t)?this.makeStoreClosingDuringOpertationError("put"):t}))}get(e){return(0,s.Y3)((()=>this.db.then((t=>t.get(e))).then(i.ij)),(e=>{const t=(0,Q.w)(e);return this.shouldThrowStoreClosingError(t)?this.makeStoreClosingDuringOpertationError("get"):t}))}delete(e){return(0,s.Y3)((()=>this.db.then((t=>t.delete(e)))),(e=>String(e)))}deleteStore(){return(0,s.Y3)((()=>this.db.then((e=>e.deleteStore()))),(e=>String(e)))}}const te=e=>{if(!e)return"";return(0,r.zG)(e,(e=>{const t=e.length-1;return"/"===e[t]?e.slice(0,t):e}))};class re{urls;config;network;metricsCollector;logger;webClient;prefix="[API]";constructor(e,t,r,n,a){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:()=>i.YP;this.urls=e,this.config=t,this.network=r,this.metricsCollector=n,this.logger=a,this.webClient=o}async reportError(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date;const o=(0,Q.w)(e);if(this.logError("Reporting error:\\n",o),!this.config.sendClientErrors)return void this.logDebug("Send errors not enabled. Skipping");const s=(0,r.zG)(this.webClient,R.UI(i.fS((()=>({domain:self.location?.hostname??"",referrer:"document"in self?self.document?.referrer:"",url:self.location?.href??"",user_agent:navigator?.userAgent??""})))),R.UI((e=>{const r={error_message:o?.message?.toString()??"",stack_trace:o?.stack?.split("\\n")},i=t?{user_id:t}:{};return{platform:"web",sdk_version:"v20.51.0",ql_runtime_version:"v14.1.0",timestamp:n,domain:e.domain,url:te(e.url),referrer:te(e.referrer),user_agent:e.user_agent,error_message:r.error_message??String(o),stack_trace:r.stack_trace,...i}}))),c=e=>this.network.req({url:this.urls.getSdkErrorsUrl("/errors",i.G(this.config.sdkErrorsApiVersion)),method:"POST",payload:[e],contentType:"text/plain",dataType:"text",withCredentials:!1}),u=e=>{this.metricsCollector.trackCounter({name:"sdk_http_generic_network_request_fail_count_total",value:1,labels:{network_error_type:e}})};await(0,r.zG)([l,d],a.Ew((e=>o.name===e.errorName||o.message.indexOf(e.errorName)>=0||o.message.indexOf(e.defaultMessage)>=0)),i.g_((()=>{const e=s();return c(e).catch((0,r.ls)(Q.w,(e=>this.logError(e))))}),(async e=>u(e.errorName))))}logDebug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.debug(this.prefix,...t)}logError(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.error(this.prefix,...t)}}var ne=__webpack_require__(987);const ie=e=>{const t=ae(e.javaScriptInput),{env:r,...n}=(0,ne.N)({hash:e.hash,runtimeInput:t});return n},ae=e=>{if(e&&"object"==typeof e)return e;throw new Error("Invalid runtime input specified.")},oe=("undefined"!=typeof globalThis?globalThis:void 0)?.crypto||("undefined"!=typeof global?global:void 0)?.crypto||("undefined"!=typeof window?window:void 0)?.crypto||("undefined"!=typeof self?self:void 0)?.crypto||("undefined"!=typeof frames?frames:void 0)?.[0]?.crypto;let se;se=oe?e=>{const t=[];for(let r=0;r<e;r+=4)t.push(oe.getRandomValues(new Uint32Array(1))[0]);return new ue(t,e)}:e=>{const t=[],r=e=>{let t=e,r=987654321;const n=4294967295;return()=>{r=36969*(65535&r)+(r>>16)&n,t=18e3*(65535&t)+(t>>16)&n;let e=(r<<16)+t&n;return e/=4294967296,e+=.5,e*(Math.random()>.5?1:-1)}};for(let n,i=0;i<e;i+=4){const e=r(4294967296*(n||Math.random()));n=987654071*e(),t.push(4294967296*e()|0)}return new ue(t,e)};class ce{static create(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return new this(...t)}mixIn(e){return Object.assign(this,e)}clone(){const e=new this.constructor;return Object.assign(e,this),e}}class ue extends ce{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4*e.length;super();let r=e;if(r instanceof ArrayBuffer&&(r=new Uint8Array(r)),(r instanceof Int8Array||r instanceof Uint8ClampedArray||r instanceof Int16Array||r instanceof Uint16Array||r instanceof Int32Array||r instanceof Uint32Array||r instanceof Float32Array||r instanceof Float64Array)&&(r=new Uint8Array(r.buffer,r.byteOffset,r.byteLength)),r instanceof Uint8Array){const e=r.byteLength,t=[];for(let n=0;n<e;n+=1)t[n>>>2]|=r[n]<<24-n%4*8;this.words=t,this.sigBytes=e}else this.words=e,this.sigBytes=t}static random=(()=>se)();toString(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe).stringify(this)}concat(e){const t=this.words,r=e.words,n=this.sigBytes,i=e.sigBytes;if(this.clamp(),n%4)for(let e=0;e<i;e+=1){const i=r[e>>>2]>>>24-e%4*8&255;t[n+e>>>2]|=i<<24-(n+e)%4*8}else for(let e=0;e<i;e+=4)t[n+e>>>2]=r[e>>>2];return this.sigBytes+=i,this}clamp(){const{words:e,sigBytes:t}=this;e[t>>>2]&=4294967295<<32-t%4*8,e.length=Math.ceil(t/4)}clone(){const e=super.clone.call(this);return e.words=this.words.slice(0),e}}const fe={stringify(e){const{words:t,sigBytes:r}=e,n=[];for(let e=0;e<r;e+=1){const r=t[e>>>2]>>>24-e%4*8&255;n.push((r>>>4).toString(16)),n.push((15&r).toString(16))}return n.join("")},parse(e){const t=e.length,r=[];for(let n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new ue(r,t/2)}},le={stringify(e){const{words:t,sigBytes:r}=e,n=[];for(let e=0;e<r;e+=1){const r=t[e>>>2]>>>24-e%4*8&255;n.push(String.fromCharCode(r))}return n.join("")},parse(e){const t=e.length,r=[];for(let n=0;n<t;n+=1)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new ue(r,t)}},de={stringify(e){try{return decodeURIComponent(escape(le.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:e=>le.parse(unescape(encodeURIComponent(e)))};class pe extends ce{constructor(){super(),this._minBufferSize=0}reset(){this._data=new ue,this._nDataBytes=0}_append(e){let t=e;"string"==typeof t&&(t=de.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes}_process(e){let t;const{_data:r,blockSize:n}=this,i=r.words,a=r.sigBytes;let o=a/(4*n);o=e?Math.ceil(o):Math.max((0|o)-this._minBufferSize,0);const s=o*n,c=Math.min(4*s,a);if(s){for(let e=0;e<s;e+=n)this._doProcessBlock(i,e);t=i.splice(0,s),r.sigBytes-=c}return new ue(t,c)}clone(){const e=super.clone.call(this);return e._data=this._data.clone(),e}}class ge extends pe{constructor(e){super(),this.blockSize=16,this.cfg=Object.assign(new ce,e),this.reset()}static _createHelper(e){return(t,r)=>new e(r).finalize(t)}static _createHmacHelper(e){return(t,r)=>new me(e,r).finalize(t)}reset(){super.reset.call(this),this._doReset()}update(e){return this._append(e),this._process(),this}finalize(e){e&&this._append(e);return this._doFinalize()}}class me extends ce{constructor(e,t){super();const r=new e;this._hasher=r;let n=t;"string"==typeof n&&(n=de.parse(n));const i=r.blockSize,a=4*i;n.sigBytes>a&&(n=r.finalize(t)),n.clamp();const o=n.clone();this._oKey=o;const s=n.clone();this._iKey=s;const c=o.words,u=s.words;for(let e=0;e<i;e+=1)c[e]^=1549556828,u[e]^=909522486;o.sigBytes=a,s.sigBytes=a,this.reset()}reset(){const e=this._hasher;e.reset(),e.update(this._iKey)}update(e){return this._hasher.update(e),this}finalize(e){const t=this._hasher,r=t.finalize(e);t.reset();return t.finalize(this._oKey.clone().concat(r))}}const be=[];class he extends ge{_doReset(){this._hash=new ue([1732584193,4023233417,2562383102,271733878,3285377520])}_doProcessBlock(e,t){const r=this._hash.words;let n=r[0],i=r[1],a=r[2],o=r[3],s=r[4];for(let r=0;r<80;r+=1){if(r<16)be[r]=0|e[t+r];else{const e=be[r-3]^be[r-8]^be[r-14]^be[r-16];be[r]=e<<1|e>>>31}let c=(n<<5|n>>>27)+s+be[r];c+=r<20?1518500249+(i&a|~i&o):r<40?1859775393+(i^a^o):r<60?(i&a|i&o|a&o)-1894007588:(i^a^o)-899497514,s=o,o=a,a=i<<30|i>>>2,i=n,n=c}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+a|0,r[3]=r[3]+o|0,r[4]=r[4]+s|0}_doFinalize(){const e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=Math.floor(r/4294967296),t[15+(n+64>>>9<<4)]=r,e.sigBytes=4*t.length,this._process(),this._hash}clone(){const e=super.clone.call(this);return e._hash=this._hash.clone(),e}}const _e=ge._createHelper(he),ye=(ge._createHmacHelper(he),{stringify(e){const{words:t,sigBytes:r}=e,n=this._map;e.clamp();const i=[];for(let e=0;e<r;e+=3){const a=(t[e>>>2]>>>24-e%4*8&255)<<16|(t[e+1>>>2]>>>24-(e+1)%4*8&255)<<8|t[e+2>>>2]>>>24-(e+2)%4*8&255;for(let t=0;t<4&&e+.75*t<r;t+=1)i.push(n.charAt(a>>>6*(3-t)&63))}const a=n.charAt(64);if(a)for(;i.length%4;)i.push(a);return i.join("")},parse(e){let t=e.length;const r=this._map;let n=this._reverseMap;if(!n){this._reverseMap=[],n=this._reverseMap;for(let e=0;e<r.length;e+=1)n[r.charCodeAt(e)]=e}const i=r.charAt(64);if(i){const r=e.indexOf(i);-1!==r&&(t=r)}return((e,t,r)=>{const n=[];let i=0;for(let a=0;a<t;a+=1)if(a%4){const t=r[e.charCodeAt(a-1)]<<a%4*2|r[e.charCodeAt(a)]>>>6-a%4*2;n[i>>>2]|=t<<24-i%4*8,i+=1}return ue.create(n,i)})(e,t,n)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="});const ve=function(e){let t=i.YP;const r=i.fS((()=>{const r=e();return t=i.G(r),r}));return()=>r(t)}((()=>({metadata:{192971:"0c8b70cdb7",201901:"c3cb60225f",201910:"d2f664deef",202140:"afc35ed9e1",202279:"d400bb52a2",202280:"57c780e874",202281:"8ff570f0c3",202282:"52b088384d",202284:"ae5f9e3d5a",202286:"1c11b95187",202287:"56c53a9c9a",202288:"3bda6cded7",202289:"bd8504ad08",202290:"e776f20186",202291:"828d0aa06b",202292:"951d4c7de0",202293:"979b5b0131",202294:"6bc7a26bc4",202295:"3a36c962ec",202296:"db6aef9cfc",202297:"6af5206991",202298:"0c519d4eb1",202299:"3afec78546",202300:"0943b95a71",202301:"557be3f759",202302:"f8d6093d8d",202303:"1bcdcbba77",202304:"897b53c777",202305:"4c65af6f31",202306:"f07e1b023d",202307:"c570759074",202308:"6e87412056",202309:"a8e54b288a",202311:"73c8c4456d",202325:"73766a4b6a",202326:"ccb3a44fad",202327:"94d6ed2c6e",202328:"86b29a7357",202329:"71aef6d327",202330:"3862b11808",202331:"00bd0d4813",202332:"b61e5d920c",202333:"b60b05e41b",202334:"05aa11473e",202335:"4e4a248df8",202336:"6b7256dca2",203261:"376244e82c",208882:"f85c79cfff",211184:"d53660b249",211185:"630a6f3847",211186:"a5ef1dede1",223407:"b8d0f02403",223408:"7fa492fb16",223410:"c2149e5b4d",223415:"e7ffb45c3d",223418:"e0934a8ec8",223419:"71bb4461c7",223421:"f313448cb4",223422:"4652d8a324",223424:"5ce2d79bed",223426:"e076b58126",223427:"5b01e29d80",223430:"c205bc293b",223431:"2a021f95e9",223432:"b5b3f05a83",223433:"980578741c",223477:"7e0d6631fa",223478:"364c5c257e",223479:"22f5d0f123",223480:"46518c66eb",223482:"64fd756a65",223483:"06259938b3",223484:"45999351d6",223485:"213817791b",223486:"b8d932f7f0",223487:"03dfe8831b",223488:"584985be76",223732:"3de607a450",223733:"fdaa68528d",223735:"fc517c2dc0",223736:"3d08772644",223737:"d41de19dd7",223738:"81059004e3",223739:"d615ca5c62",223740:"89d9da5f9e",223741:"a40108180a",223742:"457ef25177",223743:"5f90034d62",223744:"28883ae0eb",223745:"69d4090875",223746:"e77c97ca41",223747:"a86e504bf9",223748:"06b972bc46",223749:"afcf7e3947",223750:"2c4534b787",223751:"afd34c2767",223752:"bc7483e1de",223753:"0893fe00f4",223754:"5589176cf6",223755:"17461040a8",223756:"1a2a5af554",223757:"e3dd8efeb2",223758:"15e27bf82b",223759:"613ce16112",223760:"4b72cd99ae",223761:"5c844ed6eb",223762:"7b35f9d093",223763:"3d0be58022",223764:"3162bc921c",223765:"8889f7f399",223766:"ea0fcf5f7a",223767:"cef708596e",223768:"446b1982f4",223769:"4ff860cb15",223770:"7ec97a2b72",223771:"a287baeacf",223772:"bbe2b86f56",223773:"d014fd2d43",223774:"30c6006ee6",223775:"dff8acd111",223776:"70ef1626b2",223777:"f8372010db",223778:"12b7e9ad5d",223779:"f40ee98c4e",223780:"68a4a12a18",223781:"72eb89d7b4",223782:"a16377fa1f",223783:"f3091b0662",223784:"27bf704e9a",223785:"7d77183c54",223786:"6274b8ac3d",223787:"c838f8b6fe",223788:"b9d1b757ef",223789:"7279104020",223790:"5ed8409575",223791:"e1cf282ed5",223792:"b341a971b1",223793:"215676c8b3",223794:"c9f9913d29",223795:"1f42dffd02",223796:"b7d90739ba",223797:"6e08ac3fbe",223798:"a2c604ed85",223799:"6c6429cc71",223800:"0959930947",223801:"5426d34b03",223802:"4c19049155",223803:"731397cfe9",223804:"c3c6cebc72",223805:"499ab9ad89",223806:"f228e7d0e5",223807:"414de34be9",223808:"2ff482ca70",223809:"fd4ac92831",223810:"692bf0f52b",223811:"b3ae57a4e0",223812:"ab3aec0fb3",223813:"6a09a12193",223814:"c8f489c04a",223815:"1b89bbb503",223816:"86d365ac78",223817:"53d68438d3",223818:"f390f59e55",223819:"375b42e6f1",223820:"c7938639c4",223821:"6c07864acb",223822:"201b2186a3",223823:"e98acef402",223824:"16304a7f5a",223825:"d0f16e1e93",223826:"30ff282305",223827:"98ee9d18f3",223828:"298cede8a3",223829:"d4bfbd5cb9",223830:"dbe33ee4d1",223831:"82a4c67ced",223832:"e47b298ccd",223833:"add84f1f9f",223834:"908a64a337",223835:"aba5c921d6",223836:"afd9ba6a19",223837:"9c6bfb4295",223838:"fb5cb3ab8d",223839:"ea6379f257",223840:"099fb6351b",223841:"db7ba485ef",223842:"10d1f83abf",223843:"d35bcb4209",223844:"f781cc50e7",223845:"51f3b4dd5b",223846:"93de402b03",223847:"1f377b555a",223848:"93ba332bca",223849:"8e8f6360e6",223850:"7b57b52e5a",223851:"a794b33ee6",223852:"dbd016ff59",223853:"c3f482ed73",223854:"bae954f1cf",223855:"9779402277",223856:"f6ae5790dd",223857:"c5e9e7bb65",223858:"1fbbed7cf8",223859:"f17a33286c",223860:"fe64f019eb",223861:"e99d20d566",223862:"a1d7cd26ed",223863:"93595855a6",223864:"51cc844de9",223865:"d559b47a76",223866:"496270ea1f",223867:"c795cfd26c",223868:"11db16598b",223869:"740cb21442",223870:"1bc8f7c359",223871:"6d541db33b",223872:"44b19d01c3",223873:"56ac541c48",223874:"b57124da43",223875:"4b7b25ed9c",223876:"138fbfc2e3",223877:"00d5e86d6d",223878:"fde11f90e3",223879:"78cf5ca7b3",223880:"d54fb04c3f",223881:"52810d0d8c",223882:"0e3419d799",223883:"d83e3061fc",223884:"abdf73111c",223885:"e5fec79cae",223886:"0073b2b42c",223887:"512ef38c59",223888:"fe2fc6d65c",223889:"2034a4c72a",223890:"44945ffccb",223891:"7514ac9d66",223892:"40d7707d75",223893:"713531aee9",223894:"78096a4dec",223895:"4220c90bf8",223896:"a6e7563e21",223897:"f74f9ba5a1",223898:"7f5bde6b16",223899:"0b716d1ec4",223900:"01b3b70e5c",223901:"8a0495ef50",223902:"304eabe0cc",223903:"0707dc7f67",223904:"2908cdc74f",223905:"47b6dc286d",223906:"4c418ae6f9",223907:"ad5650891c",223908:"e619ccfa76",223909:"11f2ec6bea",223910:"37513eacce",223911:"6bbe85ed1b",223912:"30ba3a4c32",223913:"f0301aea12",223914:"cb0d3002a8",223915:"e7cb65f54c",223916:"4fe386ec0c",223917:"5ad9c91ec4",223918:"cb8c36b402",223919:"4151fb85f6",223920:"a8676fbe55",223921:"6ae8dcb07b",223922:"48a5806652",223923:"ed88a82232",223924:"15e5976e7e",223925:"5c1f12b71f",223926:"a4e2665ad1",223927:"432c8643b3",223928:"650d1aba20",223929:"f465e728b9",223930:"272d9331f1",223931:"325bad9688",223932:"1c115e80cb",223933:"b2572cc6be",223934:"676fdfcce7",223935:"482972bb4c",223936:"53a43dac06",223937:"e23483857b",223938:"15c5beef16",223939:"5c1dc533ef",223940:"8fc797a7c2",223941:"96ff6a8b2c",223942:"07e39389b0",223943:"347137d185",223944:"081204dec8",223945:"4cb1016a9d",223946:"bb4be4f772",223947:"699053cc20",223948:"f3790f5bf9",223950:"4e677f4ba3",223951:"2bcf214d5a",223952:"352fc98dab",223953:"4e8935e973",223954:"6e3d8b7493",223955:"c2a59bdc68",223956:"3585ed2e14",223957:"8116222aa4",223958:"eaf8a16b49",223959:"f506e43c09",223960:"e10178ab97",223961:"ca366668b7",223962:"14d623c8ad",223963:"d2abb40b77",223964:"c32cdcb25f",223965:"2f0c466863",223966:"aae435e9f3",223967:"5dc8a0ec11",223968:"b104829f5a",223969:"b214f167f9",223970:"02f67edc68",223971:"79bc7267e2",223972:"75e526bbb8",223973:"bcac48cfb7",223974:"523ce1db2e",223975:"029ed07a3c",223976:"4f21c4216a",223977:"9ee6d8d378",223978:"2d4aa41e7a",223979:"a0fd40d0b7",223980:"b0abebb797",223981:"d8e4fa8874",223982:"dfce9e8c3e",223983:"e5ecc1e8b8",223984:"cbc505244b",223985:"37c46b0fbc",223986:"86ba462c6e",223987:"b4945a575b",223988:"6b64e41689",223989:"1213c7a537",223990:"32a16c5352",223991:"a407ed1b33",223992:"0c4f1f5327",223993:"1bbc672b41",223994:"dd980c02e2",223995:"79e01b0ac6",223996:"ed87277b19",223997:"1c842d2b05",223998:"dfc9ba39f2",223999:"4a1137849a",224e3:"2dd7d23702",224001:"406fb66cf3",224002:"7ed65788ae",224003:"5916659abb",224004:"eca7a37ac1",224005:"ebcd6b2c0b",224006:"2eedacd42a",224007:"83197c9b5e",224008:"f7d22b8f59",224009:"60ea88b639",224010:"1b43623112",224011:"41fc827616",224012:"6c2f011218",224013:"6daea7b7ee",224014:"9d05796227",224015:"1bd5a2e5a6",224016:"703d931791",224017:"a10f8eb6b5",224018:"5963788464",224019:"ff38fd82b2",224020:"37824a7c97",224021:"00f352c023",224022:"2d0f09f508",224023:"f41e5e0dfb",224024:"61da120efb",224025:"1444b14caf",224026:"ba4104f81f",224027:"8c7e519ff8",224028:"4031f1bbb3",224029:"534d75a3c9",224030:"672d88498b",224031:"6cb3e9d19f",224032:"fbab62da60",224033:"d348c07071",224034:"c47afad3ac",224035:"6ca8efdbc3",224036:"f266f44ec0",224037:"93ad022c85",224038:"efb7a1d447",224039:"2d0a26f1af",224040:"fa3176deae",224041:"5224e2af27",224042:"a7853891cd",224043:"059b7aaa8d",224044:"9207921484",224045:"d8c1e774ae",224046:"bc4056c328",224047:"dda0ceada6",224048:"59bb78512b",224049:"64a4ef3415",224050:"aed627a44a",224051:"afa9fe0854",224052:"56e8da4a1b",224053:"d81038fe9c",224054:"134a490b31",224055:"a322e4a35b",224056:"ba2d1b43db",224057:"d39ed038e7",224058:"4b99e8e582",224059:"d777b6ec45",224060:"c65986d053",224061:"791a4e06d2",224062:"483f5e7aec",224063:"490f765785",224064:"cabfe77426",224066:"5f441a12af",224067:"bfdfc592ac",224068:"ead39b2e01",224069:"76f2fcff65",224070:"69373addc9",224071:"ba2d1653d9",224072:"3efaf1d3e6",224073:"fd0c4fbdd8",224074:"89c919c9be",224075:"f0f3591e4e",224076:"f48e0521f9",224077:"94c338a06e",224078:"017b1d8586",224079:"95e94f92cf",224080:"01820c10b4",224081:"51ecf51907",224082:"039ee8a86f",224083:"4563a95d35",224084:"b3b648a784",224085:"9b9e90d9d4",224086:"441e91ea0d",224087:"92c341ccbf",224088:"eb7a9239f8",224089:"2f1788bf99",224090:"5de4fecc0f",224091:"448f8a090d",224092:"998e9fe1cd",224093:"50a13ea3c9",224094:"58c117fa67",224095:"ee4411a42f",224096:"1f8945a781",224097:"9a2b17464b",224098:"43fb800a76",224099:"3c26ce20a3",224100:"4235f94ac1",224101:"2f886bcec1",224102:"346ad28d17",224103:"a3b1e47285",224104:"da2d6c25bc",224105:"12d98749b7",224106:"d8445261ff",224107:"13db9c464b",224108:"2b95bfaba2",224109:"40d5a1dcb3",224110:"ff43dea9e3",224111:"fa9c98b4ad",224112:"7929335a81",224113:"00d998a281",224114:"f8ff871e63",224115:"13173335ed",224116:"2051e56163",224117:"ad6224d0ab",224118:"e8fc214256",224119:"48ad04dcf3",224120:"91da19c948",224121:"c6ecccc271",224122:"f678f86caf",224123:"68de59b100",224124:"fdcffb371d",224125:"e6b2006cc7",224126:"c614715547",224127:"83b0b8c5f7",224128:"ef5cc18af4",224129:"693500d8fb",224130:"a036656d4c",224131:"2b75482d37",224132:"58205f661e",224133:"2d1f72753c",224134:"cdfcaa5a7f",224135:"bac3630bf0",224136:"efd3f99b67",224137:"1e5f862b97",224138:"91eb2ac322",224139:"8295a9bac5",224140:"74d16fac57",224141:"ac38b21366",224142:"45bca8099c",224143:"057452d0b7",224144:"e65f1930a4",224145:"01ee051236",224146:"eda69940d3",224147:"c1f281f11e",224148:"d25c14b105",224149:"99a56803fc",224150:"bd0df083b2",224151:"25b91bcfff",224152:"a773f97928",224153:"3ba64d8acc",224154:"aa9a6b8120",224155:"9633037403",224156:"346bfc1ff6",224157:"857da84ca4",224158:"0f06037766",224159:"0f2bf14f3c",224160:"ca0a17eabe",224161:"af8624b694",224162:"ef97245ac7",224163:"13aea85015",224164:"24ae7dc1d7",224165:"25ca67493c",224166:"731edb91e3",224167:"abf4e44817",224168:"15c5f1dc70",224169:"06f23ec69b",224170:"396b909c05",224171:"38b3fcd9e9",224172:"1ff47143ac",224173:"fb5d5ae3cc",224174:"214c468b98",224175:"8e6afb3cc5",224176:"14c3a805ae",224177:"443bf2b0eb",224178:"dcae4feaac",224179:"ae32fbfe08",224180:"fbc9e795ff",224181:"54215757d5",224182:"c4b39c6b1f",224183:"d45bb01781",224184:"22330b001a",224185:"4c550a5852",224186:"c948fb050c",224187:"499e4a6cd2",224188:"2532631dff",224189:"6d9394f1d6",224190:"b243479eed",224191:"b2809705af",224192:"2635dc16ec",224193:"7d40f964aa",224194:"e85bfead63",224195:"a99c507fec",224196:"d984119752",224197:"92ae293920",224198:"1292ed497e",224199:"4e6d5ed3e5",224200:"8b33b275cc",224201:"9647c3e14f",224202:"719d7cda0d",224203:"51ed61983e",224204:"40a532ab55",224205:"8c662c484b",224206:"e00445010f",224207:"ee540b7a6a",224208:"480cd79ddb",224209:"9c2be0e050",224210:"d6879a208c",224211:"864392c04d",224212:"e385780926",224213:"6d714f5053",224214:"89b103e6c2",224215:"503221f709",224216:"d3b23d9d14",224217:"3e50980b81",224218:"883f11c6b6",224219:"54e1782e8d",224220:"ba84de86ff",224221:"f0a748a837",224222:"b7cbb9f879",224223:"05caff1588",224224:"2f6a930b5f",224225:"c37bb4d2fb",224226:"452fce6963",224227:"1e9e84211b",224228:"6691d54896",224229:"b31a4c15cd",224230:"af0bb8fc74",224231:"7f492e2368",224232:"f96bc04e45",224233:"9aa8b345c2",224234:"70cb6ec3bf",224235:"ae6b7b1404",224236:"33b6b3036c",224237:"3ed6244870",224238:"b78c371b0d",224239:"0deeb1faa6",224240:"a1497726d6",224241:"34fce8e3e1",224242:"0473e029b2",224243:"3cc6a2d353",224244:"4f4dc4d224",224245:"7437e8e468",224246:"ace95d5a46",224247:"8150d61895",224248:"1e7689ba1e",224249:"fccbc5e734",224250:"0674904dae",224251:"a3f775b3c7",224252:"104f52de63",224253:"7eb7b01f46",224254:"0426e1891c",224255:"27e9fd38c2",224256:"801e82900c",224257:"358ef95ed0",224258:"fe0aabb2ab",224259:"9fba6629fa",224260:"046423b5c7",224261:"911fe98af2",224262:"a2d4363e20",224263:"9b47d90be7",224264:"68eb6a7c2d",224265:"daec63d813",224266:"c4f96b97a7",224267:"8e57620736",224268:"5170c0639b",224269:"c31b421ff3",224270:"7e76b1b31e",224271:"66fbc753a7",224272:"112f233af7",224273:"65f76fa0f4",224274:"7ded03bff0",224275:"c7298bad06",224276:"0b3db016f2",224277:"a4bc3d96af",224278:"6fa681c055",224279:"3fb6928d9d",224280:"16e0da22a6",224281:"c162c197ca",224282:"c03e2ffcd1",224283:"545f832584",224284:"8c490c81a1",224285:"3ea2378463",224286:"525801e245",224287:"e75a564653",224288:"85d2707d36",224289:"c1d67cfc2a",224290:"d227891ea0",224291:"3f6f8de138",224292:"a32eaaf758",224293:"1ec793f323",224294:"7b94445aaf",224295:"82f0893a32",224296:"322e1345c8",224298:"39c5455cb6",224299:"38b739cb84",224300:"5fd0615882",224301:"81ca0c956d",224302:"d9829611b0",224303:"e81062830f",224304:"d8bc6f904c",224305:"3d2d23d496",224306:"fce40abeb1",224307:"00b68324dc",224308:"a1d869b8f0",224309:"67c3b2c3be",224310:"c8378077a3",224311:"803a90e19f",224312:"7a7174aeef",224313:"2447832471",224314:"7dc66f5a35",224315:"e2d195478b",224316:"283713404c",224317:"92f3c287e9",224318:"2173ccd343",224319:"05f83abd21",224320:"feba5f0966",224321:"1e8a82db47",224322:"ccd8188ce9",224323:"c64d9e9b82",224324:"5f3d3154eb",224325:"ccdecf6aa6",224326:"bbf946c88a",224327:"3a85701997",224328:"bf4810a9b7",224329:"ef47af397b",224330:"6e9ec2c13b",224331:"e04a4527f8",224332:"b337fc904a",224333:"2866531b61",224334:"89e6e7086e",224335:"e6d56493b3",224336:"e727fee5f2",224337:"0ee835626d",224338:"b458ebb4be",224339:"ab26d63847",224340:"3022db792b",224341:"c621933183",224342:"6c2d51e798",224343:"8a1beb565b",224344:"947a6caafa",224345:"c2455c7b0a",224346:"3a9847aa30",224347:"4179aff30e",224348:"e170a17ed5",224349:"30caa53dc6",224350:"b39e21a290",224351:"fd59af306e",224352:"4d4b1482cb",224353:"0617aaf386",224354:"76bc6eee79",224355:"62465eacc9",224356:"57cc209e81",224357:"45c73327fc",224358:"cb220a8f54",224359:"364a5d7fdc",224360:"e76fd8e6ba",224361:"d42a2454f5",224362:"7779413b96",224363:"8067cf0543",224364:"a2d34356a7",224365:"4cf7ca6fd9",224366:"a99d74f832",224367:"5a1b84682c",224368:"fe3926ca58",224369:"377b40bb5d",224370:"8b7e24f93a",224371:"987a91b872",224372:"4f908a490e",224373:"16b0c1fc53",224374:"cc6f2ef362",224375:"75285f4a6e",224376:"0cabcca02a",224377:"633e19911f",224378:"de1246d5ea",224379:"d4a216083c",224380:"5491cd6654",224381:"5ba09e3266",224382:"3ff3bb9a81",224383:"1637e41189",224384:"5dc50835e5",224385:"e1d6ba473d",224386:"e668dd950c",224387:"bcc4f7025f",224388:"e1bee4484a",224389:"3de535dc1e",224390:"fdb2a8c64b",224391:"5c36ebd1de",224392:"5599f33ce2",224393:"1fcd8dd996",224394:"f38bce7c94",224395:"d6cab17680",224396:"93ea2322cd",224397:"9aa5d08bb7",224398:"6cefceea9f",224399:"90f95a8d53",224400:"6485777f9b",224401:"eb667bdf43",224402:"4a5e9682db",224403:"09cd1197d8",224404:"1d2b881af9",224405:"07dd86936c",224406:"0e0c9d0897",224407:"68cc9bb7ce",224408:"1817947d35",224409:"ea5df4664a",224410:"ca3586cdd0",224411:"38a1309df0",224412:"dca73f9f35",224413:"54ace91a62",224414:"18e6561d04",224415:"e4707b457d",224416:"225b77da03",224417:"5e1b8d592c",224418:"65e25fd422",224419:"d0b1ef79c0",224420:"0f8041015d",224421:"9424085e77",224422:"5bd92ff0f8",224423:"06c26e79f1",224424:"e9bcdd66fd",224425:"1a97e1217d",224426:"5b3f00e512",224427:"52e9f9e097",224428:"c2ed1ad4f3",224429:"9f851cedac",224430:"a46cdfe395",224431:"04ece2b7a7",224433:"42218cfd0c",224434:"1009d4671d",224435:"85a9625237",224436:"5989f40ff2",224437:"e3fa3f2b57",224438:"f0ba8b685c",224439:"2cef47f123",227114:"000a0ec173",227748:"89bbcbf924",227756:"0db71d09d4",227765:"1c83d88d83",227771:"560ad9b662",227775:"0ece9557bb",227777:"5203b1b64a",228024:"c689450da7",228091:"2fe33750f2",228169:"c29c7574f3",228283:"0d17f18539",228284:"abd1ad27f1",228288:"fc60ee73df",228325:"6dc3b90ff2",230350:"6cd1f58e4a",230352:"5c84125aa2",230353:"a36b535552",230355:"c8c83d50b1",230356:"52f7ff1150",230357:"72c8078dc5",230386:"296d193ef0",230387:"33249ea56a",230893:"268a6b5e4c",231485:"66c611634c",231568:"98555d8c56",231573:"98146ab6e7",231575:"918750482e",231615:"abfef92b2c",231616:"30e52aad70",231734:"d6d47d5409",231735:"768372fb73",231736:"0bb261b3ed",231737:"c19023d0a4",231738:"cb2bb9b91a",231739:"34f285344a",231740:"ef262f830a",231741:"2f6493cbcc",231743:"a4b94889a4",231744:"b070f78073",231745:"c0ea7c5e9d",231746:"be437c75e1",231747:"e9239b483e",231748:"1361b7ab3f",231749:"333df33edd",231750:"20a5bddba3",231751:"7c88605201",231752:"a7fdbf13f4",231753:"56b806b804",231754:"1fcc42089a",231755:"377b8dd5f3",231756:"a8b098c851",231757:"cb20f1744b",231758:"3ba9e72596",231759:"b4ce575a99",231760:"f4bbe4e3e4",231761:"0ddc57daa3",231762:"7b84e3f642",231763:"d2d068d19b",231764:"b6e6c628b7",231765:"1b5c316184",231766:"27a437c0a4",231767:"6658b71a53",231768:"4f669f50a3",231769:"66373c9bc4",231772:"e54c66e6e4",231980:"366f10aa7a",232334:"2da49317a3",232643:"79f4a2d706",232644:"922beae919",232645:"2cc4b24073",232646:"18e2ed7c10",232647:"0a9b6074ee",232648:"2761222bab",232649:"c3580c480e",232650:"4f643512c9",232651:"e5c5182ac6",232652:"97a500c52a",232803:"9e39c1aa02",233814:"58d8890d46",233932:"a97b72db8b",233934:"64e69c486f",233935:"84e0aeb6f0",233936:"caee37edb8",233937:"1de8aa1c16",233938:"245a70d0ee",234194:"4439823f24",234208:"a0d707d2fc",234209:"7091257f69",234287:"4f7b212e88",234288:"96eba20c02",234289:"3c006a5e17",234290:"ec7394aa46",234291:"7858b3b489",234292:"74ca4ea527",234293:"f8ffbd7152",234294:"ee4f4b8ea0",234649:"c95ee1c5b3",234650:"edf825f0f7",234652:"ea6ce30b14",234823:"d22701904b",234824:"ce1bfb3d61",234826:"b1a9872fc9",234827:"fc500162ed",234832:"9eb39f9ce2",234837:"9c398d6f4c",234838:"59b4b942f9",235158:"c87f10d739",236868:"74a20053b6",236872:"065571bda8",236887:"dabd080ab3",236888:"9e098dd169",236889:"81578e631b",237973:"4740e101a6",238700:"59f9d68b95",238938:"1afa737eb3",239060:"52d168c9ff",239441:"da4ca9f404",239442:"3dad6a3cfa",239443:"076feaa445",239444:"56d0041d55",239445:"bebf058d30",239446:"335442091b",239488:"5e1b118876",239491:"5e0b581d6b",239917:"49257c07ec",239918:"6a4f9826e1",239920:"5055473233",239922:"1d1711b1d1",239927:"db765373d5",239929:"60de3aeb8c",239951:"37207c447b",240040:"fd2ce262f9",240048:"df74021af2",240260:"7714bded7d",240261:"6342f08394",240347:"388b042584",240348:"86fc665b83",240349:"a98f062349",240350:"5d4cd19d52",240351:"854d3d7eb1",240352:"e53312a190",240353:"860fd93a1e",240354:"72c3e70186",240358:"e8ddc0bf9c",240359:"2dc75c74e4",240360:"4a26635c76",240361:"ea99eb8bf5",240362:"0c37dcf787",240363:"454485bf01",240364:"9dd8589057",240365:"3f1011aaf5",240366:"f7a9180aa9",240367:"278bf8e783",240368:"f5d0b20562",240369:"569b85211a",240370:"cf75117684",240371:"cb20f140b7",240372:"1037213e75",240373:"a8c8a151fb",240550:"a842f54f4e",240741:"c6b5dbc576",240744:"5578ac3647",240746:"6e2b0d3b0c",240748:"ea4865dcc8",240769:"961b2c3f75",240770:"2dcc4e2d90",241122:"a3e41bd253",241123:"85012ab923",241125:"a0c4e261f6",241126:"a49f069e66",241127:"afa7b8edce",241128:"a72adfe67f",241363:"62e7581c8f",241364:"92b35ded9a",241365:"5524067706",241366:"4a2af18392",241459:"9a871ac710",241460:"3634640795",241461:"61a058f0b5",241462:"850b32d4e7",241522:"61df54494e",241718:"6a20cadfcc",241767:"3149e43740",241768:"e0bbc13e61",241792:"b23ee9a962",241793:"dbe946774a",241802:"5c6858544c",241936:"01c1759b51",242075:"b3d6116504",242077:"854e5d2bbd",242258:"2eeacfdc51",242262:"5a4df7bb05",242383:"b1ce94a6a7",242478:"79257eff87",242479:"626701d1b6",242946:"adbd1d83c0",242947:"5f3924aa85",242993:"b0b95f6fca",242994:"c5a34793bd",243037:"6033dd7236",243038:"0516b564f5",243039:"75ec951577",243040:"4d0779ab9c",243087:"d6ce17936a",243126:"affb8a916a",243347:"4297369b7a",243392:"0c89120ae7",243493:"a5bc73551c",243542:"5bdd828e72",243543:"128c4796a4",243561:"cbbe6c3c53",243759:"c284989a66",243862:"4d32df6d97",243871:"31ff33f78f",243872:"dbe5f46791",243873:"5c33c164ea",243874:"0e5876f82b",243974:"cba8f4ea21",243975:"6cd1fbc8d0",243976:"13cf26ae27",243977:"e7ce97b910",243978:"6db9b901d5",244387:"4e46e5413a",244678:"adf6d04a68",244680:"8ab6f7ecf3",244681:"7ca9dbe061",244891:"ea240e2eca",244914:"affb8a916a",245817:"9aca23a8d9",245818:"5a8a3fb778",245819:"3f879999d9",245820:"dc218be5ba",245826:"ad767a2829",246099:"dfef4eeb12",246100:"04710e0c1e",246101:"038e05bbe9",246110:"5ea2500de9",246658:"e2ed7d64b1",246659:"a437d13abc",246705:"7d47448915",246820:"a06e3adb41",246821:"e0872a9ce8",246822:"9ff06f80b4",246823:"431bf47e1d",246825:"2f7cc087f8",246830:"bfb048b39c",246832:"9df2fc5235"},runtime:ie({hash:function(e){return _e(e).toString(ye).slice(0,8)},javaScriptInput:{ahoCorasickLookup:e=>[],eventSegments:e=>({"!UpdateLookalikeModels":["203261","232643","232644","232645","232646","232647","232648","232649","232650","232651","232652","233932","233934","233935","233936","233937","233938","234287","234288","234289","234290","234291","234292","234293","234294","236868","236887","236888","236889","241122","241123","241125","241126","241127","241128","241459","241460","241461","241462","242262","246705"],"!UpdateSecondPartyData":["211184","211185","211186","230350","230352","230353","230355","230356","230357","230386","230387","231485","231568","231573","231575","231615","231616","231734","231735","231736","231737","231738","231739","231740","231741","231743","231744","231745","231746","231747","231748","231749","231750","231751","231752","231753","231754","231755","231757","231758","231759","231760","231761","231762","231763","231764","231765","231766","231767","231768","231769","232803","234194","234832","237973","239060","239441","239442","239443","239444","239445","239446","240260","241363","241364","241365","241366","241522","241718","242993","242994","243087","243493","243561","243759","243862","244678","244680","246099","246100","246658","246659"],Ecommerce:["241802"],LinkClick:["202284"],Pageview:["192971","202279","202280","202281","202282","202286","202287","202288","202289","202290","202291","202292","202293","202294","202295","202296","202297","202298","202299","202300","202301","202302","202303","202304","202305","202306","202307","202308","202309","202311","223407","223408","223410","223415","223418","223419","223421","223422","223424","223426","223427","223430","223431","223432","223433","223477","223478","223479","223480","223482","223483","223484","223485","223486","223487","223488","223732","223733","223735","223736","223737","223738","223739","223740","223741","223742","223743","223744","223745","223746","223747","223748","223749","223750","223751","223752","223753","223754","223755","223756","223757","223758","223759","223760","223761","223762","223763","223764","223765","223766","223767","223768","223769","223770","223771","223772","223773","223774","223775","223776","223777","223778","223779","223780","223781","223782","223783","223784","223785","223786","223787","223788","223789","223790","223791","223792","223793","223794","223795","223796","223797","223798","223799","223800","223801","223802","223803","223804","223805","223806","223807","223808","223809","223810","223811","223812","223813","223814","223815","223816","223817","223818","223819","223820","223821","223822","223823","223824","223825","223826","223827","223828","223829","223830","223831","223832","223833","223834","223835","223836","223837","223838","223839","223840","223841","223842","223843","223844","223845","223846","223847","223848","223849","223850","223851","223852","223853","223854","223855","223856","223857","223858","223859","223860","223861","223862","223863","223864","223865","223866","223867","223868","223869","223870","223871","223872","223873","223874","223875","223876","223877","223878","223879","223880","223881","223882","223883","223884","223885","223886","223887","223888","223889","223890","223891","223892","223893","223894","223895","223896","223897","223898","223899","223900","223901","223902","223903","223904","223905","223906","223907","223908","223909","223910","223911","223912","223913","223914","223915","223916","223917","223918","223919","223920","223921","223922","223923","223924","223925","223926","223927","223928","223929","223930","223931","223932","223933","223934","223935","223936","223937","223938","223939","223940","223941","223942","223943","223944","223945","223946","223947","223948","223950","223951","223952","223953","223954","223955","223956","223957","223958","223959","223960","223961","223962","223963","223964","223965","223966","223967","223968","223969","223970","223971","223972","223973","223974","223975","223976","223977","223978","223979","223980","223981","223982","223983","223984","223985","223986","223987","223988","223989","223990","223991","223992","223993","223994","223995","223996","223997","223998","223999","224000","224001","224002","224003","224004","224005","224006","224007","224008","224009","224010","224011","224012","224013","224014","224015","224016","224017","224018","224019","224020","224021","224022","224023","224024","224025","224026","224027","224028","224029","224030","224031","224032","224033","224034","224035","224036","224037","224038","224039","224040","224041","224042","224043","224044","224045","224046","224047","224048","224049","224050","224051","224052","224053","224054","224055","224056","224057","224058","224059","224060","224061","224062","224063","224064","224066","224067","224068","224069","224070","224071","224072","224073","224074","224075","224076","224077","224078","224079","224080","224081","224082","224083","224084","224085","224086","224087","224088","224089","224090","224091","224092","224093","224094","224095","224096","224097","224098","224099","224100","224101","224102","224103","224104","224105","224106","224107","224108","224109","224110","224111","224112","224113","224114","224115","224116","224117","224118","224119","224120","224121","224122","224123","224124","224125","224126","224127","224128","224129","224130","224131","224132","224133","224134","224135","224136","224137","224138","224139","224140","224141","224142","224143","224144","224145","224146","224147","224148","224149","224150","224151","224152","224153","224154","224155","224156","224157","224158","224159","224160","224161","224162","224163","224164","224165","224166","224167","224168","224169","224170","224171","224172","224173","224174","224175","224176","224177","224178","224179","224180","224181","224182","224183","224184","224185","224186","224187","224188","224189","224190","224191","224192","224193","224194","224195","224196","224197","224198","224199","224200","224201","224202","224203","224204","224205","224206","224207","224208","224209","224210","224211","224212","224213","224214","224215","224216","224217","224218","224219","224220","224221","224222","224223","224224","224225","224226","224227","224228","224229","224230","224231","224232","224233","224234","224235","224236","224237","224238","224239","224240","224241","224242","224243","224244","224245","224246","224247","224248","224249","224250","224251","224252","224253","224254","224255","224256","224257","224258","224259","224260","224261","224262","224263","224264","224265","224266","224267","224268","224269","224270","224271","224272","224273","224274","224275","224276","224277","224278","224279","224280","224281","224282","224283","224284","224285","224286","224287","224288","224289","224290","224291","224292","224293","224294","224295","224296","224298","224299","224300","224301","224302","224303","224304","224305","224306","224307","224308","224309","224310","224311","224312","224313","224314","224315","224316","224317","224318","224319","224320","224321","224322","224323","224324","224325","224326","224327","224328","224329","224330","224331","224332","224333","224334","224335","224336","224337","224338","224339","224340","224341","224342","224343","224344","224345","224346","224347","224348","224349","224350","224351","224352","224353","224354","224355","224356","224357","224358","224359","224360","224361","224362","224363","224364","224365","224366","224367","224368","224369","224370","224371","224372","224373","224374","224375","224376","224377","224378","224379","224380","224381","224382","224383","224384","224385","224386","224387","224388","224389","224390","224391","224392","224393","224394","224395","224396","224397","224398","224399","224400","224401","224402","224403","224404","224405","224406","224407","224408","224409","224410","224411","224412","224413","224414","224415","224416","224417","224418","224419","224420","224421","224422","224423","224424","224425","224426","224427","224428","224429","224430","224431","224433","224434","224435","224436","224437","224438","224439","231756","231772","231980","234649","234650","234652","234823","234824","234826","234827","234832","234837","234838","235158","236872","238700","238938","239917","239918","239920","239922","239927","239929","239951","240040","240048","240261","240550","240741","240744","240746","240748","241936","242258","242383","242993","243037","243038","243039","243087","243126","243347","243392","243493","243759","243862","243974","243975","243976","244387","244891","244914","246099","246100","246101","246658","246659","246820","246821","246822","246823","246825","246830","246832"],PageviewComplete:["202334","202335","202336","230350","230352","230353","230355","230356","230357","230386","230387","231615","231616","234649","234650","234652","234824","234826","239441","239442","239443","239444","239445","239446","240550","241363","241364","241365","241366","241936","242993","243040","243087","243126","243862","244914","246099","246100","246658","246659"],PageviewEngagement:["202325","202326","202327","202328","202329","202330","202331","202332","202333","202334","202335","202336","234649","234650","234824","242993","243040","243087","243862","246099","246100","246658","246659"],PartnerPixel:["244681","245817","245818","245819","245820","245826"],PrebidBid:["201901","208882"],SegmentEntry:["230350","230352","230353","230355","230356","230357","230386","230387","231615","231616","234649","234652","234826","239441","239442","239443","239444","239445","239446","240550","241363","241364","241365","241366","241936","242993","243087","243126","243862","244914","246099","246100","246658","246659"],SegmentExit:["243862","246099","246658"],SlotClicked:["201910","202140","227114","227748","227756","227765","227771","227775","227777","228024","228091","228169","228283","228284","228288","228325","230893","232334","232803","233814","234208","234209","239488","240347","240349","240351","240354","240358","240359","240360","240361","240362","240363","240364","240365","240769","241767","241793","242077","242479","242947","243542","243871","243873","243978","246110"],SlotViewable:["239491","240348","240350","240352","240353","240366","240367","240368","240369","240370","240371","240372","240373","240770","241768","241792","242075","242478","242946","243543","243872","243874","243977"]}),eventsLookup:e=>["Pageview","PageviewComplete","SlotClicked","SegmentEntry","PageviewEngagement","SlotViewable","PartnerPixel","PrebidBid","Ecommerce","LinkClick"],interpretOnlyQueries:e=>({}),literalsLookup:e=>e.frontDecode("1\\t1\\t0\\t2\\t0\\t2\\t1\\t2\\t2\\t2\\t3\\t2\\t4\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t2\\t9\\t1\\t1\\t2\\t0\\t2\\t1\\t2\\t2\\t2\\t3\\t2\\t4\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t2\\t9\\t1\\t2\\t2\\t0\\t2\\t1\\t2\\t2\\t2\\t4\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t2\\t9\\t1\\t3\\t2\\t0\\t2\\t1\\t2\\t3\\t2\\t4\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t2\\t9\\t1\\t4\\t2\\t0\\t2\\t1\\t2\\t2\\t2\\t3\\t2\\t4\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t2\\t9\\t1\\t5\\t2\\t1\\t2\\t3\\t2\\t4\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t2\\t9\\t1\\t6\\t2\\t0\\t2\\t1\\t2\\t2\\t2\\t4\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t2\\t9\\t1\\t7\\t2\\t0\\t2\\t1\\t2\\t2\\t2\\t3\\t2\\t7\\t2\\t8\\t2\\t9\\t1\\t8\\t2\\t0\\t2\\t1\\t2\\t5\\t2\\t7\\t2\\t8\\t2\\t9\\t1\\t9\\t2\\t0\\t2\\t1\\t2\\t2\\t2\\t3\\t2\\t4\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t2\\t9\\t\\t2\\t1\\t0\\t2\\t0\\t2\\t2\\t2\\t3\\t2\\t4\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t2\\t9\\t1\\t1\\t2\\t0\\t2\\t1\\t2\\t2\\t2\\t3\\t2\\t4\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t2\\t9\\t1\\t2\\t2\\t0\\t2\\t1\\t2\\t2\\t2\\t4\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t2\\t9\\t1\\t3\\t2\\t0\\t2\\t1\\t2\\t2\\t2\\t3\\t2\\t4\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t1\\t4\\t2\\t0\\t2\\t1\\t2\\t2\\t2\\t3\\t2\\t4\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t2\\t9\\t1\\t5\\t2\\t0\\t2\\t1\\t2\\t2\\t2\\t3\\t2\\t4\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t2\\t9\\t1\\t6\\t2\\t0\\t2\\t1\\t2\\t2\\t2\\t3\\t2\\t4\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t2\\t9\\t1\\t7\\t2\\t0\\t2\\t1\\t2\\t2\\t2\\t3\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t2\\t9\\t1\\t8\\t2\\t0\\t2\\t1\\t2\\t2\\t2\\t3\\t2\\t4\\t2\\t5\\t2\\t7\\t2\\t8\\t2\\t9\\t1\\t9\\t2\\t0\\t2\\t1\\t2\\t2\\t2\\t3\\t2\\t4\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t2\\t9\\t\\t3\\t1\\t0\\t2\\t0\\t2\\t1\\t2\\t2\\t2\\t3\\t2\\t4\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t2\\t9\\t1\\t1\\t2\\t0\\t2\\t1\\t2\\t2\\t2\\t3\\t2\\t4\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t2\\t9\\t1\\t2\\t2\\t0\\t2\\t1\\t2\\t2\\t2\\t3\\t2\\t4\\t2\\t5\\t2\\t6\\t1\\t3\\t2\\t1\\t2\\t2\\t2\\t5\\t2\\t6\\t2\\t8\\t2\\t9\\t1\\t4\\t2\\t0\\t2\\t1\\t2\\t2\\t2\\t3\\t2\\t4\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t2\\t9\\t1\\t5\\t2\\t0\\t2\\t1\\t2\\t2\\t2\\t3\\t2\\t4\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t2\\t9\\t1\\t6\\t2\\t0\\t2\\t1\\t2\\t2\\t2\\t3\\t2\\t4\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t2\\t9\\t1\\t7\\t2\\t0\\t2\\t1\\t2\\t6\\t2\\t7\\t2\\t8\\t1\\t8\\t2\\t7\\t2\\t8\\t1\\t9\\t2\\t0\\t2\\t1\\t2\\t2\\t2\\t3\\t2\\t4\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t2\\t9\\t\\t4\\t1\\t0\\t2\\t0\\t2\\t1\\t2\\t2\\t2\\t3\\t2\\t4\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t2\\t9\\t1\\t1\\t2\\t0\\t2\\t1\\t2\\t2\\t2\\t3\\t2\\t4\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t2\\t9\\t1\\t20\\t2\\t1\\t2\\t3\\t2\\t4\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t2\\t9\\t1\\t3\\t2\\t0\\t2\\t1\\t2\\t3\\t2\\t4\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t2\\t9\\t1\\t4\\t2\\t0\\t2\\t2\\t2\\t3\\t2\\t4\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t2\\t9\\t1\\t50\\t2\\t1\\t2\\t2\\t2\\t4\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t2\\t9\\t1\\t6\\t2\\t0\\t2\\t1\\t2\\t2\\t2\\t3\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t2\\t9\\t1\\t70\\t2\\t1\\t2\\t2\\t2\\t3\\t2\\t4\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t2\\t9\\t1\\t8\\t2\\t0\\t2\\t1\\t2\\t2\\t2\\t4\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t2\\t9\\t1\\t9\\t2\\t0\\t2\\t1\\t2\\t2\\t2\\t3\\t2\\t4\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t2\\t9\\t\\t5\\t1\\t00\\t2\\t1\\t2\\t2\\t2\\t3\\t2\\t4\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t2\\t9\\t1\\t1\\t2\\t0\\t2\\t1\\t2\\t2\\t2\\t3\\t2\\t4\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t2\\t9\\t1\\t20\\t2\\t1\\t2\\t2\\t2\\t3\\t2\\t4\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t2\\t9\\t1\\t3\\t2\\t0\\t2\\t1\\t2\\t2\\t2\\t3\\t2\\t4\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t2\\t9\\t1\\t4\\t2\\t0\\t2\\t1\\t2\\t2\\t2\\t3\\t2\\t4\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t2\\t9\\t1\\t5\\t2\\t0\\t2\\t1\\t2\\t3\\t2\\t4\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t2\\t9\\t1\\t6\\t2\\t0\\t2\\t1\\t2\\t2\\t2\\t3\\t2\\t4\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t2\\t9\\t1\\t7\\t2\\t0\\t2\\t1\\t2\\t2\\t2\\t3\\t2\\t4\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t2\\t9\\t1\\t8\\t2\\t0\\t2\\t1\\t2\\t2\\t2\\t3\\t2\\t4\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t2\\t9\\t1\\t9\\t2\\t0\\t2\\t1\\t2\\t2\\t2\\t3\\t2\\t4\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t2\\t9\\t\\t6\\t1\\t0\\t2\\t0\\t2\\t1\\t2\\t2\\t2\\t3\\t2\\t4\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t2\\t9\\t1\\t1\\t2\\t0\\t2\\t1\\t2\\t2\\t2\\t3\\t2\\t4\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t2\\t9\\t1\\t2\\t2\\t0\\t2\\t1\\t2\\t2\\t2\\t3\\t2\\t4\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t2\\t9\\t1\\t3\\t2\\t0\\t2\\t1\\t2\\t2\\t2\\t3\\t2\\t4\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t2\\t9\\t1\\t4\\t2\\t0\\t2\\t1\\t2\\t2\\t2\\t3\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t2\\t9\\t1\\t5\\t2\\t0\\t2\\t1\\t2\\t2\\t2\\t3\\t2\\t4\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t2\\t9\\t1\\t6\\t2\\t0\\t2\\t1\\t2\\t2\\t2\\t3\\t2\\t4\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t2\\t9\\t1\\t7\\t2\\t0\\t2\\t1\\t2\\t2\\t2\\t3\\t2\\t4\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t2\\t9\\t1\\t8\\t2\\t0\\t2\\t1\\t2\\t2\\t2\\t3\\t2\\t4\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t2\\t9\\t1\\t9\\t2\\t0\\t2\\t1\\t2\\t2\\t2\\t3\\t2\\t4\\t2\\t5\\t2\\t6\\t2\\t7\\t2\\t8\\t1\\ti4dB6\\t\\t7\\t1\\t0\\t1\\t1\\t1\\t2\\t1\\t3\\t1\\t4\\t1\\t5\\t1\\t6\\t1\\t7\\t1\\t8\\t1\\t9\\t\\t8\\t1\\t0\\t1\\t1\\t1\\t2\\t1\\t3\\t1\\t4\\t1\\t5\\t1\\t6\\t1\\t7\\t1\\t8\\t1\\t9\\t1\\tFD8nI\\t1\\tYPBBL\\t\\t9\\t1\\t0\\t1\\t1\\t1\\t2\\t1\\t3\\t1\\t4\\t1\\t5\\t1\\t6\\t1\\t7\\t1\\t8\\t1\\t9\\t\\tA0AH3G\\t\\tBahia\\t\\tCeará\\t1\\thristian Dunker\\t1\\totidiano\\t1\\tristiane Guterres\\t6\\tna Fibe\\t\\tEZWB7V\\t\\tHxqYV1\\t\\tI4GWl6\\t1\\tI436J\\t\\tKHPC5A\\t4\\t6A\\t\\tMQ2XML\\t1\\tichelle Prazeres\\t\\tRm3SiT\\t\\tTIFQA5\\t\\tVK7KD0\\t2\\tIV56\\t1\\tWGKS7\\t\\tW3CW2J\\t1\\tQC6HR\\t\\tXtODT3\\t\\tZ7rJBM\\t1\\tJG29S\\t\\tabuso\\t1\\tgricola\\t1\\tmor\\t1\\trte\\t1\\tssédio\\t1\\ttivador de cachos\\t1\\tudi\\t1\\tvbNf2\\t\\tbitcoin\\t1\\tmw\\t\\tcafe\\t1\\thevrolet\\t1\\tivic\\t1\\tlaro.com.br\\t1\\tondicionador\\t2\\trinthians\\t1\\tr-v\\t2\\teme de pentear\\t2\\time\\t3\\tpto\\t1\\tuidados com os fios\\t\\teletrico\\t1\\trotismo\\t1\\tsporte\\t2\\ttupro\\t\\tfelca\\t1\\tlamengo\\t2\\tuminense\\t1\\tutebol\\t\\tguia-de-compras\\t\\thonda\\t1\\tr-v\\t1\\tytalo\\t\\tiab_3.0\\t1\\tdentidade\\t\\tj9PaO9\\t1\\tapão\\t\\tleave in\\t\\tmelhor operadora\\t6\\tplano.net\\t2\\trcedes\\t1\\tinhaoperadora.com.br\\t1\\tm3UXx\\t1\\tulheres\\t\\tnissan\\t\\toperadoras\\t\\tpertencimento\\t2\\tugeot\\t1\\tg0WhF\\t1\\tlano de celular\\t1\\tortabilidade para tim\\t2\\ts pago\\t\\tquestões de gênero\\t\\treclamacao claro\\t11\\tvivo\\t2\\tlacionamento\\t2\\tnault\\t1\\toaming internacional\\t\\tsafra\\t2\\tlonline.com.br/cronograma-capilar-para-cabelos-crespos-e-cacheados-sos-hidratacao-salon-line\\t2\\túde mental\\t1\\texo\\t1\\thampoo\\t1\\tilêncio\\t1\\tolidão\\t\\ttecnologia\\t1\\tilt\\t2\\tm\\t1\\tudocelular.com\\t\\tuniversa\\t8\\t talks\\t\\tviva bem\\t3\\to.com.br\\t1\\tolkswagen\\t\\tzr-v"),propertiesLookup:e=>[["taxonomy"],["value"],["client","url"],["advertiser_id"],["segment_number"],["authors"],["central"],["geo_info","province"],["isp_info","isp"],["origin"],["mediaTitle"],["client","referrer"],["collection"],["url"],["client","title"],["aggregations","PageviewEngagement","engaged_time"],["advertiser_name"],["geo_info","city"],["tagsText"]],queries:e=>({192971:e.r(34,0),201901:e.r(70,7,e.os(e.s,16,[682,685,687,"citroen","fiat","ford",706,"hyundai","kia",716,"mitsubishi",720,723,732,"suzuki","toyota",749]),2,2),201910:e.r(34,2),202140:e.r(70,2,e.t,1,1),202279:e.r(83,"facebook.com"),202280:e.r(83,"instagram.com"),202281:e.r(83,"google.com"),202282:e.r(83,"tiktok.com"),202284:e.q(e.tw(e.cb(9,e.ps(["dest_url"],"amazon.com.br"),e.ge(1),1),6048e5)),202286:e.r(9,0,9),202287:e.r(41,["A4CNkPyR"]),202288:e.r(41,["hi5L6HL4"]),202289:e.r(10,0,7,"Paraná"),202290:e.r(41,["l+FkpX3t"]),202291:e.r(42,652),202292:e.r(41,["bHlt35IM"]),202293:e.r(42,653),202294:e.r(43,699),202295:e.r(43,"splash"),202296:e.r(43,"carros"),202297:e.r(43,"nossa"),202298:e.r(43,"play"),202299:e.r(8,0,1,1,2,[741,742]),202300:e.r(43,742),202301:e.r(43,"ecoa"),202302:e.r(43,705),202303:e.r(43,"jogos"),202304:e.r(8,0,1,1,8,["aero","airport"]),202305:e.r(44,"claro"),202306:e.r(44,"algar"),202307:e.r(44,743),202308:e.r(44,"vivo"),202309:e.r(8,0,1,1,8,["v tal","vtal"]),202311:e.r(8,0,1,1,8,["college","escola","faculdad","universidad","university"]),202325:e.r(85,.5),202326:e.r(85,.1),202327:e.r(85,.2),202328:e.r(85,.28),202329:e.r(85,.4),202330:e.r(85,.6),202331:e.r(85,.7),202332:e.r(85,.8),202333:e.r(85,.9),202334:e.r(69,3),202335:e.r(69,6),202336:e.r(69,10),203261:e.r(51,"b0451b8d-9036-4f67-8039-62a93d88d29f","202284",.89032835),208882:e.r(8,7,2,2,16,["banco","bradesco","btg","caixa","citybank","itau",734,"santander","sicredi"]),211184:e.r(68,"GlboQG6/","211184"),211185:e.r(68,"ED1Piegt","211185"),211186:e.r(68,"P2+np/pW","211186"),223407:e.r(63,e.ps(2,691),e.ge(5),5,0,e.ps(14,691),e.ge(5),5),223408:e.r(72,["sao-paulo","saopaulo"]),223410:e.r(73,"palmeiras"),223415:e.r(73,"santos"),223418:e.r(64,703,703),223419:e.r(64,702,702),223421:e.r(73,"botafogo"),223422:e.r(73,"vasco"),223424:e.r(72,["atletico-mg","atletico-mineiro"]),223426:e.r(73,"gremio"),223427:e.r(73,"cruzeiro"),223430:e.r(73,"bahia"),223431:e.r(73,"portuguesa"),223432:e.r(73,"internacional"),223433:e.r(73,"parana"),223477:e.r(72,["santa-cruz","santacruz"]),223478:e.r(73,"nautico"),223479:e.r(73,"vitoria"),223480:e.r(72,["ponte-preta","pontepreta"]),223482:e.r(73,"coritiba"),223483:e.r(72,["athletico"]),223484:e.r(73,"ceara"),223485:e.r(72,["america-mg","america-mineiro"]),223486:e.r(73,"criciuma"),223487:e.r(73,"chapecoense"),223488:e.r(73,"avai"),223732:e.r(74,[e.y_(1,194),e.y_(1,184),e.y_(1,174),e.y_(1,163),e.y_(1,152),e.y_(1,141),e.y_(1,131),e.y_(1,110),e.y_(1,121),e.y_(1,100),e.y_(1,88),e.y_(1,81),e.y_(1,73),e.y_(1,63),e.y_(1,297),e.y_(1,285),e.y_(1,282),e.y_(1,276),e.y_(1,265),e.y_(1,254),e.y_(1,243),e.y_(1,308),e.y_(1,236),e.y_(1,228),e.y_(1,217),e.y_(1,206),e.y_(1,616),e.y_(1,506),e.y_(1,398),e.y_(1,296),e.y_(1,54),e.y_(1,43),e.y_(1,33),e.y_(1,23),e.y_(1,12),e.y_(1,1),e.y_(1,640),e.y_(1,627),e.y_(1,205),e.y_(1,99),e.y_(1,0)]),223733:e.r(81,99),223735:e.r(81,205),223736:e.r(81,627),223737:e.r(81,640),223738:e.r(81,1),223739:e.r(81,12),223740:e.r(81,23),223741:e.r(81,33),223742:e.r(81,43),223743:e.r(81,54),223744:e.r(81,296),223745:e.r(81,398),223746:e.r(81,506),223747:e.r(81,616),223748:e.r(81,206),223749:e.r(81,217),223750:e.r(81,228),223751:e.r(81,236),223752:e.r(81,308),223753:e.r(81,243),223754:e.r(81,254),223755:e.r(81,265),223756:e.r(81,276),223757:e.r(81,282),223758:e.r(81,285),223759:e.r(81,297),223760:e.r(81,63),223761:e.r(81,73),223762:e.r(81,81),223763:e.r(81,88),223764:e.r(81,100),223765:e.r(81,110),223766:e.r(81,121),223767:e.r(81,131),223768:e.r(81,141),223769:e.r(81,152),223770:e.r(81,163),223771:e.r(81,174),223772:e.r(81,184),223773:e.r(81,194),223774:e.r(74,[e.y_(1,387),e.y_(1,377),e.y_(1,357),e.y_(1,328),e.e_(1,"42")]),223775:e.r(81,328),223776:e.r(81,357),223777:e.r(81,377),223778:e.r(81,387),223779:e.r(74,[e.y_(1,10),e.y_(1,9),e.y_(1,8),e.y_(1,7),e.y_(1,6),e.y_(1,5),e.y_(1,3),e.y_(1,2),e.y_(1,650),e.y_(1,649),e.y_(1,648),e.y_(1,647),e.y_(1,646),e.y_(1,645),e.y_(1,644),e.y_(1,643),e.y_(1,11),e.y_(1,13),e.y_(1,14),e.y_(1,15),e.y_(1,17),e.y_(1,18),e.y_(1,19),e.y_(1,26),e.y_(1,25),e.y_(1,24),e.y_(1,22),e.y_(1,21),e.y_(1,20),e.y_(1,16),e.y_(1,641),e.y_(1,4),e.y_(1,642),e.y_(1,637),e.y_(1,636),e.y_(1,635),e.y_(1,634),e.y_(1,633),e.y_(1,632),e.y_(1,631),e.y_(1,630),e.y_(1,629),e.y_(1,628),e.y_(1,518),e.y_(1,507),e.y_(1,495),e.y_(1,484),e.y_(1,473),e.y_(1,462),e.y_(1,452),e.y_(1,625),e.y_(1,624),e.y_(1,623),e.y_(1,622),e.y_(1,621),e.y_(1,626),e.y_(1,620),e.y_(1,619),e.y_(1,618),e.y_(1,617),e.y_(1,605),e.y_(1,594),e.y_(1,583),e.y_(1,572),e.y_(1,561),e.y_(1,551),e.y_(1,540),e.y_(1,529),e.y_(1,441),e.y_(1,430),e.e_(1,"52")]),223780:e.r(81,430),223781:e.r(81,441),223782:e.r(81,529),223783:e.r(81,540),223784:e.r(81,551),223785:e.r(81,561),223786:e.r(81,572),223787:e.r(81,583),223788:e.r(81,594),223789:e.r(81,605),223790:e.r(81,617),223791:e.r(81,618),223792:e.r(81,619),223793:e.r(81,620),223794:e.r(81,626),223795:e.r(81,621),223796:e.r(81,622),223797:e.r(81,623),223798:e.r(81,624),223799:e.r(81,625),223800:e.r(81,452),223801:e.r(81,462),223802:e.r(81,473),223803:e.r(81,484),223804:e.r(81,495),223805:e.r(81,507),223806:e.r(81,518),223807:e.r(81,628),223808:e.r(81,629),223809:e.r(81,630),223810:e.r(81,631),223811:e.r(81,632),223812:e.r(81,633),223813:e.r(81,634),223814:e.r(81,635),223815:e.r(81,636),223816:e.r(81,637),223817:e.r(81,641),223818:e.r(81,642),223819:e.r(82,4),223820:e.r(81,16),223821:e.r(81,20),223822:e.r(81,21),223823:e.r(81,22),223824:e.r(81,24),223825:e.r(81,25),223826:e.r(81,26),223827:e.r(81,643),223828:e.r(81,644),223829:e.r(81,645),223830:e.r(81,646),223831:e.r(82,11),223832:e.r(81,648),223833:e.r(81,649),223834:e.r(81,650),223835:e.r(81,2),223836:e.r(81,3),223837:e.r(81,5),223838:e.r(81,6),223839:e.r(81,7),223840:e.r(81,8),223841:e.r(81,9),223842:e.r(81,10),223843:e.r(81,11),223844:e.r(81,13),223845:e.r(81,14),223846:e.r(81,15),223847:e.r(81,17),223848:e.r(81,18),223849:e.r(81,19),223850:e.r(76,35,34,32,31,30,29,28,27,"123"),223851:e.r(81,27),223852:e.r(81,28),223853:e.r(81,29),223854:e.r(81,30),223855:e.r(81,31),223856:e.r(81,32),223857:e.r(81,34),223858:e.r(81,35),223859:e.r(80,"80DV8O"),223860:e.r(80,"380"),223861:e.r(80,"381"),223862:e.r(74,[e.y_(1,39),e.y_(1,38),e.y_(1,37),e.y_(1,53),e.y_(1,52),e.y_(1,51),e.y_(1,50),e.y_(1,49),e.y_(1,48),e.y_(1,47),e.y_(1,46),e.y_(1,45),e.y_(1,44),e.y_(1,42),e.y_(1,41),e.y_(1,40),e.y_(1,36),e.e_(1,"132")]),223863:e.r(81,36),223864:e.r(81,40),223865:e.r(81,41),223866:e.r(81,42),223867:e.r(81,44),223868:e.r(81,45),223869:e.r(81,46),223870:e.r(81,47),223871:e.r(81,48),223872:e.r(81,49),223873:e.r(81,50),223874:e.r(81,51),223875:e.r(81,52),223876:e.r(81,53),223877:e.r(81,37),223878:e.r(81,38),223879:e.r(81,39),223880:e.r(79,79,78,64,62,61,58,57,56,83,80,55,"150"),223881:e.r(81,55),223882:e.r(81,80),223883:e.r(81,83),223884:e.r(81,56),223885:e.r(81,57),223886:e.r(81,58),223887:e.r(81,61),223888:e.r(81,62),223889:e.r(81,64),223890:e.r(81,78),223891:e.r(81,79),223892:e.r(74,[e.y_(1,281),e.y_(1,280),e.y_(1,257),e.y_(1,275),e.y_(1,258),e.y_(1,274),e.y_(1,273),e.y_(1,272),e.y_(1,271),e.y_(1,270),e.y_(1,269),e.y_(1,267),e.y_(1,264),e.y_(1,268),e.y_(1,263),e.y_(1,262),e.y_(1,261),e.y_(1,260),e.y_(1,259),e.y_(1,256),e.y_(1,255),e.y_(1,253),e.y_(1,252),e.y_(1,251),e.y_(1,250),e.y_(1,249),e.y_(1,248),e.y_(1,266),e.y_(1,247),e.y_(1,245),e.y_(1,244),e.y_(1,242),e.y_(1,246),e.y_(1,552),e.y_(1,241),e.y_(1,233),e.e_(1,"JLBCU7")]),223893:e.r(81,233),223894:e.r(81,241),223895:e.r(81,552),223896:e.r(75,84,82,66,"8VZQHL"),223897:e.r(81,66),223898:e.r(81,82),223899:e.r(81,84),223900:e.r(74,[e.y_(1,101),e.y_(1,98),e.y_(1,97),e.y_(1,96),e.y_(1,95),e.y_(1,94),e.y_(1,93),e.y_(1,92),e.y_(1,91),e.y_(1,90),e.y_(1,89),e.y_(1,87),e.y_(1,86),e.y_(1,85),e.e_(1,"186")]),223901:e.r(81,85),223902:e.r(81,86),223903:e.r(81,87),223904:e.r(81,89),223905:e.r(81,90),223906:e.r(81,91),223907:e.r(81,92),223908:e.r(81,93),223909:e.r(81,94),223910:e.r(81,95),223911:e.r(81,96),223912:e.r(81,97),223913:e.r(81,98),223914:e.r(81,101),223915:e.r(76,109,108,107,106,105,104,103,102,"201"),223916:e.r(81,102),223917:e.r(81,103),223918:e.r(81,104),223919:e.r(81,105),223920:e.r(81,106),223921:e.r(81,107),223922:e.r(81,108),223923:e.r(81,109),223924:e.r(74,[e.y_(1,115),e.y_(1,114),e.y_(1,113),e.y_(1,124),e.y_(1,123),e.y_(1,122),e.y_(1,120),e.y_(1,119),e.y_(1,118),e.y_(1,117),e.y_(1,116),e.y_(1,112),e.y_(1,111)]),223925:e.r(81,112),223926:e.r(81,116),223927:e.r(81,117),223928:e.r(81,118),223929:e.r(81,119),223930:e.r(81,120),223931:e.r(81,122),223932:e.r(81,123),223933:e.r(81,124),223934:e.r(81,113),223935:e.r(81,114),223936:e.r(81,115),223937:e.r(74,[e.y_(1,663),e.y_(1,409),e.y_(1,662),e.y_(1,651),e.y_(1,279),e.y_(1,278),e.y_(1,277),e.y_(1,555),e.y_(1,554),e.y_(1,564),e.y_(1,235),e.y_(1,563),e.y_(1,237),e.y_(1,59),e.y_(1,562),e.y_(1,667),e.y_(1,240),e.y_(1,560),e.y_(1,658),e.y_(1,239),e.y_(1,556),e.y_(1,559),e.y_(1,558),e.y_(1,238),e.y_(1,557),e.y_(1,338),e.y_(1,553),e.y_(1,234),e.y_(1,669),e.e_(1,"SPSHQ5")]),223938:e.r(81,669),223939:e.r(81,234),223940:e.r(81,553),223941:e.r(81,338),223942:e.r(81,557),223943:e.r(81,238),223944:e.r(81,558),223945:e.r(81,559),223946:e.r(81,556),223947:e.r(81,239),223948:e.r(81,658),223950:e.r(81,560),223951:e.r(81,240),223952:e.r(81,667),223953:e.r(81,562),223954:e.r(81,59),223955:e.r(81,237),223956:e.r(81,563),223957:e.r(81,235),223958:e.r(81,564),223959:e.r(81,554),223960:e.r(81,555),223961:e.r(81,277),223962:e.r(81,278),223963:e.r(81,279),223964:e.r(81,651),223965:e.r(81,662),223966:e.r(81,663),223967:e.r(81,409),223968:e.r(74,[e.y_(1,140),e.y_(1,139),e.y_(1,138),e.y_(1,137),e.y_(1,136),e.y_(1,135),e.y_(1,134),e.y_(1,133),e.y_(1,132),e.y_(1,130),e.y_(1,129),e.y_(1,128),e.y_(1,127),e.y_(1,126),e.y_(1,125),e.e_(1,"223")]),223969:e.r(81,125),223970:e.r(81,126),223971:e.r(81,127),223972:e.r(81,128),223973:e.r(81,129),223974:e.r(81,130),223975:e.r(81,132),223976:e.r(81,133),223977:e.r(81,134),223978:e.r(81,135),223979:e.r(81,136),223980:e.r(81,137),223981:e.r(81,138),223982:e.r(81,139),223983:e.r(81,140),223984:e.r(74,[e.y_(1,149),e.y_(1,148),e.y_(1,147),e.y_(1,146),e.y_(1,145),e.y_(1,144),e.y_(1,143),e.y_(1,178),e.y_(1,177),e.y_(1,176),e.y_(1,173),e.y_(1,175),e.y_(1,172),e.y_(1,171),e.y_(1,170),e.y_(1,169),e.y_(1,168),e.y_(1,167),e.y_(1,166),e.y_(1,165),e.y_(1,164),e.y_(1,162),e.y_(1,161),e.y_(1,160),e.y_(1,159),e.y_(1,158),e.y_(1,157),e.y_(1,156),e.y_(1,155),e.y_(1,154),e.y_(1,153),e.y_(1,151),e.y_(1,150),e.y_(1,142),e.e_(1,"239")]),223985:e.r(81,142),223986:e.r(81,150),223987:e.r(81,151),223988:e.r(81,153),223989:e.r(81,154),223990:e.r(81,155),223991:e.r(81,156),223992:e.r(81,157),223993:e.r(81,158),223994:e.r(81,159),223995:e.r(81,160),223996:e.r(81,161),223997:e.r(81,162),223998:e.r(81,164),223999:e.r(81,165),224e3:e.r(81,166),224001:e.r(81,167),224002:e.r(81,168),224003:e.r(81,169),224004:e.r(81,170),224005:e.r(81,171),224006:e.r(81,172),224007:e.r(81,173),224008:e.r(81,175),224009:e.r(81,176),224010:e.r(81,177),224011:e.r(81,178),224012:e.r(81,143),224013:e.r(81,144),224014:e.r(81,145),224015:e.r(81,146),224016:e.r(81,147),224017:e.r(81,148),224018:e.r(81,149),224019:e.r(74,[e.y_(1,60),e.e_(1,"1KXCLD")]),224020:e.r(81,60),224021:e.r(79,181,180,190,189,188,187,186,185,183,182,179,"274"),224022:e.r(81,179),224023:e.r(81,182),224024:e.r(81,183),224025:e.r(81,185),224026:e.r(81,186),224027:e.r(81,187),224028:e.r(81,188),224029:e.r(81,189),224030:e.r(81,190),224031:e.r(81,180),224032:e.r(81,181),224033:e.r(80,"383"),224034:e.r(81,672),224035:e.r(74,[e.y_(1,208),e.y_(1,209),e.y_(1,210),e.y_(1,211),e.y_(1,212),e.y_(1,214),e.y_(1,215),e.y_(1,216),e.y_(1,218),e.y_(1,219),e.y_(1,227),e.y_(1,229),e.y_(1,230),e.y_(1,231),e.y_(1,207),e.y_(1,204),e.y_(1,203),e.y_(1,202),e.y_(1,201),e.y_(1,200),e.y_(1,199),e.y_(1,198),e.y_(1,197),e.y_(1,196),e.y_(1,195),e.y_(1,193),e.y_(1,226),e.y_(1,225),e.y_(1,224),e.y_(1,223),e.y_(1,222),e.y_(1,221),e.y_(1,220),e.y_(1,213),e.y_(1,192),e.y_(1,191),e.y_(1,232),e.e_(1,"286")]),224036:e.r(81,232),224037:e.r(81,191),224038:e.r(81,192),224039:e.r(81,213),224040:e.r(81,220),224041:e.r(81,221),224042:e.r(81,222),224043:e.r(81,223),224044:e.r(81,224),224045:e.r(81,225),224046:e.r(81,226),224047:e.r(81,193),224048:e.r(81,195),224049:e.r(81,196),224050:e.r(81,197),224051:e.r(81,198),224052:e.r(81,199),224053:e.r(81,200),224054:e.r(81,201),224055:e.r(81,202),224056:e.r(81,203),224057:e.r(81,204),224058:e.r(81,207),224059:e.r(81,208),224060:e.r(81,209),224061:e.r(81,210),224062:e.r(81,211),224063:e.r(81,212),224064:e.r(81,214),224066:e.r(81,215),224067:e.r(81,216),224068:e.r(81,218),224069:e.r(81,219),224070:e.r(81,227),224071:e.r(81,229),224072:e.r(81,230),224073:e.r(81,231),224074:e.r(81,246),224075:e.r(81,242),224076:e.r(81,244),224077:e.r(81,245),224078:e.r(81,247),224079:e.r(81,266),224080:e.r(81,248),224081:e.r(81,249),224082:e.r(81,250),224083:e.r(81,251),224084:e.r(81,252),224085:e.r(81,253),224086:e.r(81,255),224087:e.r(81,256),224088:e.r(81,259),224089:e.r(81,260),224090:e.r(81,261),224091:e.r(81,262),224092:e.r(81,263),224093:e.r(81,268),224094:e.r(81,264),224095:e.r(81,267),224096:e.r(81,269),224097:e.r(81,270),224098:e.r(81,271),224099:e.r(81,272),224100:e.r(81,273),224101:e.r(81,274),224102:e.r(81,258),224103:e.r(81,275),224104:e.r(81,257),224105:e.r(81,280),224106:e.r(81,281),224107:e.r(78,68,77,76,75,74,72,71,70,69,67,"163"),224108:e.r(81,67),224109:e.r(81,69),224110:e.r(81,70),224111:e.r(81,71),224112:e.r(81,72),224113:e.r(81,74),224114:e.r(81,75),224115:e.r(81,76),224116:e.r(81,77),224117:e.r(81,68),224118:e.r(74,[e.y_(1,315),e.y_(1,314),e.y_(1,313),e.y_(1,312),e.y_(1,311),e.y_(1,310),e.y_(1,309),e.y_(1,307),e.y_(1,306),e.y_(1,305),e.y_(1,304),e.y_(1,303),e.y_(1,302),e.y_(1,301),e.y_(1,300),e.y_(1,299),e.y_(1,298),e.y_(1,295),e.y_(1,294),e.y_(1,320),e.y_(1,319),e.y_(1,318),e.y_(1,317),e.y_(1,316),e.y_(1,293),e.y_(1,292),e.y_(1,291),e.y_(1,289),e.y_(1,290),e.y_(1,288),e.y_(1,287)]),224119:e.r(81,288),224120:e.r(81,289),224121:e.r(81,290),224122:e.r(81,291),224123:e.r(81,292),224124:e.r(81,293),224125:e.r(81,316),224126:e.r(81,317),224127:e.r(81,318),224128:e.r(81,319),224129:e.r(81,320),224130:e.r(81,294),224131:e.r(81,295),224132:e.r(81,298),224133:e.r(81,299),224134:e.r(81,300),224135:e.r(81,301),224136:e.r(81,302),224137:e.r(81,303),224138:e.r(82,10),224139:e.r(81,305),224140:e.r(81,306),224141:e.r(81,307),224142:e.r(81,309),224143:e.r(81,310),224144:e.r(81,311),224145:e.r(81,312),224146:e.r(81,313),224147:e.r(81,314),224148:e.r(81,315),224149:e.r(77,329,327,330,326,325,324,323,322,321,"422"),224150:e.r(81,321),224151:e.r(81,322),224152:e.r(81,323),224153:e.r(81,324),224154:e.r(81,325),224155:e.r(81,326),224156:e.r(81,330),224157:e.r(81,327),224158:e.r(81,329),224159:e.r(75,284,283,639,"386"),224160:e.r(81,639),224161:e.r(81,283),224162:e.r(81,284),224163:e.r(76,339,337,336,335,334,333,332,331,"432"),224164:e.r(81,331),224165:e.r(81,332),224166:e.r(81,333),224167:e.r(81,334),224168:e.r(81,335),224169:e.r(81,336),224170:e.r(81,337),224171:e.r(81,339),224172:e.r(81,671),224173:e.r(79,342,341,350,349,348,347,346,345,344,343,340,"441"),224174:e.r(81,340),224175:e.r(81,343),224176:e.r(81,344),224177:e.r(81,345),224178:e.r(81,346),224179:e.r(81,347),224180:e.r(81,348),224181:e.r(81,349),224182:e.r(81,350),224183:e.r(81,341),224184:e.r(81,342),224185:e.r(78,352,361,360,359,358,356,355,354,353,351,"453"),224186:e.r(81,351),224187:e.r(81,353),224188:e.r(81,354),224189:e.r(81,355),224190:e.r(81,356),224191:e.r(81,358),224192:e.r(81,359),224193:e.r(81,360),224194:e.r(81,361),224195:e.r(81,352),224196:e.r(77,286,369,368,367,366,365,364,363,362,"464"),224197:e.r(81,362),224198:e.r(81,363),224199:e.r(81,364),224200:e.r(81,365),224201:e.r(81,366),224202:e.r(81,367),224203:e.r(81,368),224204:e.r(81,369),224205:e.r(81,286),224206:e.r(79,638,615,718,711,724,659,674,660,683,666,673,"v9i3On"),224207:e.r(81,666),224208:e.r(81,683),224209:e.r(81,673),224210:e.r(81,660),224211:e.r(81,674),224212:e.r(81,659),224213:e.r(81,724),224214:e.r(81,711),224215:e.r(81,718),224216:e.r(81,615),224217:e.r(81,638),224218:e.q(e.tw(e.cb(0,e.af_u(["properties","contextual","classifications","categories"],e.o([e.y_(1,379),e.y_(1,65),e.y_(1,378),e.y_(1,376),e.y_(1,375),e.y_(1,374),e.y_(1,373),e.y_(1,372),e.y_(1,371),e.y_(1,380),e.y_(1,370)]),e.y_(0,709)),e.ge(1),1),2592e6)),224219:e.r(81,380),224220:e.r(81,371),224221:e.r(81,372),224222:e.r(81,373),224223:e.r(81,374),224224:e.r(81,375),224225:e.r(81,376),224226:e.r(81,378),224227:e.r(81,65),224228:e.r(81,379),224229:e.r(74,[e.y_(1,426),e.y_(1,427),e.y_(1,428),e.y_(1,429),e.y_(1,431),e.y_(1,432),e.y_(1,433),e.y_(1,434),e.y_(1,436),e.y_(1,454),e.y_(1,437),e.y_(1,438),e.y_(1,439),e.y_(1,440),e.y_(1,442),e.y_(1,443),e.y_(1,444),e.y_(1,445),e.y_(1,446),e.y_(1,448),e.y_(1,425),e.y_(1,424),e.y_(1,423),e.y_(1,422),e.y_(1,421),e.y_(1,420),e.y_(1,417),e.y_(1,416),e.y_(1,415),e.y_(1,414),e.y_(1,413),e.y_(1,412),e.y_(1,411),e.y_(1,410),e.y_(1,408),e.y_(1,407),e.y_(1,405),e.y_(1,404),e.y_(1,403),e.y_(1,402),e.y_(1,401),e.y_(1,400),e.y_(1,399),e.y_(1,397),e.y_(1,396),e.y_(1,395),e.y_(1,394),e.y_(1,393),e.y_(1,392),e.y_(1,391),e.y_(1,390),e.y_(1,389),e.y_(1,385),e.y_(1,386),e.y_(1,388),e.y_(1,384),e.y_(1,383),e.y_(1,382),e.y_(1,453),e.y_(1,451),e.y_(1,450),e.y_(1,449),e.y_(1,447),e.y_(1,435),e.y_(1,419),e.y_(1,418),e.y_(1,381),e.y_(1,406),e.e_(1,"483")]),224230:e.r(81,381),224231:e.r(81,406),224232:e.r(81,418),224233:e.r(81,419),224234:e.r(81,435),224235:e.r(81,447),224236:e.r(81,449),224237:e.r(81,450),224238:e.r(81,451),224239:e.r(81,453),224240:e.r(81,382),224241:e.r(81,383),224242:e.r(81,384),224243:e.r(81,388),224244:e.r(81,386),224245:e.r(81,385),224246:e.r(81,389),224247:e.r(81,390),224248:e.r(81,391),224249:e.r(81,392),224250:e.r(81,393),224251:e.r(81,394),224252:e.r(81,395),224253:e.r(81,396),224254:e.r(81,397),224255:e.r(81,399),224256:e.r(81,400),224257:e.r(81,401),224258:e.r(81,402),224259:e.r(81,403),224260:e.r(81,404),224261:e.r(81,405),224262:e.r(81,407),224263:e.r(81,408),224264:e.r(81,410),224265:e.r(81,411),224266:e.r(81,412),224267:e.r(81,413),224268:e.r(81,414),224269:e.r(81,415),224270:e.r(81,416),224271:e.r(81,417),224272:e.r(81,420),224273:e.r(81,421),224274:e.r(81,422),224275:e.r(81,423),224276:e.r(81,424),224277:e.r(81,425),224278:e.r(81,426),224279:e.r(81,427),224280:e.r(81,428),224281:e.r(81,429),224282:e.r(81,431),224283:e.r(81,432),224284:e.r(81,433),224285:e.r(81,434),224286:e.r(81,436),224287:e.r(81,454),224288:e.r(81,437),224289:e.r(81,438),224290:e.r(81,439),224291:e.r(81,440),224292:e.r(81,442),224293:e.r(81,443),224294:e.r(81,444),224295:e.r(81,445),224296:e.r(81,446),224298:e.r(81,448),224299:e.r(74,[e.y_(1,477),e.y_(1,476),e.y_(1,475),e.y_(1,474),e.y_(1,472),e.y_(1,471),e.y_(1,470),e.y_(1,469),e.y_(1,468),e.y_(1,467),e.y_(1,466),e.y_(1,465),e.y_(1,464),e.y_(1,463),e.y_(1,501),e.y_(1,500),e.y_(1,499),e.y_(1,498),e.y_(1,497),e.y_(1,496),e.y_(1,494),e.y_(1,493),e.y_(1,492),e.y_(1,491),e.y_(1,490),e.y_(1,489),e.y_(1,488),e.y_(1,487),e.y_(1,486),e.y_(1,485),e.y_(1,483),e.y_(1,482),e.y_(1,481),e.y_(1,480),e.y_(1,479),e.y_(1,478),e.y_(1,461),e.y_(1,460),e.y_(1,459),e.y_(1,458),e.y_(1,457),e.y_(1,456),e.y_(1,455),e.e_(1,"552")]),224300:e.r(81,455),224301:e.r(81,456),224302:e.r(81,457),224303:e.r(81,458),224304:e.r(81,459),224305:e.r(81,460),224306:e.r(81,461),224307:e.r(81,478),224308:e.r(81,479),224309:e.r(81,480),224310:e.r(81,481),224311:e.r(81,482),224312:e.r(81,483),224313:e.r(81,485),224314:e.r(81,486),224315:e.r(81,487),224316:e.r(81,488),224317:e.r(81,489),224318:e.r(81,490),224319:e.r(81,491),224320:e.r(81,492),224321:e.r(81,493),224322:e.r(81,494),224323:e.r(81,496),224324:e.r(81,497),224325:e.r(81,498),224326:e.r(81,499),224327:e.r(81,500),224328:e.r(81,501),224329:e.r(81,463),224330:e.r(81,464),224331:e.r(81,465),224332:e.r(81,466),224333:e.r(81,467),224334:e.r(81,468),224335:e.r(81,469),224336:e.r(81,470),224337:e.r(81,471),224338:e.r(81,472),224339:e.r(81,474),224340:e.r(81,475),224341:e.r(81,476),224342:e.r(81,477),224343:e.r(74,[e.y_(1,550),e.y_(1,549),e.y_(1,548),e.y_(1,547),e.y_(1,546),e.y_(1,545),e.y_(1,544),e.y_(1,543),e.y_(1,542),e.y_(1,541),e.y_(1,532),e.y_(1,531),e.y_(1,539),e.y_(1,538),e.y_(1,537),e.y_(1,536),e.y_(1,535),e.y_(1,534),e.y_(1,533),e.y_(1,530),e.y_(1,528),e.y_(1,527),e.y_(1,526),e.y_(1,525),e.y_(1,515),e.y_(1,514),e.y_(1,513),e.y_(1,512),e.y_(1,524),e.y_(1,523),e.y_(1,522),e.y_(1,521),e.y_(1,520),e.y_(1,519),e.y_(1,517),e.y_(1,516),e.y_(1,511),e.y_(1,510),e.y_(1,509),e.y_(1,508),e.y_(1,505),e.y_(1,504),e.y_(1,503),e.y_(1,671),e.y_(1,672),e.y_(1,502)]),224344:e.r(81,503),224345:e.r(81,504),224346:e.r(81,505),224347:e.r(81,508),224348:e.r(81,509),224349:e.r(81,510),224350:e.r(81,511),224351:e.r(81,516),224352:e.r(81,517),224353:e.r(81,519),224354:e.r(81,520),224355:e.r(81,521),224356:e.r(81,522),224357:e.r(81,523),224358:e.r(81,524),224359:e.r(81,512),224360:e.r(81,513),224361:e.r(81,514),224362:e.r(81,515),224363:e.r(81,525),224364:e.r(81,526),224365:e.r(81,527),224366:e.r(81,528),224367:e.r(81,530),224368:e.r(81,533),224369:e.r(81,534),224370:e.r(81,535),224371:e.r(81,536),224372:e.r(81,537),224373:e.r(81,538),224374:e.r(81,539),224375:e.r(81,531),224376:e.r(81,532),224377:e.r(81,541),224378:e.r(81,542),224379:e.r(81,543),224380:e.r(81,544),224381:e.r(81,545),224382:e.r(81,546),224383:e.r(81,547),224384:e.r(81,548),224385:e.r(81,549),224386:e.r(81,550),224387:e.r(74,[e.y_(1,585),e.y_(1,584),e.y_(1,582),e.y_(1,581),e.y_(1,580),e.y_(1,579),e.y_(1,593),e.y_(1,592),e.y_(1,591),e.y_(1,590),e.y_(1,589),e.y_(1,588),e.y_(1,587),e.y_(1,586),e.y_(1,578),e.y_(1,577),e.y_(1,576),e.y_(1,575),e.y_(1,574),e.y_(1,573),e.y_(1,571),e.y_(1,570),e.y_(1,569),e.y_(1,568),e.y_(1,567),e.y_(1,566),e.y_(1,565)]),224388:e.r(81,566),224389:e.r(81,567),224390:e.r(81,568),224391:e.r(81,569),224392:e.r(81,570),224393:e.r(81,571),224394:e.r(81,573),224395:e.r(81,574),224396:e.r(81,575),224397:e.r(81,576),224398:e.r(81,577),224399:e.r(81,578),224400:e.r(81,586),224401:e.r(81,587),224402:e.r(81,588),224403:e.r(81,589),224404:e.r(81,590),224405:e.r(81,591),224406:e.r(81,592),224407:e.r(81,593),224408:e.r(81,579),224409:e.r(81,580),224410:e.r(81,581),224411:e.r(81,582),224412:e.r(81,584),224413:e.r(81,585),224414:e.r(74,[e.y_(1,606),e.y_(1,604),e.y_(1,603),e.y_(1,602),e.y_(1,668),e.y_(1,614),e.y_(1,613),e.y_(1,612),e.y_(1,661),e.y_(1,670),e.y_(1,611),e.y_(1,610),e.y_(1,609),e.y_(1,675),e.y_(1,608),e.y_(1,664),e.y_(1,607),e.y_(1,601),e.y_(1,600),e.y_(1,599),e.y_(1,598),e.y_(1,597),e.y_(1,596),e.y_(1,595)]),224415:e.r(81,596),224416:e.r(81,597),224417:e.r(81,598),224418:e.r(81,599),224419:e.r(81,600),224420:e.r(81,601),224421:e.r(81,607),224422:e.r(81,664),224423:e.r(81,608),224424:e.r(81,675),224425:e.r(81,609),224426:e.r(81,610),224427:e.r(81,611),224428:e.r(81,670),224429:e.r(81,661),224430:e.r(81,612),224431:e.r(81,613),224433:e.r(81,614),224434:e.r(81,668),224435:e.r(81,602),224436:e.r(81,603),224437:e.r(81,604),224438:e.r(81,606),224439:e.r(80,"389"),227114:e.r(45,[5173956907,269722246,5627024832,5308111117,5460393002,24407566,5286543523]),227748:e.r(9,2,1),227756:e.r(45,[5090440940,22369606,22313446,5141262396,131087086,5166561721,23143006,4908933291,5011354978,5184038370,4648931448,22344766,22479886,4980792189,5081354589,5363573510,22398646,27071566,4958523029,135436486,506172646,402369286,4717131832,4940962241,5025696127,5084050272,5101377047,22455526,4471012793,28617646,5738334364,4568030831,5022673164,25262686,22309606,5097186907,22306006]),227765:e.r(9,2,0),227771:e.r(45,[4719082972,553975966,88529086,5119673470]),227775:e.r(45,[4905784472,5263162037,4947558882,4818454971,5080631998,4732244554,4934841291,5176556523,118658566,4885459181,5226210692,5403439583,5040917512,5347059355,5613397626,5620075096,5631328952,4598303745,5642131612,53207326,5341601472,44335246,5712919831,5008070534,446016166,33606406,5648798070,39878206]),227777:e.r(45,[4883845875,5053919895,4814625821,5064227944,4480218211,4945123629,4525401116,5173090694,5641301985,4866853347,5175698761,38833606,4797167418,4933766787,5217722082,39577126,26051566,5716390964,4464199595,4576147155,4574489208,121685446,218059006,31572886,35106526,4927074474,5012903244,5459724946,5375845817,5512903846,360661486]),228024:e.r(45,[4851438150,22483726,22577686,22432366,24232966,22326406,33803806,33782206,5217221231,23568406,22299166,40335166,22336966,39157966,5529016514,5039057482,22303246,5619505578,5253082470,31944766,22590526,41134126,22473406,5744905361]),228091:e.r(9,2,3),228169:e.r(45,[4419225795,172292686,5091096367,130338526,22354366,326356126,4985231481,5238214204,5065400624,5199125674,23093326,471648886,487065046,35396926,5010270665,26823406,5009566461,28445926,4493711194,25868566,4778811589,4758864949,5004428359,5003640230,22473526,22405366,639916246,5029997688]),228283:e.r(45,[5200901734,5752595429,5632673407,4813556296,5128165366,5018226136,4445023422,5650721239,5323535463,5738313008,5282667550,4760174059,4927229243]),228284:e.r(45,[39878206,25303126,4841624305,5233740885,29149246,4482869020,5342098041,5335247211,5319552408,23176366,5239560613,22304806]),228288:e.r(45,[22326886,5699161384,4464587271,5270872708,217999486,424243366,5772636139,25653166,214436926]),228325:e.r(45,[493830526,4994959436,4965033341,182906806]),230350:e.r(57,"230350",232645,232645),230352:e.r(56,"230352",232646,232646),230353:e.r(62,"230353",232647,232647),230355:e.r(58,"230355",232648,232648),230356:e.r(60,"230356",232649,232649),230357:e.r(61,"230357",232650,232650),230386:e.r(59,"230386",232643,232643),230387:e.r(55,"230387",232644,232644),230893:e.q(e.cb(2,e.pe(3,5238214204),e.ge(1),1)),231485:e.r(65,"ce731590-4fdd-4d72-ad56-b4937abed3df","zlYTrkhA","231485"),231568:e.r(66,"mbC7cgzP","231568"),231573:e.r(66,"70OazzUc","231573"),231575:e.r(66,"2WalIzyb","231575"),231615:e.r(53,"231615",232651,232651),231616:e.r(52,"231616",232652,232652),231734:e.r(66,"76Y/dgWM","231734"),231735:e.r(66,"vvUhc2HA","231735"),231736:e.r(66,"FuVaJjNA","231736"),231737:e.r(66,"3cKvKiC/","231737"),231738:e.r(66,"6jS8lmB2","231738"),231739:e.r(66,"LMA614ql","231739"),231740:e.r(66,"on0Tpobv","231740"),231741:e.r(66,"opcItwAt","231741"),231743:e.r(66,"jeB0jTCO","231743"),231744:e.r(66,"htUFnKiT","231744"),231745:e.r(66,"4RLtQf/c","231745"),231746:e.r(66,"JKLm5/WT","231746"),231747:e.r(66,"6RdYJXYh","231747"),231748:e.r(66,"JKDNbpZQ","231748"),231749:e.r(66,"nxNXnnx9","231749"),231750:e.r(66,"JqWOkZRN","231750"),231751:e.r(66,"a+mq9HQi","231751"),231752:e.r(66,"JEmGXqCO","231752"),231753:e.r(66,"cibvWcmp","231753"),231754:e.r(66,"eb1oxBGJ","231754"),231755:e.r(66,"/QeuHmO2","231755"),231756:e.r(72,["bragantino"]),231757:e.r(66,"yXWUI7N9","231757"),231758:e.r(66,"RRmKNfGH","231758"),231759:e.r(66,"w/hLu9Or","231759"),231760:e.r(66,"OfVe6w+X","231760"),231761:e.r(66,"ZR9GTY5u","231761"),231762:e.r(66,"cNv0xY0F","231762"),231763:e.r(66,"rJgLBqwr","231763"),231764:e.r(66,"+9una048","231764"),231765:e.r(66,"34+hkZW5","231765"),231766:e.r(66,"4OJCCP2P","231766"),231767:e.r(66,"O33dErX3","231767"),231768:e.r(66,"q0LLSK8x","231768"),231769:e.r(66,"Qc5QBtE3","231769"),231772:e.r(73,"times/sport"),231980:e.r(44,"Universo Online S.A."),232334:e.q(e.cb(2,e.t,e.e(0),1)),232643:e.r(51,"858bac36-0588-4756-aaaa-cbede5fce65a","230386",.9789898),232644:e.r(51,"72b27b43-881e-4a9a-a1eb-66cb88330145","230387",.9442782),232645:e.r(51,"1b38af04-3641-4df1-b914-f43cf9359405","230350",.9282784),232646:e.r(51,"99003244-9d5d-4c9e-aefa-a7a3e206753e","230352",.90284044),232647:e.r(51,"1b8e73e1-09fd-43f4-b9b2-d459cafcc502","230353",.9391755),232648:e.r(51,"3bb86420-0941-4726-834b-d038d792ad8e","230355",.91396135),232649:e.r(51,"e4fc11dc-f19d-45ad-8a27-c752724a7514","230356",.9220547),232650:e.r(51,"98f89281-c480-4be2-9183-95da61438e0a","230357",.90190285),232651:e.r(51,"7147ca72-a940-4397-87f8-05fc4f50550c","231615",.908352),232652:e.r(51,"1a0bb818-75b1-49b2-9494-bed3bcc7f071","231616",.90869355),232803:e.r(48,e.isp("5224c995-e7c0-46ab-ab10-f240ba08cf2b","zxH68wbQ",!1,"232803"),2,e.os(e.e,3,[5127028972,22326886,23125246,5270872708,217999486,219597286,24186286,4955032745,4934714785,23124526,5347470208,5256339734,105800806,5029997688]),e.ge(1),1),233814:e.r(84,3),233932:e.r(51,"93a81c0a-06be-4e68-ba68-5955320b0439","223806",.8615752),233934:e.r(51,"c8909897-7b18-46ca-b449-c4252e14dcf3","223807",.9676752),233935:e.r(51,"5fef0635-df06-4415-a806-61c886770a72","223780",.9082163),233936:e.r(51,"cddd6bbc-c89d-452d-b770-a1d969a937fa","223779",.9074209),233937:e.r(51,"4c365069-34b7-4560-a36a-43fe585d2ed8","223815",.7773311),233938:e.r(51,"cbaf8ab2-8ee4-4bff-b6df-e74cf52b3a5d","223783",.9130476),234194:e.r(65,"dca2f0d6-742e-4aaf-a6f7-571570a40b9a","5MjahgF2","234194"),234208:e.r(84,0),234209:e.r(84,1),234287:e.r(51,"daa9ff9e-a751-42c1-894f-0a6a396d3867","224387",.91483784),234288:e.r(51,"a4f8cad4-6e88-461a-80ff-ac2b6e7d4912","224388",.6228804),234289:e.r(51,"41e3a147-2556-47c9-87f3-6402b95f8597","224395",.8949614),234290:e.r(51,"1063bffc-27f0-4144-93cf-797dceef421a","224396",.93159676),234291:e.r(51,"9779170d-f5b2-4fd7-a133-6bb000bd6392","224397",.90799993),234292:e.r(51,"3fef1122-7200-4c33-9ea4-5a61eedfff5c","224400",.96034646),234293:e.r(51,"7bd5ebfd-04da-4b33-bccf-41d1ef800df4","224401",.840733),234294:e.r(51,"8811b482-25c9-4306-ab98-eea4b92edf29","224402",.09949064),234649:e.q(e.acqs([e.ocqs([e.tw(e.cb(0,e.ps(2,706),e.ge(3),3),2592e6),e.cb(0,e.a([e.ps(2,"carros/duelo"),e.os(e.s,2,["accord",688,692,707,"type r",750])]),e.ge(1),1),e.cb(0,e.a([e.ps(2,706),e.os(e.s,2,["autonomo","conectividade",697,"hibrido","inovacao","sensing","sustentabilidade",741])]),e.ge(1),1),e.cb(0,e.a([e.ps(2,706),e.os(e.s,2,["acessorios","dicas","manutencao","pecas","revisao","servico"])]),e.ge(1),1),e.scq(e.cw(1,e.pc(["aggregations","SegmentEntry"],236887)),e.cw(3,e.pe(4,236887)),e.ge(1))]),e.scq(e.sw(1,e.t,["properties","aggregations","PageviewEngagement","engaged_time"]),e.vq(e.sw(4,e.t,["properties","engaged_time"])),e.g(60))])),234650:e.r(3,[e.tw(e.cb(0,e.os(e.w,2,[706,688,"honda fit",750,692,707]),e.ge(3),3),1296e6),e.cb(0,e.os(e.s,2,["concessionaria","localizacao","test-drive"]),e.ge(1),1),e.cb(0,e.a([e.af_u(["properties","contextual","classifications","categories"],e.y_(1,0),e.y_(0,709)),e.os(e.s,2,["oferta","promocao","seminovos","taxa zero"])]),e.ge(1),1)],e.sw(1,e.t,["properties","aggregations","PageviewEngagement","engaged_time"]),e.vq(e.sw(4,e.t,["properties","engaged_time"])),e.g(30)),234652:e.r(6,e.ocqs([e.scq(e.cw(1,e.pc(["aggregations","SegmentEntry"],232651)),e.cw(3,e.pe(4,232651)),e.ge(1)),e.scq(e.cw(1,e.pc(["aggregations","SegmentEntry"],223746)),e.cw(3,e.pe(4,223746)),e.ge(1))]),2,["4x4","audi q7","bmw x5","carros premium","cartier","chanel","iphone pro","louis voiutton","macbook","mercedes gle","off road de luxo","porsche cayenne","range rover","rolex","suv","volvo xc90"],2),234823:e.r(71,12096e5,0,e.a([e.os(e.s,2,["noticia"]),e.os(e.s,2,["btc",695,"digital currency","mercado financeiro digital"])]),3,3),234824:e.r(6,e.scq(e.sw(1,e.t,["properties","aggregations","PageviewEngagement","engaged_time"]),e.vq(e.sw(4,e.t,["properties","engaged_time"])),e.g(20)),1,["blockchain","como funciona criptomoeda","como funciona o bitcoin","cripto para iniciantes","investimento bitcoin","investir em cripto","o que e bitcoin"],1),234826:e.q(e.ocqs([e.tw(e.cb(0,e.os(e.s,2,[684,695]),e.ge(1),1),6048e5),e.scq(e.cw(1,e.pc(["aggregations","SegmentEntry"],236868)),e.cw(3,e.pe(4,236868)),e.ge(1))])),234827:e.r(71,2592e5,0,e.a([e.ps(2,684),e.os(e.s,2,["cotacao","cotacoes","grafico","preco","simulacao","simulador"])]),2,2),234832:e.q(e.acqs([e.isp("45bcd0db-2ecf-49ae-8784-4278954b7969","A6eUv7UE",!1,"234832"),e.cb(0,e.af_u(["properties","contextual","classifications","categories"],e.o([e.y_(1,373),e.y_(1,486),e.y_(1,468),e.y_(1,460),e.y_(1,372),e.y_(1,565),e.y_(1,111)]),e.y_(0,709)),e.ge(1),1)])),234837:e.q(e.tw(e.cb(0,e.a([e.ps(2,"junina"),e.os(e.s,2,["bolo de milho","canjica","comida tipica","comidas tipicas","curau","pamonha","quentao","receita","vinho quente"])]),e.ge(1),1),2592e6)),234838:e.r(71,5184e6,0,e.o([e.pc_(18,"Festa Junina"),e.os(e.s,2,["arraia","campina grande","caruaru","festa junina","festivais tradicionais","quermesse","sao joao"])]),1,1),235158:e.r(46,[e.tw(e.cb(0,e.ps(2,"carros eletricos"),e.ge(1),1),2592e6),e.tw(e.cb(0,e.a([e.ps(2,697),e.os(e.s,2,[682,685,"byd",687,"gwm","jac",716,720,723,"porsche",732,"tesla",749,"volvo"])]),e.ge(1),1),2592e6),e.cb(0,e.as(e.s,2,["carro","eletrico ou combustao"]),e.ge(1),1)]),236868:e.r(51,"2d4b5db4-8cbf-4a14-b6cc-83deb1dce99a","234826",.92520565),236872:e.r(49,e.af_u(["properties","contextual","classifications","categories"],e.o([e.y_(1,507),e.y_(1,650),e.y_(1,529)]),e.y_(0,709)),e.os(e.s,2,["b2b","empreendedorismo","franquia","negocios"]),e.ge(1),1,1),236887:e.r(51,"d0a86095-d55e-4854-9ba1-205e19f8fbba","234649",.90415764),236888:e.r(51,"36272a97-bf22-426c-abdd-50d41f18f74b","234837",.68889356),236889:e.r(51,"d84c29aa-de80-406b-86a8-983f3c4586e6","234838",.9068631),237973:e.r(65,"ff984810-8238-4997-b827-5b067829a9a4","iDRweqDi","237973"),238700:e.r(44,"Starlink"),238938:e.r(39,126,434,483,111,370,543),239060:e.r(67,"GNIGfDB/","239060"),239441:e.r(57,"239441",241122,241122),239442:e.r(61,"239442",241123,241123),239443:e.r(60,"239443",241128,241128),239444:e.r(58,"239444",241125,241125),239445:e.r(62,"239445",241126,241126),239446:e.r(56,"239446",241127,241127),239488:e.r(17,2),239491:e.r(17,5),239917:e.r(38,292,370,484),239918:e.r(37,[e.y_(1,95),e.y_(1,166),e.y_(1,479),e.y_(1,380),e.y_(1,96)]),239920:e.r(49,e.af_u(["properties","contextual","classifications","categories"],e.o([e.y_(1,17),e.y_(1,379),e.y_(1,375),e.y_(1,371)]),e.y_(0,709)),e.bsc_(9,["4MAAmAdr","GvMjIs9O","e2AeCBLh","y5EasCP3"]),e.ge(1),1,1),239922:e.r(40,510,543,379,371,547,546,509),239927:e.r(37,[e.y_(1,18),e.y_(1,484),e.y_(1,292),e.y_(1,623)]),239929:e.r(39,28,507,18,484,452,623),239951:e.r(40,483,463,356,119,118,373,375),240040:e.r(38,28,623,452),240048:e.r(49,e.af_u(["properties","contextual","classifications","categories"],e.o([e.y_(1,637),e.y_(1,484),e.y_(1,18),e.y_(1,507),e.y_(1,35)]),e.y_(0,709)),e.pe(2,"pj"),e.ge(1),1,1),240260:e.r(65,"f6b53d70-bda1-485f-aa1a-ce2a1875909c","Hn5enQu+","240260"),240261:e.r(63,e.os(e.s,9,[681,"babosa no cabelo","cabelo cacheado","cabelo crespo","cabelo liso","cabelo ondulado",690,693,"cronograma capilar",696,"frizz",713,"oleo de coco","oleos vegetais","rotinas capilares",738,"transicao capilar"]),e.ge(1),1,0,e.os(e.s,14,[681,"cabelo",690,693,696,713,738]),e.ge(1),1),240347:e.r(12,2),240348:e.r(12,5),240349:e.r(29,2),240350:e.r(29,5),240351:e.r(22,2),240352:e.r(22,5),240353:e.r(27,5),240354:e.r(27,2),240358:e.r(13,2),240359:e.r(21,2),240360:e.r(20,2),240361:e.r(19,2),240362:e.r(25,2),240363:e.r(26,2),240364:e.r(11,2),240365:e.r(18,2),240366:e.r(13,5),240367:e.r(21,5),240368:e.r(20,5),240369:e.r(19,5),240370:e.r(25,5),240371:e.r(26,5),240372:e.r(11,5),240373:e.r(18,5),240550:e.r(47,e.cb(0,e.os(e.s,2,["banco-digital","cartao-pre-pago","carteira digital","carteira-digital","cashback","parcelamento-no-app","picpay","qr code","qrcode"]),e.ge(1),1),e.scq(e.cw(1,e.pc(["aggregations","SegmentEntry"],240370)),e.cw(3,e.pe(4,240370)),e.ge(1)),e.scq(e.cw(1,e.pc(["aggregations","SegmentEntry"],240362)),e.cw(3,e.pe(4,240362)),e.ge(1)),e.ref(10)),240741:e.r(1,e.af_u(["properties","contextual","classifications","categories"],e.o([e.y_(1,546),e.y_(1,318),e.y_(1,319)]),e.y_(0,709)),e.os(e.s,9,["plano controle",725,"pre pago","recarga de celular",743])),240744:e.q(e.acqs([e.cb(0,e.ref(12),e.ge(1),1),e.ocqs([e.cb(0,e.os(e.s,9,["comparadores de planos","controle de gasto",714,721,"plano controle claro","plano controle vivo",726,729,730]),e.ge(1),1),e.cb(0,e.ref(7),e.ge(1),1)]),e.cb(0,e.af_u(["properties","contextual","classifications","categories"],e.o([e.y_(1,621),e.y_(1,287),e.y_(1,319)]),e.y_(0,709)),e.ge(1),1)])),240746:e.r(1,e.os(e.s,9,["dados ilimitados",727,"programas de fidelidade",733,743]),e.af_u(["properties","contextual","classifications","categories"],e.o([e.y_(1,671),e.y_(1,241),e.y_(1,233),e.y_(1,543),e.y_(1,565)]),e.y_(0,709))),240748:e.q(e.acqs([e.cb(0,e.ref(12),e.ge(1),1),e.ocqs([e.cb(0,e.os(e.s,9,["atendimento premium","comparar planos de celular",714,721,725,726,727,729,730,733,"vantagens tim"]),e.ge(1),1),e.cb(0,e.ref(7),e.ge(1),1)])])),240769:e.r(32,2),240770:e.r(32,5),241122:e.r(51,"5e649085-e450-46a7-b801-398f1b9ba69e","239441",.92254204),241123:e.r(51,"3e8524b9-220a-4d54-83f8-15be7d761f1c","239442",.93127286),241125:e.r(51,"ae8537c1-c0da-4b15-9660-08e0cccbf442","239444",.9270013),241126:e.r(51,"6f24ea0d-d347-478d-bc42-e4571d8e683d","239445",.9329401),241127:e.r(51,"ce8e8704-a7fb-4d1b-99ac-e0943adeedf5","239446",.9062632),241128:e.r(51,"a3d60c00-cef4-4f4c-8dc4-52c41f8157dc","239443",.935226),241363:e.r(53,"241363",241459,241459),241364:e.r(52,"241364",241460,241460),241365:e.r(59,"241365",241461,241461),241366:e.r(55,"241366",241462,241462),241459:e.r(51,"69940099-77ce-42f2-aeff-22f10e61bcd2","241363",.90597713),241460:e.r(51,"08a01ab0-c049-4ca6-954a-17e59ff90a58","241364",.90037996),241461:e.r(51,"19b0191e-88d2-49c9-b228-649f1b359b4b","241365",.91988474),241462:e.r(51,"24239d89-ffe4-45fd-a328-dd562315a777","241366",.94423944),241522:e.r(65,"b277323c-2b38-4379-9f7e-c5f9157bf852","KL6nPOE0","241522"),241718:e.r(67,"Asdowb7P","241718"),241767:e.r(28,2),241768:e.r(28,5),241792:e.r(33,5),241793:e.r(33,2),241802:e.q(e.cb(8,e.ps(["stepName"],"conclusion"),e.ge(1),1)),241936:e.r(48,e.scq(e.cw(1,e.pc(["aggregations","SegmentEntry"],242262)),e.cw(3,e.pe(4,242262)),e.ge(1)),0,e.bsc_(["client","domain"],["8lMcNP1x"]),e.ge(1),1),242075:e.r(30,5),242077:e.r(30,2),242258:e.q(e.cb(0,e.a([e.pe(17,"Campinas"),e.ref(9)]),e.ge(1),1)),242262:e.r(51,"8f070719-5485-40d2-8e9e-64f1d2f6ae7e","241936",.9581858),242383:e.r(50,11,2,["aplicativo-de-entrega","app-de-bebida","app-de-comida","cardapio-online","delivery","desconto","entrega-rapida","ifood","pedido-online","pedir-agua","pedir-bebida","pedir-cerveja","pedir-comida","pedir-hamburguer","pedir-lanche","pedir-pizza","pedir-sobremesa","pedir-sushi","pedir-vinho","rappi","taxa-de-entrega"]),242478:e.r(15,5),242479:e.r(15,2),242946:e.r(24,5),242947:e.r(24,2),242993:e.q(e.acqs([e.ocqs([e.cb(0,e.ref(13),e.ge(1),1),e.cb(0,e.a([e.y(6,745),e.tg(17540064e5)]),e.ge(1),1),e.cb(0,e.a([e.y(12,655),e.tg(17540064e5)]),e.ge(1),1),e.scq(e.cw(1,e.a([e.pg(15,60),e.pc_(5,657)])),e.vq(e.sw(4,e.pc_(5,657),["properties","engaged_time"],e.g(60))),e.ge(1)),e.isp("8e2dcda5-6f1e-46a0-bd65-447a04d00fec","XJJvIkP7",!1,"242993")]),e.scq(e.cw(1,e.pc(["aggregations","SegmentEntry"],242994)),e.cw(3,e.pe(4,242994)),e.ge(1))])),242994:e.r(65,"5eec7e8e-1c8e-4b99-97cd-33a257a0b468","EeyuHpH+","242994"),243037:e.r(35,6,745),243038:e.r(35,12,655),243039:e.r(9,0,13),243040:e.q(e.scq(e.cw(1,e.a([e.pg(15,60),e.pc_(5,657)])),e.vq(e.sw(4,e.pc_(5,657),["properties","engaged_time"],e.g(60))),e.ge(1))),243087:e.r(5,e.cb(0,e.a([e.y(6,745),e.tg(17540064e5)]),e.ge(1),1),e.isp("8e2dcda5-6f1e-46a0-bd65-447a04d00fec","XJJvIkP7",!1,"243087"),e.ref(13),e.a([e.y(12,655),e.tg(17540064e5)]),e.cw(1,e.a([e.pg(15,60),e.pc_(5,657)])),e.ge(1),e.sw(4,e.pc_(5,657),["properties","engaged_time"],e.g(60))),243126:e.r(2),243347:e.r(7,0,e.tb(175608e7,175616634e4),1,1),243392:e.r(43,"3A2BL8IAq9spB9w9hlPpGlyk"),243493:e.r(46,[e.isp("7dcd40a2-efd2-48b6-9796-451b5878a92a","bNNt8u1j",!1,"243493"),e.cb(0,e.a([e.y(6,705),e.tg(17356896e5)]),e.ge(1),1),e.cb(0,e.os(e.s,10,["amazon prime day","black friday"]),e.ge(1),1),e.cb(0,e.af_u(["properties","tagsText"],e.bsc([],["1X3jxO0t","HxDiJ9Wh"])),e.ge(1),1),e.cb(0,e.bsc_(9,["GvMjIs9O","QwNnFgWH","afk5EkOB","e2AeCBLh","y5EasCP3"]),e.ge(1),1)]),243542:e.r(31,2),243543:e.r(31,5),243561:e.r(65,"7dcd40a2-efd2-48b6-9796-451b5878a92a","Ufzc0gAo","243561"),243759:e.r(47,e.isp("7dcd40a2-efd2-48b6-9796-451b5878a92a","BwdxrCqF",!1,"243759"),e.cb(0,e.os(e.s,10,["\'não tento agradar a todos\': flávia alessandra cita vantagens da maturidade","bem-estar","envelhecimento","flávia alessandra estreou na tv após protestar na globo: \'cadê meu papel?\'","flávia alessandra relembra separação de marcos paulo: \'eu ouvia absurdos\'","flávia alessandra sobre reposição hormonal: \'já senti uma grande mudança\'","longevidade","saúde","vivabem no seu tempo: flávia alessandra comanda evento para público 45+"]),e.ge(1),1),e.cb(0,e.af_u(["properties","tagsText"],e.bsc([],["Jgqdl8HN","Pu3gHham","SfRZuZXO","iRRJsLQc","jYYBtafh","uvVa8AB7"])),e.ge(1),1),e.a([e.y(6,747),e.tg(17356896e5)])),243862:e.r(4,e.cb(0,e.os(e.s,10,[678,679,698,728,731,736,740]),e.ge(1),1),e.os(e.w,6,[747,745]),"lJgSoliO","243862",e.af_u(["properties","tagsText"],e.bsc([],["0uryqhUS","1RpWpQnd","Dx1mKy+r","EpJ4U80R","K/oCgFNw","nKsUS6Wr","xsN39Xus"])),665,665),243871:e.r(23,2),243872:e.r(23,5),243873:e.r(16,2),243874:e.r(16,5),243974:e.r(0,e.ps(9,"chocolate"),0,e.ref(8),e.ge(1),1),243975:e.r(0,e.os(e.s,9,[686]),0,e.ref(8),e.ge(1),1),243976:e.r(39,369,502,595,233,357,166),243977:e.r(14,5),243978:e.r(14,2),244387:e.r(8,0,1,1,9,["coala festival","festivais musicais","lollapalooza","musica festivais","primavera sound","rock in rio","the town","tomorrowland"]),244678:e.r(54,"RpBz8DQ6","244678","hfmUHvm7","244678"),244680:e.r(54,"+ZaTsGVt","244680","MTLm5bD0","244680"),244681:e.r(34,6),244891:e.r(50,4,9,[677,"agrishow","agritech","agro","commodities","cooperativa","esg","financiamento rural","seguro rural"]),244914:e.r(2),245817:e.r(8,6,1,1,13,["salonline.com.br/kit-completo-para-o-cuidado-dos-cabelos-lisos","salonline.com.br/kit-finalizacao-cabelos-lisos-maria-natureza-defrizante-meu-liso-demais","salonline.com.br/kit-para-cabelos-lisos-com-hidra-liso-extremo-e-meu-liso-demais-salon-line","salonline.com.br/liso","salonline.com.br/lp-meu-liso","salonline.com.br/meu-liso"]),245818:e.r(8,6,1,1,13,["salonline.com.br/kit-cuidados-para-as-onduladas","salonline.com.br/kit-forca-e-hidratacao-dos-cabelos-lisos-e-ondulados","salonline.com.br/ondulado","salonline.com.br/os-queridinhos-dos-cabelos-ondulados"]),245819:e.r(8,6,1,1,13,["salonline.com.br/cacheado",735,"salonline.com.br/kit-cachos-crespos-sos-cachos-multibeneficios-5-produtos-salon-line","salonline.com.br/kit-com-3-mascaras-para-cabelos-cacheados-e-crespos-salon-line","salonline.com.br/kit-relaxamento-e-hidratacao-para-cabelos-cacheados-salon-line"]),245820:e.r(8,6,1,1,13,["salonline.com.br/crespo",735,"salonline.com.br/kit-queridinho-dos-cabelos-crespos"]),245826:e.r(8,6,1,1,13,["salonline.com.br"]),246099:e.r(4,e.scq(e.sw(1,e.pc_(5,665),["properties","aggregations","PageviewEngagement","engaged_time"]),e.vq(e.sw(4,e.pc_(5,665),["properties","engaged_time"])),e.g(60)),e.y(6,745),"S+Ea4d5B","246099",e.ref(6),654,654),246100:e.r(5,e.isp("7dcd40a2-efd2-48b6-9796-451b5878a92a","S+Ea4d5B",!1,"246100"),e.scq(e.sw(1,e.pc_(5,654),["properties","aggregations","PageviewEngagement","engaged_time"]),e.vq(e.sw(4,e.pc_(5,654),["properties","engaged_time"])),e.g(60)),e.y(6,745),e.ref(6),e.sw(1,e.pc_(5,665),["properties","aggregations","PageviewEngagement","engaged_time"]),e.g(60),e.sw(4,e.pc_(5,665),["properties","engaged_time"])),246101:e.r(7,0,e.af_u(["properties","tagsText"],e.bsc([],["212jdXvd","GpT/0Pxf","jDIouzvN","oKl8KfMt","tXNJY8Jt"])),1,1),246110:e.r(10,2,["campaign_id"],3696557510),246658:e.q(e.acqs([e.ocqs([e.cb(0,e.y(6,745),e.ge(1),1),e.isp("7dcd40a2-efd2-48b6-9796-451b5878a92a","S+Ea4d5B",!1,"246658"),e.cb(0,e.ref(2),e.ge(1),1),e.scq(e.sw(1,e.pc_(5,656),["properties","aggregations","PageviewEngagement","engaged_time"]),e.vq(e.sw(4,e.pc_(5,656),["properties","engaged_time"])),e.g(60))]),e.ifp("242994")])),246659:e.r(3,[e.cb(0,e.y(6,745),e.ge(1),1),e.isp("7dcd40a2-efd2-48b6-9796-451b5878a92a","S+Ea4d5B",!1,"246659"),e.cb(0,e.ref(2),e.ge(1),1),e.scq(e.sw(1,e.pc_(5,656),["properties","aggregations","PageviewEngagement","engaged_time"]),e.vq(e.sw(4,e.pc_(5,656),["properties","engaged_time"])),e.g(60))],e.cw(1,e.pc(["aggregations","SegmentEntry"],242994)),e.cw(3,e.pe(4,242994)),e.e(0)),246705:e.r(51,"30a573b1-c899-427c-8ed1-9306fa0695ee","244680",.8823662),246820:e.r(41,["A4CNkPyR","JmL0jofk","Zmx4bovK","hi5L6HL4"]),246821:e.r(41,["L18tqCTG","fdKS+aTO","jADelrK6","l+FkpX3t"]),246822:e.r(41,["5ZOxeGjr","bHlt35IM","tE421sTK"]),246823:e.r(36,["Roraima","Acre","Amapá","Rondônia","Tocantins","Amazonas","Pará"]),246825:e.r(36,["Sergipe","Rio Grande do Norte","Piauí","Paraíba","Maranhão",653,652,"Alagoas"]),246830:e.r(8,0,1,1,9,[677,"agricultura","agronomia","algodao","aves","boi gordo",686,"cana de acucar","carne bovina","cavalo","colheita","confinamento","estiagem","fertilizante","frango de corte","gado de corte","genetica bovina","irrigacao","lavoura","leite","milho","pastagem","pecuaria","plantio","praga","racao animal","rodeio",734,"seca","soja","suinos","trator","vaquejada","veterinaria rural"]),246832:e.r(7,0,e.pc_(18,"82756"),1,1)}),rootCompressionLookup:e=>[(t,r,n,i,a)=>e.q(e.acqs([e.cb(0,t,e.ge(1),1),e.cb(r,n,i,a)])),(t,r)=>e.q(e.acqs([e.cb(0,e.a([e.ps(8,743),t]),e.ge(1),1),e.cb(0,e.a([e.ps(8,743),r]),e.ge(1),1)])),()=>e.q(e.acqs([e.cb(0,e.t,e.ge(1),1),e.scq(e.cw(1,e.pc(["aggregations","SegmentEntry"],242994)),e.cw(3,e.pe(4,242994)),e.e(0))])),(t,r,n,i)=>e.q(e.acqs([e.ocqs(t),e.scq(r,n,i)])),(t,r,n,i,a,o,s)=>e.q(e.acqs([e.ocqs([e.cb(0,r,e.ge(1),1),e.isp("7dcd40a2-efd2-48b6-9796-451b5878a92a",n,!1,i),e.cb(0,a,e.ge(1),1),t,e.scq(e.sw(1,e.pc_(5,o),["properties","aggregations","PageviewEngagement","engaged_time"]),e.vq(e.sw(4,e.pc_(5,s),["properties","engaged_time"])),e.g(60))]),e.ifp("242994")])),(t,r,n,i,a,o,s)=>e.q(e.acqs([e.ocqs([e.cb(0,n,e.ge(1),1),t,e.cb(0,i,e.ge(1),1),e.scq(a,e.vq(s),o),r]),e.scq(e.cw(1,e.pc(["aggregations","SegmentEntry"],242994)),e.cw(3,e.pe(4,242994)),e.e(0))])),(t,r,n,i)=>e.q(e.acqs([e.tw(e.cb(0,e.os(e.s,2,n),e.ge(i),r),6048e5),t])),(t,r,n,i)=>e.q(e.cb(t,r,e.ge(i),n)),(t,r,n,i,a)=>e.q(e.cb(t,e.os(e.s,i,a),e.ge(n),r)),(t,r)=>e.q(e.cb(t,e.ref(r),e.ge(1),1)),(t,r,n)=>e.q(e.cb(t,e.pe(r,n),e.ge(1),1)),t=>e.q(e.cb(t,e.pe(3,22266286),e.ge(1),1)),t=>e.q(e.cb(t,e.pe(3,22988686),e.ge(1),1)),t=>e.q(e.cb(t,e.pe(3,23077726),e.ge(1),1)),t=>e.q(e.cb(t,e.pe(3,23344846),e.ge(1),1)),t=>e.q(e.cb(t,e.pe(3,25262686),e.ge(1),1)),t=>e.q(e.cb(t,e.pe(3,26340166),e.ge(1),1)),t=>e.q(e.cb(t,e.pe(3,28437406),e.ge(1),1)),t=>e.q(e.cb(t,e.pe(3,454249966),e.ge(1),1)),t=>e.q(e.cb(t,e.pe(3,4585093846),e.ge(1),1)),t=>e.q(e.cb(t,e.pe(3,4663137966),e.ge(1),1)),t=>e.q(e.cb(t,e.pe(3,4973808402),e.ge(1),1)),t=>e.q(e.cb(t,e.pe(3,5088749686),e.ge(1),1)),t=>e.q(e.cb(t,e.pe(3,5212630754),e.ge(1),1)),t=>e.q(e.cb(t,e.pe(3,5229386799),e.ge(1),1)),t=>e.q(e.cb(t,e.pe(3,5300427993),e.ge(1),1)),t=>e.q(e.cb(t,e.pe(3,5329900271),e.ge(1),1)),t=>e.q(e.cb(t,e.pe(3,5460393002),e.ge(1),1)),t=>e.q(e.cb(t,e.pe(3,5529016514),e.ge(1),1)),t=>e.q(e.cb(t,e.pe(3,5642316154),e.ge(1),1)),t=>e.q(e.cb(t,e.pe(3,5721468889),e.ge(1),1)),t=>e.q(e.cb(t,e.pe(3,5733685186),e.ge(1),1)),t=>e.q(e.cb(t,e.pe(3,5790062876),e.ge(1),1)),t=>e.q(e.cb(t,e.pe(3,5825984879),e.ge(1),1)),t=>e.q(e.cb(t,e.t,e.ge(1),1)),(t,r)=>e.q(e.cb(0,e.a([e.y(t,r),e.tg(17540064e5)]),e.ge(1),1)),t=>e.q(e.cb(0,e.os(e.w,7,t),e.ge(1),1)),t=>e.q(e.cb(0,e.af_u(["properties","contextual","classifications","categories"],e.o(t),e.y_(0,709)),e.ge(1),1)),(t,r,n)=>e.q(e.cb(0,e.af_u(["properties","contextual","classifications","categories"],e.o([e.y_(1,t),e.y_(1,r),e.y_(1,n)]),e.y_(0,709)),e.ge(1),1)),(t,r,n,i,a,o)=>e.q(e.cb(0,e.af_u(["properties","contextual","classifications","categories"],e.o([e.y_(1,t),e.y_(1,r),e.y_(1,n),e.y_(1,i),e.y_(1,a),e.y_(1,o)]),e.y_(0,709)),e.ge(1),1)),(t,r,n,i,a,o,s)=>e.q(e.cb(0,e.af_u(["properties","contextual","classifications","categories"],e.o([e.y_(1,t),e.y_(1,r),e.y_(1,n),e.y_(1,i),e.y_(1,a),e.y_(1,o),e.y_(1,s)]),e.y_(0,709)),e.ge(1),1)),t=>e.q(e.cb(0,e.bsc_(7,t),e.ge(1),1)),t=>e.q(e.cb(0,e.y(7,t),e.ge(1),1)),t=>e.q(e.cb(0,e.ps(2,t),e.ge(1),1)),t=>e.q(e.cb(0,e.ps(8,t),e.ge(1),1)),t=>e.q(e.cb(2,e.os(e.e,3,t),e.ge(1),1)),t=>e.q(e.ocqs(t)),(t,r,n,i)=>e.q(e.ocqs([t,e.cb(0,i,e.ge(1),1),r,n])),(t,r,n,i,a)=>e.q(e.ocqs([e.cb(r,n,i,a),t])),(t,r,n,i,a)=>e.q(e.ocqs([e.cb(0,t,e.ge(a),1),e.cb(0,r,n,i)])),(t,r,n)=>e.q(e.ocqs([e.cb(0,e.os(e.s,r,n),e.ge(1),1),e.cb(0,e.ref(t),e.ge(1),1)])),(t,r,n)=>e.q(e.ocqs([e.lm(t,e.ge(n)),e.ifp(r)])),(t,r,n)=>e.q(e.ocqs([e.isp("1e6ee786-41c7-4ab1-bd1e-cfe48a3ad543","J9pv0ola",!1,t),e.scq(e.cw(1,e.pc(["aggregations","SegmentEntry"],r)),e.cw(3,e.pe(4,n)),e.ge(1))])),(t,r,n)=>e.q(e.ocqs([e.isp("1e6ee786-41c7-4ab1-bd1e-cfe48a3ad543","zfaUjfNO",!1,t),e.scq(e.cw(1,e.pc(["aggregations","SegmentEntry"],r)),e.cw(3,e.pe(4,n)),e.ge(1))])),(t,r,n,i)=>e.q(e.ocqs([e.isp("45bcd0db-2ecf-49ae-8784-4278954b7969",t,!1,r),e.isp("06fbc551-c65d-48f4-8172-597a475ccb43",n,!1,i)])),(t,r,n)=>e.q(e.ocqs([e.isp("45bcd0db-2ecf-49ae-8784-4278954b7969","+ZaTsGVt",!1,t),e.scq(e.cw(1,e.pc(["aggregations","SegmentEntry"],r)),e.cw(3,e.pe(4,n)),e.ge(1))])),(t,r,n)=>e.q(e.ocqs([e.isp("45bcd0db-2ecf-49ae-8784-4278954b7969","GIba53RH",!1,t),e.scq(e.cw(1,e.pc(["aggregations","SegmentEntry"],r)),e.cw(3,e.pe(4,n)),e.ge(1))])),(t,r,n)=>e.q(e.ocqs([e.isp("45bcd0db-2ecf-49ae-8784-4278954b7969","LRPP/cHm",!1,t),e.scq(e.cw(1,e.pc(["aggregations","SegmentEntry"],r)),e.cw(3,e.pe(4,n)),e.ge(1))])),(t,r,n)=>e.q(e.ocqs([e.isp("45bcd0db-2ecf-49ae-8784-4278954b7969","Li6EIyuO",!1,t),e.scq(e.cw(1,e.pc(["aggregations","SegmentEntry"],r)),e.cw(3,e.pe(4,n)),e.ge(1))])),(t,r,n)=>e.q(e.ocqs([e.isp("45bcd0db-2ecf-49ae-8784-4278954b7969","RpBz8DQ6",!1,t),e.scq(e.cw(1,e.pc(["aggregations","SegmentEntry"],r)),e.cw(3,e.pe(4,n)),e.ge(1))])),(t,r,n)=>e.q(e.ocqs([e.isp("45bcd0db-2ecf-49ae-8784-4278954b7969","VB5xNqf6",!1,t),e.scq(e.cw(1,e.pc(["aggregations","SegmentEntry"],r)),e.cw(3,e.pe(4,n)),e.ge(1))])),(t,r,n)=>e.q(e.ocqs([e.isp("45bcd0db-2ecf-49ae-8784-4278954b7969","Woz4zO0g",!1,t),e.scq(e.cw(1,e.pc(["aggregations","SegmentEntry"],r)),e.cw(3,e.pe(4,n)),e.ge(1))])),(t,r,n)=>e.q(e.ocqs([e.isp("45bcd0db-2ecf-49ae-8784-4278954b7969","kHWaIUR9",!1,t),e.scq(e.cw(1,e.pc(["aggregations","SegmentEntry"],r)),e.cw(3,e.pe(4,n)),e.ge(1))])),(t,r,n,i,a,o,s)=>e.q(e.ocqs([e.tw(e.cb(0,t,r,n),2592e6),e.tw(e.cb(i,a,o,s),2592e6)])),(t,r)=>e.q(e.ocqs([e.tw(e.cb(0,e.a([e.ps(2,r),e.ref(5)]),e.ge(5),5),2592e6),e.tw(e.cb(0,e.ps(14,t),e.ge(5),5),2592e6)])),(t,r,n)=>e.q(e.isp(t,r,!1,n)),(t,r)=>e.q(e.isp("3664666e-02cd-4a9d-bd17-37b1bac52be0",t,!1,r)),(t,r)=>e.q(e.isp("45bcd0db-2ecf-49ae-8784-4278954b7969",t,!1,r)),(t,r)=>e.q(e.isp("bb780a9d-4c90-4fc6-9c42-e7a6e6ca90c2",t,!1,r)),t=>e.q(e.scq(e.sw(1,e.t,["properties","aggregations","PageviewEngagement","engaged_time"]),e.vq(e.sw(4,e.t,["properties","engaged_time"])),e.g(t))),(t,r,n,i)=>e.q(e.tw(e.cb(t,r,e.ge(i),n),6048e5)),(t,r,n,i,a)=>e.q(e.tw(e.cb(r,n,e.ge(a),i),t)),t=>e.q(e.tw(e.cb(0,e.a([e.ref(5),e.os(e.s,2,t)]),e.ge(5),5),2592e6)),t=>e.q(e.tw(e.cb(0,e.a([e.ps(2,t),e.ref(5)]),e.ge(5),5),2592e6)),t=>e.q(e.tw(e.cb(0,e.af_u(["properties","contextual","classifications","categories"],e.o(t),e.y_(0,709)),e.ge(1),1),2592e6)),(t,r,n,i)=>e.q(e.tw(e.cb(0,e.af_u(["properties","contextual","classifications","categories"],e.o([e.y_(1,t),e.y_(1,r),e.y_(1,n),e.e_(1,i)]),e.y_(0,709)),e.ge(1),1),2592e6)),(t,r,n,i,a,o,s,c,u)=>e.q(e.tw(e.cb(0,e.af_u(["properties","contextual","classifications","categories"],e.o([e.y_(1,t),e.y_(1,r),e.y_(1,n),e.y_(1,i),e.y_(1,a),e.y_(1,o),e.y_(1,s),e.y_(1,c),e.e_(1,u)]),e.y_(0,709)),e.ge(1),1),2592e6)),(t,r,n,i,a,o,s,c,u,f)=>e.q(e.tw(e.cb(0,e.af_u(["properties","contextual","classifications","categories"],e.o([e.y_(1,t),e.y_(1,r),e.y_(1,n),e.y_(1,i),e.y_(1,a),e.y_(1,o),e.y_(1,s),e.y_(1,c),e.y_(1,u),e.e_(1,f)]),e.y_(0,709)),e.ge(1),1),2592e6)),(t,r,n,i,a,o,s,c,u,f,l)=>e.q(e.tw(e.cb(0,e.af_u(["properties","contextual","classifications","categories"],e.o([e.y_(1,t),e.y_(1,r),e.y_(1,n),e.y_(1,i),e.y_(1,a),e.y_(1,o),e.y_(1,s),e.y_(1,c),e.y_(1,u),e.y_(1,f),e.e_(1,l)]),e.y_(0,709)),e.ge(1),1),2592e6)),(t,r,n,i,a,o,s,c,u,f,l,d)=>e.q(e.tw(e.cb(0,e.af_u(["properties","contextual","classifications","categories"],e.o([e.y_(1,t),e.y_(1,r),e.y_(1,n),e.y_(1,i),e.y_(1,a),e.y_(1,o),e.y_(1,s),e.y_(1,c),e.y_(1,u),e.y_(1,f),e.y_(1,l),e.e_(1,d)]),e.y_(0,709)),e.ge(1),1),2592e6)),t=>e.q(e.tw(e.cb(0,e.af_u(["properties","contextual","classifications","categories"],e.e_(1,t),e.y_(0,709)),e.ge(1),1),2592e6)),t=>e.q(e.tw(e.cb(0,e.af_u(["properties","contextual","classifications","categories"],e.y_(1,t),e.y_(0,709)),e.ge(1),1),2592e6)),t=>e.q(e.tw(e.cb(0,e.ref(t),e.ge(1),1),2592e6)),t=>e.q(e.tw(e.cb(0,e.ps(11,t),e.ge(1),1),6048e5)),t=>e.q(e.tw(e.cb(2,e.ref(t),e.ge(1),1),6048e5)),t=>e.q(e.vq(e.mxw(4,e.t,["properties","completion"],e.g(t))))],stateSyncReplays:e=>[],subexpressionsLookup:e=>[e.os(e.e,3,[44071846,5641863489,4817206306,5112550998,5238987794,5026788188,4743758356,5777919767,5661457339,32896006,5622707253,5341310140,4718245095,4952651691,25547086,22380646,23149966,5102420787,4610364206,5457726899,5135636092,28295206]),e.os(e.e,3,[5649974582,4944641193,26753686,5190263648,649874326,455989966,5356001725,54745726,5331300600,22369246,4920070037,4926268052,5757632606,576611206,4630408698,22396006,253644166,29513206,5103598698,28072246,24331486,25820806,4988151497,26340166,33443326,655317646,24332926,22578886,4732250304,22320526,67972846,32389366,25614766,22424926,4832460646,31875366,22342006,353177326,24222406,23344846,5048984366,22461646]),e.os(e.s,10,[731,737,746]),e.os(e.e,3,[4582350645,4581739418,26181766,4919603925,29356126,4899652713,5284996529,4973808402,5329900271,5356425245,4585093846,22266286,5281976367]),e.af_u(["properties","contextual","classifications","categories"],e.y_(1,4),e.y_(0,709)),e.os(e.s,2,[699,704]),e.os(e.s,10,[678,679,698,710,712,719,722,728,731,736,739,740]),e.os(e.s,11,[689,715,717,744,748]),e.af_u(["properties","contextual","classifications","categories"],e.y_(1,111),e.y_(0,709)),e.bsc_(7,["Zmx4bovK"]),e.af_u(["properties","contextual","classifications","categories"],e.y_(1,304),e.y_(0,709)),e.af_u(["properties","contextual","classifications","categories"],e.y_(1,647),e.y_(0,709)),e.nt(e.ps(8,743)),e.os(e.s,10,[676,680,694,700,701,708])]}})})));var we=__webpack_require__(235),Se=__webpack_require__(229);async function Ie(l){let{contextsInitTimestampPerformance:d,master:p}=l;const g=await p.next(),m=performance.now();Object.entries(g.globals??{}).forEach((e=>{let[t,r]=e;Object.defineProperty(self,t,{value:r})}));const b=new Z(g.permutiveConfig);b.measureBetween("waiting_worker_high_priority_config",d,m);const h=function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.RP;return t.loggingEnabled&&void 0!==self.console?.log?new C(r):new O}(g.permutiveConfig,g.sdkInitTimestampDate),_=g.metricsEnabled?new U(g.sdkInitTimestampPerformance,g.timeOriginMainContext,h):new E;_.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"worker_evaluated",time_origin:"sdk_init"},d),_.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"worker_received_high_priority_config",time_origin:"sdk_init"},m);const y=(0,r.zG)(p.next,b.traceTask("waiting_worker_low_priority_config"))();y.then((()=>_.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"worker_received_low_priority_config",time_origin:"sdk_init"})));const v=(0,r.zG)((()=>p.read()),function(e,n){const i=e=>(0,r.zG)(e,j.Hd((e=>e in n)),(e=>{let{left:t,right:r}=e;return{buffers:r,nonBuffers:t}}));return a=>{const{buffers:o,nonBuffers:s}=i(e),[c,u]=t.Ue({...s,...(0,r.zG)(o,j.Su((e=>()=>{const t=o[e];return o[e]=n[e].empty,t})))});return(async()=>{for(;;){const e=(0,r.zG)(await a(),F.UI(i),F.ur({concat:(e,t)=>({nonBuffers:{...e.nonBuffers,...t.nonBuffers},buffers:(()=>{const r={...e.buffers};for(const e in t.buffers)r[e]=e in r?n[e].concat(r[e],t.buffers[e]):t.buffers[e];return r})()})})),t=(0,r.zG)(e.buffers,j.Su(((e,t)=>(o[e]=n[e].concat(o[e],t),()=>{const t=o[e];return o[e]=n[e].empty,t}))));u({...c.current,...e.nonBuffers,...t})}})(),(0,r.zG)(e,j.Su((e=>(0,r.zG)(c,t.UI((t=>t[e]))))))}}({contextualCohorts:i.YP,consent:g.consent,enrichmentReplacementMap:i.YP,eventSourceId:g.eventSourceId,identities:i.YP,newEvents:a.cS,pageviewState:g.pageviewState,priorCachedEventsResponses:a.cS,sessionId:g.sessionId,userId:g.userId,userIdIsNewlyGenerated:g.userIdIsNewlyGenerated,viewId:g.pageviewState.viewId,webClient:i.G(g.webClient)},{newEvents:a.uZ(),priorCachedEventsResponses:a.uZ()}),(0,o.rO)({newEvents:(0,we.F)(_,"pageview_received_by_worker")}),(e=>({...e,currentTimestampSecs:Ge((0,r.zG)(g.initialTimestampSecs,i.EQ((()=>0),(e=>e-Date.now()/1e3))))}))),{eventsCachedInWorker:w,coreService:S}=await function(o,l,d,p,g,m){p.debug("SDK core started",o);const b=500,h=new I(p,m),_=new G(o.permutiveConfig),y=new re(_,o.permutiveConfig,h,m,p,(()=>d.webClient.current)),v=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};y.reportError(e,t?.userId,t?.timestamp)},w=(0,r.zG)(s.Y3((()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,240)).then((e=>e.watson))),(()=>"Failed to import watson.")),s.UI((e=>(0,r.zG)(d.webClient,t.UI(i.UI((e=>e.url))),t.D8(i.Eh(Se.Eq)),(n=>e({config:o.permutiveConfig,metrics:m,permutiveApi:h,permutiveUrls:_,pageUrl:n,trace:g,watsonEnabled:(0,r.zG)(d.pageviewState,t.UI((e=>e.watsonEnabled)))})))))),S=(0,r.zG)(W.initialise(o.permutiveConfig,p,v,g,m,d.userId,(()=>(0,r.zG)(ee.connect(new T(o.permutiveConfig),m,new A,o.organizationId,`events_${d.userId.current}`,`keys_${d.userId.current}`,"events",p,d.consent,o.isSecureContext),g.traceTask("connect_idb_events_cache")))),g.traceTask("initialise_events_cache"),s.At((()=>()=>m.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"events_cache_initialised",time_origin:"sdk_init"},performance.now()))),s.EQ((e=>{p.error(`Worker failed to initialise IndexedDB event cache: ${e}`);const n={},[i,o]=t.gS(a.uZ()),s=()=>new Promise((e=>{const t=String(Math.random());n[t]=r=>{delete n[t],e(r)},o([[t,void 0]])}));return(0,r.zG)(d.priorCachedEventsResponses,t.UI((e=>(0,r.zG)(e(),a.UI((e=>{let[t,r]=e;return n[t]?.(r)})))))),{eventsCachedInWorker:!1,coreOutput:{priorCachedEventsRequests:i},coreConfig:{eventsCache:f.t$(s)}}}),(e=>({eventsCachedInWorker:!0,coreOutput:{priorCachedEventsRequests:t.a9(R.of(a.bM()))},coreConfig:{eventsCache:f.F2(e)}})))),U=(0,r.zG)(!0,s.DT(r.yR,(()=>"IndexedDB disabled.")),s.tS((()=>(0,r.zG)(z.K.initialise(new T(o.permutiveConfig),m,p,new A,`worker_${o.organizationId}`,"core_service_state","keys","core_service_state",4,o.isSecureContext),g.traceTask("initialise-core-idb")))),s.tS((e=>(0,k.Yt)(s.Hi)({persistCoreState:c(e,"core"),persistLalState:c(e,"lal")})))),E=()=>new Promise((e=>(0,r.zG)(d.consent,t.YP((t=>{t&&e()}))))),P=a=>(0,r.zG)(s.fF(U),s.YO("servicePersistence"),s.Qt("eventsCache",s.fF((()=>a))),s.Qt("coreService",(0,r.zG)(s.Y3((()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,646)).then((e=>e.service))),(e=>`Failed to import core service: ${e}`)),g.traceTask("import-core-service"))),s.Qt("lookalikeModelsService",s.Y3((()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,869)).then((e=>e.lookalikeModelsService))),(()=>"Failed to import lookalike models."))),s.Qt("optimisedActivationsConfig",s.Y3((()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,836)).then((e=>e.optimisedActivationsConfig))),(()=>"Failed to import lookalike models."))),s.Qt("watson",w),M.mU((()=>E)),s.UI((a=>{let{coreService:s,eventsCache:c,lookalikeModelsService:y,optimisedActivationsConfig:w,servicePersistence:S,watson:I}=a;const G={config:o.permutiveConfig,customQueries:ve(),logger:p,metrics:m,optimisedActivationsConfig:w,permutiveApi:h,permutiveUrls:_,reportError:v,trackPageviewComplete:o.trackPageviewComplete,migratedStateMaps:(0,r.zG)(i.lo(!o.isFirstPageview),i.EQ((()=>M.of({external:i.bM(),internal:i.bM()})),(()=>R.of(l.then((e=>e.migratedStateMaps)))))),trace:g,watson:i.G(I),performance:i.ij(self.performance)};return(0,r.zG)(S,f.UI((a=>{let{persistCoreState:o,persistLalState:f}=a;return(0,r.zG)(y({...G,...d}),f,n.VS((a=>{let[f,l]=a;return(0,r.zG)(d,s({...G,...c.coreConfig,lookalikeModels:i.G(l)}),(p=b,g=t.a9(!1),n=>i=>{const{value:a,state:o}=n(i),[s,c]=t.Ue(o.current),u=(0,e.UM)((()=>c(o.current)),p),f=(0,r.zG)(t.vP(o,s),t.UI((e=>{let[t,r]=e;return t===r})));return(0,r.zG)(g,t.bw((e=>e&&u()))),{value:(0,r.bc)(f,a),state:(0,r.zG)(t.vP(g,o,s),t.UI((e=>{let[t,r,n]=e;return t?r:n})))}}),u(d.consent),o,n.UI((e=>{let[n,[i,a]]=e;return{...a,stateFlushed:(0,r.zG)(t.vP(f,n,i),t.UI((e=>{let[t,r,n]=e;return t&&r&&n})))}})));var p,g})),(e=>{const{value:r}=e({stopped:t.a9(!1),previousState:{}});return e=>({value:r,state:t.a9(void 0)})}))})),f.fS((e=>(p.warn("Worker running in non-persistent mode.",e),(0,r.zG)(d,s({...G,...c.coreConfig,lookalikeModels:i.YP}),n.Hr("stateFlushed",(()=>t.a9(!0))),u(d.consent))))),n.UI((e=>({...e,...c.coreOutput}))))})));return async()=>{const e=S(),t=P(e)(),{eventsCachedInWorker:r}=await e;return{eventsCachedInWorker:r,coreService:t}}}(g,y,v,h,b,_)();p.send({eventsCachedInWorker:w});const P=await S;if(f.nM(P))return h.error(`Failed to start worker: ${P.left}`),void self.close?.();const q=P.right,x=await y,D=(await q)({stopped:t.a9(!1),previousState:x.previousState}),[Q,N]=t.Ue(_.getNoMetricsTracked());(0,e.UM)((()=>N(_.getNoMetricsTracked())),100),function(e,n,a){const o=(0,r.zG)(t.vP(n),t.UI((0,r.ls)(j.UI((e=>"function"==typeof e?e:R.of(e))),(0,k.Yt)(R.G5))));let s=o.current();e(s),(0,r.zG)(o,t.YP((t=>{const n=t(),o=(0,r.zG)(n,j.z7(((e,t)=>t!==s[e]&&!a[e]?.isEmpty(t))),i.DT((0,L.ff)(j.xb)));i.pC(o)&&(s={...s,...o.value},e(o.value))})))}(p.send,{activations:D.value.activations,cohorts:t.vP(D.value.cohorts),context:D.value.context,eventsToPublish:D.value.eventsToPublish,eventsToPublishOnPageUnload:D.value.eventsToPublishOnPageUnload,externalData:D.value.externalData,geoIP:D.value.geoIP,metrics:(0,r.zG)(Q,t.UI((()=>()=>_.consume()))),priorCachedEventsRequests:D.value.priorCachedEventsRequests,realtime:D.value.realtime,state:D.state,transitionsSinceInit:D.value.transitionsSinceInit,workerStateFlushed:D.value.stateFlushed,stateMigratedThisInitialisation:D.value.stateMigratedThisInitialisation,secureSignal:D.value.secureSignal},{eventsToPublish:{isEmpty:a.xb},metrics:{isEmpty:a.xb}})}function Ge(r){const n=()=>Math.floor(Date.now()/1e3)+r,[i,a]=t.Ue(n());return(0,e.UM)((()=>a(n())),1e3),i}const ze=t=>{const r=[],n=[],i=()=>{for(;r.length>0&&n.length>0;)n.shift()()},a=t=>new Promise((r=>{n.push((()=>r(t()))),(0,e.HJ)(i)}));return t.addEventListener("message",(0,e.GL)((t=>{null!==t.data&&(r.push(t.data),(0,e.HJ)(i))}))),{next:()=>a((()=>r.shift())),read:()=>a((()=>r.splice(0)))}};!async function(){const t=self;Ie({contextsInitTimestampPerformance:e.NC,master:{...ze(t),send:e=>t.postMessage(e)}})}()})()})();',"Worker",void 0,void 0)}},1005:e=>{e.exports=function(e,t,r,n){var i=self||window;try{try{var a;try{a=new i.Blob([e])}catch(t){(a=new(i.BlobBuilder||i.WebKitBlobBuilder||i.MozBlobBuilder||i.MSBlobBuilder)).append(e),a=a.getBlob()}var o=i.URL||i.webkitURL,s=o.createObjectURL(a),c=new i[t](s,r);return o.revokeObjectURL(s),c}catch(n){return new i[t]("data:application/javascript,".concat(encodeURIComponent(e)),r)}}catch(e){if(!n)throw Error("Inline worker is not supported");return new i[t](n,r)}}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{var e=__webpack_require__(1876);const t=(()=>{try{return self.document.currentScript}catch{return null}})();(()=>{(0,e.ho)(!0);const r="permutive.main.import_runWebSdk",n=`${r}_start`;performance?.mark?.(n),(0,e.SF)((()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,5526))))().then((i=>{performance?.measure?.(r,n),i.runSdk({contextsInitTimestampPerformance:e.NC,contextsInitTimestamp:e.RP,currentScript:t})})).catch(console.error)})()})()})();