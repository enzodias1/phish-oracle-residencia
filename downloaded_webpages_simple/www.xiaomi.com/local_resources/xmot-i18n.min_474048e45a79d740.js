!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.xmot=t():e.xmot=t()}(self,(()=>(()=>{var e={126:(e,t)=>{"use strict";var n=function(){return n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)};function r(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function i(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function o(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function a(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError;var c=["SCRIPT","STYLE","META","HEAD","LINK"],s={SVG:2,IMG:2,BACKGROUND_IMAGE:2,CANVAS:4,OBJECT:4,EMBED:4,VIDEO:4},u=100,d=2e3,l=function(e,t){return t?t+e:e},p=function(e){if(0!==e.length)return e[e.length-1]-e[0]},m=function(e,t){void 0===t&&(t=u);var n=Date.now();return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var c=Date.now();if(t-(c-n)<=0)return n=Date.now(),e.apply(void 0,a([],o(r),!1))}},f=function(e,t){return void 0===t&&(t=""),(t||Array(e).fill("x").join("")).replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},h=function(e){if(!e)return"";var t=e,n=t.localName,r=t.id,i=void 0===r?"":r,o=t.className,a=void 0===o?"":o,c=t.classList,s=[];(void 0===c?[]:c).forEach((function(e){["/","_:"].every((function(t){return!e.includes(t)}))&&s.push(e)}));var u="string"==typeof a?s.join("."):"";return"".concat(n).concat(i?"#"+i:"").concat(u?"."+u:"")},v=function(e,t){if(void 0===t&&(t=!1),!e)return"";var n=e.target,r=e.addedNodes,i=e.removedNodes,o=r[0]||i[0]||n;return h(t?n:o)},g=function(e,t){return t.some((function(t){return"[object RegExp]"===Object.prototype.toString.call(t)?new RegExp(t).test(e):e.includes(String(t))}))},y=function(e,t,n){void 0===e&&(e="");var r=!!t&&g(e,t);return(!n||g(e,n))&&!r},w=function(e){return void 0===e&&(e=0),Math.round(e)||0},_=function(e,t){if(0===t.length)return{start:0,end:0,duration:0,maxDurationEntry:null,entryList:[]};var n=t.sort((function(e,t){return e.start===t.start?t.end-e.end:e.start-t.start})),r=0,i=0,o={},a=n.map((function(t){var n=t||{},a=n.name,c=n.start,s=n.end,u=w(s-c),d=Math.max(w(c-e),0),l=w(d+u);s>=i&&(c<i?s>i&&(r+=w(s-i),i=w(s)):(r+=u,i=w(s)));var p={name:a,start:d,end:l,duration:u};return u>(o.duration||0)&&(o=p),p}));return{start:n[0].start-e,end:i-e,duration:r,maxDurationEntry:o,entryList:a}},b=Object.prototype.toString,S=function(e,t){return b.call(e)==="[object ".concat(t,"]")},T=function(e){return S(e,"String")},I=Array.isArray,E=function(e,t){return void 0===t&&(t=[]),n=e,void 0===(r=t)&&(r=[]),void 0===i&&(i=!1),r.some((function(e){return function(e,t,n){return void 0===n&&(n=!1),!!T(e)&&(S(t,"RegExp")?t.test(e):!!T(t)&&(n?e===t:e.includes(t)))}(n,e,i)}));var n,r,i},C=function(e,t,n){var r,i=t>0&&n>0;if(!i)return i;var o=null===(r=window.getComputedStyle)||void 0===r?void 0:r.call(window,e,null);return o&&(i=i&&"none"!==o.display&&"0"!==o.opacity),i};function O(e,t){var n=e.getBoundingClientRect();if("viewport"===t)return n;for(var r=function(e){return e.offsetParent||e.parentElement},i=function(e){return"fixed"===window.getComputedStyle(e).position},o=r(e),a=i(e),c=0;null!==o&&!a&&c<20&&(c++,!(a=i(o)));)o=r(o);if(a)return n;var s=n.top+document.documentElement.scrollTop,u=n.left+document.documentElement.scrollLeft;return{x:n.x,y:n.y,width:n.width,height:n.height,right:u+n.width,bottom:s+n.height,top:s,left:u}}function k(e,t){void 0===t&&(t=window);var n=t.getComputedStyle(e).getPropertyValue("background-image");return n&&"initial"!==n&&"none"!==n?n.split(",").map((function(e){var n=e.trim().match(/url\(["']?(.*?)["']?\)/);return n?N(n[1],t):null})).filter((function(e){return null!==e})):[]}function N(e,t){var n=t.location.protocol;return/^\/\//.test(e)?n+e:(/^https?:\/\//i.test(e),e)}function A(e,t){return t?"number"==typeof t?t:"string"==typeof t&&t.startsWith("*")?e*parseInt(t.substring(1),10):e:e}var P,x=function(){function e(e,t){if(void 0===t&&(t=window),this.win=window,this.excludeRequests=[],this.includeRequests=[],this.withResourceType=[],this.requestContainer=[],this.traceConfig={},this.currentPath="",this.requestList=[],this.traceId="",this.traceCount=0,this.containerMap={},e){var n=e.excludeRequests,r=e.includeRequests,i=e.withResourceType,o=e.traceConfig,a=e.requestContainer;this.win=t,this.excludeRequests=n,this.includeRequests=r,this.withResourceType=i,this.traceConfig=o||[],this.requestContainer=a||[],this.currentPath=t.location.href,this.resetTrace()}}return e.prototype.requestObserver=function(e){var t=this;e&&(this.rewriteXHR(),this.recordFetch()),this.requestContainer.length&&this.requestContainer.forEach((function(e){var n,r=null===(n=t.win.document.querySelector(e))||void 0===n?void 0:n.contentWindow;!t.containerMap[e]&&r&&(t.containerMap[e]=r,t.rewriteXHR(r),t.recordFetch(r))}))},e.prototype.resetReqList=function(){this.requestList=[]},e.prototype.resetTrace=function(){this.traceCount=0,this.traceId=f(32)},e.prototype.getTraceId=function(){return"01-".concat(this.traceId,"-").concat(f(16),"-01")},e.prototype.withoutReq=function(){return 0===this.requestList.length},e.prototype.checkPathname=function(){this.currentPath!==this.win.location.href&&(this.resetTrace(),this.currentPath=this.win.location.href)},e.prototype.isIncludeReq=function(e){return void 0===e&&(e=""),y("string"==typeof e?e:e.href,this.excludeRequests,this.includeRequests)},e.prototype.sameReq=function(e,t){return e===t||(null==t?void 0:t.includes(e))},e.prototype.getReqEndTime=function(e){var t,n=this,r=null!==(t=this.requestList.findIndex((function(t){return n.sameReq(t,e)})))&&void 0!==t?t:-1,i=this.requestList[r];i&&this.sameReq(i,e)&&this.requestList.splice(r,1)},e.prototype.getHttpTime=function(e){var t=this,n=e.beginTime,r=void 0===n?0:n,i=e.endTime,o=e.win,a=(void 0===o?this.win:o).performance.getEntries(),c=["xmlhttprequest","fetch"].concat(this.withResourceType||[]),s=a.filter((function(e){return c.includes(e.initiatorType)&&e.startTime>=r&&e.responseEnd<=i&&t.isIncludeReq(e.name)}));return _(r,s.map((function(e){return{name:e.name,start:e.startTime,end:e.responseEnd}})))},e.prototype.needTrace=function(e){var t,n,r;return!!e&&(this.checkPathname(),(null===(t=this.traceConfig)||void 0===t?void 0:t.enable)&&(!e.includes("//")||e.includes(this.win.location.host)||(null===(r=null===(n=this.traceConfig)||void 0===n?void 0:n.domains)||void 0===r?void 0:r.some((function(t){return e.includes(t)})))))},e.prototype.getTraceHeader=function(){var e;return(null===(e=this.traceConfig)||void 0===e?void 0:e.customHeader)||"MITFE-Trace"},e.prototype.rewriteXHR=function(e){void 0===e&&(e=this.win);var t=this,n=e.XMLHttpRequest,r=n.prototype.open;n.prototype.open=function(e,n){var i=r.apply(this,arguments),o=n instanceof URL?n.href:n;return t.isIncludeReq(o)&&t.requestList.push(o),t.needTrace(n)&&(this.setRequestHeader(t.getTraceHeader(),t.getTraceId()),t.traceCount++),i};var i=n.prototype.send;n.prototype.send=function(){var e=this,n=function(){t.getReqEndTime(e.responseURL||e.__zone_symbol__xhrURL)};return this.addEventListener("loadend",n,!1),this.addEventListener("timeout",n,!1),i.apply(this,arguments)}},e.prototype.recordFetch=function(e){void 0===e&&(e=this.win);var t=this,n=e.fetch;e.fetch=function(e,r){var i=e,o={};o="Request"in window&&i instanceof window.Request?i:r||o;var a="string"==typeof i?i:o.url;if(t.isIncludeReq(a)&&t.requestList.push(a),t.needTrace(a)){var c=t.getTraceHeader(),s=t.getTraceId();e instanceof Request&&e.headers?(e.headers.set(c,s),t.traceCount++):r&&r.headers&&(r.headers[c]=s,t.traceCount++)}return n(e,r).then((function(e){return t.getReqEndTime(e.url),e}))}},e}(),L=function(){function e(){this.id=new Date,this.subs=[],this.id=new Date,this.subs=[]}return e.prototype.defined=function(){e.watch.add(this)},e.prototype.notify=function(){this.subs.forEach((function(e){if("function"==typeof e.update)try{e.update.apply(e)}catch(e){console.warn(e)}}))},e.watch=null,e}(),R=function(){function e(e,t){this.name="",this.id=new Date,this.name=e,this.id=new Date,this.callBack=t}return e.prototype.add=function(e){e.subs.push(this)},e.prototype.update=function(){(0,this.callBack)(this.name)},e}(),M=(P=new L,function(e,t){if("historyChange"===e)return function(e,t){var n=new R(e,t);L.watch=n,P.defined(),L.watch=null};if("pushState"===e||"replaceState"===e){var n=t.history[e];return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];n.apply(t.history,e),P.notify()}}}),D="0.1.21-alpha.4",q=function(){function e(e){var t=void 0===e?{}:e,n=t.ww,r=t.wh,i=t.eleWeight,o=t.calcType,a=t.domFilter;this.initScrollTop=0,this.initScrollLeft=0,this.calcType="viewport",this.ww=window.innerWidth,this.wh=window.innerHeight,this.eleWeight=s,this.ww=A(this.ww,n),this.wh=A(this.wh,r),this.eleWeight=Object.assign(this.eleWeight,i),this.calcType=null!=o?o:this.calcType,this.domFilter=a}return e.prototype.filterResult=function(e){if(1===e.length)return e;var t=0;e.forEach((function(e){t+=e.st}));var n=t/e.length;return e.filter((function(e){return e.st>n}))},e.prototype.getTreeScore=function(e,t){var n,r;if(e){var o=[],a=Array.from(e.children);try{for(var c=i(a),s=c.next();!s.done;s=c.next()){var u=s.value;if(u.getAttribute("fmp-c")){var d=this.getTreeScore(u,t);d.st&&o.push(d)}}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}var l=e instanceof Element?e:e.host;return l?this.calculateScore(l,o,t):{dps:o,st:0,els:[]}}},e.prototype.calculateScore=function(e,t,n){void 0===n&&(n=window);var r=this.calculateAreaParent(e);if(0===r&&"document"===this.calcType)return{dps:t,st:0,els:[]};var i=0;t.forEach((function(e){i+=e.st}));var o=this.eleWeight[e.tagName]||1,a=k(e,n);1===o&&a.length>0&&(o=this.eleWeight.BACKGROUND_IMAGE);var c=r*o,s=[{$node:e,st:c,weight:o}],u=e;return(i>c||0===r)&&(c=i,s=[],t.forEach((function(e){s=s.concat(e.els)}))),{dps:t,st:c,els:s,root:u}},e.prototype.calculateAreaParent=function(e){var t=O(e,this.calcType),n=t.left,r=t.right,i=t.top,o=t.bottom,a=t.width,c=t.height;if(!C(e,a,c))return 0;if(this.domFilter&&!this.domFilter(t,e))return 0;"document"===this.calcType&&(i-=this.initScrollTop,o-=this.initScrollTop,n-=this.initScrollLeft,r-=this.initScrollLeft);var s=this.ww,u=this.wh,d=r-n+(s-0)-(Math.max(r,s)-Math.min(n,0)),l=o-i+(u-0)-(Math.max(o,u)-Math.min(i,0));return d<=0||l<=0?0:d*l},e.prototype.getMaxScore=function(e){var t=null;return e.forEach((function(e){e.dps.forEach((function(e){(null==t?void 0:t.st)?t.st<e.st&&(t=e):t=e}))})),t},e.prototype.setTag=function(e,t,n){void 0===n&&(n=window),0===this.initScrollTop&&t<2&&(this.initScrollTop=document.documentElement.scrollTop,this.initScrollLeft=document.documentElement.scrollLeft);var r=e instanceof Element,i=r?e.tagName:"shadowRoot",o=null==e?void 0:e.children;-1===c.indexOf(i)&&(null==o?void 0:o.length)&&(r&&null===e.getAttribute("fmp-c")&&"BODY"!==i&&e.setAttribute("fmp-c","".concat(t)),this.setChildTag(o,t,n))},e.prototype.setChildTag=function(e,t,n){void 0===n&&(n=window);for(var r=e.length-1;r>=0;r--){var i=e[r];if(null===i.getAttribute("fmp-c")){if(!this.elementInViewportAndVisible(i))continue;i.setAttribute("fmp-c","".concat(t))}this.setTag(i,t,n)}},e.prototype.elementInViewportAndVisible=function(e){var t=O(e,this.calcType),n=t.bottom,r=t.left,i=t.right,o=t.top,a=t.width,c=t.height;if("document"===this.calcType){var s=n-this.initScrollTop>0&&o-this.initScrollTop<this.wh,u=i-this.initScrollLeft>0&&r-this.initScrollLeft<this.ww;return s&&u}var d=C(e,a,c);return!!["PICTURE","IMG","VIDEO"].includes(e.tagName)||!!d&&(this.wh>o||this.ww>r)},e.prototype.getFMPTopList=function(e,t){e.push(t),e.sort((function(e,t){return t.time-e.time})),e.length>3&&e.pop()},e.prototype.mediaElementTime=function(e,t,n){var r=0,i="",o=function(e,t){var n=new Set;if("VIDEO"===e.tagName)n.add(e.src),n.add(null==e?void 0:e.poster);else{if("IMG"!==e.tagName)return k(e,t);"PICTURE"===(null==e?void 0:e.parentElement.tagName)&&(null==e?void 0:e.parentElement).querySelectorAll("source").forEach((function(e){var r=e.srcset;r&&r.split(",").forEach((function(e){var r=e.trim().split(" ")[0];n.add(N(r,t))}))})),e.src&&n.add(N(e.src,t))}return Array.from(n)}(e,n);return o.forEach((function(e){if(e){var n=t[e];n>r&&(r=n,i=e)}})),{time:r,domTag:i}},e}(),j=function(e){var t=e.win,n=void 0===t?window:t,r=e.beginTime,i=e.endTime,o=e.staticConfig||{},a=o.excludeStatics,c=o.includeStatics,s=o.withStaticsType,u=o.filter,d=n.performance.getEntries(),l=["navigation","script","link"].concat(s||[]),p=d.filter((function(e){return e.startTime>=r&&e.responseEnd<=i&&(u?u(e):!(!l.includes(e.initiatorType)&&!function(e){var t;if(!e)return!1;try{var n=(null===(t=new URL(e))||void 0===t?void 0:t.pathname)||"",r=n.substring(n.lastIndexOf("."));return[".html",".htm",".js",".css"].includes(r)}catch(e){return console.warn("isStaticFile error",e),!1}}(e.name)||!y(e.name,a,c)))}));return _(r,p.map((function(e){return{name:(t=e.name,t.replace(/https:\/\/(.*?)[/#?]/,"")),start:e.startTime,end:e.responseEnd};var t})))},F="performance.init",U="performance.set",V=new(function(){function e(){var e=this;this.currentWindow=window,this.page="",this.onetrack=null,this.trackView=function(t){e.page!==t.pageUrl&&(e.track("view",t),e.page=t.pageUrl)},this.trackPerf=function(t){t.tip||(t.tip="1280.0.0.0.29371"),e.track("performance",t)},this.trackRequest=function(t){e.track("performance_request",t)},this.trackDomDetail=function(t){e.track("performance_detail",t)},this.setPublicParams=function(t){"[object Object]"===Object.prototype.toString.call(t)&&e.track(U,t)}}return e.prototype.track=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.onetrack||this.currentWindow.onetrack;if(n){if(e.length)if(e[0]===F)n.apply(void 0,a([],o(e),!1));else if(e[0]===U&&e[1])for(var r in e[1])e[1][r]&&n(U,r,e[1][r]);else n.apply(void 0,a(["performance.track"],o(e),!1))}else console.warn("未检测到onetrack方法，请确认是否引入sdk")},e.prototype.trackInit=function(e){this.track(F,e)},e.prototype.initOneTrack=function(e){var t,n=e.appId,r=void 0===n?"31000401679":n,i=e.contentWindow,o=e.username,a=e.userId,c=e.system,s=e.group,u=e.env,d=e.onetrack,l={username:o,userId:a,system:c,group:s,env:u};this.onetrack=d,this.currentWindow=null!=i?i:window,(null===(t=this.currentWindow)||void 0===t?void 0:t.onetrack)||this.onetrack||this.injectOneTrack(),r&&(this.trackInit(r),this.setPublicParams(l))},e.prototype.injectOneTrack=function(){this.currentWindow.onetrack=function(){window.onetrack&&(window.onetrack.q=window.onetrack.q||[]).push(arguments)}},e}()),B=function(){function e(e,t){var n;this.win=window,this.isFirstLoad=!0,this.perfConfig={system:""},this.performanceData={},this.perfCallback=null,this.statusCollector=[],this.fmpFlag=!0,this.observer=null,this.callbackCount=0,this.entries={},this.startTime=performance.now(),this.firstInputTime=0,this.referer=[],this.sampleFlag=!1,this.req={},this.fmpHelper={},this.path="",this.containers=[],this.unloadedShadowRoot=[],this.isInitSdk=!1,this.whiteList=[],this.isWhitePage=function(){return!1},this.behaviourTimes=[],this.isNavigate=!1,this.behaviourType="click",this.interval=u,e&&(this.perfConfig=e),t&&(this.perfCallback=t),e.contentWindow&&(this.win=e.contentWindow||window,this.startTime=this.win.performance.now()),this.fmpHelper=new q(e.fmpOptions),this.req=new x(this.perfConfig,this.win),e.whiteList&&(this.whiteList=I(e.whiteList)?e.whiteList:[],this.isWhitePage=(n=e.whiteList,S(n,"Function")?e.whiteList:E)),e.autoInit&&!this.isInitSdk&&this.initTrack()}return e.prototype.performanceTrack=function(e){var t,n;void 0===e&&(e=!1);var r=this.performanceData,i=r.domLoad,o=r.isTracked,a=r.pageLoad,c=void 0===a?0:a,s=r.selector,u=(this.perfConfig||{}).manualTrack;if(!o){if(e||(null===(t=this.behaviourTimes)||void 0===t?void 0:t.length)||c&&(!s||s&&i)){var d=this.formatPerfData(e);null===(n=this.perfCallback)||void 0===n||n.call(this,d,this.statusCollector),!u&&this.trackData(d)}this.clearStatus()}},e.prototype.clearStatus=function(){this.behaviourTimes=[],this.req.resetReqList()},e.prototype.trackData=function(e){var t,i,c;if(this.isInitSdk){if(this.isFirstLoad=!1,this.req.resetTrace(),!this.isWhitePage(e.pageUrl,this.whiteList)){var s=e||{},u=s.traceId,d=s.uploadType,l=e||{};l.request;var m=l.requestList,f=void 0===m?[]:m,h=r(l,["request","requestList"]);if(!(null===(t=this.behaviourTimes)||void 0===t?void 0:t.length)||f.length){4!==d&&(this.performanceData.isTracked=!0,this.isNavigate&&(this.isNavigate=!1));var v=e.pageLoad,g=e.domLoad,y=void 0===g?0:g,w=e.useFmp,_=void 0===w?0:w,b=e.FMP,S=void 0===b?0:b,T=e.pageUrl,I=e.loadType,E=function(e){var t=e.FMP,n=e.domLoad;return e.useFmp&&t>0?t:n>0?n:e.pageLoad}({pageLoad:v,domLoad:y,useFmp:_,FMP:S});if(this.win.localStorage.getItem("_onetrack_debug")){var C=5===d?"".concat(I,"操作加载时间"):"页面最终加载时间";console.log("%c".concat(C,"：%c").concat(E,"ms"),"color: green; font-weight: bold; font-size: 16px;","color: red; font-weight: bold; font-size: 16px;")}V.trackPerf(n(n({},h),{loadTime:E})),f.forEach((function(e){V.trackRequest({traceId:u,requestUrl:e.name,requestStartTime:e.start,requestEndTime:e.end,requestDuration:e.duration,pageUrl:T,loadType:I})}));var O,k=p(this.behaviourTimes)||0,N=null===(c=null===(i=(O=this.statusCollector,(null==O?void 0:O.length)>20?O.slice(0,10).concat(O.slice(-10)):O).map((function(e){return{time:e.time,mutation:(t=e.mutation,r={},t.forEach((function(e){var t=e.target,i=e.removeNodes,c=e.addedNodes;["addedNodes","removeNodes"].forEach((function(e){var s,u,d="addedNodes"===e?c:i;d&&((null===(u=null==r?void 0:r[t])||void 0===u?void 0:u[e])?r[t][e]=a([],o(new Set(r[t][e].concat([d]))),!1):r[t]=n(n({},r[t]),((s={})[e]=[d],s)))}))})),r)};var t,r})))||void 0===i?void 0:i.filter((function(e){return e.time>k})))||void 0===c?void 0:c.map((function(e){return{time:e.time-k,mutation:e.mutation}}));(null==N?void 0:N.length)&&V.trackDomDetail({traceId:u,statusList:N,pageUrl:T,loadType:I,refererList:a([],o(this.referer),!1)})}else this.performanceData.isTracked=!0}}else console.warn("上报数据前请确认已执行初始化方法initTrack")},e.prototype.resetPerformanceTrack=function(e,t,n){var r;void 0===t&&(t=!0),t&&(this.isNavigate=!0,this.behaviourTimes=[],this.req.resetReqList(),this.req.requestObserver(!1)),this.sampleFlag||(this.win.performance.clearResourceTimings(),this.performanceData={},this.startTime=n||this.win.performance.now(),this.firstInputTime=0,this.isFirstLoad=e,null===(r=this.observer)||void 0===r||r.forEach((function(e){return null==e?void 0:e.disconnect()})),this.statusCollector=[],this.fmpFlag=!0,this.observer=null,this.callbackCount=0,this.entries={},this.containers=[],this.initObserver())},e.prototype.initTrack=function(){var e=this;if(!this.isInitSdk){this.isInitSdk=!0;var t=this.perfConfig,n=t.tracesSampleRate,r=void 0===n?1:n,i=t.behaviourTrack,o=void 0!==i&&i;if(Math.random()>Number(r))this.sampleFlag=!0;else{V.initOneTrack(this.perfConfig),this.initObserver(),this.req.requestObserver(!0);var a=function(t){if(e.firstInputTime<=e.interval&&(e.firstInputTime=e.getPerfTime()),o){var n=t.type,r="input"===n,i=function(e){if("CANVAS"===e.target.nodeName)return e.target;var t=e.path||e.composedPath&&e.composedPath(),n=null;if(t)for(var r=0;r<t.length;r++){var i=t[r];if(i.onclick){n=i;break}}return n&&n!==document?n:null}(t);e.interval="CANVAS"===(null==i?void 0:i.tagName)?300:u,e.behaviourType=n;var a=r||!!i,c=performance.now();setTimeout((function(){e.isFirstLoad||e.isNavigate||!a||(e.behaviourTimes.push(c),e.performanceData.isTracked&&e.resetPerformanceTrack(!1,!1,c))}))}};this.win.addEventListener("click",a,!0),this.win.addEventListener("input",a,!0),function(e,t,n){e.addHistoryListener=M("historyChange",e),e.history.pushState=M("pushState",e),"hash"===t&&e.addEventListener("hashchange",m(n,300)),e.addHistoryListener("history",m(n,300))}(this.win,this.perfConfig.historyMethod,(function(){e.resetPerformanceTrack(!1,!0)}))}}},e.prototype.getPerfTime=function(e){return void 0===e&&(e=this.win.performance.now()),this.isFirstLoad?e:e-this.startTime},e.prototype.getObserverContainer=function(e){var t=this;void 0===e&&(e=this.perfConfig.container);var n=Array.isArray(e)?e:[null!=e?e:""],r=0,i=[];n.forEach((function(e){if(e){var n=t.win.document.querySelector(e);(null==n?void 0:n.shadowRoot)?t.containers.push(n.shadowRoot):n&&r<1?(r+=1,t.containers.push(n)):i.push(e)}})),this.containers.length||this.containers.push(this.win.document.body),this.unloadedShadowRoot=i},e.prototype.domLoadObserver=function(e,t,n,r){var i;if(void 0===r&&(r=this.getPerfTime()),n&&!this.performanceData.domLoad){var o=t||this.win.document;e.some((function(e){return e.addedNodes.length>0}))&&o.querySelector(n)&&r>this.interval&&(null===(i=this.observer)||void 0===i||i.forEach((function(e){return null==e?void 0:e.disconnect()})),this.performanceData.domLoad=r,this.performanceTrack())}},e.prototype.getSnapShot=function(e,t,n){void 0===e&&(e=[]),void 0===n&&(n=this.getPerfTime());var r=t||this.containers[0]||this.win.document.body,i=this.perfConfig,o=i.excludeNodes,a=void 0===o?[]:o,c=i.withoutFMP;this.isExcludeNode(a,e,t)||(this.statusCollector.push({time:n,now:this.win.performance.now(),mutation:e.map((function(e){var t,n;return{target:h(null==e?void 0:e.target),addedNodes:h(null===(t=null==e?void 0:e.addedNodes)||void 0===t?void 0:t[0]),removeNodes:h(null===(n=null==e?void 0:e.removedNodes)||void 0===n?void 0:n[0])}}))}),r&&!c&&this.fmpHelper.setTag(r,this.callbackCount,this.win),this.callbackCount+=1)},e.prototype.containerObserver=function(e,t,n){var r,i,o=this;void 0===n&&(n=3),(null==e?void 0:e.length)&&this.getObserverContainer(e);var a=this.containers;(null===(r=this.observer)||void 0===r?void 0:r.length)&&(a=this.containers.filter((function(e){return e instanceof ShadowRoot}))),a.forEach((function(e){var n,r=new o.win.MutationObserver((function(n){var r,i=o.getPerfTime();o.callbackCount>d?null===(r=o.observer)||void 0===r||r.forEach((function(e){return null==e?void 0:e.disconnect()})):(o.getSnapShot(n,e,i),o.domLoadObserver(n,e,t,i))}));r.observe(e,{childList:!0,subtree:!0}),null===(n=o.observer)||void 0===n||n.push(r)})),n>0&&(null===(i=this.unloadedShadowRoot)||void 0===i?void 0:i.length)&&!this.checkNeedCancel()&&this.win.setTimeout((function(){o.containerObserver(o.unloadedShadowRoot,t,n-1)}),500)},e.prototype.isExcludeNode=function(e,t,n){var r=this,i=t.length,o=!1;try{if("function"==typeof e)o=e(t);else if(e.length&&i){var a=i?t[i-1]:null,c=v(a);o=(o=(o=1===i&&(e.includes(c)||e.some((function(e){return c.includes(e)}))))||t.every((function(t){return e.includes(v(t,!0))})))||t.every((function(t){return e.some((function(e){var i,o=n instanceof ShadowRoot?n:r.win.document;return null===(i=Array.from(o.querySelectorAll(e)))||void 0===i?void 0:i.some((function(e){var n,r;return e.querySelector(h(t.target))||(null===(n=Array.from(t.addedNodes))||void 0===n?void 0:n.every((function(t){return e.contains(t)})))&&(null===(r=Array.from(t.removedNodes))||void 0===r?void 0:r.every((function(t){return e.contains(t)})))}))}))}))}}catch(e){console.warn("excludeNodes error",e)}return o},e.prototype.initObserver=function(){var e,t=this;if(this.behaviourTimes.length||(this.path=this.getPathName().path,this.referer.push(this.path),V.trackView({pageUrl:this.path,version:D})),!this.isWhitePage(this.path,this.whiteList)){this.getObserverContainer(this.perfConfig.container),this.getSnapShot(),this.observer=[];var n=(null===(e=this.behaviourTimes)||void 0===e?void 0:e.length)?null:function(e,t){var n;if(!t)return"";var r=t[e];return r||(r=t[null!==(n=Object.keys(t).find((function(t){return!!t&&new RegExp(t).test(e)})))&&void 0!==n?n:""]),r}(this.path,this.perfConfig.domObserver);n&&(this.performanceData.selector=n),this.containerObserver(this.unloadedShadowRoot,n),"complete"===this.win.document.readyState||"document"===this.fmpHelper.calcType?this.calculateFinalScore():this.win.addEventListener("load",(function(){return t.calculateFinalScore()}),!1)}},e.prototype.calculateFinalScore=function(){var e,t=this;this.fmpFlag&&(this.checkNeedCancel()?(null===(e=this.observer)||void 0===e||e.forEach((function(e){return null==e?void 0:e.disconnect()})),this.win.performance.getEntries().forEach((function(e){t.entries[e.name]=t.getPerfTime(e.responseEnd)})),this.calcFMP(),this.performanceTrack()):this.win.setTimeout((function(){t.calculateFinalScore()}),500))},e.prototype.calcFMP=function(e){var t,n=this;void 0===e&&(e=this.containers);var r=this.perfConfig||{},i=r.fmpOptions,o=(void 0===i?{}:i).fmpFilter,a=void 0===o?null:o,c=r.withoutFMP,s=this.performanceData,u=s.pageLoad,l=void 0===u?0:u,p=s.fmp;if(this.fmpFlag=!1,!(c||l<d||p)){var m=e.map((function(e){return n.fmpHelper.getTreeScore(e,n.win)})),f=this.fmpHelper.getMaxScore(m);if(f){var h=("function"==typeof a?a:this.fmpHelper.filterResult)(f.els);this.performanceData.fmp=this.getFmpTime(h,(null===(t=this.behaviourTimes)||void 0===t?void 0:t.length)>0)}}},e.prototype.getFmpTime=function(e,t){var n,r,o,a;if(t)return 0;var c=0,s=[];try{for(var u=i(e),d=u.next();!d.done;d=u.next()){var l=d.value,p=parseInt(null!==(o=l.$node.getAttribute("fmp-c"))&&void 0!==o?o:""),m="".concat(p,"-").concat(h(l.$node)),f=null===(a=this.statusCollector[p])||void 0===a?void 0:a.time,v=this.fmpHelper.mediaElementTime(l.$node,this.entries,this.win),g=v.time,y=v.domTag;g>f&&y&&(f=g,m=y),"number"!=typeof f&&(f=0),c=Math.max(c,f),this.fmpHelper.getFMPTopList(s,{time:f,domTag:m})}}catch(e){n={error:e}}finally{try{d&&!d.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}return this.performanceData.fmpSlowComp=s,c},e.prototype.checkNeedCancel=function(){var e,t,n,r,i=this.getPerfTime(),o=this.statusCollector.length>0?null===(e=this.statusCollector[this.statusCollector.length-1])||void 0===e?void 0:e.time:0,a=null!==(t=this.perfConfig.maxWait)&&void 0!==t?t:15e3,c=null!==(n=this.perfConfig.domWait)&&void 0!==n?n:d,s=!(null===(r=this.behaviourTimes)||void 0===r?void 0:r.length)&&i>a||this.req.withoutReq()&&i-o>c;return this.performanceData.pageLoadBak=o,s&&(this.performanceData.pageLoad=o),s},e.prototype.getPathName=function(){var e=this.win.location||{},t=e.pathname,n=e.hash,r=e.search;return{path:t+n+(this.perfConfig.distinctSearch?r:""),pathname:t,hash:n,search:r}},e.prototype.formatPerfData=function(e){var t,r,i=this.win,o=this.performanceData,a=o.pageLoad,c=void 0===a?0:a,s=o.domLoad,d=void 0===s?0:s,l=o.pageLoadBak,m=void 0===l?0:l,f=o.fmp,h=void 0===f?0:f,v=o.fmpSlowComp,g=this.perfConfig,y=g.tip,_=g.useFmp,b=void 0===_?0:_,S=g.tracesSampleRate,T=void 0===S?1:S,I=g.module,E=void 0===I?"":I,C=g.system,O=g.traceConfig,k=g.staticConfig,N=p(this.behaviourTimes),A=void 0!==N,P=d>0?d:c,x=(this.isFirstLoad?0:this.startTime)+(A?N-u:0),L=this.startTime+P,R=(null===(t=this.req)||void 0===t?void 0:t.getHttpTime({win:i,beginTime:x,endTime:L}))||{},M=R.start,q=R.end,F=R.duration,U=R.entryList,V=R.maxDurationEntry,B=w(q),W=w(M),G=e&&m>500&&!c?m:c,H={};if(A)G=Math.max(G-N,B);else{var J=j({win:i,beginTime:x,endTime:L,staticConfig:k})||{},z=J.entryList,K=J.start,$=J.end,X=J.duration;H={resourceEntries:JSON.stringify(z),resourceStartTime:w(K),resourceEndTime:w($),resourceDuration:w(X)}}var Z=function(e){var t=e.hasReq,n=e.behaviour,r=e.isFirstLoad,i=0;return e.pageLoad-e.requestEndTime>3e3&&!r?i=6:n&&!t?i=5:e.rightNow?i=4:n&&t?i=3:t?i=2:(r||e.isNavigate)&&e.hasInput&&(i=1),i}({hasReq:!this.req.withoutReq(),rightNow:e,pageLoad:G,requestEndTime:B,behaviour:A,isNavigate:this.isNavigate,isFirstLoad:this.isFirstLoad,hasInput:this.firstInputTime>this.interval}),Y=e?(null===(r=this.referer.slice(-1))||void 0===r?void 0:r[0])||"":this.path,Q={tip:y,version:D,uploadType:Z,pageUrl:Y,tracesSampleRate:T,system:C,module:E},ee=i.navigator,te=ee.hardwareConcurrency,ne=ee.platform,re=ee.connection,ie=void 0===re?{}:re,oe=ie.effectiveType,ae=void 0===oe?"-":oe,ce=ie.downlink,se=void 0===ce?"-":ce,ue=ie.rtt,de=void 0===ue?"":ue,le={plat:ne,network:"type:".concat(ae,"/downlink:").concat(se,"/rtt:").concat(de),hardware:te},pe=i.performance.timeOrigin,me="navigate";return this.isFirstLoad?me="reload":(pe+=this.startTime,A&&(pe+=N,me=this.behaviourType)),n(n(n(n({},Q),le),H),{pageLoad:w(G),domLoad:w(d),FMP:Math.floor(h),timeOrigin:this.isFirstLoad?pe:pe+this.startTime,title:i.document.title,requestList:U,requestStartTime:W,requestEndTime:B,requestDuration:w(F),maxRequestDuration:w(null==V?void 0:V.duration),maxRequestUrl:(null==V?void 0:V.name)||"",loadType:me,traceId:this.req.traceId,useFmp:b?1:0,extra:(null==O?void 0:O.enable)?{traceCount:this.req.traceCount}:{},fmpSlowComp:v})},e.prototype.getFmpSlowComp=function(){return this.performanceData.fmpSlowComp},e.prototype.getComposeData=function(e,t,i){return void 0===i&&(i=!1),function(e,t,i){var o=t.timeOrigin,a=void 0===o?0:o,c=t.request,s=t.pageUrl,u=e.timeOrigin,d=void 0===u?0:u,p=e.pageUrl,m=e.loadType,f=e.system,h=r(e,["timeOrigin","pageUrl","loadType","system"]);if(0===d)return t;var v=Math.round(a-d),g={};(i||p===s)&&(g=["pageLoad","FMP","domLoad","requestStartTime","requestEndTime"].reduce((function(e,r){var i,o=l(t[r],v);return n(n({},e),((i={})[r]=o,i))}),{}));var y={};return Object.keys(c).forEach((function(e){var t=c[e]||{},n=t.requestStartTime,r=t.requestEndTime,i=t.requestDuration;y[e]={requestDuration:i,requestStartTime:l(n,v),requestEndTime:l(r,v)}})),n(n(n(n({},h),t),g),{pageUrl:p,timeOrigin:d,loadType:m,system:f,request:y})}(e,t,i)},e.prototype.destroy=function(){var e;for(var t in null===(e=this.observer)||void 0===e||e.forEach((function(e){return null==e?void 0:e.disconnect()})),this)delete this[t]},e.prototype.setPublicParams=function(e){V.setPublicParams(e)},e.prototype.pageFinish=function(){var e,t;if(!this.performanceData.isTracked){var r=(this.perfConfig||{}).manualTrack,i=this.getPerfTime();this.performanceData.pageLoad=i,this.performanceData.domLoad=i,this.calcFMP();var o=n(n({},this.formatPerfData(!1)),{uploadType:0});null===(e=this.perfCallback)||void 0===e||e.call(this,o,this.statusCollector),!r&&this.trackData(o),null===(t=this.observer)||void 0===t||t.forEach((function(e){return null==e?void 0:e.disconnect()})),this.clearStatus()}},e}();t.RI=B},682:(e,t,n)=>{var r,i;!function(o){if(void 0===(i="function"==typeof(r=o)?r.call(t,n,t,e):r)||(e.exports=i),!0,e.exports=o(),!!0){var a=window.Cookies,c=window.Cookies=o();c.noConflict=function(){return window.Cookies=a,c}}}((function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function i(){}function o(t,n,o){if("undefined"!=typeof document){"number"==typeof(o=e({path:"/"},i.defaults,o)).expires&&(o.expires=new Date(1*new Date+864e5*o.expires)),o.expires=o.expires?o.expires.toUTCString():"";try{var a=JSON.stringify(n);/^[\{\[]/.test(a)&&(n=a)}catch(u){}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var c="";for(var s in o)o[s]&&(c+="; "+s,!0!==o[s]&&(c+="="+o[s].split(";")[0]));return document.cookie=t+"="+n+c}}function a(e,n){if("undefined"!=typeof document){for(var i={},o=document.cookie?document.cookie.split("; "):[],a=0;a<o.length;a++){var c=o[a].split("="),s=c.slice(1).join("=");n||'"'!==s.charAt(0)||(s=s.slice(1,-1));try{var u=t(c[0]);if(s=(r.read||r)(s,u)||t(s),n)try{s=JSON.parse(s)}catch(d){}if(i[u]=s,e===u)break}catch(d){}}return e?i[e]:i}}return i.set=o,i.get=function(e){return a(e,!1)},i.getJSON=function(e){return a(e,!0)},i.remove=function(t,n){o(t,"",e(n,{expires:-1}))},i.defaults={},i.withConverter=n,i}((function(){}))}))}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var r={};return(()=>{"use strict";n.d(r,{default:()=>Yn});var e=n(682),t=n(126),i=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(c){i={error:c}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},o={in:[108,121,124,124],id:[109,126,128,128],de:[710,711,592,592],nl:[579,580,591,591],es:[138,139,605,605],fr:[571,572,573,573],it:[524,525,589,589],uk:[577,578,590,590],ru:[132,575,587,587],hk:[103,129,604,604],tw:[104,120,127,127],default:[0,0,0,0]},a={default:{APP_ID:"2882303761517399893",PRO_ID:"16"},pocoDefault:{APP_ID:"31000000334",PRO_ID:"16"}},c={cz:"high",ar:"high",es:"high",fr:"high",it:"high",uk:"high",de:"high",pe:"high",pl:"high",se:"high",global:"high",tr:"high",nl:"high",gr:"high",mx:"middle",at:"high",hu:"high",kz:"high","kz-ru":"high","kz-kk":"high",rs:"high",ro:"high",bg:"high",co:"high",sg:"high",kr:"high",au:"high",be:"high","be-fr":"high","be-nl":"high",vn:"middle",cl:"high",om:"middle",qa:"middle",ae:"middle","ae-ar":"middle","ae-en":"middle",kh:"middle","kh-km":"middle","kh-en":"middle",my:"middle",th:"middle",id:"middle",ma:"middle","ma-fr":"middle","ma-ar":"middle",za:"middle",ke:"middle",hr:"high",default:"low"},s={in:!0,default:!0};function u(e){var t=i(o[e]||o.default,4);return{pc:t[0],m:t[1],app:t[2],ios:t[3]}}function d(e){return a[e]||(document.domain.includes("po.co")?a.pocoDefault:a.default)}function l(e){var t,n,r;return"high"!==(null!==(r=null===(n=null===(t=null===window||void 0===window?void 0:window.__LOCAL_CONFIG__)||void 0===t?void 0:t.stat)||void 0===n?void 0:n.cookiePolicyLevel)&&void 0!==r?r:c[e])?"0,1,2,3:":"0:"}var p={ae:{currencyCode:"AED"},au:{currencyCode:"AUD"},bd:{currencyCode:"BDT"},be:{currencyCode:"EUR"},br:{currencyCode:"BRL"},ca:{currencyCode:"CAD"},cl:{currencyCode:"CLP"},cn:{currencyCode:"CNY"},co:{currencyCode:"COP"},cz:{currencyCode:"CZK"},de:{currencyCode:"EUR"},dk:{currencyCode:"DKK"},eg:{currencyCode:"EGP"},es:{currencyCode:"EUR"},fr:{currencyCode:"EUR"},gcc:{currencyCode:"AED"},global:{currencyCode:"USD"},gr:{currencyCode:"GRD"},hk:{currencyCode:"HKD"},hu:{currencyCode:"HUF"},id:{currencyCode:"IDR"},ie:{currencyCode:"EUR"},il:{currencyCode:"ILS"},ir:{currencyCode:"IRR"},in:{currencyCode:"INR"},it:{currencyCode:"EUR"},jp:{currencyCode:"JPY"},kr:{currencyCode:"KRW"},la:{currencyCode:"LAK"},lk:{currencyCode:"LKR"},lu:{currencyCode:"EUR"},ma:{currencyCode:"MAD"},mm:{currencyCode:"MMK"},mo:{currencyCode:"MOP"},mx:{currencyCode:"MXN"},my:{currencyCode:"MYR"},ng:{currencyCode:"NGN"},nl:{currencyCode:"EUR"},np:{currencyCode:"NPR"},nz:{currencyCode:"NZD"},ph:{currencyCode:"PHP"},pk:{currencyCode:"PKR"},pl:{currencyCode:"PLN"},pt:{currencyCode:"EUR"},ro:{currencyCode:"RON"},ru:{currencyCode:"RUB"},sa:{currencyCode:"SAR"},se:{currencyCode:"SEK"},sg:{currencyCode:"SGD"},th:{currencyCode:"THB"},tr:{currencyCode:"TRY"},tw:{currencyCode:"TWD"},ua:{currencyCode:"UAH"},uk:{currencyCode:"GBP"},us:{currencyCode:"USD"},vn:{currencyCode:"VND"},za:{currencyCode:"ZAR"}};function m(e){return Object.assign({currencyCode:"USD"},p[e]||{})}function f(e){return s[e]||s.default}var h=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r.throw(e))}catch(t){o(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},v=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){a.label=c[1];break}if(6===c[0]&&a.label<i[1]){a.label=i[1],i=c;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(c);break}i[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(s){c=[6,s],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}},g=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(c){i={error:c}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},y=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},w=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},_=["guserid","instance_id","muserid","site_country","tz","app_platform","ot_ua","last_source","utm_channel","utm_content","utm_term","utm_type","abtest_group","abtest_group1","abtest_group2"];function b(){return e.get("mstuid")||""}function S(t){var n="1"===e.get("_ot_use_type"),r=ae();return!n&&b()?r=b():e.get("_ot_instance_id")?r=e.get("_ot_instance_id")||r:e.set("_ot_instance_id",r,q(t,{expires:new Date(Date.now()+34128e6)})),r}function T(e,t){if(e instanceof Object){var n=document.querySelector("html"),r=document.querySelector("body"),i="";if(t)try{var o=t.closest("[data-ot-module]");i=!!o&&o.getAttribute("data-ot-module")||""}catch(s){}var a=[e.a||!!n&&n.getAttribute("data-ot-project")||d("default").PRO_ID,e.b||!!r&&r.getAttribute("data-ot-page")||0,e.c||i||0,e.d||0,e.e||0,Math.floor(Math.random()*Math.pow(10,8))];return E(a)?a.join("."):""}var c=(e||"").split(".");return E(c)?y(y([],g(c.slice(0,5)),!1),[Math.floor(Math.random()*Math.pow(10,8))],!1).join("."):""}function I(e){var t,n=e.split(".");if(E(n)){var r="",i="",o=g(n,5),a=o[1],c=o[2],s=o[3],u=o[4],d=c.split("|");return d.length>0&&(r=(t=g(d,2))[0],i=t[1]),{tipB:a,tipC:r,tipC1:i||"",tipD:s,tipE:u}}return{tipB:"",tipC:"",tipC1:"",tipD:"",tipE:""}}function E(e){var t=!0;return e.length<5&&(t=!1),e.slice(0,2).some((function(e){return 0===Number(e||0)}))&&(t=!1),window.__CURRENT_PAGE_URL__===window.location.href&&(t=!1),Z()&&!t&&console.warn("The tip code [".concat(e.join("."),"] is invalid!")),!!t}function C(t){var n=k(),r=t.split("."),i=g(r,5),o=i[0],a=i[1],c=i[2],s=i[3],u=i[4];n&&e.set("_ot_ref_tip",r.length>5?"".concat(o,".").concat(a,".").concat(c,".").concat(s,".").concat(u):"",q(n))}function O(){return e.get("_ot_ref_tip")||""}function k(){var e=document.querySelector("html");return e&&e.getAttribute("data-ot-local")||(window.location.pathname||"/").split("/")[1]||""}function N(){var e=g(k().split("-"),2),t=e[0],n=e[1];if(t&&n)return"".concat(n,"-").concat(t.toUpperCase())}function A(){var t=document.querySelector("html"),n=t&&t.getAttribute("data-ot-platform"),r=U(),i=r.isOtherApp,o=r.isMihomeApp,a=r.isMicommunityApp;return i?o?"mihome_sdk":a?"micommunity_sdk":"others":"1"===e.get("ISAPP")?"android":"1"===e.get("ISIOS")?"ios":n||"m"}function P(){return!!document.body&&document.body.getAttribute("data-ot-pageType")||void 0}function x(t){!function(t){var n=Number(e.get("_ot_last_time")||0);n&&Date.now()-n>18e5&&e.set("_ot_update_flag","true",q(t));!function(t){e.set("_ot_last_time",String(Date.now()),q(t))}(t)}(t);var n=document.referrer||"",r=([q(t).domain,".xiaomi.com",".xiaomi.net"].some((function(e){return!!~n.indexOf(e)}))?e.get("_ot_last_source"):n)||"",i="true"===e.get("_ot_update_flag")?"":r;return e.set("_ot_last_source",i||"",q(t,{expires:new Date(Date.now()+18e5)})),i}function L(t){var n=document.location.href||"",r=document.referrer||"",i=e.get("_ot_prev_uri_path")||"";e.set("_ot_referrer_path",r||"",q(t)),e.set("_ot_prev_uri_path",i!==r?r:i||"",q(t)),e.set("_ot_curr_uri_path",n,q(t))}function R(t){var n=document.location.href||"",r=document.referrer||"",i=e.get("_ot_referrer_path")||"",o=e.get("_ot_curr_uri_path")||"";return n!==o&&(e.set("_ot_prev_uri_path",o,q(t)),e.set("_ot_curr_uri_path",n,q(t))),r===i&&r?e.get("_ot_prev_uri_path")||"":(e.set("_ot_prev_uri_path",r,q(t)),r||"")}function M(t,n,r){var i=r||e.get("_ot_".concat(n))||"",o="true"===e.get("_ot_update_flag")?"":i;return e.set("_ot_".concat(n),o,q(t,{expires:new Date(Date.now()+18e5)})),o}function D(t,n,r){return(n instanceof Array?n:[n]).forEach((function(n){return e.remove(n,q(t,r))}))}function q(e,t){return Object.assign({sameSite:"strict",path:"/"+e,domain:".".concat((window.location.hostname||"").split(".").slice("id"===e?-3:-2).join("."))},t||{})}function j(t){var n=e.get("_ot_session_id")||String(Date.now());return e.set("_ot_session_id",n,q(t,{expires:new Date(Date.now()+18e5)})),n}function F(e){return"string"!=typeof e?void 0:e.replace(/^javascript:void\(0\)(;)?/g,"").replace(/^(http(s?):)?\/\//i,"".concat(window.location.protocol,"//"))}function U(){var t="1"===e.get("ISAPP")||"1"===e.get("ISIOS"),n=!!~["community_sdk","mihome_sdk"].indexOf(e.get("request_from")||""),r=!!~["mihome_sdk"].indexOf(e.get("request_from")||""),i=!!~["community_sdk"].indexOf(e.get("request_from")||""),o=t&&!n&&Number(e.get("APPVERSION"))<31500,a=t&&!n&&Number(e.get("IOSVERSION"))<31e3,c=t&&!n&&Number(e.get("APPVERSION"))<=40200,s=t&&!n&&Number(e.get("IOSVERSION"))<=40100,u=t&&!n&&Number(e.get("APPVERSION"))>=1e5;return{isInsideApp:t,isOldAPP:o,isOldIOS:a,isOtherApp:t&&n,isUseMiCommand:t&&(Number(e.get("APPVERSION"))>=31800||Number(e.get("IOSVERSION"))>=31300),isGAOldApp:c,isGAOldIOS:s,isPocoApp:u,isMihomeApp:r,isMicommunityApp:i}}function V(t,n){try{var r=JSON.stringify({eventType:t,params:n}),i="xiaomi://MiEventTrackCommand?action=logGA&params="+encodeURIComponent(r);"1"===e.get("ISIOS")?Number(e.get("IOSVERSION"))>=40503?window.webkit.messageHandlers.trackAction.postMessage({url:i}):window.location.assign(i):"1"===e.get("ISAPP")&&prompt(i)}catch(o){console.warn("GA4: An error occurred in app!")}}function B(e){var t=Object.assign({},e);for(var n in t)if(void 0===t[n])delete t[n];else if(Array.isArray(t[n]))for(var r=0;r<t[n].length;r++)t[n][r]=B(t[n][r]);else"object"==typeof t[n]&&(t[n]=B(t[n]));return t}function W(t,n){var r,i,o;t=function(e){var t=Object.assign({},e);for(var n in t)if(Array.isArray(t[n]))for(var r=0;r<t[n].length;r++)t[n][r]=B(t[n][r]);else"object"==typeof t[n]?t[n]=B(t[n]):"string"==typeof t[n]&&(_.includes(n)?t[n]=t[n].substr(0,36):t[n]=t[n].substr(0,100));return t}(t);var a=U(),c=a.isInsideApp,s=a.isGAOldApp,u=a.isGAOldIOS,d=a.isPocoApp,l=!a.isOtherApp||"1"===e.get("ISIOS")||"1"===e.get("ISAPP")&&Number(e.get("sdk_version"))>=40922,p=c&&!s&&!u&&!d&&l;if(!function(t){var n="1"===e.get("ISAPP"),r="1"===e.get("ISIOS"),i={de:n&&Number(e.get("APPVERSION"))<40403||r&&Number(e.get("IOSVERSION"))<40400,es:n&&Number(e.get("APPVERSION"))<40300||r&&Number(e.get("IOSVERSION"))<40400,fr:n&&Number(e.get("APPVERSION"))<40300||r&&Number(e.get("IOSVERSION"))<40400,id:n&&Number(e.get("APPVERSION"))<40700||r&&Number(e.get("IOSVERSION"))<40800,in:n&&Number(e.get("APPVERSION"))<40600||r&&Number(e.get("IOSVERSION"))<40700,it:n&&Number(e.get("APPVERSION"))<40300||r&&Number(e.get("IOSVERSION"))<40400,jp:n&&Number(e.get("APPVERSION"))<40400||r&&Number(e.get("IOSVERSION"))<40500,mx:n&&Number(e.get("APPVERSION"))<40800||r&&Number(e.get("IOSVERSION"))<40900,nl:n&&Number(e.get("APPVERSION"))<40400||r&&Number(e.get("IOSVERSION"))<40500,pl:n&&Number(e.get("APPVERSION"))<40500||r&&Number(e.get("IOSVERSION"))<40600,ru:n&&Number(e.get("APPVERSION"))<40400||r&&Number(e.get("IOSVERSION"))<40500,tr:n&&Number(e.get("APPVERSION"))<40400||r&&Number(e.get("IOSVERSION"))<40500,uk:n&&Number(e.get("APPVERSION"))<40400||r&&Number(e.get("IOSVERSION"))<40500,default:!1};return i[t]||i.default}(k()))if(p){var m=Object.assign({},t);delete m.event;try{var f=n?m.ecommerce:m;f.page_location=window.location.href.replace("/app/","/").replace("/ios/","/").substring(0,100),f.page_referrer=null===(r=f.page_referrer)||void 0===r?void 0:r.replace("/app/","/").replace("/ios/","/").substring(0,100),"page_view"===t.event?(V("screen_view",JSON.stringify({screen_name:f.page_type})),setTimeout((function(){V(t.event,JSON.stringify(B(f)))}),800)):V(t.event,JSON.stringify(B(f)))}catch(h){console.warn("GA4: An error occurred in app!")}}else try{n&&(null===(i=window.dataLayer)||void 0===i||i.push({ecommerce:null})),null===(o=window.dataLayer)||void 0===o||o.push(t)}catch(h){console.warn("GA4: An error occurred in web!")}}function G(){var t=function(e){var t={in:!0,ru:!0,default:!1},n=t[e]||t.default;n||(n=["ae","ar","au","africa-en","africa-fr","bd","bg","br","by","ca","ci","cl","co","ec","eg","global","gr","gt","hk","hr","id","in","iq","jp","ke","kh","kr","kz","lk","latin-es","ma","mm","mx","my","ng","np","om","pa","pe","ph","pk","qa","rs","ru","sa","sg","th","tn","tr","tw","ua","us","uz","vn","za"].includes(e));return n}(k()),n="1"===e.get("ISAPP")&&Number(e.get("APPVERSION"))>40901||"1"===e.get("ISIOS")&&Number(e.get("IOSVERSION"))>40900;return U().isInsideApp?t&&n:t}function H(t,n){if(!G()&&n.tip&&ne()){var r=U(),i=r.isInsideApp,o=r.isOldAPP,a=r.isOldIOS;if(i&&!o&&!a){var c=n.tip.split("."),s={b:c[1],c:c[2],d:c[3],e:c[4],location:window.location.href||"",page:re(),title:window.document.title||"",page_version:Y()};Object.keys(n).forEach((function(e){"tip"!==e&&(s[e.replace(/([A-Z])/g,"_$1").toLowerCase()]=n[e])}));try{!function(t,n){if(U().isUseMiCommand&&"1"===e.get("ISIOS")){var r=JSON.stringify({eventType:t,params:n}),i="xiaomi://MiEventTrackCommand?action=track&params="+encodeURIComponent(r);Number(e.get("IOSVERSION"))>=40503?window.webkit.messageHandlers.trackAction.postMessage({url:i}):window.location.assign(i)}else window.WE&&window.WE.trackEvent&&"function"==typeof window.WE.trackEvent&&window.WE.trackEvent(t,n)}(t,JSON.stringify(X(s)))}catch(u){console.warn("OneTrack: An error occurred in app!")}}else try{"function"==typeof window.onetrack&&window.onetrack("track",t,X(n))}catch(u){console.warn("OneTrack: An error occurred in web!")}}}function J(e){return ee({utm_type:"mi_type",utm_channel:"mi_channel",utm_campaign:"utm_campaign",utm_source:"mi_source",utm_medium:"mi_medium",utm_term:"mi_term",utm_content:"mi_content"}[e])||ee(e)||""}function z(e,t){var n=Object.assign({},e);return t&&"object"==typeof t&&Object.keys(t).forEach((function(e){n[e.replace(/([A-Z])/g,"_$1").toLowerCase()]=K(t[e],"")})),n}function K(e,t){return void 0===e?null:void 0!==t?e||t:e}function $(e,t){return void 0===e?t||void 0:void 0!==t?"".concat(e)?e:e||t||void 0:e}function X(e){var t=Object.assign({},e);return Object.keys(t).forEach((function(e){~[null,void 0].indexOf(t[e])&&delete t[e]})),t}function Z(){var e=document.querySelector("html"),t=e&&e.getAttribute("data-ot-test");return(document.domain.includes("test")||document.domain.includes("dev"))&&"true"===t}function Y(){var e="";try{e="".concat(process.env.VERSION)}catch(t){}return e||"1.0.0"}function Q(){var e="temp";try{return sessionStorage.setItem(e,e),sessionStorage.removeItem(e),!0}catch(t){return!1}}function ee(e,t){var n=t||window.location.search||(window.location.hash||"").replace(/.+\?/g,"?").replace(/#.+/g,"");if(!n)return"";var r=n.slice(1).split("&").map((function(e){return e.split("=")}));return(g(r.filter((function(t){var n=g(t,2),r=n[0];n[1];return r===e})).map((function(e){var t=g(e,2);t[0];return t[1]})),1)[0]||"").replace(/[ +]/g,"%20").replace(/(%[a-f0-9]{2})+/gi,(function(e){return decodeURIComponent(e)}))}var te=function(){return{instanceId:("1"===e.get("_ot_use_type")?e.get("_ot_instance_id")||"":b())||"",viewTip:e.get("_ot_view_tip")||"",refTip:e.get("_ot_ref_tip")||"",refB:e.get("_ot_ref_b")||"",sessionId:e.get("_ot_session_id")||"",lastSource:e.get("_ot_last_source")||"",utmType:e.get("_ot_utm_type")||"",utmChannel:e.get("_ot_utm_channel")||"",utmCampaign:e.get("_ot_utm_campaign")||"",utmSource:e.get("_ot_utm_source")||"",utmMedium:e.get("_ot_utm_medium")||"",utmTerm:e.get("_ot_utm_term")||"",utmContent:e.get("_ot_utm_content")||""}};function ne(){var t=U().isInsideApp,n=k(),r=-1!==window.location.hostname.indexOf("po.co"),i=l(n);return!!(t||r?"0,1,2,3:":e.get("notice_gdpr_prefs")||i).match(/3/)}function re(){return(window.location.pathname||"/").replace(/^\/([a-z|-]+)/,"").replace(/\/(index.html)?$/,"")||"/index"}function ie(e,t,n,r){return h(this,void 0,void 0,(function(){var i,o,a,c,s,u,d,l,p,m,f;return v(this,(function(h){switch(h.label){case 0:switch(i={},o=$(r.ecommerce.pageType||!!document.body&&document.body.getAttribute("data-ot-pageType")||void 0,""),a=$(t.itemListName,"")?"".concat(o,".").concat($(t.itemListName,"")):void 0,c=$(t.itemListId,"")?"".concat(o,".").concat($(t.itemListId,"")):"".concat(o,".").concat(n.tipC).concat(n.tipC1?"|".concat(n.tipC1):""),e){case"view_item_list":return[3,1];case"select_item":return[3,2];case"view_item":return[3,3];case"view_cart":return[3,6];case"add_to_cart":return[3,9];case"remove_from_cart":return[3,12];case"begin_checkout":return[3,15];case"add_shipping_info":return[3,18];case"add_payment_info":return[3,21];case"select_promotion":return[3,24];case"view_promotion":return[3,25]}return[3,26];case 1:case 2:return i={item_list_name:$(a,""),item_list_id:$(c,""),index:Number(t.index||0)},[3,27];case 3:return s={},[4,ue("_ot_item_list_name")];case 4:return s.item_list_name=h.sent(),[4,ue("_ot_item_list_id")];case 5:return s.item_list_id=h.sent(),s.index=Number(t.index||0),i=s,[3,27];case 6:return u={},[4,ue("_ot_item_list_name")];case 7:return u.item_list_name=h.sent(),[4,ue("_ot_item_list_id")];case 8:return u.item_list_id=h.sent(),u.index=Number(t.index||0),i=u,[3,27];case 9:return d={},[4,ue("_ot_item_list_name")];case 10:return d.item_list_name=h.sent(),[4,ue("_ot_item_list_id")];case 11:return d.item_list_id=h.sent(),d.index=Number(t.index||0),i=d,[3,27];case 12:return l={},[4,ue("_ot_item_list_name")];case 13:return l.item_list_name=h.sent(),[4,ue("_ot_item_list_id")];case 14:return l.item_list_id=h.sent(),l.index=Number(t.index||0),i=l,[3,27];case 15:return p={},[4,ue("_ot_item_list_name")];case 16:return p.item_list_name=h.sent(),[4,ue("_ot_item_list_id")];case 17:return p.item_list_id=h.sent(),p.index=Number(t.index||0),i=p,[3,27];case 18:return m={},[4,ue("_ot_item_list_name")];case 19:return m.item_list_name=h.sent(),[4,ue("_ot_item_list_id")];case 20:return m.item_list_id=h.sent(),m.index=Number(t.index||0),i=m,[3,27];case 21:return f={},[4,ue("_ot_item_list_name")];case 22:return f.item_list_name=h.sent(),[4,ue("_ot_item_list_id")];case 23:return f.item_list_id=h.sent(),f.index=Number(t.index||0),i=f,[3,27];case 24:case 25:return i={promotion_id:$(t.promotionId,""),promotion_name:$(t.promotionName,""),creative_name:$(t.creativeName,""),creative_slot:$(t.creativeSlot,""),index:Number(t.index||0)},[3,27];case 26:return[3,27];case 27:return[2,i]}}))}))}function oe(e,t){for(var n=e.charCodeAt(0),r=t.charCodeAt(0),i="",o=n;o<=r;o++)i+=String.fromCharCode(o);return i}function ae(){return function(e,t){for(var n="",r=0;r<t;r++)n+=e[Math.floor(Math.random()*e.length)];return n}(oe("0","9")+oe("a","z"),32)}function ce(e){var t,n,r,i,o,a;try{for(var c=w(e),s=c.next();!s.done;s=c.next()){var u=s.value;if(u){var d=String(u).toLowerCase();d.startsWith("spu")?a=u:d.length>=3&&d.length<=6?o=u:d.startsWith("3")&&d.length<11?r=u:d.startsWith("4")&&d.length<26&&(i=u)}}}catch(l){t={error:l}}finally{try{s&&!s.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}return{commodityId:r,itemId:i,productId:o,spuId:a}}function se(t,n){var r=U(),i=r.isInsideApp,o=r.isGAOldApp,a=r.isGAOldIOS,c=r.isPocoApp;if(!(i&&!o&&!a&&!c)||Number(e.get("APPVERSION"))<=40402||Number(e.get("IOSVERSION"))<=40504)e.set(t,n,q(k(),{expires:365}));else try{"1"===e.get("ISIOS")?window.webkit.messageHandlers.setStringPref.postMessage({key:t.split("_ot_")[1],value:n}):window.WE&&window.WE.trackEvent&&"function"==typeof window.WE.trackEvent&&window.WE.setStringPref(t.split("_ot_")[1],n)}catch(s){console.log("set module name-id error")}}function ue(t){var n=U(),r=n.isInsideApp,i=n.isGAOldApp,o=n.isGAOldIOS,a=n.isPocoApp,c="";if(!(r&&!i&&!o&&!a)||Number(e.get("APPVERSION"))<=40402||Number(e.get("IOSVERSION"))<=40504)c=e.get(t)||void 0;else try{"1"===e.get("ISIOS")?(window.webkit.messageHandlers.getStringPref.postMessage(t.split("_ot_")[1]),setTimeout((function(){c=window.ITEM_LIST[t.split("_ot_")[1]]||void 0}),1e3)):window.WE&&window.WE.trackEvent&&"function"==typeof window.WE.trackEvent&&(c=window.WE.getStringPref(t.split("_ot_")[1])||void 0)}catch(s){console.log("get module name-id error")}return new Promise((function(t){try{Number(e.get("IOSVERSION"))>40504&&"1"===e.get("ISIOS")?setTimeout((function(){t(c)}),1e3):t(c)}catch(s){t(c)}}))}function de(e,t){return Object.prototype.toString.call(e)==="[object ".concat(t,"]")}function le(){var e=k();return["kh-en"].includes(e)?e:e.split("-")[0]}window.ITEM_LIST={},window.getStringPref=function(e){Object.assign(window.ITEM_LIST,e)};var pe=function(){return pe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},pe.apply(this,arguments)},me=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(c){i={error:c}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},fe=function(t){if(!ne())return window.__PAGE_VIEW_DATA__=t,"";var n=document.querySelector("body"),r=me(t.tip instanceof Object?[0,t.tip.b]:String(t.tip||"").split("."),2)[1];if(r&&n&&n.setAttribute("data-ot-page",String(r||0)),t.pageType){var i=t.pageType;n&&n.setAttribute("data-ot-pageType",String(i||""))}return function(){var n,r=T(t.tip)||"",i={tip:r||"",commodity_id:K(t.commodityId,""),product_id:K(t.productId,""),goods_id:K(t.goodsId,""),tag:K(t.tag,""),version:K(t.version,""),exp_id:K(t.expId,"")};(t.viewTipDisabledB||t.viewTipEnabledE)&&function(e){if(Q())try{sessionStorage.setItem("DISABLED_B",JSON.stringify(e.rangeB||[])),sessionStorage.setItem("ENABLED_E",JSON.stringify(e.rangeE||[]))}catch(t){console.debug(t)}}({rangeB:t.viewTipDisabledB||[],rangeE:t.viewTipEnabledE||[]});var o,a,c=z(i,t.extra);if(ne()&&function(t){var n=g(O().split("."),2)[1],r=g((t||"").split("."),2)[1],i=e.get("_ot_ref_b")||"",o=k();n!==r&&n===i||C(""),o&&e.set("_ot_ref_b",r||"",q(o))}(r),H("view",c),window.dataLayer&&t.isOpenGA){var s=k(),l=A(),p=S(s),m=u(s),f=Number(m["pc"===l?"pc":"m"]),h=pe({event:"page_view",muserid:e.get("mUserId")||void 0,guserid:e.get("guserid")||void 0,instance_id:p||void 0,app_id:d(c.local).APP_ID||void 0,tip:r,ref_tip:O()||void 0,page:re(),page_version:Y()||void 0,tz:(o=(new Date).getTimezoneOffset(),a=Math.abs(o),"GMT".concat(o>0?"-":"+").concat("00".concat(Math.floor(a/60)).slice(-2),":").concat("00".concat(a%60).slice(-2))||void 0),site_country:le()||void 0,last_source:x(s)||void 0,app_platform:l||void 0,ot_ua:(null===(n=null===window||void 0===window?void 0:window.navigator)||void 0===n?void 0:n.userAgent)||void 0,utm_channel:M(s,"utm_channel",J("utm_channel"))||void 0,utm_content:M(s,"utm_content",J("utm_content"))||void 0,utm_term:M(s,"utm_term",J("utm_term"))||void 0,utm_type:M(s,"utm_type",J("utm_type"))||void 0,utm_campaign:M(s,"utm_campaign",J("utm_campaign"))||void 0,utm_source:M(s,"utm_source",J("utm_source"))||void 0,utm_medium:M(s,"utm_medium",J("utm_medium"))||void 0,channel_group:ee("channel_group")||void 0,req_from:ee("req_from")||void 0,page_type:$(t.pageType||void 0,""),page_referrer:R(s)||void 0,domain_id:"".concat(f)||void 0,category_id:$(t.categoryId,""),category_name:$(t.categoryName,""),parent_category_id:$(t.parentCategoryId,""),parent_category_name:$(t.parentCategoryName,""),moe_enable:$(t.moeEnable,!1),abtest_group:e.get("xm_user_bucket")||void 0,abtest_group1:e.get("xm_user_bucket1")||void 0,abtest_group2:e.get("xm_user_bucket2")||void 0,language:$(N()),login_status:e.get("cUserId")||e.get("userId")||e.get("serviceToken")?"yes":"no"},I(r));W(Object.assign({},h,{event:"basic_config"})),setTimeout((function(){W(h)}),0)}return r}()},he=function(){return he=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},he.apply(this,arguments)},ve=function(e,t){var n=T(e.tip,t)||"";if(!n&&"login"!==e.event||!ne())return"";var r=Object.assign({},e),i=k(),o=ce([r.commodityId,r.productId,r.itemId,r.spuId].filter((function(e){return!!e})));if(window.dataLayer){var a=$(N()),c="page_view"===r.event&&a?{language:a}:{};W(he(he({event:r.event,element_name:$(r.elementName,""),element_title:$(r.elementTitle,""),tip:n,link:$(F(r.linkUrl||r.link),""),ref_tip:O()||void 0,page_type:$(r.pageType||!!document.body&&document.body.getAttribute("data-ot-pageType")||void 0,""),page_version:Y()||void 0,asset_link:$(F(r.assetLink),""),asset_id:$(r.assetId,""),live_id:$(r.liveId,""),alg:$(r.alg,""),alg_ver:$(r.algVer,""),alg_group:$(r.algGroup,""),activity_id:$(r.activityId||r.eventId,""),search_result:$(r.searchResult||r.result,""),search_word:$(r.searchWord,""),search_type:$(r.searchType,""),commodity_id:$(o.commodityId,"")?"".concat($(o.commodityId,"")):void 0,coupon_list:$(r.couponList,""),coupon_status:$(r.couponStatus,""),product_id:$(o.productId,"")?"".concat($(o.productId,"")):void 0,tag:$(r.tag,""),spu_id:$(o.spuId,"")?"".concat($(o.spuId,"")):void 0,item_name:$(r.itemName,""),item_id:$(o.itemId,"")?"".concat($(o.itemId,"")):void 0,version:$(r.version,""),exp_id:$(r.expId,""),commentNbrofTotal:Number(r.commentNbrofTotal||0),page_referrer:R(i)||void 0,category_id:$(r.categoryId,""),category_name:$(r.categoryName,""),parent_category_id:$(r.parentCategoryId,""),parent_category_name:$(r.parentCategoryName,""),product_total_count:$(r.productTotalCount),type:$(r.type,""),model:$(r.model,""),moe_enable:$(r.moeEnable,!1),notify_me_click_date:$(r.notifyMeClickDate,""),button_name:$(r.buttonName,""),guserid:$(r.guserid,""),card_type:$(r.cardType,""),order_delivery_date:$(r.orderDeliveryDate,""),order_address:$(r.orderAddress,""),order_city:$(r.orderCity,""),coupon_applied:$(r.couponApplied,""),style:$(r.style,""),grouping_name:$(r.groupingName,"")},c),I(n)))}return n},ge=function(t){if(t.userId){var n="1"===e.get("isFromPassport");if(D(t.local,"isFromPassport",{path:"/"}),"function"==typeof window.onetrack){if(G())return;window.onetrack("login",t.userId,t.accountType,t.extraParams,!n)}n&&ve({event:"login",tip:"",guserid:e.get("guserid")||void 0,pageType:"login"})}},ye=function(e){if("function"==typeof window.onetrack){if(G())return;window.onetrack("logout",e)}"function"==typeof window.gtag&&window.gtag("event","logout",e)},we={NAVIGATION:"navigation",RESOURCE:"resource"},_e="P",be="B",Se="H",Te="L",Ie="C",Ee={CACHE:"c",NO_CACHE:"n",UNKNOWN:"o"},Ce={"product-station":[{matchType:"include",file:"html",rule:"",entryType:"navigation",initiatorType:"navigation"},{matchType:"reg",file:"static.js",rule:new RegExp(/\/static\//),entryType:"resource",initiatorType:"script"},{matchType:"reg",file:"getgoodsinformation",rule:new RegExp(/getgoodsinformation/),entryType:"resource",initiatorType:"xmlhttprequest"},{matchType:"reg",file:"img",rule:new RegExp(/800x800/),entryType:"resource",initiatorType:"img"}]},Oe=["spps_files","dist","overseas"],ke=["unpkg.com","pubsub","cookie-clear","xmot","autotrack"],Ne=[".mi.com/",".mi.co.id/"],Ae=["cookie-config"],Pe={htmlTime:{duration:-1},jsTime:{startTimeEarliest:-1,startTimeLatest:-1,durationShortest:-1,durationLongest:-1,durationAverage:-1,downloadAverage:-1,cacheType:"o"},fxTime:{startTimeEarliest:-1,startTimeLatest:-1,durationShortest:-1,durationLongest:-1,durationAverage:-1,downloadAverage:-1}},xe="V",Le="T",Re="EX",Me="hd",De="ls",qe="ld",je="j",Fe="J",Ue="jd",Ve="JD",Be="ja",We="jA",Ge="c",He="f",Je="F",ze="fd",Ke="FD",$e="fa",Xe="fA",Ze=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(c){i={error:c}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},Ye=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},Qe=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function et(){return{htmlTime:(t=(null===(e=performance.getEntriesByType(we.NAVIGATION))||void 0===e?void 0:e[0])||{},{duration:Math.trunc(t.responseEnd-t.startTime||0)}),jsTime:rt({initiatorType:["script"],whiteList:Oe,blackList:ke,isCollectCacheType:!0}),fxTime:rt({initiatorType:["fetch","xmlhttprequest"],whiteList:Ne,blackList:Ae})};var e,t}var tt=function(e){if(null==e)return 0;var t=Math.trunc(e),n=Number.isNaN(t)?0:t;return n<0?-1:n};function nt(){var e,t,n,r,i,o,a,c,s=Object.assign({},Pe,window.performanceResultDetail),u=function(e){void 0===e&&(e=[]);var t=Array.from(e)[0]||{time:0,domTag:""},n=performance.getEntriesByName(t.domTag||"")[0]||{};return{name:ot(t.domTag),time:Math.ceil(t.time)||0,duration:Math.trunc(n.duration)||"-",startTime:Math.trunc(n.startTime)||"-"}}(null===(r=window.performanceResult)||void 0===r?void 0:r.fmpSlowComp),d=de(null===window||void 0===window?void 0:window.performanceResult,"Object")&&de(null===(i=null===window||void 0===window?void 0:window.performanceResult)||void 0===i?void 0:i.loadType,"String")?(null===(o=null===window||void 0===window?void 0:window.performanceResult)||void 0===o?void 0:o.loadType).slice(0,1):"",l=Array.isArray(null===(a=window.performanceResult)||void 0===a?void 0:a.fmpSlowComp)?u.time:null===(c=window.performanceResult)||void 0===c?void 0:c.pageLoad;return{perf:JSON.stringify((e={P:null!=l?l:0},e[xe]="0924",e[Le]=d,e[Re]=at(),e[Me]=s.htmlTime.duration,e[De]=u.startTime,e[qe]=u.duration,e)),perf1:JSON.stringify((t={},t[je]=s.jsTime.startTimeEarliest,t[Fe]=s.jsTime.startTimeLatest,t[Ue]=s.jsTime.durationShortest,t[Ve]=s.jsTime.durationLongest,t[Be]=s.jsTime.durationAverage,t[We]=s.jsTime.downloadAverage,t[Ge]=s.jsTime.cacheType,t)),perf2:JSON.stringify((n={},n[He]=s.fxTime.startTimeEarliest,n[Je]=s.fxTime.startTimeLatest,n[ze]=s.fxTime.durationShortest,n[Ke]=s.fxTime.durationLongest,n[$e]=s.fxTime.durationAverage,n[Xe]=s.fxTime.downloadAverage,n))}}function rt(e){var t=e.initiatorType,n=e.whiteList,r=e.blackList,i=e.isCollectCacheType,o=void 0!==i&&i,a=[],c=[],s=0,u=[],d=0,l=performance.getEntriesByType(we.RESOURCE).filter((function(e){return t.includes(e.initiatorType)&&(!(null==n?void 0:n.length)||n.some((function(t){return e.name.includes(t)})))&&(!(null==r?void 0:r.length)||!r.some((function(t){return e.name.includes(t)})))}));return l.forEach((function(e){a.push(e.startTime),c.push(e.duration),s+=e.duration,u.push(e.responseEnd-e.responseStart),d+=e.responseEnd-e.responseStart})),Object.assign({},l.length?{startTimeEarliest:Math.trunc(Math.min.apply(Math,Ye([],Ze(a),!1))),startTimeLatest:Math.trunc(Math.max.apply(Math,Ye([],Ze(a),!1))),durationShortest:Math.trunc(Math.min.apply(Math,Ye([],Ze(c),!1))),durationLongest:Math.trunc(Math.max.apply(Math,Ye([],Ze(c),!1))),durationAverage:Math.trunc(s/l.length),downloadAverage:Math.trunc(d/l.length)}:{startTimeEarliest:-1,startTimeLatest:-1,durationShortest:-1,durationLongest:-1,durationAverage:-1,downloadAverage:-1},o?{cacheType:it(l)}:{})}function it(e){var t,n,r=new Map;return e.forEach((function(e){var t,n="transferSize"in(t=e)?0===t.transferSize?Ee.CACHE:Ee.NO_CACHE:Ee.UNKNOWN;r.set(n,(r.get(n)||0)+1)})),(null===(n=null===(t=Array.from(r).sort((function(e,t){return t[1]-e[1]})))||void 0===t?void 0:t[0])||void 0===n?void 0:n[0])||Ee.UNKNOWN}function ot(e){try{if(!e)return"";var t=e.split(/[?#]/)[0].split("/"),n=t[t.length-1];return n||""}catch(kn){return e}}function at(){var e,t,n,r=[];try{for(var i=Qe(Object.values(we)),o=i.next();!o.done;o=i.next()){var a=o.value,c=(null===(n=window.PerformanceObserver)||void 0===n?void 0:n.supportedEntryTypes)||[];c.length&&c.includes(a)||r.push(a[0])}}catch(s){e={error:s}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return r.join(",")}var ct=function(){var t,n=k();return{muserid:e.get("mUserId")||void 0,guserid:e.get("guserid")||void 0,instance_id:S(n)||void 0,page:re(),site_country:le()||void 0,app_platform:A()||void 0,ot_ua:(null===(t=null===window||void 0===window?void 0:window.navigator)||void 0===t?void 0:t.userAgent)||void 0,page_referrer:R(n)||void 0,page_type:P()}},st=-1,ut=function(e){addEventListener("pageshow",(function(t){t.persisted&&(st=t.timeStamp,e(t))}),!0)},dt=function(){var e=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},lt=function(){var e=dt();return e&&e.activationStart||0},pt=function(e,t){var n=dt(),r="navigate";return st>=0?r="back-forward-cache":n&&(document.prerendering||lt()>0?r="prerender":document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},mt=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var r=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch(e){}},ft=function(e,t,n,r){var i,o;return function(a){t.value>=0&&(a||r)&&((o=t.value-(i||0))||void 0===i)&&(i=t.value,t.delta=o,t.rating=function(e,t){return e>t[1]?"poor":e>t[0]?"needs-improvement":"good"}(t.value,n),e(t))}},ht=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},vt=function(e){document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&e()}))},gt=function(e){var t=!1;return function(){t||(e(),t=!0)}},yt=-1,wt=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},_t=function(e){"hidden"===document.visibilityState&&yt>-1&&(yt="visibilitychange"===e.type?e.timeStamp:0,St())},bt=function(){addEventListener("visibilitychange",_t,!0),addEventListener("prerenderingchange",_t,!0)},St=function(){removeEventListener("visibilitychange",_t,!0),removeEventListener("prerenderingchange",_t,!0)},Tt=function(){return yt<0&&(yt=wt(),bt(),ut((function(){setTimeout((function(){yt=wt(),bt()}),0)}))),{get firstHiddenTime(){return yt}}},It=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},Et=[1800,3e3],Ct=function(e,t){t=t||{},It((function(){var n,r=Tt(),i=pt("FCP"),o=mt("paint",(function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(o.disconnect(),e.startTime<r.firstHiddenTime&&(i.value=Math.max(e.startTime-lt(),0),i.entries.push(e),n(!0)))}))}));o&&(n=ft(e,i,Et,t.reportAllChanges),ut((function(r){i=pt("FCP"),n=ft(e,i,Et,t.reportAllChanges),ht((function(){i.value=performance.now()-r.timeStamp,n(!0)}))})))}))},Ot=(new Map,function(e){var t=self.requestIdleCallback||self.setTimeout,n=-1;return e=gt(e),"hidden"===document.visibilityState?e():(n=t(e),vt(e)),n}),kt=[2500,4e3],Nt={},At=[800,1800],Pt=function e(t){document.prerendering?It((function(){return e(t)})):"complete"!==document.readyState?addEventListener("load",(function(){return e(t)}),!0):setTimeout(t,0)},xt=function(e,t){t=t||{};var n=pt("TTFB"),r=ft(e,n,At,t.reportAllChanges);Pt((function(){var i=dt();i&&(n.value=Math.max(i.responseStart-lt(),0),n.entries=[i],r(!0),ut((function(){n=pt("TTFB",0),(r=ft(e,n,At,t.reportAllChanges))(!0)})))}))},Lt=(new Date,function(){return Lt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Lt.apply(this,arguments)}),Rt=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r.throw(e))}catch(t){o(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},Mt=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){a.label=c[1];break}if(6===c[0]&&a.label<i[1]){a.label=i[1],i=c;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(c);break}i[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(s){c=[6,s],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}},Dt=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},qt=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},jt=function(e,t){return void 0===t&&(t=0),e?e.toFixed(t).valueOf():void 0},Ft=function(e){return Rt(void 0,void 0,void 0,(function(){var t;return Mt(this,(function(n){return t=function(t){var n,r;if("TTFB"===t.name&&(null===(n=t.entries)||void 0===n?void 0:n.length)>0){var i=(null===(r=t.entries[0])||void 0===r?void 0:r.requestStart)||0;e[t.name]=jt(t.value-i)}else e[t.name]=jt(t.value)},function(e,t){t=t||{},It((function(){var n,r=Tt(),i=pt("LCP"),o=function(e){t.reportAllChanges||(e=e.slice(-1)),e.forEach((function(e){e.startTime<r.firstHiddenTime&&(i.value=Math.max(e.startTime-lt(),0),i.entries=[e],n())}))},a=mt("largest-contentful-paint",o);if(a){n=ft(e,i,kt,t.reportAllChanges);var c=gt((function(){Nt[i.id]||(o(a.takeRecords()),a.disconnect(),Nt[i.id]=!0,n(!0))}));["keydown","click"].forEach((function(e){addEventListener(e,(function(){return Ot(c)}),{once:!0,capture:!0})})),vt(c),ut((function(r){i=pt("LCP"),n=ft(e,i,kt,t.reportAllChanges),ht((function(){i.value=performance.now()-r.timeStamp,Nt[i.id]=!0,n(!0)}))}))}}))}(t,{reportAllChanges:!0}),Ct(t,{reportAllChanges:!0}),xt(t,{reportAllChanges:!0}),[2]}))}))},Ut=function(){var e=this;this.platform=A(),this._customProductStation=function(){var t=P();t&&(Ce[t]||[]).forEach((function(t){var n,r;try{for(var i=qt(performance.getEntries()),o=i.next();!o.done;o=i.next()){var a=o.value;a.entryType===t.entryType&&a.initiatorType===t.initiatorType&&("include"===t.matchType||"reg"===t.matchType&&t.rule.test(a.name))&&e.customArray.push({name:a.name,startTime:jt(a.startTime),duration:jt(a.duration),responseEnd:jt(a.responseEnd)})}}catch(c){n={error:c}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}))},this.collectStart=function(){},this.collectEnd=function(){"product-station"===P()&&"m"===e.platform&&e._customProductStation()},this.reportPerf=function(){var t,n,r,i;e.collectEnd();var o=P(),a=nt(),c=function(){var e=performance.getEntriesByType(we.NAVIGATION)[0]||{},t=e.startTime,n=void 0===t?0:t,r=e.domainLookupEnd,i=void 0===r?0:r,o=e.domainLookupStart,a=void 0===o?0:o,c=e.secureConnectionStart,s=void 0===c?0:c,u=e.connectStart,d=void 0===u?0:u,l=e.connectEnd,p=void 0===l?0:l,m=e.responseStart,f=void 0===m?0:m,h=e.requestStart,v=void 0===h?0:h,g=e.responseEnd,y=void 0===g?0:g,w=e.redirectStart,_=void 0===w?0:w,b=Math.trunc(n),S=Math.trunc(i-a),T=Math.trunc(s-d),I=Math.trunc(p-s),E=Math.trunc(f-v),C=Math.trunc(y-f),O=Math.trunc(y);return{TTFB:Math.trunc(f-_),hst:b,he:O,hd:S,ht:T,hs:I,hr:E,hdl:C}}(),s=c.TTFB,u=Dt(c,["TTFB"]),d=null!==(n=null===(t=window.performanceResult)||void 0===t?void 0:t.metrics)&&void 0!==n?n:{};d.TTFB||(d.TTFB=String(s));var l=Lt({event:"performance",perf:a.perf,perf1:a.perf1,perf2:a.perf2,perf3:JSON.stringify(u),perf4:JSON.stringify(Lt(Lt({},d),{net:null!==(i=null===(r=window.performanceResult)||void 0===r?void 0:r.network)&&void 0!==i?i:""})),search_type:"",page_version:"",alg:"",alg_group:"",alg_ver:"",search_result:"",search_word:""},ct()),p="";if("product-station"===o&&"m"===e.platform){var m={};e.customArray.forEach((function(e,t){m["p".concat(t+1,"_ST")]=e.startTime,m["p".concat(t+1,"_DR")]=e.duration,m["p".concat(t+1,"_RE")]=e.responseEnd})),p=JSON.stringify(m),l.alg=p.substring(0,100),l.alg_group=p.substring(100,200),l.alg_ver=p.substring(200,300),l.search_result=p.substring(300,400),l.search_word=p.substring(400,500),l.search_type=p.substring(500,600),l.page_version=p.substring(600,700)}return W(l),l},this.customArray=[],this.customPerf={}},Vt=function(){return(new Ut).reportPerf};var Bt,Wt,Gt=function(){function t(e){var t=this;this.countryMap=new Map,this.getGoSite=function(e){return"nld"===e?t.nldSite:"sgp"===e?t.sgpSite:"rus"===e?t.rusSite:"ind"===e?t.indSite:(console.warn("".concat(t.local," has no corresponding server room")),"")},this.localCookieLevel=function(e){var t,n,r,i=null!==(r=null===(n=null===(t=null===window||void 0===window?void 0:window.__LOCAL_CONFIG__)||void 0===t?void 0:t.stat)||void 0===n?void 0:n.cookiePolicyLevel)&&void 0!==r?r:c[e];return null!=i?i:"low"},this.createCookieConfig=function(e,n,r,i){e.filter((function(e){return e===t.local})).forEach((function(e){var o=t.countryMap.get(e);o||(o=new Map),o.set(n,{url:r?t.getGoSite(r):"",value:ee(n),origin:void 0===r?"client":"server",expires:null==i?void 0:i.expires,domain:null==i?void 0:i.domain,path:null==i?void 0:i.path}),t.countryMap.set(e,o)}))},this.local=e,this.sgpSite="//go.buy.mi.com/".concat(e),this.nldSite="//ams-go.buy.mi.com/".concat(e),this.rusSite="//ru-go.buy.mi.com/".concat(e),this.indSite="//in-go.buy.mi.com/".concat(e)}return t.prototype.startTrustarc=function(){var t=this;"low"===this.localCookieLevel(this.local)?this.insertCookie("1"):(window.addEventListener("message",(function(e){t.trustarcHelp(e.data)})),this.insertCookie(function(){try{var t=U().isInsideApp,n=k(),r=-1!==window.location.hostname.indexOf("po.co"),i=l(n);return!!decodeURIComponent(t||r?"0,1,2,3:":e.get("notice_gdpr_prefs")||i).match(/2/)}catch(o){return console.error(o),!1}}()?"1":"0"))},t.prototype.trustarcHelp=function(e){var t;try{if("string"!=typeof e||!e.includes("submit_preferences"))return;var n=JSON.parse(e);if("preference_manager"===n.source){var r=n.data;if("submit_preferences"===n.message)switch(null!==(t=r.value)&&void 0!==t?t:r){case"0,1,2,3":this.insertCookie("1");break;case"0":this.insertCookie("0");break;default:r.includes("2")&&this.insertCookie("1")}}}catch(i){console.error("trustarc parse error",i)}},t.prototype.xhrGet=function(e){var t=new XMLHttpRequest;t.open("GET",e,!0),t.withCredentials=!0,t.onload=function(){if(200===t.status)try{console.info("set cookie success",t.responseText)}catch(e){console.error(e)}},t.onerror=function(e){console.error("set cookie error",e)},t.send()},t.prototype.setCookieFromServer=function(e,t){var n=t.ind,r=void 0===n?[]:n,i=t.nld,o=void 0===i?[]:i,a=t.sgp,c=void 0===a?[]:a,s=t.rus,u=void 0===s?[]:s;return this.createCookieConfig(r,e,"ind"),this.createCookieConfig(o,e,"nld"),this.createCookieConfig(c,e,"sgp"),this.createCookieConfig(u,e,"rus"),this},t.prototype.setCookieFromClient=function(e,t,n){var r,i=Object.assign({expires:30,domain:".mi.com",path:"/"+this.local},null!==(r=null==n?void 0:n[this.local])&&void 0!==r?r:{}),o=i.expires,a=i.domain,c=i.path;return this.createCookieConfig(t,e,void 0,{expires:o,domain:a,path:c}),this},t.prototype.insertClientCookie=function(t,n,r){var i=n.value,o=n.domain,a=n.path,c=n.expires;i&&("0"===r?e.remove(t,{domain:o,path:a}):e.set(t,i,{domain:o,path:a,expires:c}))},t.prototype.insertServerCookie=function(e,t,n){var r=t.value,i=t.url;if(i&&r){var o=new URLSearchParams;o.append("action",n),o.append("key",e),o.append("value",r),this.xhrGet("".concat(i,"/base/setcookie?").concat(o.toString()))}},t.prototype.insertCookie=function(e){var t=this,n=this.countryMap.get(this.local);n&&n.forEach((function(n,r){var i=n.origin;n.value&&("client"===i?t.insertClientCookie(r,n,e):t.insertServerCookie(r,n,e))}))},t}(),Ht=function(){var e=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},Jt=function(e){if("loading"===document.readyState)return"loading";var t=Ht();if(t){if(e<t.domInteractive)return"loading";if(0===t.domContentLoadedEventStart||e<t.domContentLoadedEventStart)return"dom-interactive";if(0===t.domComplete||e<t.domComplete)return"dom-content-loaded"}return"complete"},zt=function(e){var t=e.nodeName;return 1===e.nodeType?t.toLowerCase():t.toUpperCase().replace(/^#/,"")},Kt=function(e,t){var n="";try{for(;e&&9!==e.nodeType;){var r=e,i=r.id?"#"+r.id:zt(r)+(r.classList&&r.classList.value&&r.classList.value.trim()&&r.classList.value.trim().length?"."+r.classList.value.trim().replace(/\s+/g,"."):"");if(n.length+i.length>(t||100)-1)return n||i;if(n=n?i+">"+n:i,r.id)break;e=r.parentNode}}catch(e){}return n},$t=-1,Xt=function(){return $t},Zt=function(e){addEventListener("pageshow",(function(t){t.persisted&&($t=t.timeStamp,e(t))}),!0)},Yt=function(){var e=Ht();return e&&e.activationStart||0},Qt=function(e,t){var n=Ht(),r="navigate";return Xt()>=0?r="back-forward-cache":n&&(document.prerendering||Yt()>0?r="prerender":document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},en=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var r=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch(e){}},tn=function(e,t,n,r){var i,o;return function(a){t.value>=0&&(a||r)&&((o=t.value-(i||0))||void 0===i)&&(i=t.value,t.delta=o,t.rating=function(e,t){return e>t[1]?"poor":e>t[0]?"needs-improvement":"good"}(t.value,n),e(t))}},nn=function(e){document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&e()}))},rn=function(e){var t=!1;return function(){t||(e(),t=!0)}},on=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},an=0,cn=1/0,sn=0,un=function(e){e.forEach((function(e){e.interactionId&&(cn=Math.min(cn,e.interactionId),sn=Math.max(sn,e.interactionId),an=sn?(sn-cn)/7+1:0)}))},dn=function(){return Bt?an:performance.interactionCount||0},ln=[],pn=new Map,mn=0,fn=[],hn=function(e){if(fn.forEach((function(t){return t(e)})),e.interactionId||"first-input"===e.entryType){var t=ln[ln.length-1],n=pn.get(e.interactionId);if(n||ln.length<10||e.duration>t.latency){if(n)e.duration>n.latency?(n.entries=[e],n.latency=e.duration):e.duration===n.latency&&e.startTime===n.entries[0].startTime&&n.entries.push(e);else{var r={id:e.interactionId,latency:e.duration,entries:[e]};pn.set(r.id,r),ln.push(r)}ln.sort((function(e,t){return t.latency-e.latency})),ln.length>10&&ln.splice(10).forEach((function(e){return pn.delete(e.id)}))}}},vn=function(e){var t=self.requestIdleCallback||self.setTimeout,n=-1;return e=rn(e),"hidden"===document.visibilityState?e():(n=t(e),nn(e)),n},gn=[200,500],yn=function(e,t){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(t=t||{},on((function(){var n;"interactionCount"in performance||Bt||(Bt=en("event",un,{type:"event",buffered:!0,durationThreshold:0}));var r,i=Qt("INP"),o=function(e){vn((function(){e.forEach(hn);var t=function(){var e=Math.min(ln.length-1,Math.floor((dn()-mn)/50));return ln[e]}();t&&t.latency!==i.value&&(i.value=t.latency,i.entries=t.entries,r())}))},a=en("event",o,{durationThreshold:null!==(n=t.durationThreshold)&&void 0!==n?n:40});r=tn(e,i,gn,t.reportAllChanges),a&&(a.observe({type:"first-input",buffered:!0}),nn((function(){o(a.takeRecords()),r(!0)})),Zt((function(){mn=dn(),ln.length=0,pn.clear(),i=Qt("INP"),r=tn(e,i,gn,t.reportAllChanges)})))})))},wn=[],_n=[],bn=0,Sn=new WeakMap,Tn=new Map,In=-1,En=function(e){wn=wn.concat(e),Cn()},Cn=function(){In<0&&(In=vn(On))},On=function(){Tn.size>10&&Tn.forEach((function(e,t){pn.has(t)||Tn.delete(t)}));var e=ln.map((function(e){return Sn.get(e.entries[0])})),t=_n.length-50;_n=_n.filter((function(n,r){return r>=t||e.includes(n)}));for(var n=new Set,r=0;r<_n.length;r++){var i=_n[r];An(i.startTime,i.processingEnd).forEach((function(e){n.add(e)}))}var o=wn.length-1-50;wn=wn.filter((function(e,t){return e.startTime>bn&&t>o||n.has(e)})),In=-1};fn.push((function(e){e.interactionId&&e.target&&!Tn.has(e.interactionId)&&Tn.set(e.interactionId,e.target)}),(function(e){var t,n=e.startTime+e.duration;bn=Math.max(bn,e.processingEnd);for(var r=_n.length-1;r>=0;r--){var i=_n[r];if(Math.abs(n-i.renderTime)<=8){(t=i).startTime=Math.min(e.startTime,t.startTime),t.processingStart=Math.min(e.processingStart,t.processingStart),t.processingEnd=Math.max(e.processingEnd,t.processingEnd),t.entries.push(e);break}}t||(t={startTime:e.startTime,processingStart:e.processingStart,processingEnd:e.processingEnd,renderTime:n,entries:[e]},_n.push(t)),(e.interactionId||"first-input"===e.entryType)&&Sn.set(e,t),Cn()}));var kn,Nn,An=function(e,t){for(var n,r=[],i=0;n=wn[i];i++)if(!(n.startTime+n.duration<e)){if(n.startTime>t)break;r.push(n)}return r},Pn=(new Date,function(){return Pn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Pn.apply(this,arguments)}),xn=function(){!function(e,t){Wt||(Wt=en("long-animation-frame",En)),yn((function(t){var n=function(e){var t=e.entries[0],n=Sn.get(t),r=t.processingStart,i=n.processingEnd,o=n.entries.sort((function(e,t){return e.processingStart-t.processingStart})),a=An(t.startTime,i),c=e.entries.find((function(e){return e.target})),s=c&&c.target||Tn.get(t.interactionId),u=[t.startTime+t.duration,i].concat(a.map((function(e){return e.startTime+e.duration}))),d=Math.max.apply(Math,u),l={interactionTarget:Kt(s),interactionTargetElement:s,interactionType:t.name.startsWith("key")?"keyboard":"pointer",interactionTime:t.startTime,nextPaintTime:d,processedEventEntries:o,longAnimationFrameEntries:a,inputDelay:r-t.startTime,processingDuration:i-r,presentationDelay:Math.max(d-i,0),loadState:Jt(t.startTime)};return Object.assign(e,{attribution:l})}(t);e(n)}),t)}((function(e){try{if("poor"===e.rating){var t=e.attribution,n=t.processedEventEntries.reduce((function(e,t){var n,r,i=[t.cancelable,t.duration,t.entryType,t.interactionId,t.name,tt(t.processingEnd),tt(t.processingStart),tt(t.startTime),(null===(n=t.target)||void 0===n?void 0:n.tagName)+"."+(null===(r=t.target)||void 0===r?void 0:r.className)].join("|");return e+"[".concat(i,"]")}),""),r=Pn(Pn({event:"performance",perf:JSON.stringify({T:"INP",value:[e.value,e.delta,e.rating,e.navigationType].join("|"),attr:[tt(t.inputDelay),t.interactionTarget,tt(t.interactionTime),t.interactionType,t.loadState,tt(t.nextPaintTime),t.presentationDelay,tt(t.processingDuration)].join("|")})},function(e,t){var n={};if("string"!=typeof e)return n;for(var r=0;r<e.length;){var i=e.slice(r,r+100);if(!(t.length>0))break;var o=t.shift();o&&(n[o]=i),r+=100}return n}(n,["perf1","perf2","perf3","perf4","search_type","page_version","alg","alg_group","alg_ver","search_result","search_word"])),ct());console.info(e,r," xomt onINP"),W(r)}}catch(i){console.error("GA4: An error occurred in INP! ",i.message)}}),{reportAllChanges:!0,durationThreshold:100})},Ln=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(c){i={error:c}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},Rn=window.innerWidth;Nn=null!==(kn="1.3.25")?kn:"",console.log("%c%s: %s",["color:#ff6700"].join(";"),"@mi/i18n-onetrack-web-sdk",Nn);var Mn=function(n,r){var i,o,a=U(),c=a.isOldAPP,s=a.isOldIOS,l=a.isOtherApp,p=a.isMihomeApp,m=a.isMicommunityApp,f=l?p?"mihome_sdk":m?"micommunity_sdk":"others":"1"===e.get("ISAPP")?"android":"1"===e.get("ISIOS")?"ios":n.platform||(Rn<=720?"m":"pc"),h=document.querySelector("html"),v=Ln(n.tip instanceof Object?[n.tip.a]:String(n.tip||"").split("."),1)[0];if(h&&h.setAttribute("data-ot-project",String(v||d(n.local).PRO_ID||0)),h&&h.setAttribute("data-ot-local",n.local),h&&h.setAttribute("data-ot-platform",f),new Gt(n.local).setCookieFromClient("click_id",["sg","vn","my","th","id"],{id:{domain:(o=n.local,"id"===o?".mi.co.id":".mi.com")}}).setCookieFromClient("ecid",["tw"]).setCookieFromClient("ichid",["tw"]).setCookieFromServer("awc",{nld:["de","es","it","nl","uk","fr","pl","cz","be-fr","be-nl","se","ro","at","co"],sgp:["mx","pe"]}).startTrustarc(),ne()){if(window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"dle_consent_update"}),!("object"==typeof window&&"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype))(_=document.createElement("script")).src="//i01.appmifile.com/webfile/globalweb/stat/js/IntersectionObserver.min.js",document.head.appendChild(_);var g=document.querySelector("#xmot");if(!(G()||g&&window.onetrack)){window.onetrack=window.onetrack||function(){(window.onetrack.q=window.onetrack.q||[]).push(arguments)};var y=Z()?"cn":n.region||n.local||"cn",w=l||c||s?e.get("DEVICEID")||"undefined":function(t){var n="1"===e.get("_ot_use_type"),r=b(),i=!n&&!!r;return e.set("_ot_use_type",i?"0":"1",q(t,{expires:730})),e.get("_ot_instance_id")||e.set("_ot_instance_id",ae(),q(t,{expires:new Date(Date.now()+34128e6)})),i?r:{type:"cookie",name:"_ot_instance_id",options:q(t,{expires:new Date(Date.now()+34128e6)})}}(n.local);window.onetrack("init",n.appId||d(n.local).APP_ID,"default",y,w||void 0);var _;(_=document.createElement("script")).src="//ssl-cdn.static.browser.mi-img.com/mistat-data/onetrack/onetrack.js",_.async=!0,_.id="xmot",document.head.appendChild(_)}if(!window.pubsub){window.pubsub=window.pubsub||function(){(window.pubsub.q=window.pubsub.q||[]).push(arguments)},window.pubsub("init",n.local.toUpperCase(),"4c17b4d1cfa2fb108700a15027ff54139f56ed9a","mi-store-pubsub","xiaomi-mistore-pubsub");var S=document.createElement("script");S.type="text/javascript",S.src="//i02.appmifile.com/i18n/pubsub/i18n-pubsub.js",S.setAttribute("async","async"),document.body.appendChild(S)}window.gtag||(window.gtag=window.gtag||function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];(window.dataLayer=window.dataLayer||[]).push(e)}),"cn"===n.region&&h&&h.setAttribute("data-ot-test","true"),G()?function(e){L(e),D(e,"_ot_update_flag"),j(e);var t=["utm_type","utm_channel","utm_campaign","utm_source","utm_medium","utm_term","utm_content"];t.map(J).some((function(e){return!!e}))&&D(e,t.map((function(e){return"_ot_".concat(e)})))}(n.local):function(e,t,n){var r=u(t),i=Number(r["pc"===n?"pc":"m"]);L(t),D(t,"_ot_update_flag"),j(t),e.onetrack("set","ref_tip",(function(){return O()})),e.onetrack("set","site_country",le()),e.onetrack("set","domain_id",i),e.onetrack("set","app_platform",n),e.onetrack("set","page",(function(){return re()})),e.onetrack("set","page_version",Y()),e.onetrack("set","lastsource",(function(){return x(t)})),e.onetrack("set","session_id",(function(){return j(t)}));var o=["utm_type","utm_channel","utm_campaign","utm_source","utm_medium","utm_term","utm_content"],a=o.map(J);a.some((function(e){return!!e}))&&D(t,o.map((function(e){return"_ot_".concat(e)})));o.forEach((function(n,r){e.onetrack("set",n,(function(){return M(t,n,a[r])}))}))}(window,n.local,f),r&&r instanceof Function&&r(window,n.local);var T=e.get("mUserId")||"";if(T)ge({local:n.local,userId:T});else if(function(){var e="temp";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(t){return!1}}()){(localStorage.getItem("_onetrack_uid")||"")&&ye()}if(n.tip){var I=Object.assign(n,{tip:n.tip});fe(I)}xn();var E=new t.RI({onetrack:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.log("offline onetrack",e)},system:"海外小米网",group:"BJ-MICOM",env:Z()?"test":"pro",withoutFMP:!1,container:"#root",excludeNodes:["span#teconsent.text-with-inline-end-border",".product__article",".buy-container",".lazy",".pin-spacer","div.product-result-item_figure"],maxWait:8e3,domWait:3e3,manualTrack:!0,fmpOptions:{calcType:"document",eleWeight:{SVG:2,IMG:7,CANVAS:4,OBJECT:4,EMBED:4,VIDEO:4},domFilter:function(e){return!(null==e?void 0:e.width)||!(null==e?void 0:e.height)||(e.width>30||e.height>12)},wh:"*1"}},(function(e,t){window.performanceResult=e,window.statusCollector=t,window.performanceResult.metrics={},Ft(window.performanceResult.metrics)}));window.isInitTrack||(E.initTrack(),window.isInitTrack=1,console.log("initTrack had run"));var C=null,k=!1,N="";window.addEventListener("load",(function(){k=!0,N=Te,window.performanceResultDetail=et(),C=Vt(),"1"===e.get("ISAPP")&&C(N)})),(null===(i=window.document)||void 0===i?void 0:i.addEventListener)&&window.document.addEventListener("readystatechange",(function(){var e;"complete"===(null===(e=window.document)||void 0===e?void 0:e.readyState)&&(k=!0,N=Ie,window.performanceResultDetail=et())}));var A,P,R,F=!1;A=function(){if(window.currentPath!==window.location.pathname){window.currentPath=window.location.pathname;var e=k?N:_e;C&&"function"==typeof C?C(e):(C=Vt())(e)}},P=window.history,R=function(e){var t=P[e];return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=new Event(e.toLowerCase());return t.apply(P,n),window.dispatchEvent(i),t}},window.history.pushState=R("pushState"),window.history.replaceState=R("replaceState"),window.addEventListener("pushstate",A,!1),window.addEventListener("replacestate",A,!1),window.addEventListener("popstate",A,!1),window.onbeforeunload=function(){F=!0,window.performanceResultDetail=et();var e=k?N:be;C&&"function"==typeof C?C(e):(C=Vt())(e)},window.onpagehide=function(){if(!F){var e=k?N:Se;C&&"function"==typeof C?C(e):(C=Vt())(e)}},window.currentPath=window.location.pathname}};var Dn=function(t,n){var r=T(t.tip,n)||"";if(H("click",z({tip:r,module_pos:K(t.modulePos),module_title:K(t.moduleTitle,""),element_name:K(t.elementName,""),element_title:K(t.elementTitle,""),link:K(F(t.linkUrl||t.link),""),asset_link:K(F(t.assetLink),""),commodity_id:K(t.commodityId,""),product_id:K(t.productId,""),goods_id:K(t.goodsId,""),tag:K(t.tag,""),version:K(t.version,""),exp_id:K(t.expId,""),sub_module_pos:K(t.subModulePos),sub_module_name:K(t.subModuleName,""),sub_module_title:K(t.subModuleTitle,""),button_name:K(t.buttonName,""),notify_me_click_date:K(t.notifyMeClickDate,""),moe_enable:K(t.moeEnable,!1)},t.extra)),window.dataLayer&&t.isOpenGA){var i=Object.assign({},t,t.extra,{event:"click"});ve(i,n)}return r&&(t.linkUrl||t.link)&&!t.isNotJump&&(C(r),function(t){var n=k(),r=g((t||"").split("."),5),i=r[1],o=r[4],a=Q()?JSON.parse(sessionStorage.getItem("DISABLED_B")||"[]").map((function(e){return Number(e||0)})):[],c=Q()?JSON.parse(sessionStorage.getItem("ENABLED_E")||"[]").map((function(e){return Number(e||0)})):[];(!~a.indexOf(Number(i||0))||~c.indexOf(Number(o||0)))&&n&&e.set("_ot_view_tip",t||"",q(n))}(r)),r},qn=function(e,t,n){void 0===n&&(n={});var r=n.beforeReport,i=n.afterReport;Array.from(document.querySelectorAll(e.targetSelector||"[data-ot-click]")).forEach((function(n){var o=n&&n.getAttribute("data-ot-tip")||"",a=n&&n.getAttribute(e.targetDataAttr||"data-ot-click")||"{}",c={};try{c=JSON.parse(a)}catch(l){Z()&&console.warn("JSON string [".concat(a,"] is invalid!"))}var s="function"==typeof t?t(c,n):c,u=!0;if("function"==typeof r&&(u=r(s,n)),u){var d=Object.assign(s,o?{tip:o}:{});n.addEventListener("click",(function(e){Dn(d,e.currentTarget||void 0),"function"==typeof i&&i(s,n)}))}}))},jn=function(){return jn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},jn.apply(this,arguments)},Fn=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{s(r.next(e))}catch(t){o(t)}}function c(e){try{s(r.throw(e))}catch(t){o(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))},Un=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){a.label=c[1];break}if(6===c[0]&&a.label<i[1]){a.label=i[1],i=c;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(c);break}i[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(s){c=[6,s],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}},Vn=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Bn=function(e){var t,n;return Fn(this,void 0,void 0,(function(){var r,i,o,a,c,s,u,d,l,p,h,v,g,y,w,_,b,S,E,C,N,A;return Un(this,(function(P){switch(P.label){case 0:if(!(r=T(e.tip||(null===(t=e.ecommerce)||void 0===t?void 0:t.tip))||"")||!ne())return[2,""];if(i={},i=e.ecommerce?e:{event:e.event,ecommerce:jn({items:[jn({},e)]},e)},o=Object.assign({},i),a=[o.ecommerce.commodityId||o.ecommerce.commodity_id,o.ecommerce.productId||o.ecommerce.product_id,o.ecommerce.items[0].itemId||o.ecommerce.items[0].item_id,o.ecommerce.spuId||o.ecommerce.spu_id].filter((function(e){return!!e})),c=ce(a),!window.dataLayer)return[3,11];if(s=k(),u=I(r),d=[],!o.ecommerce||!o.ecommerce.items)return[3,8];P.label=1;case 1:P.trys.push([1,6,7,8]),l=Vn(o.ecommerce.items),p=l.next(),P.label=2;case 2:return p.done?[3,5]:(h=p.value,v=h.itemName?h.itemName.toLowerCase().includes("poco")?"poco":h.itemName.toLowerCase().includes("redmi")?"redmi":"mi":"mi","select_item"===o.event&&(g=$(o.ecommerce.pageType||!!document.body&&document.body.getAttribute("data-ot-pageType")||void 0,""),y=$(h.itemListName,"")?"".concat(g,".").concat($(h.itemListName,"")):void 0,w=$(h.itemListId,"")?"".concat(g,".").concat($(h.itemListId,"")):"".concat(g,".").concat(u.tipC).concat(u.tipC1?"|".concat(u.tipC1):""),se("_ot_item_list_name",$(y,"")),se("_ot_item_list_id",$(w,""))),[4,ie(o.event,h,u,o)]);case 3:_=P.sent(),E=jn({price:f(s)?Number(h.price||0):0,item_brand:$(h.itemBrand||h.item_brand||v,""),item_category:$(h.itemCategory||h.item_ategory,""),item_variant:$(h.itemVariant||h.item_variant,""),quantity:Number(h.quantity||0),item_category2:$(h.itemCategory2,""),item_id:$(c.itemId,"")?"".concat($(c.itemId,"")):"undefined",item_name:(null===(n=$(h.itemName||h.item_name,""))||void 0===n?void 0:n.replace(/<.*?>/g," ").replace(/ +/g," "))||"undefined",promotion_id:$(h.promotionId||h.promotion_id,""),promotion_name:$(h.promotionName||h.promotion_name,""),creative_name:$(h.creativeName||h.creative_name,""),creative_slot:$(h.creativeSlot||h.creative_slot,"")},_),d.push(E),P.label=4;case 4:return p=l.next(),[3,2];case 5:return[3,8];case 6:return b=P.sent(),N={error:b},[3,8];case 7:try{p&&!p.done&&(A=l.return)&&A.call(l)}finally{if(N)throw N.error}return[7];case 8:return o.ecommerce.items&&0!==o.ecommerce.items.length?[3,10]:[4,ie(o.event,{},u,o)];case 9:S=P.sent(),E=jn({price:0,item_brand:void 0,item_category:void 0,item_variant:void 0,quantity:0,item_category2:void 0,item_id:"undefined",item_name:"undefined",promotion_id:void 0,promotion_name:void 0,creative_name:void 0,creative_slot:void 0},S),d.push(E),P.label=10;case 10:C=o.ecommerce||{},W({event:o.event,ecommerce:jn({currency:m(s).currencyCode,alg:$(C.alg,""),alg_ver:$(C.algVer,""),alg_group:$(C.algGroup,""),transation_id:$(C.transationId,""),status:$(C.status,""),payment_type:$(C.paymentType,""),tag:$(C.tag,""),stock:$(C.stock,""),shipping_tier:$(C.shippingTier,""),search_result:$(C.searchResult||C.result,""),search_word:$(C.searchWord,""),search_type:$(C.searchType,""),shipping:f(s)?Number(C.shipping||0):0,tax:f(s)?Number(C.tax||0):0,link:$(F(C.linkUrl||C.link),""),tr_promo_code:$(C.trPromoCode,""),tr_promo_price:f(s)?Number(C.trPromoPrice||0):0,value:f(s)?Number(C.value||0):0,page_referrer:R(s)||void 0,page_version:Y()||void 0,version:$(C.version,""),spu_id:$(c.spuId,"")?"".concat($(c.spuId,"")):void 0,product_id:$(c.productId,"")?"".concat($(c.productId,"")):void 0,commodity_id:$(c.commodityId,"")?"".concat($(c.commodityId,"")):void 0,tip:r,ref_tip:O()||void 0,element_name:$(C.elementName,""),element_title:$(C.elementTitle,""),promo_code:$(C.promoCode||C.promo_code,""),promo_price:f(s)?Number(C.promoPrice||0):0,page_type:$(C.pageType||!!document.body&&document.body.getAttribute("data-ot-pageType")||void 0,""),button_name:$(C.buttonName,""),style:$(C.style,""),grouping_name:$(C.groupingName,""),image_url:$(C.imageUrl,""),category_name:$(C.categoryName,""),category_id:$(C.categoryId,""),parent_category_id:$(C.parentCategoryId,""),parent_category_name:$(C.parentCategoryName,""),source:$(C.source,""),revenue:$(C.revenue,"")?"".concat($(C.revenue,"")):void 0,the_final_amount_user_pays:$(C.ThefinalAmountUserPays,""),discount_vaue:$(C.discountVaue,"")?"".concat($(C.discountVaue,"")):void 0,order_pin_code:$(C.orderPinCode,"")?"".concat($(C.orderPinCode,"")):void 0,number_of_search_resuts:f(s)?Number(C.numberOfSearchResuts||0):0,purchase_amount:$(C.purchaseAmount,""),items:d},u),moe_enable:$(C.moeEnable,"")},!0),P.label=11;case 11:return[2,r]}}))}))},Wn=function(){return Wn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Wn.apply(this,arguments)},Gn=function(e,t){var n=T(e.tip,t)||"";if(H("expose",z({tip:n,module_pos:K(e.modulePos),module_title:K(e.moduleTitle,""),element_name:K(e.elementName,""),element_title:K(e.elementTitle,""),link:K(F(e.linkUrl||e.link),""),asset_link:K(F(e.assetLink),""),commodity_id:K(e.commodityId,""),product_id:K(e.productId,""),goods_id:K(e.goodsId,""),tag:K(e.tag,""),version:K(e.version,""),exp_id:K(e.expId,""),sub_module_pos:K(e.subModulePos),sub_module_name:K(e.subModuleName,""),sub_module_title:K(e.subModuleTitle,""),button_name:K(e.buttonName,"")},e.extra)),window.dataLayer&&e.isOpenGA){var r=Object.assign({},e,e.extra,{event:"expose"});ve(r,t)}return n},Hn=function(e,t,n){void 0===n&&(n={});var r=n.beforeReport,i=n.afterReport,o=Array.from((e.targetNodeWrapper||document).querySelectorAll(e.targetNodeSelector||"[data-ot-expose]"));if("function"==typeof IntersectionObserver){var a={root:e.targetRootSelector&&document.querySelector(e.targetRootSelector)||null,rootMargin:e.targetRootMargin||"0px",threshold:void 0===e.exposeThreshold?.3:e.exposeThreshold},c=new IntersectionObserver((function(n){n.forEach((function(n){if(!(n.intersectionRatio<=0)&&n.isIntersecting){var o=n.target||{},a=o&&o.getAttribute("data-ot-tip")||"",s=o&&o.getAttribute(e.targetNodeDataAttr||"data-ot-expose")||"{}",u={};try{u=JSON.parse(s)}catch(f){Z()&&console.warn("JSON string [".concat(s,"] is invalid!"))}var d="function"==typeof t?t(u,o):u,l=!0;if("function"==typeof r&&(l=r(d,o)),l){if(Gn(Object.assign({},d,a?{tip:a}:{},{isOpenGA:!1}),o),window.dataLayer){var p=Object.assign(d,a?{tip:a}:{});if(d.isOpenGA)if("ecommerce"===p.eventType){var m={event:p.event,ecommerce:p.ecommerce};p.ecommerce||(m={event:p.event,ecommerce:Wn({items:[Wn({},p)]},p)}),Bn(m,o)}else p.event=p.event||"expose",ve(p,o)}"function"==typeof i&&i(d,o),!e.isInfinite&&c.unobserve(o)}}}))}),a);return o.forEach((function(e){c.observe(e)})),c}console.warn("Loading polyfill for IntersectionObserver")},Jn=function(e){var t=T(e.tip)||"";return H("slide",z({tip:t,link:K(F(e.linkUrl||e.link),""),asset_link:K(F(e.assetLink),""),asset_id:K(e.assetId,""),commodity_id:K(e.commodityId,""),product_id:K(e.productId,""),goods_id:K(e.goodsId,""),tag:K(e.tag,""),alg:K(e.alg,""),alg_ver:K(e.algVer,""),alg_group:K(e.algGroup,"")},e.extra)),t},zn=function(e){var t=T(e.tip)||"";return H("add_cart",z({tip:t,commodity_id:K(e.commodityId,""),product_id:K(e.productId,""),goods_id:K(e.goodsId,""),tag:K(e.tag,""),goods_count:K(e.goodsCount,1),goods_amount:K(e.goodsAmount,0),parent_goods_id:K(e.parentGoodsId,0),bundle_id:K(e.bundleId,0)},e.extra)),t},Kn=function(){var e=document.querySelector("body");e&&e.removeAttribute("data-ot-page")},$n=function(e,t){var n=T(t.tip)||"",r={tip:n};Object.keys(t).forEach((function(e){r[e.replace(/([A-Z])/g,"_$1").toLowerCase()]=K(t[e])})),r.tip=n,H(e,r)},Xn=function(){return Xn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Xn.apply(this,arguments)},Zn=function(t){if(ne()&&window.pubsub){var n=k(),r=A(),i=S(n),o=window.navigator.userAgent,a=o.match(/Android.*; ?(.*(?= Build))/),c=o.match(/iPhone OS .*?(?= )/),s=a&&a[1],u=c&&c[0],d={fr:"EU",es:"EU",it:"EU",uk:"EU",nl:"EU",pl:"EU",de:"EU",in:"IN",ru:"RU",default:"SG"},l=void 0;l="1"===e.get("ISIOS")?e.get("DEVICEID")||void 0:"1"===e.get("ISAPP")?e.get("RECOMMENDID")||e.get("DEVICEID")||void 0:i;var p=$(N()),m="page_view"===t.eventName&&p?{language:p}:{},f={B:Xn({instance_id:l,item_id:t.itemId,Device:void 0,"Device model":o.includes("Android")?s:o.includes("iPhone")?u:void 0,app_platform:r||void 0,event_name:t.eventName,page_type:t.pageType},m),attributes:{region:k().toUpperCase(),area:d[k()]||d.default}};!function(t){var n=U(),r=n.isUseMiCommand,i=n.isOtherApp,o=n.isPocoApp,a="xiaomi://MiEventTrackCommand?action=logPubSub&params="+encodeURIComponent(t);!i&&r&&!o&&"1"===e.get("ISIOS")&&Number(e.get("IOSVERSION"))>=40802?window.location.assign(a):!i&&!o&&"1"===e.get("ISAPP")&&Number(e.get("APPVERSION"))>=40800?prompt(a):null===window||void 0===window||window.pubsub("pub",t)}(JSON.stringify(f))}};const Yn=function(){var e=window.xmot&&window.xmot.q;window.xmot=Qn,e instanceof Array&&!!e.length&&e.forEach((function(e){try{Qn.apply(void 0,e)}catch(t){}}));return Qn}();function Qn(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r={init:Mn,view:fe,click:Dn,clickWith:qn,expose:Gn,exposeWith:Hn,slide:Jn,addCart:zn,login:ge,logout:ye,exit:Kn,performance:Vt,default:$n,custom:ve,ecommerce:Bn,getSettings:te,pubSubPush:Zn};return(r[e]||r.default).apply(void 0,t)}})(),r=r.default})()));