var Carousel=function(){function t(i){this.currentPosition=0,this.isAnimating=!1,this.isRTL=!1,this.touchState={startX:0,isSwipe:!1},this.carousel=i,this.viewport=this.carousel.querySelector(t.SELECTORS.VIEWPORT),this.container=this.carousel.querySelector(t.SELECTORS.CONTAINER),this.navigationContainer=this.carousel.querySelector(t.SELECTORS.NAVIGATION),this.viewport&&this.container&&this.navigationContainer&&(this.prevBtn=this.navigationContainer.querySelector(t.SELECTORS.PREV_BTN),this.nextBtn=this.navigationContainer.querySelector(t.SELECTORS.NEXT_BTN),this.cards=this.container.querySelectorAll(t.SELECTORS.CARDS),this.prevBtn&&this.nextBtn&&0!==this.cards.length&&this.init())}return t.prototype.init=function(){this.isRTL=this.checkRTLMode(),this.bindEventHandlers(),this.attachEventListeners(),this.updateNavigation(),this.moveToPosition(0),this.updateTabIndices()},t.prototype.bindEventHandlers=function(){var i=this;this.handleNavigation=this.handleNavigation.bind(this),this.handleTouchStart=this.handleTouchStart.bind(this),this.handleTouchMove=this.handleTouchMove.bind(this),this.handleTouchEnd=this.handleTouchEnd.bind(this),this.handleResize=this.debounce(this.handleResize.bind(this),t.CONFIG.RESIZE_DEBOUNCE_DELAY),this.onNextClick=function(){return i.handleNavigation(!0)},this.onPrevClick=function(){return i.handleNavigation(!1)}},t.prototype.attachEventListeners=function(){this.nextBtn.addEventListener("click",this.onNextClick),this.prevBtn.addEventListener("click",this.onPrevClick),this.container.addEventListener("touchstart",this.handleTouchStart),this.container.addEventListener("touchmove",this.handleTouchMove),this.container.addEventListener("touchend",this.handleTouchEnd),window.addEventListener("resize",this.handleResize)},t.prototype.destroy=function(){var t,i,e,n,o;null===(t=this.nextBtn)||void 0===t||t.removeEventListener("click",this.onNextClick),null===(i=this.prevBtn)||void 0===i||i.removeEventListener("click",this.onPrevClick),null===(e=this.container)||void 0===e||e.removeEventListener("touchstart",this.handleTouchStart),null===(n=this.container)||void 0===n||n.removeEventListener("touchmove",this.handleTouchMove),null===(o=this.container)||void 0===o||o.removeEventListener("touchend",this.handleTouchEnd),window.removeEventListener("resize",this.handleResize)},t.prototype.updateTabIndices=function(){var t=this,i=this.calculateVisibleCards(),e=this.currentPosition+i-1;this.cards.forEach(function(i,n){n>=t.currentPosition&&n<=e?i.tabIndex=0:i.tabIndex=-1})},t.prototype.getCurrentCardWidth=function(){if(this.cards.length>0){var i=this.getStableCardWidth();return!isFinite(i)||i<=0?t.CONFIG.DEFAULT_CARD_WIDTH+t.CONFIG.CARD_GAP:i+t.CONFIG.CARD_GAP}return t.CONFIG.DEFAULT_CARD_WIDTH+t.CONFIG.CARD_GAP},t.prototype.getStableCardWidth=function(i){void 0===i&&(i=0);var e=this.cards[0];if(!e)return t.CONFIG.DEFAULT_CARD_WIDTH;var n=parseFloat(getComputedStyle(e).width)||e.getBoundingClientRect().width;return(!n||n<40)&&i<3?this.getStableCardWidth(i+1):n&&n>=40?n:t.CONFIG.DEFAULT_CARD_WIDTH},t.prototype.checkRTLMode=function(){return"rtl"===document.documentElement.dir||"rtl"===document.body.dir||"rtl"===getComputedStyle(document.documentElement).direction},t.prototype.calculateVisibleCards=function(){var t=this.viewport.offsetWidth,i=this.getCurrentCardWidth();return Math.max(1,Math.floor(t/i))},t.prototype.calculateScrollStep=function(){return this.calculateVisibleCards()>=t.CONFIG.MIN_VISIBLE_CARDS_FOR_MULTI_SCROLL?t.CONFIG.MULTI_SCROLL_STEP:t.CONFIG.SINGLE_SCROLL_STEP},t.prototype.calculateMaxPosition=function(){var t=this.calculateVisibleCards();return Math.max(0,this.cards.length-t)},t.prototype.updateNavigation=function(){var t=this.calculateMaxPosition(),i=this.calculateVisibleCards(),e=this.navigationContainer.classList;this.cards.length<=i?(this.prevBtn.disabled=!0,this.nextBtn.disabled=!0,e.add("display-none")):(this.prevBtn.disabled=0===this.currentPosition,this.nextBtn.disabled=this.currentPosition>=t,e.remove("display-none"))},t.prototype.moveToPosition=function(i){var e=this;if(!this.isAnimating){var n=this.calculateMaxPosition(),o=Math.max(0,Math.min(i,n));if(o!==this.currentPosition){this.isAnimating=!0;var s=this.calculateTransform(o);this.container.style.transform="translate3d(".concat(s,"px, 0, 0)"),this.currentPosition=o,setTimeout(function(){e.isAnimating=!1},t.CONFIG.ANIMATION_DURATION),this.updateNavigation(),this.updateTabIndices()}}},t.prototype.calculateTransform=function(i){var e=this.getStableCardWidth()+t.CONFIG.CARD_GAP;return this.isRTL?i*e:-i*e},t.prototype.handleNavigation=function(t){if(!this.isAnimating){var i,e=this.calculateScrollStep(),n=this.calculateMaxPosition();t?this.currentPosition<n&&(i=Math.min(n,this.currentPosition+e),this.moveToPosition(i)):this.currentPosition>0&&(i=Math.max(0,this.currentPosition-e),this.moveToPosition(i))}},t.prototype.handleResize=function(){var t=this.calculateMaxPosition();if(this.currentPosition>t){this.currentPosition=t;var i=this.calculateTransform(this.currentPosition);this.container.style.transform="translate3d(".concat(i,"px, 0, 0)")}this.updateNavigation(),this.updateTabIndices()},t.prototype.handleTouchStart=function(t){this.touchState.startX=t.touches[0].clientX,this.touchState.isSwipe=!1},t.prototype.handleTouchMove=function(i){if(this.touchState.startX){var e=i.touches[0].clientX,n=this.touchState.startX-e;Math.abs(n)>t.CONFIG.TOUCH_MOVE_THRESHOLD&&(this.touchState.isSwipe=!0,i.preventDefault())}},t.prototype.handleTouchEnd=function(i){if(this.touchState.isSwipe&&this.touchState.startX){var e=i.changedTouches[0].clientX,n=this.touchState.startX-e;if(Math.abs(n)>t.CONFIG.TOUCH_THRESHOLD){var o=n>0;this.handleNavigation(this.isRTL?!o:o)}this.touchState.startX=0,this.touchState.isSwipe=!1}},t.prototype.debounce=function(t,i){var e=null;return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];e&&clearTimeout(e),e=window.setTimeout(function(){t.apply(void 0,n)},i)}},t.CONFIG={DEFAULT_CARD_WIDTH:432,CARD_GAP:16,ANIMATION_DURATION:300,MIN_VISIBLE_CARDS_FOR_MULTI_SCROLL:3,MULTI_SCROLL_STEP:2,SINGLE_SCROLL_STEP:1,TOUCH_THRESHOLD:50,TOUCH_MOVE_THRESHOLD:10,RESIZE_DEBOUNCE_DELAY:100},t.SELECTORS={VIEWPORT:".prompts-viewport",CONTAINER:".prompts-container",NAVIGATION:".carousel-navigation",PREV_BTN:".carousel-nav--prev",NEXT_BTN:".carousel-nav--next",CARDS:".prompt-card"},t}();window.addEventListener("load",function(){document.querySelectorAll(".prompts-carousel").forEach(function(t){new Carousel(t)})});