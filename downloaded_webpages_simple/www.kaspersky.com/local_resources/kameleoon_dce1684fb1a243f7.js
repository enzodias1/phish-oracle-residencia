if (undefined === window.Kameleoon){(function(){!function(e,t){e.kbowser=t()}(this,(function(){return function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=90)}({17:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var i=r(18),n=function(){function e(){}return e.getFirstMatch=function(e,t){var r=t.match(e);return r&&r.length>0&&r[1]||""},e.getSecondMatch=function(e,t){var r=t.match(e);return r&&r.length>1&&r[2]||""},e.map=function(e,t){var r,i=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(r=0;r<e.length;r+=1)i.push(t(e[r]));return i},e.find=function(e,t){var r,i;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(r=0,i=e.length;r<i;r+=1){var n=e[r];if(t(n,r))return n}},e.assign=function(e){for(var t,r,i=e,n=arguments.length,s=new Array(n>1?n-1:0),a=1;a<n;a++)s[a-1]=arguments[a];if(Object.assign)return Object.assign.apply(Object,[e].concat(s));var o=function(){var e=s[t];"object"==typeof e&&null!==e&&Object.keys(e).forEach((function(t){i[t]=e[t]}))};for(t=0,r=s.length;t<r;t+=1)o();return e},e}();t.default=n,e.exports=t.default},18:function(e,t,r){"use strict";t.__esModule=!0,t.OS_MAP=t.PLATFORMS_MAP=void 0;t.PLATFORMS_MAP={t:"tablet",m:"mobile",d:"desktop"};t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",Linux:"Linux"}},90:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var i,n=(i=r(91))&&i.__esModule?i:{default:i},s=r(18);function a(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=function(){function e(){}var t,r,i;return e.parse=function(e){return new n.default(e).getResult()},t=e,i=[],(r=null)&&a(t.prototype,r),i&&a(t,i),e}();t.default=o,e.exports=t.default},91:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var i=o(r(92)),n=o(r(93)),s=o(r(94)),a=o(r(17));function o(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw new Error("UA parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=a.default.find(i.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=a.default.find(n.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=a.default.find(s.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this},t.getResult=function(){return a.default.assign({},this.parsedResult)},e}();t.default=u,e.exports=t.default},92:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var i,n=(i=r(17))&&i.__esModule?i:{default:i};var s=/version\/(\d+(\.?_?\d+)+)/i,a=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},r=n.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},r=n.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},r=n.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},r=n.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},r=n.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},r=n.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},r=n.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},r=n.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},r=n.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},r=n.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},r=n.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},r=n.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},r=n.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},r=n.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return r&&(t.version=r),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},r=n.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},r=n.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},r=n.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},r=n.default.getFirstMatch(s,e)||n.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},r=n.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},r=n.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},r=n.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},r=n.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/electron/i],describe:function(e){var t={name:"Electron"},r=n.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},r=n.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},r=n.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},r=n.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){var t={name:"Android Browser"},r=n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},r=n.default.getFirstMatch(s,e);return r&&(t.version=r),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:n.default.getFirstMatch(t,e),version:n.default.getSecondMatch(t,e)}}}];t.default=a,e.exports=t.default},93:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var i,n=(i=r(17))&&i.__esModule?i:{default:i},s=r(18);var a=[{test:[/windows phone/i],describe:function(e){return{name:s.OS_MAP.WindowsPhone}}},{test:[/windows /i],describe:function(e){return{name:s.OS_MAP.Windows}}},{test:[/Macintosh(.*?) FxiOS(.*?) Version\//],describe:function(e){var t=n.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return{name:s.OS_MAP.iOS,version:t}}},{test:[/macintosh/i],describe:function(e){var t=n.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,".");return{name:s.OS_MAP.MacOS,version:t}}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=n.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:s.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){return{name:s.OS_MAP.Android}}},{test:[/linux/i],describe:function(){return{name:s.OS_MAP.Linux}}}];t.default=a,e.exports=t.default},94:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var i,n=(i=r(17))&&i.__esModule?i:{default:i},s=r(18);var a=[{test:[/googlebot/i],describe:function(){return{type:"bot"}}},{test:[/huawei/i],describe:function(e){return{type:s.PLATFORMS_MAP.m}}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:s.PLATFORMS_MAP.t}}},{test:[/ipad/i],describe:function(){return{type:s.PLATFORMS_MAP.t}}},{test:[/Macintosh(.*?) FxiOS(.*?) Version\//],describe:function(){return{type:s.PLATFORMS_MAP.t}}},{test:[/kftt build/i],describe:function(){return{type:s.PLATFORMS_MAP.t}}},{test:[/silk/i],describe:function(){return{type:s.PLATFORMS_MAP.t}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:s.PLATFORMS_MAP.t}}},{test:function(e){var t=e.test(/ipod|iphone/i),r=e.test(/like (ipod|iphone)/i);return t&&!r},describe:function(e){return{type:s.PLATFORMS_MAP.m}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:s.PLATFORMS_MAP.m}}},{test:[/[^-]mobi/i],describe:function(){return{type:s.PLATFORMS_MAP.m}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.m}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.m}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:s.PLATFORMS_MAP.m}}},{test:function(e){return"android"===e.getOSName(!0)&&Number(String(e.getOSVersion()).split(".")[0])>=3},describe:function(){return{type:s.PLATFORMS_MAP.t}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.m}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.d}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.d}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.d}}}];t.default=a,e.exports=t.default}})}));class APIConfiguration{constructor(e){this.generationTime=e.scriptProduceTime;this.goals=e.goals.map((e=>new APIGoal(e)));this.singlePageSupport=Kameleoon.Internals.runtime?Kameleoon.Internals.runtime.singlePageSupport:e.singlePageSupport;this.siteCode=e.siteCode}}class APIAction{constructor(i,t){const e=0===t;const a=Kameleoon.Internals.runtime.Visitor.currentVisit;const n=Kameleoon.Internals.runtime.storedData.obtainField("Gatherer",e?"experimentsTriggered":"personalizationsTriggered",{});this.dateLaunched=i.dateStatusModified;this.dateModified=i.dateModified;this.id=i.id;this.name=i.name;this.targetSegment=new APISegment(i.targetingSegment);this.active=i.targeting&&!i.disabled&&i.displayedVariation&&null!=i.displayedVariation.id;this.triggered=i.targeting||!1;this.untrackedTrafficReallocationTime=i.untrackedRespoolTime||null;this.triggeredInVisit=n[this.id]?!0:!1;const s=i=>Kameleoon.Internals.runtime.variations.find((t=>t.id==i));if(e){let t=s(i.registeredVariationId);this.associatedVariation=t?new APIVariation(t,i):null;this.trafficDeviation={};this.variations=[];this.redirectProcessed=i.redirectProcessed||!1;for(let t in i.deviation){this.trafficDeviation[t]=100*i.deviation[t];this.variations.push(new APIVariation(s(parseInt(t)),i))}this.activatedInVisit=a.ExperimentActivations[this.id]?!0:!1}else{this.associatedVariation=new APIVariation(s(i.associatedVariation.id),i);this.activatedInVisit=this.triggeredInVisit&&a.PersonalizationActivations[this.id]?!0:!1}Object.defineProperty(this,"goals",{enumerable:!0,configurable:!0,get:()=>Kameleoon.Internals.configuration.goals.filter((t=>-1!=(i.goals||[]).indexOf(t.id))).map((i=>new APIGoal(i)))});Object.defineProperty(this,"mainGoal",{enumerable:!0,configurable:!0,get:()=>{const t=e?i.kameleoonTracking?.mainGoalId:i.mainGoalId;const a=t&&Kameleoon.Internals.configuration.goals.find((i=>i.id==t));return a?new APIGoal(a):null}})}}class APIActionActivation{constructor(i,n,t){const a=0===i;const o=Kameleoon.Internals.runtime.Campaigns.obtainCampaign(n,a);const s=a?"ExperimentActivations":"PersonalizationActivations";const e=t[s][n].associatedVariationID;const c=Kameleoon.Internals.configuration.variations.find((i=>i.id==e));if(a){this.experimentID=n;this.experiment=o?new APIAction(o,0):null}else{this.personalizationID=n;this.personalization=o?new APIAction(o,1):null}this.times=t[s][n].times;this.associatedVariationID=e;this.associatedVariation=c?new APIVariation(c,o):null}}class APIActions{constructor(e){const i=0===e;const n=()=>{if(Kameleoon.Internals.runtime)return Kameleoon.Internals.runtime.Campaigns.obtainCampaignsList(e);else return[]};const t=i=>new APIAction(i,e);const a=e=>n().map(t).filter(e);this.getAll=()=>n().map(t);this.getActive=()=>n().filter((e=>(!0===e.targeting||e.trackingPerformed)&&1!=e.disabled&&e.displayedVariation&&null!=e.displayedVariation.id)).map(t);this.getTriggeredInVisit=()=>a((e=>e.triggeredInVisit));this.getActivatedInVisit=()=>a((e=>e.activatedInVisit));const s=(e,i)=>{const a=n().find((n=>n[e]==i));return a?t(a):null};this.getById=e=>s("id",e);this.getByName=e=>s("name",e);if(i){this.assignVariation=(e,i,t)=>{const a=n().find((i=>i.id==e));if(a&&(void 0===a.registeredVariationId||t)){a.registeredVariationId=i;a.assignmentTime=(new Date).getTime();a.writeLocalData()}};this.block=(e,n=!1)=>{const t=Kameleoon.Internals.runtime.Campaigns.obtainCampaign(e,i);if(t){if(n){const i=Kameleoon.Internals.runtime.storedData.obtainField("Runtime","blockedExperiments",[]);i.push(e);Kameleoon.Internals.runtime.storedData.saveField("Runtime","blockedExperiments",i)}t.setBlocked("API")}};this.trigger=(e,n)=>{const t=Kameleoon.Internals.runtime.Campaigns.obtainCampaign(e,i);if(t)if(n){if(t){t.performVariationAssignment(!0);Kameleoon.Analyst.Actions.performActionsTracking([t])}}else{t.trigger();Kameleoon.Analyst.Actions.process([t])}};this.triggerExperiment=(e,i)=>{this.trigger(e,i);}}else{this.block=(e,n=!1)=>{};this.disable=e=>{};this.trigger=(e,n)=>{}}}}class APIGoal{constructor(t){if(t){this.id=t.id;this.name=t.name;this.type=t.type}}}class APIProduct{constructor(e,a){this.productID=e;const t=new Set(["accessories","auto","available","brand","description","fashion","gender","groupId","isChild","isFashion","isNew","leftovers","merchantID","model","name","params","rating","seasonality","sku","tags","typePrefix","url"]);for(let e in a)switch(e){case"imageURL":case"mainImageURL":this.imageURL=a.mainImageURL||a.imageURL;break;case"price":case"oldPrice":case"availableQuantity":case"priceMargin":this[e]=parseFloat(a[e])||null;break;case"categories":if(a.categories.length>0)this.categories=a.categories.map((e=>{if(e.parent)e.parent=e.parent.toString();e.id=e.id.toString();return e}));break;default:if(t.has(e))this[e]=a[e]}}getTrackingParameters(){let e={};e.url=encodeURIComponent(Kameleoon.Utils.computeCurrentPageCleanAbsoluteURL());for(let a in this)switch(a){case"productID":break;default:switch(typeof this[a]){case"object":e[a]=encodeURIComponent(JSON.stringify(this[a]));break;case"string":e[a]=encodeURIComponent(this[a]);break;case"number":case"boolean":case"symbol":e[a]=this[a]}}return Kameleoon.Utils.parseObjectToUrlParams(e)}}class APITargeting{constructor(e){const n=1===e?"targetingTriggers":"targetingSegments";const t=e=>{const t=Kameleoon.Internals.runtime[n].find(e);return t?new APISegment(t):null};this.getAll=()=>Kameleoon.Internals.runtime[n].map((e=>new APISegment(e)));this.getById=e=>t((n=>n.id==e));this.getByName=e=>t((n=>n.name===e));this.reevaluate=t=>{const a=Kameleoon.Internals.runtime[n].findIndex((e=>e.id==t));if(a>-1){const i=Kameleoon.Internals.runtime.simulationMode?Kameleoon.Internals.runtime.simulationModeData[n]:Kameleoon.Internals.configuration[n];const r=i.find((e=>e.id==t));if(r){Kameleoon.Internals.runtime[n].splice(a,1);const i=Kameleoon.Utils.clone(r);Kameleoon.Internals.runtime[n].push(i);Kameleoon.Targeting.checkTargetingSegmentsTargeting([i]);Kameleoon.Internals.runtime.Campaigns.obtainCampaignsList(0).concat(Kameleoon.Internals.runtime.Campaigns.obtainCampaignsList(1)).forEach((n=>{if(1===e){n.setTargetingTrigger?.(t);if(n.targetingTriggerId==t)n.forceTargeting=!1}else{n.setTargetingSegment(t);if(n.targetingSegmentId==t)n.forceTargeting=!1}}));Kameleoon.Analyst.Actions.processAllActions();return i.targeting}}return;};this.trigger=t=>{const a=Kameleoon.Internals.runtime[n].find((e=>e.id==t));if(a){a.targeting=!0;const n=1===e?"targetingTriggerId":"targetingSegmentId";Kameleoon.Internals.runtime.Campaigns.obtainCampaignsList("experiments").concat(Kameleoon.Internals.runtime.Campaigns.obtainCampaignsList("personalizations")).forEach((e=>{if(e[n]==t){e.targeting=void 0;e.rescheduleTargeting=!0;e.forceTargeting=!0}}));Kameleoon.Analyst.Actions.processAllActions();Kameleoon.Targeting.processTargetingSegments([a])}}}}class APISegment{constructor(t){if(t){this.id=t.id;this.name=t.name;this.targeting=t.targeting}}}class APITemplate{constructor(s,t){this.name=s;this.customFields=t}}class APIVariation{constructor(e,t={}){if(e){this.id=e.id;this.name=e.name;if(t.experimentAction){const i=t.variations.find((t=>t.id==e.id));this.reallocationTime=i?i.respoolTime:null}else this.reallocationTime=null;this.instantiatedTemplate=e.widgetTemplateInputData?new APITemplate(e.widgetTemplateName,e.widgetTemplateInputData):null}}}class APIVisit{constructor(t){this.pageViews=t.obtainPageNumberViews();this.duration=t.lastEventDate-t.startDate;this.locale=Kameleoon.Utils.getLocale();this.startDate=t.startDate;this.index=t.visitNumber;this.currentProduct=null;this.products=[];this.clicks=t.clicks||0;this.pageURLsVisited=t.pageURLsVisited;this.activatedSegments=t.activatedSegments;this.lastEventDate=t.lastEventDate;this.activatedExperiments=Object.keys(t.ExperimentActivations).map((e=>new APIActionActivation(0,parseInt(e),t)));this.activatedPersonalizations=Object.keys(t.PersonalizationActivations).map((e=>new APIActionActivation(1,parseInt(e),t)));if(t==Kameleoon.Internals.runtime.Visitor.currentVisit){this.device=new Device;this.geolocation=t.Geolocation;}this.conversions=Kameleoon.Utils.clone(t.conversions);this.customData={};const e=Kameleoon.Internals.runtime.Gatherer.configuration.customData;for(const i in t.customData){const n=e[i];if(null!=n)this.customData[n.name]=Kameleoon.Gatherer.CustomData.obtainParsedValue(i,t.customData[i])}let i="<OTHER / UNKNOWN>";let n=[];let a=Kameleoon.Internals.runtime.storedData.obtainField("Runtime","firstReferrersIndices",[]);for(let t=0,e=a.length;t<e;t++){let e=a[t];let s;if(0==e)s="<RESTART>";else{let t=Kameleoon.Internals.runtime.Gatherer.configuration.referrers[e-1];s=null==t?i:t.name}n.push(s)}this.acquisitionChannel=n[0];this.landingPageURL=t.landingPageURL;this.weather=t.Weather}}class APIVisitor{constructor(){this.getCustomDataVisitor=()=>{const t={};const i=Kameleoon.Internals.runtime.Visitor.customData;const s=Kameleoon.Internals.runtime.Gatherer.configuration.customData;for(const e in i)if(s[e])t[s[e].name]=Kameleoon.Gatherer.CustomData.obtainParsedValue(e,i[e]);return t};this.setVisitorCode=t=>{Kameleoon.Internals.runtime.Visitor.setVisitorCode(t)};const{Visitor:t,personalizationsActive:i,Consent:s}=Kameleoon.Internals.runtime;this.numberOfVisits=t.totalVisits;this.timeStartedEldestVisit=t.timeStartedEldestVisit;this.customData=this.getCustomDataVisitor();this.personalizationsActive=i;this.code=t.currentVisit.visitorCode;this.currentVisit=new APIVisit(t.currentVisit);this.visits=t.visits.map((t=>new APIVisit(t)));this.previousVisit=t.visits.length>1?new APIVisit(t.visits.slice(-2)[0]):null;this.experimentLegalConsent=s.AB_TESTING;this.personalizationLegalConsent=s.PERSONALIZATION;this.productRecommendationLegalConsent=Kameleoon.Internals.runtime.storedData.obtainField("Gatherer","productRecommendation")?!0:!1;this.firstVisitStartDate=t.timeStartedEldestVisit}}class Analyst{constructor(){this.initialize=e=>{this.isTimeout=!1;if(window.kameleoonDisplayPage){if(null==Kameleoon.Internals.configuration.behaviorWhenTimeout||document.getElementById("kameleoonLoadingStyleSheet"))window.clearTimeout(window.kameleoonDisplayPageTimeOut);else if(null==window.kameleoonEndLoadTime)this.isTimeout=!0;try{window.kameleoonDisplayPage(!0)}catch(e){}window.kameleoonDisplayPage=null}window.kameleoonEndLoadTime=(new Date).getTime();e()};this.load=()=>{Kameleoon.Utils.sendKameleoonCustomEvent("Internals",{type:"load",time:(new Date).getTime()});Kameleoon.Utils.runProtectedFunction((function(){if(window.kameleoonQueue)window.kameleoonQueue=new CommandQueue(window.kameleoonQueue,"IMMEDIATE");window.addEventListener("error",(e=>{if(e.error&&e.error.stack&&e.error.stack.match(/kameleoon/gi)){Kameleoon.Utils.Logger.send(e.error.stack,"kameleoon.js");return!1}}));Kameleoon.Analyst.initialize((()=>{const e=Kameleoon.Analyst.checkBlockingElements();const o=window.kameleoonEndLoadTime-(window.kameleoonStartLoadTime||window.kameleoonEndLoadTime)-25;let n=!1;Kameleoon.Utils.sendKameleoonCustomEvent.call(window,"Loaded",{timeout:"TIMEOUT"==e,loadTime:o});if(Kameleoon.Internals.runtime){n=!0;Kameleoon.Internals.runtime.clear()}if(0==e.length){Kameleoon.Internals.runtime=new Runtime(n);Kameleoon.Analyst.loadKameleoonFull((()=>{Kameleoon.Internals.runtime.run()}))}else{Kameleoon.Utils.sendKameleoonCustomEvent("Internals",{type:"abort",blockingReason:e});Kameleoon.Utils.sendKameleoonCustomEvent.call(window,"Aborted",{reason:e})}}))}))};this.loadKameleoonFull=(e,o)=>{if(!Kameleoon.Internals.runtime.kameleoonFull&&(this.kameleoonFullNeeded()||o)){const o="kameleoonFullApplicationCode";const n=o=>{Kameleoon.Utils.runProtectedScript(o+"\n;"+"("+e.toString()+")()","kameleoonFull.js")};const a=sessionStorage.getItem(o);if(null!=a)n(a);else{const{STATIC_HOST_NAME:e,DOMAIN:a}=Kameleoon.Internals.configuration;Kameleoon.Utils.performBeaconServerCall("https://"+e+"."+a+"/kameleoon-full.js?cache="+Kameleoon.Utils.obtainRandomString(16),(e=>{if(void 0===e.readyState||4==e.readyState&&200==e.status){sessionStorage.setItem(o,e.responseText);n(e.responseText)}}))}}else e()};this.Actions=new Actions;this.Goals=new Goals}checkBlockingElements(){let e=!1;try{const e="kameleoonPrivateMode";localStorage.getItem(e);sessionStorage.getItem(e)}catch(o){e=!0}if(e)return"STORAGE";if(this.isTimeout){return"TIMEOUT"}document.removeEventListener("visibilitychange",Kameleoon.Analyst.load);if("prerender"==document.visibilityState){document.addEventListener("visibilitychange",Kameleoon.Analyst.load);return"PRERENDER"}if(Kameleoon.Internals.configuration.abortCustomScript){let e;const o="kameleoonAbortCustomScript.js";try{e=Kameleoon.Utils.runProtectedScript(Kameleoon.Internals.configuration.abortCustomScript,o)}catch(n){e=!1;}if(e)return"SCRIPT"}if(-1!=location.href.indexOf("kameleoonDisabled"))return"PARAMETER";return""}kameleoonFullNeeded(){const{parameters:e,simulationMode:o}=Kameleoon.Internals.runtime;if(sessionStorage.getItem("kameleoonFullApplicationCode")||sessionStorage.getItem("kameleoonLightExtension")||e.kameleoon||e.kameleoonVariationId||e["kameleoon-simulation"]||e.kameleoonLightExtension||e.kameleoonBuilder||o||Kameleoon.Utils.readLocalData("kameleoonSimulationParameters","COOKIE"))return!0;return!1}loadSimulation(e){if(!Kameleoon.Internals.runtime.parameters.kameleoonVariationId)Object.keys(localStorage).forEach((e=>{if(-1!==e.indexOf("kameleoonVariation-"))localStorage.removeItem(e)}))}loadVariationFromServer(e,o){}processSimulations(){}}Analyst.CODE_ALPHABET="abcdefghijklmnopqrstuvwxyz0123456789";Analyst.HEXADECIMAL_ALPHABET="0123456789ABCDEF";class API{constructor(){this.Core={enableLegalConsent:function(e="BOTH"){Kameleoon.Internals.runtime.Consent.enable(e)},disableLegalConsent:function(e="BOTH"){Kameleoon.Internals.runtime.Consent.disable(e)},enableSinglePageSupport:function(){Kameleoon.Internals.runtime.enableSinglePageSupport.apply(Kameleoon.Internals.runtime,arguments)},enableDynamicRefresh:function(){Kameleoon.Internals.runtime.enableDynamicRefresh.apply(Kameleoon.Internals.runtime,arguments)},getConfiguration:()=>new APIConfiguration(Kameleoon.Internals.configuration),load:function(){Kameleoon.Analyst.load.apply(Kameleoon.Analyst,arguments)},processRedirect:function(){Kameleoon.Utils.processRedirect.apply(Kameleoon.Utils,arguments)},runWhenConditionTrue:(e,n,t=200)=>{if(e())Kameleoon.Utils.runProtectedFunction(n,!0);else{const o=Kameleoon.Utils.setTimeout((()=>{Kameleoon.Utils.clearTimeout(o);this.Core.runWhenConditionTrue.apply(Kameleoon,[e,n,t])}),t,!0)}},runWhenElementPresent:(e,n,t,o)=>{const a=null==t;const r=Kameleoon.Utils.querySelectorAll(e);const i=n;if(o)n=n=>{KMutationObserver.setMutationObserverSPA();const t=`data-kameleoon-dynamic-class-${Kameleoon.Utils.obtainRandomString(4)}`;const o=e=>{e.forEach((e=>e.setAttribute(t,"true")))};o(n);i(n);Kameleoon.Internals.runtime.waitingDynamicElements.push({selector:e,attribute:t,callback:e=>{o(e);i(e)}})};if(!Kameleoon.Internals.runtime.querySelectorAllHasError)if(0<r.length)Kameleoon.Utils.runProtectedFunction((()=>{n(r)}),!0);else if(Kameleoon.Internals.runtime.cantUseMutationObserver||!a){const n=Kameleoon.Utils.setTimeout((()=>{Kameleoon.Utils.clearTimeout(n);this.Core.runWhenElementPresent.apply(Kameleoon,[e,i,t||200,o])}),t||200,!0)}else{Kameleoon.Internals.runtime.waitingElementPresentObjects.push({selector:e,callback:n,useAntiFlicker:a})}},runWhenShadowRootElementPresent:(e,n,t,o)=>{this.Core.runWhenElementPresent(e,(a=>{const r=a.filter((e=>e.shadowRoot));if(0===r.length){const a=Kameleoon.Utils.setTimeout((()=>{Kameleoon.Utils.clearInterval(a);this.Core.runWhenShadowRootElementPresent.apply(Kameleoon,[e,n,t,o])}),150);return}const i=`data-kameleoon-shadow-class-${Kameleoon.Utils.obtainRandomString(4)}`;const l=()=>{let e=[];r.forEach((t=>{if(t.shadowRoot)e=e.concat(Kameleoon.Utils.querySelectorAll(n,t.shadowRoot))}));if(o)e=e.filter((e=>!e.getAttribute(i))).map((e=>{e.setAttribute(i,"true");return e}));return e};const s=l();if(s.length)t(s);if(!s.length||o){const e=Kameleoon.Utils.setInterval((()=>{const n=l();if(n.length){t(n);!o&&Kameleoon.Utils.clearInterval(e)}}),150)}}))}};this.Goals={cancelConversion:(e,n)=>{try{this.Goals.processConversions(e,n,!0)}catch(e){}},processConversion:(e,n,t)=>{try{this.Goals.processConversions(e,n,!1,t)}catch(e){}},processConversions:(e,n,t,o)=>{const a=Kameleoon.Analyst.Goals.get(e)??Kameleoon.Analyst.Goals.getList().find((n=>e==n.id||e===n.name));if(a)Kameleoon.Analyst.Goals.processConversions([{goal:a,revenue:n,negative:t,metadata:o}])}};this.Data={readLocalData:e=>Kameleoon.Internals.runtime.storedData.Vars[e]?Kameleoon.Internals.runtime.storedData.Vars[e].value:null,resetCustomData:e=>{this.Data.setCustomData(e,[],!0)},retrieveDataFromRemoteSource:(e,n)=>{const t={siteCode:Kameleoon.Internals.configuration.siteCode};let o="map";if(e instanceof Array){o="maps";t.keys=encodeURIComponent(JSON.stringify(e))}else t.key=encodeURIComponent(e.toString());Kameleoon.Utils.performBeaconServerCall(Kameleoon.Utils.addParameterToURL(`${Kameleoon.Internals.runtime.DATA_URL}/map/${o}`,Kameleoon.Utils.parseObjectToUrlParams(t),!1),(e=>{if(4==e.readyState){let t={};if(200==e.status)t=JSON.parse(e.responseText);n&&n(t)}}),null)},setCustomData:(e,n,t)=>{if(Kameleoon.Internals.runtime&&Kameleoon.Internals.runtime.gathererRun){let o=null;for(const n in Kameleoon.Internals.runtime.Gatherer.configuration.customData){const t=Kameleoon.Internals.runtime.Gatherer.configuration.customData[n];if(null!=t&&(t.name===e||n==e)){o=parseInt(n);break}}if(null!=o)Kameleoon.Gatherer.CustomData.register(o,{value:n,overwrite:t})}},writeLocalData:(e,n,t)=>{Kameleoon.Internals.runtime.storedData.Vars[e]={value:n,date:(new Date).getTime()+24*60*60*1e3*(t?30:1/24)}},performRemoteSynchronization:(e,n,t)=>{}};this.Events={triggered:[],trigger:e=>{this.Core.runWhenConditionTrue((()=>!0===Kameleoon.Internals.runtime.setupAfterLocalDataRetrieval),(()=>{this.Events.triggered.push(e);if(Kameleoon.Analyst.Actions)Kameleoon.Analyst.Actions.processAllActions();if(Kameleoon.Targeting)Kameleoon.Targeting.processAllTargetings();}),100)}};this.Tracking={processOmniture:e=>{Kameleoon.Tracking.processOmniture&&Kameleoon.Tracking.processOmniture(e)}};this.Products={obtainFullSearchProducts:(e,n,t)=>{},obtainInstantSearchProducts:(e,n,t)=>{},obtainProductInteractions:(e,n,t,o)=>{const a={};null!=t&&(a.timeBegin=t);null!=o&&(a.timeEnd=o);Kameleoon.Internals.runtime.Visitor.obtainProductData("productCounters",e,a,(e=>{for(const n in e){e[n].views=e[n].v||0;e[n].cartQuantities=e[n].atcq||0;e[n].boughtQuantities=e[n].bq||0;delete e[n].v;delete e[n].atcq;delete e[n].bq}n(e)}))},obtainProductData:(e,n,t={all:!0})=>{Kameleoon.Internals.runtime.Visitor.obtainProductData("productData",e,t,n)},obtainRecommendedProducts:(e,n,t,o)=>{},obtainRecommendedCollections:(e,n,t)=>{},trackAddToCart:(e,n,t=1,o={})=>{e=e.toString();if(null!=e&&e.length>0)if(t>0){Kameleoon.Internals.runtime.RequestManager.sendProduct(e,`eventType=productAddToCart&quantity=${t}`);}},trackAddToWishList:(e,n=1)=>{},trackCategoryView:e=>{},trackSearchQuery:e=>{},trackProductView:(e,n)=>{e=e.toString();if(null!=e&&e.length>0){const t=new APIProduct(e,n);Kameleoon.Internals.runtime.RequestManager.sendProduct(e,`eventType=productPage&${t.getTrackingParameters()}`);if(Kameleoon.Internals.runtime.gathererRun)Kameleoon.Gatherer.track(VisitEvent_Product,{ean:e});Kameleoon.Internals.runtime.product=t}},trackTransaction:(e,n={})=>{for(let n=0;n<e.length;++n){const o=e[n];o.productID=(o.productId||o.productID).toString();if(null!=o.productID&&o.productID.length>0){o.quantity=parseInt(o.quantity)||1;if(o.quantity>0)Kameleoon.Internals.runtime.RequestManager.sendProduct(o.productID,`eventType=productBuy&quantity=${o.quantity}`)}}}};this.Experiments=new APIActions(0);this.Personalizations=new APIActions(1);this.Segments=new APITargeting(0);this.Triggers=new APITargeting(1);this.Variations={execute:e=>{let n=Kameleoon.Internals.runtime.variations.find((n=>n.id==e));if(n){n=new Variation(n);Kameleoon.Utils.addCSSStyleSheet(n.cssCode);return n.applyJavascriptCode(!0)}return null}};this.Utils={addEventListener:function(e,n,t,o){Kameleoon.Utils.addEventListener(e,n,t,o,!0)},addUniversalClickListener:function(e,n,t){const o=Kameleoon.Internals.runtime.mouseDownEvent;this.addEventListener(e,o,(function(e){if(!Kameleoon.Internals.runtime.touchMoveEvent&&("mousedown"==o||!e.target||!e.target.closest||!e.target.closest("[disabled]")))n&&n(e)}))},clearInterval:function(){Kameleoon.Utils.clearInterval.apply(Kameleoon.Utils,arguments)},clearTimeout:function(){Kameleoon.Utils.clearTimeout.apply(Kameleoon.Utils,arguments)},createHash:function(e){return Kameleoon.Utils.computeStringHash.apply(Kameleoon.Utils,arguments)},getURLParameters:function(){return Kameleoon.Utils.parseParameters.apply(Kameleoon.Utils,arguments)},performRequest:(e,n,t,o=5e3)=>Kameleoon.Utils.performBeaconServerCall(e,n,t,o),querySelectorAll:function(e){return Kameleoon.Utils.querySelectorAll.apply(Kameleoon.Utils,arguments)},setInterval:(e,n=200)=>Kameleoon.Utils.setInterval(e,n,!1,!0),setTimeout:(e,n=200)=>Kameleoon.Utils.setTimeout(e,n,!0)};Object.defineProperty(this.Utils,"mouseDownEvent",{enumerable:!0,get:function(){return Kameleoon.Internals.runtime.mouseDownEvent}});Object.defineProperty(this.Utils,"touchMoveEvent",{enumerable:!0,get:function(){return Kameleoon.Internals.runtime.touchMoveEvent}});Object.defineProperty(this,"Visitor",{enumerable:!0,get:function(){try{if(!Kameleoon.Internals.runtime)return{setVisitorCode:e=>{Kameleoon.Internals.configuration.predefinedVisitorCode=e}};else return new APIVisitor}catch(e){return null}}});Object.defineProperty(this,"CurrentVisit",{enumerable:!0,get:function(){try{return new APIVisit(Kameleoon.Internals.runtime.Visitor.currentVisit)}catch(e){return null}}})}}class Gatherer{constructor(){this.MAX_HREF_LENGTH_IN_A_REQUEST=200;this.MAX_PAGE_TITLE_LENGTH_IN_A_REQUEST=200}run(){let e=Kameleoon.Utils.clone(Kameleoon.Internals.configuration.Gatherer);if("string"==typeof e)e=JSON.parse(Kameleoon.Utils.decodeString(e));Kameleoon.Internals.runtime.Gatherer={configuration:e,active:!0,clicks:0};this.Browser=new Browser(e.browsers);this.CustomData=new CustomData(e.customData);this.KeyPage=new KeyPage(e.keyPages);this.Language=new Language;this.OperatingSystem=new OperatingSystem(e.oss);this.Referrer=new Referrer(e.referrers);this.TimeZone=new TimeZone;Kameleoon.Internals.runtime.storedData.saveField("Gatherer","startsOfVisitForCurrentPage",0);Kameleoon.Internals.runtime.Visitor=new Visitor;Kameleoon.Internals.runtime.RequestManager=new RequestManager;Kameleoon.Internals.runtime.Visitor.performRemoteVisitorSynchronization();this.track(VisitEvent_Page);this.track(VisitEvent_StaticData);VisitEvent_Activity.initialize();this.CustomData.run();Kameleoon.Internals.runtime.gathererRun=!0}startNewVisit(e,t){Kameleoon.Internals.runtime.Visitor.updateFromStoredData(!0,!0,t);this.track(VisitEvent_Page);this.track(VisitEvent_StaticData);this.CustomData.run();}track(e,t){new VisitEvent(e).track(t)}}class KameleoonEngine{constructor(){this.Analyst=new Analyst;this.API=new API;this.Gatherer=new Gatherer;this.Loader=new Loader;this.Targeting=new Targeting;this.Tracking=new Tracking;this.Utils=new Utils}}class Loader{constructor(){this.enableKameleoonEditorListener=()=>{if(!Kameleoon.Internals.runtime.editorListenerEnabled){Kameleoon.Internals.runtime.editorListenerEnabled=!0;const t=t=>{if(!t)t=window.event;Kameleoon.Loader.listenKeys.call(Kameleoon.Loader,t)};Kameleoon.Utils.addEventListener(document,"keyup",t,!1)}};this.listenKeys=t=>{if(t.shiftKey){if(113==t.keyCode&&Kameleoon.Internals.configuration.webExperimentationSetup){Kameleoon.Internals.runtime.editorMode=!0;Kameleoon.Analyst.loadKameleoonFull((()=>{Kameleoon.Loader.enableKameleoonEditor.apply(Kameleoon.Loader)}),!0)}if(115==t.keyCode&&(Kameleoon.Internals.runtime.simulationMode||Kameleoon.Internals.runtime.parameters.kameleoonVariationSelection))Kameleoon.Analyst.loadKameleoonFull((()=>{Kameleoon.Loader.enableSimulationPanel()}),!0)}};}}class Runtime{constructor(e){this.isReloaded=e;this.DATA_URL=Kameleoon.Internals.configuration.DATA_URL;this.PAGE_LOADED_POLL_DELAY=250;this.PAGE_LOADING_POLL_DELAY=75;this.enableSinglePageSupport=()=>{this.singlePageSupport=!0;this.href=window.location.href;KMutationObserver.setMutationObserverSPA();Kameleoon.Utils.setInterval((()=>{const e=this.href;this.href=window.location.href;if(e!=this.href){Kameleoon.Gatherer.Referrer.update(e);Kameleoon.Analyst.load.apply(this,[])}}),100)};this.enableDynamicRefresh=()=>{this.dynamicRefresh=!0;KMutationObserver.setMutationObserverSPA()};this.executeGlobalScript=()=>{if(!this.editorMode&&!this.kameleoonSelectionIframeMode){if(Kameleoon.Internals.configuration.globalScript&&!this.globalScriptProcessed){Kameleoon.Utils.sendKameleoonCustomEvent("Internals",{type:"globalScript"});this.globalScriptProcessed=!0;Kameleoon.Utils.runProtectedScript(Kameleoon.Internals.configuration.globalScript,"kameleoonGlobalScript.js")}}};this.initializePredefinedVisitorCode=()=>{const{predefinedVisitorCode:e,experiments:t,personalizations:o}=Kameleoon.Internals.configuration;if(e){const i=Kameleoon.Utils.readLocalData("kameleoonVisitorCode","COOKIE")||Kameleoon.Utils.readLocalData("kameleoonVisitorCode","LS");if(i==e)return;const n=this.storedData.Visitor.visits;if(n)n.slice(-1)[0].visitorCode=e;if(this.incomingStoredData)this.incomingStoredData["kameleoonVisitorCode"]=e;Kameleoon.Utils.saveVisitorCode(e);t.forEach((e=>{Kameleoon.Utils.eraseLocalData("kameleoonExperiment-"+e.id,null,"LS")}));}};this.initializeActions=()=>{if(Kameleoon.Internals.configuration.webExperimentationSetup){this.targetingSegments=Kameleoon.Utils.clone(Kameleoon.Internals.configuration.targetingSegments);this.variations=Kameleoon.Utils.clone(Kameleoon.Internals.configuration.variations);Kameleoon.Internals.configuration.experiments.forEach((e=>{this.Campaigns.addCampaign(new Experiment(e,this.incomingStoredData))}));}};this.initializeActionsAfterGatherer=()=>{};this.initializeIdleTimeListener=()=>{};this.initializeListeners=()=>{Kameleoon.Utils.domReady((()=>{this.domReady=!0;if(!0!==Kameleoon.Internals.configuration.disableEditorLaunchViaKeys)Kameleoon.Loader.enableKameleoonEditorListener();if(this.kameleoonSelectionIframeMode){const e=document.createElement("script");e.setAttribute("type","text/javascript");e.setAttribute("charset","utf-8");e.setAttribute("src","https://back-office-redesign."+Kameleoon.Internals.configuration.DOMAIN+"/get-script?type=selection");this.headNode.appendChild(e)}if(0==window.kameleoonLightIframe&&window.kameleoonIframeURL)if(this.Gatherer.startOfVisit)Kameleoon.Utils.setTimeout((()=>{const e=document.createElement("iframe");e.src=window.kameleoonIframeURL;e.id="kameleoonExternalIframe";e.style.cssFloat="left !important";e.style.opacity="0.0 !important";e.width="0px";e.height="0px";e.onload=()=>{e.parentNode.removeChild(e)};document.head.appendChild(e)}),5e3)}));if("touchend"==this.mouseDownEvent){Kameleoon.Utils.addEventListener(document,"touchmove",(e=>{this.touchMoveEvent=!0}));Kameleoon.Utils.addEventListener(document,"touchstart",(e=>{this.touchMoveEvent=!1}))}if(!this.iframeLocalStorage)window.addEventListener("storage",(e=>{const t=e.key?.split("-")??[""];let o=t[0];if(!o.startsWith("kameleoon"))return;let i;try{i=null==e.newValue?null:JSON.parse(e.newValue).value}catch(e){return}try{if(e.oldValue&&JSON.parse(e.oldValue).value===i)return}catch(e){}if("kameleoonData"===o&&t[1])o+="-"+t[1];const n={};switch(o){case"kameleoonExperiment":n.type=o;const e=t[1];n.experimentId=parseInt(e);let a;if(null==i)a=null;else{const e=i.split("/")[0];a=isNaN(e)?e:parseInt(e)}n.registeredVariationId=a;break;case"kameleoonGlobalPersonalizationExposition":n.type=o;n.active=null==i?null:"true"==i.split("/")[0];break;case this.dataKeyName:case"kameleoonSimulationVisitorData":n.type=o;n.value=null==i?null:i;break;case"kameleoonLegalConsent":n.type=o;n.saveLegalConsent=null==i?null:i;break}if(null!=n.type)Kameleoon.Utils.processStorageData(n)}),!1);};this.loadExternalRequests=()=>{this.Geolocation="undefined"!=typeof KGeolocation?new KGeolocation:null;this.Weather="undefined"!=typeof Weather?new Weather:null;this.IP="undefined"!=typeof IP?new IP:null;};this.loadProductRecommendation=()=>{};this.processPageLoaded=()=>{Kameleoon.Utils.removeBlockingStyleSheet();for(let e=0,t=this.variations.length;e<t;++e){const t="enginePollerForVariation"+this.variations[e].id;if(this[t]){if(this.cantUseMutationObserver)window.clearInterval(this[t]);this[t]=null}}};this.setup=()=>{const e="adBlockerCheck";const t=Kameleoon.Utils.setInterval((()=>{let o=document.getElementById(e);if(null==o&&document.body){o=document.createElement("div");o.id=e;o.className="ad-placement";document.body.appendChild(o)}if(null!=o&&0==o.clientWidth){this.adBlocker=!0;Kameleoon.Utils.clearInterval(t)}}),250);const o=Kameleoon.Utils.setTimeout((()=>{Kameleoon.Utils.clearTimeout(o);const i=document.getElementById(e);if(null!=i)i.parentNode.removeChild(i);if(null==this.adBlocker){Kameleoon.Utils.clearInterval(t);this.adBlocker=!1}else Kameleoon.Gatherer.track(VisitEvent_AdBlocker)}),2e3);Kameleoon.Utils.addEventListener(window,"pageshow",(e=>{if(e.persisted)this.updateAfterPageCached()}));this.Visitor.updateFromStoredData(!1,!1,!1);if(!Kameleoon.Internals.configuration.requestsAfterConsent)this.loadExternalRequests();KMutationObserver.setMutationObserver();Kameleoon.Analyst.loadKameleoonFull((()=>{Kameleoon.Analyst.loadSimulation()}));Kameleoon.Analyst.Actions.processAllActions();Kameleoon.Targeting.processAllTargetings();Kameleoon.Analyst.Goals.run()};this.setupLocalData=e=>{Kameleoon.Utils.addEventListener(window,"message",Kameleoon.Utils.processMessageEvent,!1);if(this.iframeLocalStorage){this.externalIframe=document.getElementById("kameleoonExternalIframe")||window.kameleoonExternalIframe;this.postMessageOrigin=window.kameleoonIframeOrigin||"";this.postMessageCallbacks={};if(null==Kameleoon.Internals.configuration.externalIframeData)Kameleoon.Utils.postMessageToExternalIframe("retrieve",null,null,(t=>{this.incomingStoredData=t;e()}));else{this.incomingStoredData=Kameleoon.Internals.configuration.externalIframeData;e();delete Kameleoon.Internals.configuration.externalIframeData}}else{this.incomingStoredData=null;this.clearOutdatedStorage();e()}};this.updateAfterPageCached=()=>{this.pageCached=!0;if(this.iframeLocalStorage)Kameleoon.Utils.postMessageToExternalIframe("retrieve",null,null,(()=>{}));else{const e=Kameleoon.Utils.readLocalData(this.simulationMode?"kameleoonSimulationVisitorData":this.dataKeyName,"LS",!0);this.storedData.update(e);this.Visitor.updateFromStoredData(!1,!1,!1);Kameleoon.Gatherer.track(VisitEvent_Page);Kameleoon.Gatherer.track(VisitEvent_StaticData)}};this.clearOutdatedStorage=()=>{try{for(let e=0,t=localStorage.length;e<t;e++){const t=localStorage.key(e);if(t.startsWith("kameleoon")&&!t.startsWith("kameleoonData")){const e=JSON.parse(localStorage.getItem(t));if(this.pageStartTime>(e.date||e.expirationDate))localStorage.removeItem(t)}}}catch(e){}};this.getSimulationMode=()=>{const e=this.readFromStorageOrExternal("kameleoonSimulation","LS");return e?!0:!1};this.pageStartTime=(new Date).getTime();this.dataKeyName="kameleoonData";if(Kameleoon.Internals.configuration.useMultipleSiteCodes){this.dataKeyName=this.dataKeyName+"-"+Kameleoon.Internals.configuration.siteCode;Utils.LOCAL_STORAGE_OBFUSCATED_KEYS[this.dataKeyName]=!0}this.Device=new Device;this.deviceType=this.Device.type;this.parameters=Kameleoon.Utils.parseParameters();this.beforeUnloadEvent="Phone"===this.deviceType&&"Safari"===this.Device.browser?"pagehide":"beforeunload";this.headNode=document.getElementsByTagName("head")[0];this.editorMode="true"==this.parameters.kameleoon;this.proxyMode="proxy."+Kameleoon.Internals.configuration.DOMAIN===window.location.hostname;this.disableCache="true"==this.parameters.kameleoonDisableCache||this.parameters.kameleoonVariationId;this.kameleoonSelectionIframeMode="true"==this.parameters.kameleoonSelectionIframeMode;this.iframeLocalStorage=Kameleoon.Internals.configuration.useWideDomainSupport;this.useWideDomainSupport=Kameleoon.Internals.configuration.useWideDomainSupport||null!=window.kameleoonLightIframe;if(0==window.kameleoonLightIframe||null==window.kameleoonLightIframe)this.iframeLocalStorage=!1;this.mouseDownEvent="ontouchend"in document.documentElement?"touchend":"mousedown";this.addedClasses={};this.addedIDs={};this.eventListeners=[];this.listenVariations=[];this.listenSpaCallbacks=[];this.waitingElementPresentObjects=[];this.waitingDynamicElements=[];this.variations=[];this.intervalIds={};this.targetingSegments=[];this.targetingTriggers=[];this.timeoutIds={};this.cantUseMutationObserver="undefined"==typeof MutationObserver;this.Campaigns=new Campaigns;this.Consent=new Consent;Kameleoon.Analyst.Goals.addList(Kameleoon.Internals.configuration.goals);if(e&&Kameleoon.Gatherer.Referrer&&Kameleoon.Gatherer.Referrer.isUpdated)this.prevSpaPage=Kameleoon.Gatherer.Referrer.obtain();this.enableRemoteVisitorSynchronization=Kameleoon.Internals.configuration.enableRemoteVisitorSynchronization&&(!Kameleoon.Internals.configuration.enableRemoteVisitorSynchronizationItpOnly||"Safari"===this.Device.browser);Object.defineProperty(this,"experiments",{get(){return this.Campaigns.obtainCampaignsList(0)}});Object.defineProperty(this,"personalizations",{get(){return this.Campaigns.obtainCampaignsList(1)}});Object.defineProperty(this,"goals",{get:()=>Kameleoon.Analyst.Goals.getList()})}clear(){this.eventListeners.forEach((e=>{let t;if("window"==e.elementKey||"document"==e.elementKey)t="window"==e.elementKey?window:document;else{t=document.querySelector(`[kameleoonListener-${e.elementKey}=true]`);if(t)t.removeAttribute(`kameleoonListener-${e.elementKey}`)}if(t)t.removeEventListener(e.eventType,e.actionFunction,e.useCapture)}));this.waitingDynamicElements.forEach((e=>{Kameleoon.Utils.querySelectorAll(`[${e.attribute}=true]`).forEach((t=>{t.removeAttribute(e.attribute)}))}));for(const e in this.timeoutIds)Kameleoon.Utils.clearTimeout(parseInt(e));for(const e in this.intervalIds)Kameleoon.Utils.clearInterval(parseInt(e));this.RequestManager?.processRequests();this.storedData?.save(2);this.mutationObserver?.disconnect();this.mutationObserverSpa?.disconnect();if(Kameleoon.Targeting)Kameleoon.Targeting.targetings={};let e=Kameleoon.Utils.querySelectorAll("[id^='kameleoonElement'], [id*='kameleoonScenarioLayerBase'], [id^='kameleoonStyleSheet'], [class*='kameleoonWidget'], [class*='kameleoonInsert']");for(let t=0;t<e.length;++t)e[t].parentNode.removeChild(e[t]);e=Kameleoon.Utils.querySelectorAll("[id^='kameleoonId'], .kameleoonOverlay");for(let t=0;t<e.length;++t)e[t].removeAttribute("id");e=Kameleoon.Utils.querySelectorAll("[class^='kameleoonClass']");for(let t=0;t<e.length;++t)e[t].removeAttribute("class");Kameleoon.API.Events.triggered=[]}readFromStorageOrExternal(e,t){if(this.incomingStoredData)return this.incomingStoredData[e];else return Kameleoon.Utils.readLocalData(e,t,!0)}run(){this.running=!0;Kameleoon.Utils.removeBlockingStyleSheet();this.setupLocalData((()=>{this.simulationMode=this.getSimulationMode();this.storedData=new StoredData(this.incomingStoredData);this.Consent.setup();this.initializePredefinedVisitorCode();this.initializeActions();Kameleoon.Gatherer.run();this.initializeActionsAfterGatherer();this.executeGlobalScript();window.kameleoonQueue=new CommandQueue(window.kameleoonQueue);Kameleoon.Utils.sendKameleoonCustomEvent.call(window,"Started",{newVisitorCode:1===this.Visitor.visits.length});this.initializeListeners();this.setup();this.setupAfterLocalDataRetrieval=!0}))}}class Utils{constructor(){this.events=[];this.addParameterToURL=(e,t,n)=>{if(n)return e+(-1==e.indexOf("#")?"#":"&")+t;let a="";if(-1!=e.indexOf("#")){a=e.substr(e.indexOf("#"));e=e.substr(0,e.indexOf("#"))}e+=(-1==e.indexOf("?")?"?":"&")+t+a;return e};this.computeCurrentPageAbsoluteURLNoProxyMode=function(){let e=Kameleoon.Internals.runtime;if(null==e.currentPageAbsoluteURLNoProxyMode){if(e.proxyMode){let t=e.parameters.kameleoonExperimentId||e.parameters["kameleoon-experiment-id"];if(null!=t){let n=e.Campaigns.obtainCampaign(t,!0);if(n)e.currentPageAbsoluteURLNoProxyMode=n.baseURL}}if(null==e.currentPageAbsoluteURLNoProxyMode)e.currentPageAbsoluteURLNoProxyMode=window.location.href}return e.currentPageAbsoluteURLNoProxyMode};this.computeCurrentPageCanonicalURL=()=>{if(null==Kameleoon.Internals.runtime.currentPageCanonicalURL){let e=this.querySelectorAll('link[rel="canonical"]');if(e.length>0)Kameleoon.Internals.runtime.currentPageCanonicalURL=e[0].href}return Kameleoon.Internals.runtime.currentPageCanonicalURL};this.computeCurrentPageCleanRelativeURL=()=>{if(null==Kameleoon.Internals.runtime.currentPageCleanRelativeURL)Kameleoon.Internals.runtime.currentPageCleanRelativeURL=this.computeRelativeURL(this.computeCurrentPageCleanAbsoluteURL());return Kameleoon.Internals.runtime.currentPageCleanRelativeURL};this.computeIfSuffix=(e,t)=>{let n=e.length-t.length;let a=e.lastIndexOf(t,n);return a>=0&&a==n};this.computeRelativeURL=e=>{let t=document.createElement("a");t.href=e;return t.pathname+t.search+t.hash};this.computeStringSha256=e=>{let t=1,n,a=[],o=[];while(++t<18)for(n=t*t;n<312;n+=t)a[n]=1;function r(e,t){return Math.pow(e,1/t)%1*4294967296|0}for(t=1,n=0;t<313;)if(!a[++t]){o[n]=r(t,2);a[n++]=r(t,3)}function l(e,t){return e>>>t|e<<32-t}let i=o.slice(t=0),s=this.encodeUTF8(e),m=[],u=s.length,c=[],d,f,h;for(;t<u;)c[t>>2]|=(255&s.charCodeAt(t))<<8*(3-t++%4);u*=8;c[u>>5]|=128<<24-u%32;c[h=u+64>>5|15]=u;for(t=0;t<h;t+=16){d=i.slice(n=0,8);for(;n<64;d[4]+=f){if(n<16)m[n]=c[n+t];else m[n]=(l(f=m[n-2],17)^l(f,19)^f>>>10)+(0|m[n-7])+(l(f=m[n-15],7)^l(f,18)^f>>>3)+(0|m[n-16]);let e;d.unshift((f=(d.pop()+(l(e=d[4],6)^l(e,11)^l(e,25))+((e&d[5]^~e&d[6])+a[n])|0)+(0|m[n++]))+(l(u=d[0],2)^l(u,13)^l(u,22))+(u&d[1]^d[1]&d[2]^d[2]&u))}for(n=8;n--;)i[n]=d[n]+i[n]}for(s="";n<63;)s+=(i[++n>>3]>>4*(7-n%8)&15).toString(16);return s};this.computeURLNoKameleoonParameters=e=>{let t=!1;for(let n in Kameleoon.Internals.runtime.parameters)if(-1!=n.indexOf("kameleoon")){t=!0;e=e.replace(new RegExp(n+"="+Kameleoon.Internals.runtime.parameters[n]+"&?"),"")}return t?e.replace(/\?$/,""):e};this.computeURLRegExpNoKameleoonParameters=e=>e?e.replace(/(\\\?|&|#)kameleoon[^&#()]*/g,""):null;this.decodeString=e=>{let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n="";let a,o,r;let l,i,s,m;let u=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(u<e.length){l=t.indexOf(e.charAt(u++));i=t.indexOf(e.charAt(u++));s=t.indexOf(e.charAt(u++));m=t.indexOf(e.charAt(u++));a=l<<2|i>>4;o=(15&i)<<4|s>>2;r=(3&s)<<6|m;n+=String.fromCharCode(a);if(64!=s)n+=String.fromCharCode(o);if(64!=m)n+=String.fromCharCode(r)}n=this.decodeUTF8(n);return n};this.decodeUTF8=e=>{let t="";let n=0;let a=0,o=0,r;while(n<e.length){a=e.charCodeAt(n);if(a<128){t+=String.fromCharCode(a);n++}else if(a>191&&a<224){o=e.charCodeAt(n+1);t+=String.fromCharCode((31&a)<<6|63&o);n+=2}else{o=e.charCodeAt(n+1);r=e.charCodeAt(n+2);t+=String.fromCharCode((15&a)<<12|(63&o)<<6|63&r);n+=3}}return t};this.domReady=e=>{if("complete"==document.readyState||"interactive"==document.readyState)return e();else{let t=!1;this.addEventListener(document,"DOMContentLoaded",(()=>{if(t)return;t=!0;e()}),!1);this.addEventListener(window,"load",(()=>{if(t)return;t=!0;e()}),!1)}};this.encodeString=e=>{let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n="";let a,o,r,l,i,s,m;let u=0;e=this.encodeUTF8(e);while(u<e.length){a=e.charCodeAt(u++);o=e.charCodeAt(u++);r=e.charCodeAt(u++);l=a>>2;i=(3&a)<<4|o>>4;s=(15&o)<<2|r>>6;m=63&r;if(isNaN(o))s=m=64;else if(isNaN(r))m=64;n=n+t.charAt(l)+t.charAt(i)+t.charAt(s)+t.charAt(m)}return n};this.encodeUTF8=e=>{e=e.replace(/\r\n/g,"\n");let t="";for(let n=0;n<e.length;n++){let a=e.charCodeAt(n);if(a<128)t+=String.fromCharCode(a);else if(a>127&&a<2048){t+=String.fromCharCode(a>>6|192);t+=String.fromCharCode(63&a|128)}else{t+=String.fromCharCode(a>>12|224);t+=String.fromCharCode(a>>6&63|128);t+=String.fromCharCode(63&a|128)}}return t};this.forceNoFlicker=e=>{let t=document.createElement("style");t.setAttribute("id","kameleoonPageLoading");t.setAttribute("rel","stylesheet");t.setAttribute("type","text/css");t.setAttribute("media","screen");let n=e+" { visibility: hidden !important; background-image: none !important; }";t.appendChild(document.createTextNode(n));Kameleoon.Internals.runtime.headNode.appendChild(t)};this.getLocale=e=>{let t=Kameleoon.Gatherer.Language.obtainLocaleTag().substring(0,2);if(e&&"fr"!=t)t="en";return t};this.obtainComputedStyle=e=>{if(window.getComputedStyle)return getComputedStyle(e,"");return null};this.obtainCurrentRootDomain=()=>{if(null==Kameleoon.Internals.runtime.currentRootDomain){const e=window.location.hostname.split(".");const t=e.length-1;const n="testRootDomain";const a="_detectRootDomain";let o=e[t];for(let r=t-1;r>=0;r--){o=e[r]+"."+o;this.createLocalData(a,n,1,o,"COOKIE",!1,void 0,!0);const t=this.readLocalData(a,"COOKIE",!1);if(t){this.eraseLocalData(a,o,"COOKIE");Kameleoon.Internals.runtime.currentRootDomain=o;break}}}return Kameleoon.Internals.runtime.currentRootDomain};this.obtainRandomString=(e,t=Analyst.CODE_ALPHABET)=>{let n=t.length;let a="";for(let o=0;o<e;++o){let e=Math.floor(Math.random()*n);a+=t.substring(e,e+1)}return a};this.parseHostName=e=>{let t=document.createElement("a");t.href=e;return t.hostname};this.processRedirect=(e,t,n)=>{if(window.location.href!=e){t=t||Kameleoon.Analyst.Actions.currentAction;let a=document.createElement("a");a.href=e;if(!Kameleoon.Internals.runtime.useWideDomainSupport&&-1==window.location.href.indexOf(a.protocol+"//"+a.hostname)){if(t)e=this.addParameterToURL(e,"kameleoonRedirect-"+t.id+"="+t.associatedVariation.id,!0)}else if(t)this.createLocalData("kameleoonRedirect-"+t.id,t.associatedVariation.id,1,null,null,!1,null,!0);if(window.location.href!=e){this.forceNoFlicker("*");this.createLocalData("kameleoonReferrer",Kameleoon.Gatherer.Referrer.obtain(),1/24,null,"COOKIE",!1);if(n)Kameleoon.Internals.runtime.redirectInProcess=!0;window.location.replace(e)}}};this.processStorageData=e=>{if(Kameleoon.Internals.runtime.setupAfterLocalDataRetrieval)switch(e.type){case"kameleoonExperiment":const t=Kameleoon.Internals.runtime.Campaigns.obtainCampaign(e.experimentId,!0);if(t)t.registeredVariationId=e.registeredVariationId;break;case"kameleoonGlobalPersonalizationExposition":Kameleoon.Internals.runtime.personalizationsActive=e.active;break;case Kameleoon.Internals.runtime.dataKeyName:case"kameleoonSimulationVisitorData":if(e.type==Kameleoon.Internals.runtime.dataKeyName&&!Kameleoon.Internals.runtime.simulationMode||"kameleoonSimulationVisitorData"==e.type&&Kameleoon.Internals.runtime.simulationMode){if(Kameleoon.Internals.runtime.pageCached)Kameleoon.Internals.runtime.storedData.update(this.readLocalData(e.type,"LS",!0));else Kameleoon.Internals.runtime.storedData.update(JSON.parse(this.unobfuscateString(e.value)));Kameleoon.Internals.runtime.Visitor.updateFromStoredData(!1,!1,!1)}break;case"kameleoonLegalConsent":if(e.saveLegalConsent){let t=e=>e?"enable":"disable";if(null!=e.saveLegalConsent.AB_TESTING){let n=t(e.saveLegalConsent.AB_TESTING);Kameleoon.Internals.runtime.Consent[n]("AB_TESTING",!0)}if(null!=e.saveLegalConsent.PERSONALIZATION){let n=t(e.saveLegalConsent.PERSONALIZATION);Kameleoon.Internals.runtime.Consent[n]("PERSONALIZATION",!0)}}break}};this.querySelectorAll=(e,t)=>{Kameleoon.Internals.runtime.querySelectorAllHasError=!1;let n=!1,a,o=[],r=[];if(null==t)t=document;let l=e.match(/#([0-9]+.*)(?: |$)/);if(l){let t=e.charAt(1);e=e.replace("#"+t,"#\\3"+t+" ")}if(""!==e){if(-1!==e.indexOf("[")&&-1===e.indexOf("']")&&-1===e.indexOf('"]')){let t=e.split(/(?=\.)|(?=#)|(?=\[)/),n,a,o;t.forEach((function(t){if("["===t[0]&&-1===t.indexOf("']")&&-1===e.indexOf('"]')&&-1!==e.indexOf("=")){n=t.split(/=(.+)?/);a=n[1];a=a.substring(0,a.length-1);o=n[0]+"='"+a+"']";e=e.replace(t,o)}}))}if(-1!==e.indexOf(":contains")){n=!0;a=this.treatContainsSelector(e);e=a.newSelector}if(t&&t.querySelectorAll)if(-1!==e.indexOf(":eq"))o=this.treatEqSelector(e,t);else try{o=t.querySelectorAll(e)}catch(e){Kameleoon.Internals.runtime.querySelectorAllHasError=!0;o=[]}for(let e=0,t=o.length;e<t;++e)if(n){if(a.check(a.containText,o[e]))r.push(o[e])}else r.push(o[e])}return r};this.runProtectedFunction=(e,t)=>{try{e()}catch(e){if(t)console.log(e);else this.Logger.send(e,"kameleoon.js");if(Kameleoon.Internals.runtime&&t)Kameleoon.Internals.runtime.processPageLoaded()}};this.runProtectedScript=(e,t,n)=>{if(n)return n();if(e){let n=null;try{let a=t?"//# sourceURL="+t:"";n=eval.call(window,"(function () {\n"+e+"\n})();"+a)}catch(e){n=null;console.log(e)}return n}return null};this.saveVisitorCode=(e,t=!0)=>{if(Kameleoon.Internals.configuration.useWideDomainSupport||Kameleoon.Internals.configuration.useVisitorCodeInLocalStorage)this.createLocalData("kameleoonVisitorCode",e,Utils.MAX_STORAGE_DAYS,null,"LS");if(t)this.createLocalData("kameleoonVisitorCode",e,Utils.MAX_STORAGE_DAYS,null,"COOKIE")};this.seededRandom=(e,t)=>{let n;if(t){n=this.computeStringSha256(e);return parseInt(n,16)/Math.pow(2,256)}n=this.computeStringHash(e);n=(9301*Math.abs(n)+49297)%233280;return n/233280};this.treatEqSelector=(e,t)=>{if(void 0===e)return null;let n=e.split(/\:eq\([0-9]+\)/g);let a=e.match(/(?!\:eq\()[0-9]+/g)||[];let o=null==t?document:t;for(let t=0;t<n.length;++t){n[t]=n[t].trim();if(">"===n[t].charAt(0))n[t]=n[t].substring(1,e.length).trim();if(null==o||""==n[t].trim())break;if(t>a.length-1)o=o.querySelectorAll(n[t]);else o=o.querySelectorAll(n[t])[a[t]]}if(null==o)return[];if(void 0==o.length)o=[o];let r=Kameleoon.Utils.querySelectorAll(e.replace(/\:eq\([0-9]+\)/g,""));let l=[];for(let e=0;e<r.length;++e)for(let t=0;t<o.length;++t)if(r[e]===o[t]){l.push(o[t]);break}return l};this.Logger=new Logger;this.bowser=window.kbowser||window.bowser}addEventListener(e,t,n,a,o){let r;if(e==window)r="window";else if(e==document)r="document";else{r=this.obtainRandomString(4);e.setAttribute(`kameleoonListener-${r}`,!0)}let l=n;if(o)e.addEventListener(t,l,a);else{l=function(e){Kameleoon.Utils.runProtectedFunction((function(){n(e)}))};e.addEventListener(t,l,a)}Kameleoon.Internals.runtime.eventListeners.push({elementKey:r,eventType:t,actionFunction:l,useCapture:a})}addPostMessageCallback(e){let t=Math.random().toString();Kameleoon.Internals.runtime.postMessageCallbacks[t]=e;return t}addCSSStyleSheet(e,t,n){if(!e)return;let a=n?n:document;let o="kameleoonStyleSheet"+(t?"-"+t.id:"");let r=n?n.getElementById(o):null;let l="";if(r){l=r.textContent;r.parentNode.removeChild(r)}let i=a.createElement("style");i.className="KameleoonStyleSheet";i.setAttribute("id",o);i.setAttribute("rel","stylesheet");i.setAttribute("type","text/css");i.setAttribute("media","screen");let s=l+e;if(i.styleSheet)i.styleSheet.cssText=s;else i.appendChild(document.createTextNode(s));if(n)a.getElementsByTagName("head")[0].appendChild(i,a.getElementsByTagName("head")[0].firstChild);else Kameleoon.Internals.runtime.headNode.appendChild(i);if(t)t.loadedCSSStyleSheet=i}addCallbackToObserver(e){KMutationObserver.setMutationObserverSPA();Kameleoon.Internals.runtime.listenSpaCallbacks.push(e)}applyVariation(e){new Variation(e).process()}clearInterval(e){delete Kameleoon.Internals.runtime.intervalIds[e];window.clearInterval(e)}clearTimeout(e){delete Kameleoon.Internals.runtime.timeoutIds[e];window.clearTimeout(e)}clone(e){return JSON.parse(JSON.stringify(e))}computeCurrentPageCleanAbsoluteURL(){if(null==Kameleoon.Internals.runtime.currentPageCleanAbsoluteURL){Kameleoon.Internals.runtime.currentPageCleanAbsoluteURL=this.computeURLNoKameleoonParameters(this.computeCurrentPageAbsoluteURLNoProxyMode());try{Kameleoon.Internals.runtime.currentPageCleanAbsoluteURL=decodeURIComponent(Kameleoon.Internals.runtime.currentPageCleanAbsoluteURL)}catch(e){}}return Kameleoon.Internals.runtime.currentPageCleanAbsoluteURL}computeStringHash(e,t){e=t?this.computeStringSha256(e):e;let n=0;for(let t=0;t<e.length;++t){n=(n<<5)-n+e.charCodeAt(t);n&=n}return n}createLocalData(e,t,n,a,o,r,l,i){const s="COOKIE"!=o;const m=(new Date).getTime();const u=m+24*n*60*60*1e3;if(!i&&!Kameleoon.Internals.runtime.Consent.hasGlobalConsent()){let i=s?"LS":"COOKIE";if(null==Kameleoon.Internals.runtime.localDataMap)Kameleoon.Internals.runtime.localDataMap={};if(null==Kameleoon.Internals.runtime.localDataMap[i])Kameleoon.Internals.runtime.localDataMap[i]={};Kameleoon.Internals.runtime.localDataMap[i][e]={name:e,value:t,days:n,domain:a,forceLocalAccess:o,jsonFormat:r,creationTime:m};if(s)l&&l();return}if(s){const n={value:Utils.LOCAL_STORAGE_OBFUSCATED_KEYS[e]&&this.obfuscateString(JSON.stringify(t))||t,expirationDate:u};if(Kameleoon.Internals.runtime.iframeLocalStorage)this.postMessageToExternalIframe("set",e,n,l);else{try{localStorage.setItem(e,JSON.stringify(n))}catch(e){}l&&l()}}else{let o="";let l=r?JSON.stringify(t):t;if(n)o="; expires="+new Date(u).toUTCString();if("CURRENT_HOST"!=a){a=a||Kameleoon.Internals.configuration.customCookieDomainName||this.obtainCurrentRootDomain();o+="; domain="+a}let i="";document.cookie=e+"="+l+o+"; path=/; SameSite=Lax"+i}}eraseLocalData(e,t,n){let a="COOKIE"!=n;let o=Kameleoon.Internals.runtime.localDataMap;let r=a?"LS":"COOKIE";if(null!=o&&null!=o[r]&&null!=o[r][e])delete o[r][e];if(a)if(Kameleoon.Internals.runtime.iframeLocalStorage)this.postMessageToExternalIframe("remove",e,null,null);else localStorage.removeItem(e);else this.createLocalData(e,"",-1,t,"COOKIE",!1,null,!0)}secureSessionStorage(e,t,n){try{return window.sessionStorage[e](t,n)}catch(e){return null}}flatten(...e){let t=[];for(let e=0;e<arguments.length;e++)if(arguments[e]instanceof Array)t.push.apply(t,this.flatten.apply(this,arguments[e]));else t.push(arguments[e]);return t}obfuscateString(e){let t="";for(let n=0,a=e.length;n<a;n+=1){let a=e[n];if(""==a)a="'";t+=String.fromCharCode(a.charCodeAt(0)+16)}return t}parseParameters(){let e={};let t=window.location.hash.substring(1).replace(/\?/g,"&");let n=window.location.search.substring(1);if(n||t){let a=(n?n.split("&"):[]).concat(t?t.split("&"):[]);a.forEach((t=>{let n=t.split("=");try{e[decodeURIComponent(n[0])]=n[1]?decodeURIComponent(n[1]):null}catch(t){e[unescape(n[0])]=n[1]?unescape(n[1]):null}}))}return e}performBeaconServerCall(e,t,n,a){let o=new XMLHttpRequest;o.open("GET",e,!0);if(t)o.onreadystatechange=function(e){t.bind(o)(e.target)};if(n){o.onerror=function(e){n.bind(o)(e.target)};o.ontimeout=function(e){n.bind(o)(e.target)}}o.timeout=a||15*60*1e3;o.send()}postMessageToExternalIframe(e,t,n,a){const o=JSON.stringify({type:e,key:t??void 0,data:n??void 0,callbackId:this.addPostMessageCallback(a)});if(!Kameleoon.Internals.runtime.externalIframe||!Kameleoon.Internals.runtime.externalIframe.contentWindow){if(window.kameleoonIframeURL){let e=document.createElement("iframe");e.src=window.kameleoonIframeURL;e.id="kameleoonExternalIframe";e.style.cssFloat="left !important";e.style.height="0px !important";e.style.opacity="0.0 !important";e.style.width="0px !important";e.onload=()=>{Kameleoon.Internals.runtime.externalIframe=e;Kameleoon.Internals.runtime.externalIframe.contentWindow.postMessage("kameleoon"+o,"*")};document.head.appendChild(e)}}else Kameleoon.Internals.runtime.externalIframe.contentWindow.postMessage("kameleoon"+o,"*")}processMessageEvent(e){if("string"!==typeof e.data)return;if("obtainTagCommanderVariableNames"==e.data){let t=[];if(window.tc_vars)for(let e in window.tc_vars)t.push(e);if(!(e.source instanceof MessagePort)&&!(e.source instanceof ServiceWorker))e.source.postMessage("tagCommanderVariableNames"+JSON.stringify(t),e.origin);return}if(0==e.data.indexOf("checkKameleoonScriptPresent")){if("https://back-office."+Kameleoon.Internals.configuration.DOMAIN==e.origin){let t="";let n=e.data.replace("checkKameleoonScriptPresent","");this.runProtectedScript(n);if(!(e.source instanceof MessagePort)&&!(e.source instanceof ServiceWorker))e.source.postMessage(t,e.origin)}return}if(Kameleoon.Internals.runtime.iframeLocalStorage&&Kameleoon.Internals.runtime.postMessageOrigin==e.origin)try{let t=JSON.parse(e.data);if(t.kameleoonMessage){if(t.callbackId){let e=Kameleoon.Internals.runtime.postMessageCallbacks[t.callbackId];delete Kameleoon.Internals.runtime.postMessageCallbacks[t.callbackId];e&&e(t.data)}if(null!=t.type)this.processStorageData(t)}}catch(e){}}readLocalData(e,t,n){let a="COOKIE"!=t;let o=(new Date).getTime();try{if(!Kameleoon.Internals.runtime.Consent.hasGlobalConsent()){let t=Kameleoon.Internals.runtime.localDataMap;let n=a?"LS":"COOKIE";if(null!=t&&null!=t[n]&&null!=t[n][e]){let a=t[n][e];if(o-24*a.days*60*60*1e3>=a.creationTime)delete t[n][e];else return a.value}}if(a){let t=localStorage.getItem(e);if(!t)return null;t=JSON.parse(t);if(Utils.LOCAL_STORAGE_OBFUSCATED_KEYS[e])t.value=JSON.parse(this.unobfuscateString(t.value));if(o>(t.date||t.expirationDate)){localStorage.removeItem(e);return null}return t.value}else{let t=null;let a=document.cookie.split(";");for(let o=0,r=a.length;o<r;++o){let r=a[o];let l=r.indexOf("=");if(r.substring(0,l).trim()==e){let e=r.substring(l+1);t=n&&JSON.parse(e)||e;break}}return t}}catch(e){}return null}removeBlockingStyleSheet(){let e=document.getElementById("kameleoonPageLoading");if(e&&e.parentNode)e.parentNode.removeChild(e)}removeCSSStyleSheet(e){if(e.loadedCSSStyleSheet){const t="kameleoonStyleSheet-";const n=e.loadedCSSStyleSheet.id.replace(t,"");if(-1==n.indexOf(",")){Kameleoon.Internals.runtime.headNode.removeChild(e.loadedCSSStyleSheet);e.loadedCSSStyleSheet=null}else e.loadedCSSStyleSheet.id=t+n.replace(new RegExp(e.id+",?"),"")}}sendKameleoonCustomEvent(e,t,n){try{let a=document.createEvent("CustomEvent");t.time=(new Date).getTime();a.initCustomEvent("Kameleoon::"+e,!1,!1,t);window.dispatchEvent(a);if(sessionStorage.getItem("kameleoonLightExtension")||Kameleoon.Internals.runtime.parameters.kameleoonLightExtension){t.type=n?n:t.type;window.kameleoonEvents=window.kameleoonEvents||[];window.kameleoonEvents.push(t)}}catch(e){}}setInterval(e,t,n,a){let o=window.setInterval((function(){Kameleoon.Utils.runProtectedFunction((function(){e()}),a)}),t);Kameleoon.Internals.runtime.intervalIds[o]=!0;if(n)e();return o}setTimeout(e,t,n){let a=window.setTimeout((function(){Kameleoon.Utils.runProtectedFunction((function(){e()}),n)}),t);Kameleoon.Internals.runtime.timeoutIds[a]=!0;return a}testEmptyMap(e){return 0==Object.keys(e).length}parseObjectToUrlParams(e){return Object.entries(e).map((e=>e[0]+"="+e[1])).join("&")}treatContainsSelector(e){let t={},n;function a(e,t){let n=!1;if(t.textContent&&-1!==t.textContent.indexOf(e))n=!0;return n}n=e.match(/:contains\(['"]([\s\S]+)['"]\)/);t.containText=n[1];t.newSelector=e.replace(n[0],"");if(""===t.newSelector)t.newSelector="*";t.check=a;return t}unobfuscateString(e){let t="";for(let n=0,a=e.length;n<a;n+=1)t+=String.fromCharCode(e[n].charCodeAt(0)-16);return t}}Utils.LOCAL_STORAGE_OBFUSCATED_KEYS={kameleoonData:!0,kameleoonSimulationVisitorData:!0};Utils.MAX_STORAGE_DAYS=365;class Browser{constructor(e){this.browsers=e}obtain(){let e=Kameleoon.Internals.runtime.Device.browser;if("Internet Explorer"==e||"Microsoft Edge"==e)e="Explorer";return e}obtainIndex(){let e=this.obtain()||"";let r=e.toUpperCase();for(let e in this.browsers)if(this.browsers[e].name.toUpperCase()==r)return parseInt(e);return null}}class CustomData{constructor(e){this.inheritVisitorScopeAndTrackVisitorDataFromServer=()=>{if(Kameleoon.Internals.runtime.Visitor.visits.length>1){const e=Kameleoon.Internals.runtime.Visitor.currentVisit.customData;const t=Kameleoon.Internals.runtime.Visitor.visits[Kameleoon.Internals.runtime.Visitor.visits.length-2].customData;for(const a in this.customData){const i=this.customData[a].scope;if("VISITOR"==i&&null==e[a]){const e=t[a];if(null!=e)this.register(parseInt(a),{value:e,overwrite:!0},!0)}}Kameleoon.Internals.runtime.Visitor.saveToStoredData()}};this.register=(e,t,a)=>{const i=this.customData[e];if(i){let n={};const s=t.value;if(null==s)return;const r=this.getOverwriteValue(i,t.overwrite);if(a)n=s;else{const e=Array.isArray(s)?s:[s];for(const t of e)if(null!=t&&(t.toString().length<=VisitEvent_CustomData.MAX_SUM_CUSTOM_DATA_VALUES_LENGTHES_IN_A_REQUEST||i.localOnly))n[t]=1}if(r||!Kameleoon.Utils.testEmptyMap(n)){Kameleoon.Utils.sendKameleoonCustomEvent.call(window,"CustomDataSet",{name:i.name,value:s});Kameleoon.Utils.sendKameleoonCustomEvent("Internals",{type:"customData/set",name:i.name,value:s});Kameleoon.Gatherer.track(VisitEvent_CustomData,{index:e,customData:i,overwrite:r,valueToAdd:n,value:s})}}};this.customDataVisitsRequest=e=>{};this.run=()=>{Kameleoon.Internals.runtime.Visitor.currentVisit.clearCustomDataPage();Kameleoon.Utils.clearInterval(this.intervalId);if(Kameleoon.Internals.runtime.Gatherer.startOfVisit)this.inheritVisitorScopeAndTrackVisitorDataFromServer();this.firstTimeCheck=(new Date).getTime();this.intervalId=Kameleoon.Utils.setInterval(this.obtain.bind(this),100,!0);Kameleoon.Utils.setTimeout((()=>{Kameleoon.Utils.clearInterval(this.intervalId)}),3e3);Kameleoon.Utils.setInterval(this.obtain.bind(this),3e3,!1)};this.customData=e}parseNumberValue(e,t){switch(e){case-2:return"true"===t;case-1:return t;default:return parseFloat(t)}}getOverwriteValue(e,t){if(null!=t)return t;return"COUNT_LIST"===e.type||"LIST"===e.type||"PAGE"===e.scope?!1:!0}obtainParsedValue(e,t){const a=this.customData[e];switch(a.type){case"COUNT_LIST":const e=[];for(const a in t)e.push({value:a,count:t[a]});return e;case"LIST":const i=[];for(const e in t)i.push(e);return i;default:return this.parseNumberValue(a.format,Object.keys(t)[0])}}obtain(){for(const e in this.customData)if(!this.customData[e].treated){const t=parseInt(e);const a=this.obtainValueMap(t,this.customData[e]);if(a)this.register(t,a)}}obtainValueFromPath(e,t){return e.match(/[^'\]\[\.\"]+/gi).reduce(((e,t)=>e&&e[t]),t)}obtainValueMap(e,t){let a=null;if(null!=t&&!t.disabled){const i=this.getOverwriteValue(t,null);switch(t.method){case"GTM":if(window.dataLayer&&t.variableName)for(let e=window.dataLayer.length-1;e>=0;--e){const n=this.obtainValueFromPath(t.variableName,window.dataLayer[e]);if(null!=n){a={value:n,overwrite:i};break}}break;case"TC":if(window.tc_vars&&t.variableName){let e=this.obtainValueFromPath(t.variableName,window.tc_vars);if("string"==typeof e&&0==e.length)e=null;if(null!=e){a={value:e,overwrite:i};break}}break;case"ADOBE_ANALYTICS":if(window._satellite&&window._satellite.getVar&&t.variableName){const e=window._satellite.getVar(t.variableName);if(null!=e){a={value:e,overwrite:i};break}}break;case"CUSTOM_CODE":a=Kameleoon.Utils.runProtectedScript(t.customEvalCode,"kameleoonCustomDataScript-"+e+".js");break;default:break}}if(null!=a){t.treated=!0;const i=Kameleoon.Internals.runtime.Visitor.currentVisit.customData[e];const n=a.value;if(null!=n){const e=t.type;if("LIST"==e||"COUNT_LIST"==e||null==i||Object.keys(i)[0]!=n.toString()||Kameleoon.Internals.configuration.enableHistoryReconciliation&&t.mappingIdentifier&&null==Kameleoon.Internals.runtime.storedData.obtainField("Gatherer","visitsRequestSuccess"))return a}}return null}}class KeyPage{constructor(e){this.keyPages=e}obtainIndexes(){const e=[];if(0==e.length)e.push(null);return e}}class Language{constructor(){this.DEFAULT_LOCALE_LANGUAGE_TAG="en"}obtainLocaleTag(){return navigator&&navigator.language||this.DEFAULT_LOCALE_LANGUAGE_TAG}}class OperatingSystem{constructor(e){this.oss=e}obtainIndex(){const e=this.obtain().toUpperCase();for(const s in this.oss)if(this.oss[s].name.toUpperCase()==e)return parseInt(s);return null}obtain(){const e=(Kameleoon.Utils.bowser.parsedResult||Kameleoon.Utils.bowser.parse(navigator.userAgent)).os.name;switch(e){case"Windows Phone":case"iOS":case"Android":case"Linux":case"Windows":return e;case"macOS":return"Tablet"==Kameleoon.Internals.runtime.Device.type?"iOS":"Mac";default:return"Other"}}}class Referrer{constructor(e){this.referrers=e;this.referrer=Kameleoon.Internals.runtime.prevSpaPage||document.referrer;const t="kameleoonReferrer";const r=Kameleoon.Utils.readLocalData(t,"COOKIE");if(r){this.referrer=r;Kameleoon.Utils.eraseLocalData(t,null,"COOKIE")}}obtainCorrected(e){switch(this.obtainType(e)){case 0:case 1:return null;default:return this.obtain()}}update(e){this.isUpdated=!0;this.referrer=e}obtain(){return this.referrer}obtainDetectionMatches(e){let t=this.obtainDetectionPartMatches(e.method,e.parameters);if(e.and)t=t&&this.obtainDetectionPartMatches(e.andMethod,e.andParameters);return t}obtainDetectionPartMatches(e,t){try{switch(e){case 0:return new RegExp(t).test(this.obtain());case 1:const e=new RegExp(t);return e.test(Kameleoon.Utils.computeCurrentPageCleanAbsoluteURL())||e.test(Kameleoon.Utils.computeCurrentPageCleanRelativeURL());default:return!0===Kameleoon.Utils.runProtectedScript(t)}}catch(e){console.log(e);return!1}}obtainIndexes(e){switch(this.obtainType(e)){case 0:case 1:return[0];default:let e=[];let t=Number.NEGATIVE_INFINITY;for(const r in Kameleoon.Internals.runtime.Gatherer.configuration.referrers){const n=Kameleoon.Internals.runtime.Gatherer.configuration.referrers[r];if(this.obtainMatches(n)){let a=n.priority;if(null==a)a=Number.NEGATIVE_INFINITY;if(a>=t){if(a>t){e=[];t=a}e.push(parseInt(r)+1)}}}if(0==e.length)e.push(null);return e}}obtainIsIgnored(e){return!1}obtainMatches(e){const t=e.detections;for(let e=0;e<t.length;e++)if(this.obtainDetectionMatches(t[e]))return!0;return!1}obtainType(e){if(this.obtainIsIgnored(e))return 0;if(Kameleoon.Internals.runtime.storedData.obtainField("Gatherer","startsOfVisitForCurrentPage")>1)return 1;return 3}}class StoredData{constructor(e){this.Gatherer={};this.Runtime={};this.Vars=Kameleoon.Utils.readLocalData("kameleoonVars","LS")||{};this.Visitor={};this.canSave=!1;if(e){let a="";if(e[Kameleoon.Internals.runtime.dataKeyName]){a=e[Kameleoon.Internals.runtime.dataKeyName];if(e.Kameleoon)Kameleoon.Utils.eraseLocalData("kameleoonData",null,"LS")}else if(e["kameleoonData"])a=e["kameleoonData"];if(Kameleoon.Internals.runtime.simulationMode){const t=e["kameleoonDataSimulation"]||e["kameleoonSimulationVisitorData"];if(t)a=t}let t=Kameleoon.Utils.unobfuscateString(a);let i=t&&JSON.parse(t)||{};this.Gatherer=i.Gatherer||{};this.Runtime=i.Runtime||{};this.Vars=i.Vars||e["kameleoonVars"]||{};this.Visitor=i.Visitor||{}}else{let e=Kameleoon.Utils.readLocalData("kameleoonData","LS");if(Kameleoon.Internals.configuration.useMultipleSiteCodes){let a=Kameleoon.Utils.readLocalData(Kameleoon.Internals.runtime.dataKeyName,"LS",!0);if(a)e=a;Kameleoon.Utils.eraseLocalData("kameleoonData",null,"LS")}if(Kameleoon.Internals.runtime.simulationMode){const a=Kameleoon.Utils.readLocalData("kameleoonDataSimulation","LS",!0);const t=Kameleoon.Utils.readLocalData("kameleoonSimulationVisitorData","LS",!0);if(a||t)e=a||t}if(e){this.Gatherer=e.Gatherer||{};this.Runtime=e.Runtime||{};this.Vars=e.Vars||this.Vars||{};this.Visitor=e.Visitor||{}}}Kameleoon.Utils.eraseLocalData("kameleoonVars",null,"LS");for(let e in this.Vars)if(Kameleoon.Internals.runtime.pageStartTime>this.Vars[e].date)delete this.Vars[e];Kameleoon.Utils.setInterval((()=>{if(this.canSave){this.save(2);this.canSave=!1}}),1e3);Kameleoon.Utils.addEventListener(window,"pagehide",(()=>{if(window.self!==window.top){let e=Kameleoon.Utils.readLocalData(Kameleoon.Internals.runtime.simulationMode?"kameleoonSimulationVisitorData":Kameleoon.Internals.runtime.dataKeyName,"LS");if(e?.Visitor&&this.Visitor?.totalVisits<e.Visitor.totalVisits)this.update(e)}this.save(2)}))}obtainField(e,a,t){return this[e][a]||t||null}resetForStartOfVisit(){this.Runtime={}}saveField(e,a,t){this[e][a]=t;this.save(0)}save(e){const a=2===e||Kameleoon.Internals.runtime.setupAfterLocalDataRetrieval&&1===e;if(a)Kameleoon.Utils.createLocalData(Kameleoon.Internals.runtime.simulationMode?"kameleoonSimulationVisitorData":Kameleoon.Internals.runtime.dataKeyName,this,Kameleoon.Internals.runtime.simulationMode?1/24:Utils.MAX_STORAGE_DAYS,null,"LS",!0);else this.canSave=!0}update(e){this.Gatherer=e.Gatherer||this.Gatherer;this.Runtime=e.Runtime||this.Runtime;this.Vars=e.Vars||this.Vars;this.Visitor=e.Visitor||this.Visitor}}class TimeZone{constructor(){}obtainId(){let t;try{t="undefined"!=typeof Intl&&Intl.DateTimeFormat().resolvedOptions?Intl.DateTimeFormat().resolvedOptions().timeZone:null}catch(e){t=null}return t}}class VisitEvent{constructor(e){this.visitEvent=e}track(e){const t=()=>{const t=new this.visitEvent(e);Kameleoon.Internals.runtime.Visitor.saveToStoredData();if((!e||!e.notTrack&&!t.notTrack)&&Kameleoon.Internals.configuration.track)Kameleoon.Internals.runtime.RequestManager.addRequest(t);Kameleoon.Internals.runtime.storedData.save(this.visitEvent.save)};if(!Kameleoon.Internals.runtime.Visitor.currentVisit.isVisitFinished())t();else{Kameleoon.Internals.runtime.Visitor=new Visitor;Kameleoon.Gatherer.track(VisitEvent_Page);Kameleoon.Gatherer.track(VisitEvent_StaticData);Kameleoon.Gatherer.CustomData.run();Kameleoon.Internals.runtime.gathererRun=!0;t()}}}class VisitEvent_Main{constructor(t){this.obtainRequestData=()=>{let t="eventType="+this.eventType;for(const e in this){if("function"==typeof this[e]||VisitEvent_Main.NOT_TRACK_FIELD.has(e))continue;t+=`&${e}=${this.addValueParameter(this[e])}`}return t};this.addValueParameter=t=>{const e=t=>{try{return encodeURIComponent(t)}catch(e){return t}};if("object"==typeof t)return e(JSON.stringify(t));else if("string"==typeof t)return e(t);return t};this.time=(new Date).getTime();this.nonce=Kameleoon.Utils.obtainRandomString(VisitEvent_Main.NONCE_LENGTH,Analyst.HEXADECIMAL_ALPHABET);Kameleoon.Internals.runtime.Visitor.currentVisit.addEvent(this.time)}}VisitEvent_Main.NONCE_LENGTH=16;VisitEvent_Main.NOT_TRACK_FIELD=new Set(["eventType","time","notTrack","type","save"]);class VisitEvent_Activity extends VisitEvent_Main{constructor(){super();this.eventType="activity";this.clicks=Kameleoon.Internals.runtime.Gatherer.clicks;Kameleoon.Internals.runtime.Visitor.currentVisit.addClicks(this.clicks);Kameleoon.Internals.runtime.Gatherer.active=!1;Kameleoon.Internals.runtime.Gatherer.clicks=0}static initialize(){let e=()=>{Kameleoon.Internals.runtime.Gatherer.active=!0};let t=()=>{e();Kameleoon.Internals.runtime.Gatherer.clicks++};Kameleoon.Utils.addEventListener(document,"mousemove",e,!1);Kameleoon.Utils.addEventListener(document,"scroll",e,!1);Kameleoon.Utils.addEventListener(document,"click",t,!1);Kameleoon.Utils.setInterval((()=>{if(Kameleoon.Internals.runtime.Gatherer.active)Kameleoon.Gatherer.track(this)}),this.ACTIVITY_TRACKING_INTERVAL,!0)}}VisitEvent_Activity.ACTIVITY_TRACKING_INTERVAL=15*1e3;VisitEvent_Activity.save=0;class VisitEvent_AdBlocker extends VisitEvent_Main{constructor(){super();this.eventType="adBlocker";Kameleoon.Internals.runtime.Visitor.currentVisit.addAdBlocker()}}VisitEvent_AdBlocker.save=0;class VisitEvent_Experiment extends VisitEvent_Main{constructor(i){super();this.eventType="experiment";this.id=i.id;this.variationId=i.variationId;this.notTrack=i.notTrack;if(null==this.variationId)this.notTrack=!0;Kameleoon.Internals.runtime.Visitor.currentVisit.addExperiment(this.time,this.id,this.variationId)}}VisitEvent_Experiment.save=1;class VisitEvent_Conversions extends VisitEvent_Main{constructor(e){super();this.eventType="conversion";this.goalId=e.goalId;this.negative=!0===e.negative;let t,i=!1;let n=Kameleoon.Internals.runtime.storedData.obtainField("Gatherer","revenuesByGoalId",{});let s=n[this.goalId];if(this.negative)if(s&&s.length>0){t=s.splice(-1)[0];if(0==s.length)delete n[this.goalId]}else i=!0;else{t=e.revenue;if(isNaN(t))t=0;if(!s)s=[];s.push(t);n[this.goalId]=s.splice(-10)}this.revenue=t;if(!i){Kameleoon.Internals.runtime.storedData.saveField("Gatherer","revenuesByGoalId",n);Kameleoon.Internals.runtime.Visitor.currentVisit.addConversions(this.goalId,1,this.revenue,this.negative);}if(e.metadata){const t={};for(const i in e.metadata){const n=e.metadata[i];const s=Array.isArray(n)?n:[n];t[i]=s.map((e=>e.toString()))}this.metadata=t}}}VisitEvent_Conversions.save=0;class VisitEvent_CustomData extends VisitEvent_Main{constructor(t){super();this.eventType="customData";this.index=t.index;this.overwrite=t.overwrite||!1;this.notTrack=t.value.length>VisitEvent_CustomData.MAX_SUM_CUSTOM_DATA_VALUES_LENGTHES_IN_A_REQUEST||t.customData.localOnly;this.valuesCountMap=t.valueToAdd;this.mappingIdentifier=1==t.customData.mappingIdentifier?"true":"false";Kameleoon.Internals.runtime.Visitor.currentVisit.addCustomData(this.index,this.valuesCountMap,this.overwrite)}}VisitEvent_CustomData.MAX_SUM_CUSTOM_DATA_VALUES_LENGTHES_IN_A_REQUEST=1e3;VisitEvent_CustomData.save=1;class VisitEvent_Geolocation extends VisitEvent_Main{constructor({city:t,country:i,latitude:o,longitude:e,postalCode:n,region:s}){super();this.eventType="geolocation";this.city=t;this.country=i;this.latitude=o;this.longitude=e;this.postalCode=n;this.region=s;Kameleoon.Internals.runtime.Visitor.currentVisit.addGeolocation({city:t,country:i,latitude:o,longitude:e,postalCode:n,region:s})}}VisitEvent_Geolocation.save=0;class VisitEvent_Page extends VisitEvent_Main{constructor(){super();this.eventType="page";const e=Kameleoon.Utils.computeCurrentPageCleanAbsoluteURL();const r=document.title;const t=Kameleoon.Utils.computeCurrentPageCanonicalURL();const i=Kameleoon.Gatherer.Referrer.obtainCorrected(Kameleoon.Internals.runtime.Gatherer.startOfVisit);this.href=e&&e.slice(0,Kameleoon.Gatherer.MAX_HREF_LENGTH_IN_A_REQUEST);this.title=r.slice(0,Kameleoon.Gatherer.MAX_PAGE_TITLE_LENGTH_IN_A_REQUEST);this.keyPagesIndices=Kameleoon.Gatherer.KeyPage.obtainIndexes();this.referrersIndices=Kameleoon.Gatherer.Referrer.obtainIndexes(Kameleoon.Internals.runtime.Gatherer.startOfVisit);if(t)this.canonicalHref=t;if(null!=i)this.referrerHref=i;Kameleoon.Internals.runtime.Visitor.currentVisit.addPage(this.time,e,this.keyPagesIndices,this.referrersIndices)}}VisitEvent_Page.save=2;class VisitEvent_Product extends VisitEvent_Main{constructor(t){super();this.eventType="product";this.ean=t.ean;Kameleoon.Internals.runtime.Visitor.currentVisit.addProduct(this.ean)}}VisitEvent_Product.save=0;class VisitEvent_StaticData extends VisitEvent_Main{constructor(){super();this.eventType="staticData";this.obtainInfluences=(e,i)=>{let t={experiments:{},personalizations:{}};let n=e=>{for(let i in e)if(e[i][1]<0||"-1"==i||null==e[i][0]||"null"==e[i][0])delete e[i];return e};e.forEach((({ExperimentActivations:e,PersonalizationActivations:n})=>{for(let n in e){let s=e[n];if(s.influence){let e=s.influence-(i-s.times.slice(-1)[0]);t.experiments[n]=[parseInt(s.associatedVariationID),e]}}for(let e in n){let s=n[e];if(s.influence){let n=s.influence-(i-s.times.slice(-1)[0]);t.personalizations[e]=[1,n]}}}));this.experimentInfluences=n(t.experiments);this.personalizationInfluences=n(t.personalizations)};const{Visitor:e,Device:i}=Kameleoon.Internals.runtime;const{Browser:t,OperatingSystem:n,TimeZone:s,Language:o}=Kameleoon.Gatherer;const a=s.obtainId();this.timeSincePreviousVisit=e.obtainTimeSincePreviousVisit();this.browser=t.obtain();this.browserIndex=t.obtainIndex();this.browserVersion=i.browserVersion;this.os=n.obtain();this.osIndex=n.obtainIndex();this.windowWidth=i.windowWidth;this.windowHeight=i.windowHeight;this.screenWidth=i.screenWidth;this.screenHeight=i.screenHeight;this.localeLanguageTag=o.obtainLocaleTag();this.deviceType=i.type.toLocaleUpperCase();this.visitNumber=e.currentVisit.visitNumber;if(null!=a)this.timeZoneId=a;this.obtainInfluences(e.visits,e.currentVisit.startDate)}}VisitEvent_StaticData.save=0;class VisitEvent_TargetingSegments extends VisitEvent_Main{constructor(t){super();this.eventType="targetingSegment";this.id=t.id;Kameleoon.Internals.runtime.Visitor.currentVisit.addTargetingSegment(this.time,this.id)}}VisitEvent_TargetingSegments.save=0;class CommandQueue{constructor(e,s){this.executeCommand=e=>{try{if(e.command)e=e.command;if("function"===typeof e)e();else{const s=e[0];const o=s.split(".");let t;let m;if("Kameleoon"!=o[0]){t=Kameleoon.API;m=Kameleoon.API[o[0]]}else m=Kameleoon.API[o[2]];o.forEach((e=>{if(null==t)t=window[e];else t=t[e]}));t.apply(m,Array.prototype.slice.call(e,1))}}catch(e){console.log(e)}};const o="IMMEDIATE";this.commands=e&&e.forEach?e:[];this.commands.push=e=>{if(s==o)e.level==s?this.executeCommand(e):this.commands.unshift(e);else this.executeCommand(e)};const t=[];if(s==o)for(let e=this.commands.length-1;e>=0;e--){const s=this.commands[e];if(s.level===o){t.push(s);this.commands.splice(e,1)}}else{this.commands.forEach((e=>{t.push(e)}));this.commands.splice(0,this.commands.length)}t.forEach(this.executeCommand);return this.commands}}class Actions{constructor(){this.associateActionAndVariation=(e,i,n)=>{let t=!0;let o=!0;if(0===n)o=!1;else if(1===n)t=!1;if(null===i)e.trackingPerformed=!0;const a=Kameleoon.Internals.runtime.variations.filter((e=>e.id==i))[0];let r="Reference";if(e&&e.variations)e.variations.forEach((function(e,n){if(e.id&&e.name&&e.id==i)r=e.name}));const s=e.associatedVariation;if(e&&s&&i==s.id)r=s.name;if(e&&t)e.associatedVariation={id:i,name:r};if(e&&o&&!e.displayedVariation)e.associationMade=!1;if(a){if(e&&(Kameleoon.Internals.runtime.simulationMode&&-1==e.id||!e.associationMade)){if(t){e.associatedVariation=a;e.associationMade=!0}a.actionId=e.id;if(o)e.displayedVariation=new Variation(a)}}else{e.displayedVariation={id:i,name:r};}}}checkCapping(e,i,n,t,o){if(null!=t.expositionFrequencySameVisit&&Kameleoon.Internals.runtime.Visitor.obtainActionNumberActivations(i,n,null,o,!0,!1,!1,e)>=t.expositionFrequencySameVisit||null!=t.expositionFrequencySameVisitor&&null!=t.expositionFrequencySameVisitorDelaySeconds&&Kameleoon.Internals.runtime.Visitor.obtainActionNumberActivations(i,n,o-1e3*t.expositionFrequencySameVisitorDelaySeconds,o,!0,!0,!1,e)>=t.expositionFrequencySameVisitor||t.cappingPerVisitorNumberExpositions&&Kameleoon.Internals.runtime.Visitor.obtainActionNumberActivations(i,n,null,o,!0,!0,!1,e)>=t.expositionFrequencySameVisitorMax||t.cappingPerVisitorNumberExposedVisits&&Kameleoon.Internals.runtime.Visitor.obtainActionNumberActivations(i,n,null,null,!0,!0,!0,e)>=t.exposedVisitsSameVisitorMax||t.cappingPerVisitorConvertGoal&&Kameleoon.Internals.runtime.Visitor.obtainNumberConversions(t.cappingPerVisitorGoalId)>0||null!=t.expositionFrequencyDelaySecondsBetweenTwoExpositions&&Kameleoon.Internals.runtime.Visitor.obtainActionNumberActivations(i,n,o-1e3*t.expositionFrequencyDelaySecondsBetweenTwoExpositions,o,!0,!0,!1,e)>=1)return!1;return!0}checkActionConsent(e){if(e.experimentAction){if(!Kameleoon.Internals.runtime.Consent.AB_TESTING){if(null==Kameleoon.Internals.runtime.Consent.AB_TESTING){if("ALL"==Kameleoon.Internals.configuration.beforeAbtestConsent)return!0;if("PARTIALLY"==Kameleoon.Internals.configuration.beforeAbtestConsent&&e.technical)return!0}else if(e.technical&&"RUN"==Kameleoon.Internals.configuration.abtestConsentOptout)return!0;return!1}}else if(!Kameleoon.Internals.runtime.Consent.PERSONALIZATION){if(null==Kameleoon.Internals.runtime.Consent.PERSONALIZATION){if("ALL"==Kameleoon.Internals.configuration.beforePersonalizationConsent)return!0;if("PARTIALLY"==Kameleoon.Internals.configuration.beforePersonalizationConsent&&e.technical)return!0}else if(e.technical&&"RUN"==Kameleoon.Internals.configuration.personalizationConsentOptout)return!0;return!1}return!0}checkActionsTargeting(e){Kameleoon.Internals.runtime.Campaigns.obtainCampaignsList(1).forEach((e=>{e.previousExposition=e.exposition}));const i=[];for(let n=0,t=e.length;n<t;++n){const t=e[n];if(!this.checkActionConsent(t)||t.blocked||t.featureFlag||null===t.registeredVariationId)continue;if(null==t.numberTargetingCheckings)t.numberTargetingCheckings=0;if(Kameleoon.Targeting.checkIfTargetingMustBeComputed(t.targeting,t.rescheduleTargeting||0==t.numberTargetingCheckings,!t.experimentAction&&"CUMULATIVE_WEIGHT"==t.checkConditionsRule))i.push(t)}e=i;for(let i=0,n=e.length;i<n;++i){const n=e[i];if(!0===n.forceTargeting)n.targeting=!0;else{const e=!n.experimentAction&&"CUMULATIVE_WEIGHT"==n.personalizationCheckConditionsRule;const i=Kameleoon.Targeting.checkTree(n,n.targetingSegment?n.targetingSegment.tree:null,e,n.targetingSegment||null);const t=Kameleoon.Targeting.checkTree(n,n.targetingTrigger?n.targetingTrigger.tree:null,e,n.targetingTrigger||null);if(e){const e=n.cumulativeWeightOfConditions||0;switch(n.microtargetingMatchType){case"GREATER":n.targeting=i.weight>e&&(!n.targetingTrigger||t.weight>e);break;case"EQUAL":n.targeting=i.weight==e&&(!n.targetingTrigger||t.weight==e);break;case"LOWER":n.targeting=i.weight<n.cumulativeWeightOfConditions&&(!n.targetingTrigger||t.weight<n.cumulativeWeightOfConditions);break}}else if(!1===i.targeting||!1===t.targeting)n.targeting=!1;else if(!0===i.targeting&&!0===t.targeting)n.targeting=!0;else n.targeting=void 0;const o=n.targetingSegment&&!0===i.rescheduleTargeting||n.targetingTrigger&&!0===t.rescheduleTargeting;n.rescheduleTargeting=!1!==n.targeting&&o?!0:!1;n.numberTargetingCheckings++}}const n=[];const s=[];for(let i=0,n=e.length;i<n;++i){const n=e[i];if(!1===n.targeting||!n.experimentAction&&!0===n.targeting&&!1===n.exposition){this.associateActionAndVariation(n,0,1);Kameleoon.Utils.removeCSSStyleSheet(n)}if(Kameleoon.Targeting.checkIfTargetingMustBeComputed(n.targeting,n.rescheduleTargeting,!n.experimentAction&&"CUMULATIVE_WEIGHT"==n.personalizationCheckConditionsRule))s.push(n)}if(s.length>0){const e=Kameleoon.Utils.setTimeout((()=>{Kameleoon.Utils.clearTimeout(e);this.process(s)}),Kameleoon.Internals.runtime.PAGE_LOADING_POLL_DELAY)}if(e.length>0&&Kameleoon.Internals.runtime.targetingsEvent)Kameleoon.Internals.runtime.targetingsEvent.emit(e)}performActionsTracking(e){const i=[];for(let n=0,t=e.length;n<t;++n){const t=e[n];if(t.trackingPerformed||!t.associatedVariation||null==t.associatedVariation.id)continue;i.push(t)}e=i;for(let i=0,n=e.length;i<n;++i){const n=e[i];const t=n.associatedVariation;let o=n.collectingDataDisabled?!1:!0;if(n.experimentAction&&0==n.deviation[t.id])o=!1;if(n.mentalistEnabled)t.name+=" (Predicteo)";if(n.experimentAction)Kameleoon.Gatherer.track(VisitEvent_Experiment,{id:n.id,variationId:t.id,notTrack:!(n.kameleoonTracking&&o)});else Kameleoon.Gatherer.track(VisitEvent_Personalization,{id:n.id,variationId:0==t.id?0:1,notTrack:!(n.kameleoonTracking&&o),originalVariationId:t.id,unexpositionCause:n.notExposedReason});if(o&&(n.experimentAction||n.exposition||!n.exposition&&"PERSONALIZATION_EXCLUSION"==n.notExposedReason)){const e=Kameleoon.Internals.runtime.RequestManager;const i=e.addCallback.bind(e);if(n.glassboxTracking)i((()=>Kameleoon.Tracking.processGlassbox(n)));if(n.air360Tracking)i((()=>Kameleoon.Tracking.processAir360(n)));if(n.customIntegrations)i((()=>Kameleoon.Tracking.processCustomIntegration(n)));}n.trackingPerformed=!0}}performDeferredVariations(e,i,n){}process(e,i){const n=(new Date).getTime();this.checkActionsTargeting(e);const t=[];for(let o=0,a=e.length;o<a;++o){const a=e[o];if(a.treated||a.blocked)continue;if(!0===a.targeting){Kameleoon.Internals.runtime.Visitor.currentVisit.addActionTriggered(a.id,a.experimentAction);if(a.targetingSegmentId)Kameleoon.Utils.sendKameleoonCustomEvent.call(window,"SegmentTriggered",{segment:{id:a.targetingSegmentId,name:a.targetingSegment?a.targetingSegment.name:null}});if(a.targetingTriggerId)Kameleoon.Utils.sendKameleoonCustomEvent.call(window,"TriggerTriggered",{trigger:{id:a.targetingTriggerId,name:a.targetingTrigger?a.targetingTrigger.name:null}});if(a.experimentAction){const e=new APIAction(a,0);Kameleoon.Utils.sendKameleoonCustomEvent.call(window,"ExperimentTriggered",{experiment:e},"experiment/triggered");a.performVariationAssignment(!1);if(null!=a.associatedVariation){if(!this.checkCapping(!0,a.id,a.associatedVariation.id,a.associatedVariation,n)&&!a.forceTargeting)a.targeting=!1;if(null===a.associatedVariation.id)a.targeting=!1}}}if(!0===a.targeting){a.treated=!0;this.currentAction=a;if(a.displayedVariation){if(a.experimentAction)if(0!=a.displayedVariation.id&&"reference"!=a.displayedVariation.id||a.executeCodeForReference){if(a.cssCode&&!a.cssCodeEvaluated){a.cssCodeEvaluated=!0;Kameleoon.Utils.addCSSStyleSheet(a.cssCode,a,null)}if(a.javaScriptCode&&!a.javaScriptCodeEvaluated){a.javaScriptCodeEvaluated=!0;Kameleoon.Utils.runProtectedScript(a.javaScriptCode,"kameleoonActionJavaScriptCode-"+a.id+".js")}}if(!i&&a.displayedVariation.process)a.displayedVariation.process();if(a.targeting&&(a.experimentAction||a.exposition)){const e={};if(a.experimentAction)e.experiment=new APIAction(a,0);else e.personalization=new APIAction(a,1);Kameleoon.Utils.sendKameleoonCustomEvent.call(window,a.experimentAction?"ExperimentActivated":"PersonalizationActivated",e,"action/activated")}t.push(a)}}}this.performActionsTracking(t)}processAllActions(){let e=[];e=e.concat(Kameleoon.Internals.runtime.Campaigns.obtainCampaignsList(0));this.process(e);Kameleoon.Internals.runtime.Campaigns.obtainCampaignsList(0).forEach((e=>{e.handleSpecialCase()}));}}class Campaigns{constructor(){this.experiments={};this.personalizations={}}addCampaign(i){if(i.experimentAction)this.experiments[i.id.toString()]=i;else this.personalizations[i.id.toString()]=i}obtainCampaign(i,t){if(null!=i){i=i.toString();if(null!=t){const n=t?"experiments":"personalizations";return this[n][i]}return this.experiments[i]||this.personalizations[i]}}obtainCampaignsList(i){const t="experiments"===i||0===i?"experiments":"personalizations";return Object.values(this[t])}}class Consent{constructor(){this.disable=(e,n)=>{Kameleoon.Utils.sendKameleoonCustomEvent("Internals",{type:"consent/disable",consentType:e});if(e&&"BOTH"!=e)this[e]=!1;else{this.AB_TESTING=!1;this.PERSONALIZATION=!1}if(1!=n)this.write();Kameleoon.Utils.sendKameleoonCustomEvent.call(window,"LegalConsentUpdated",{legalConsentUpdate:this.getConsent()})};this.enable=(e,n)=>{Kameleoon.Utils.sendKameleoonCustomEvent("Internals",{type:"consent/enable",consentType:e});if(e&&"BOTH"!=e)this[e]=!0;else{this.AB_TESTING=!0;this.PERSONALIZATION=!0}if(Kameleoon.Internals.runtime?.RequestManager){Kameleoon.Internals.runtime.RequestManager.processRequests();this.purge()}if(1!=n)this.write();Kameleoon.Utils.sendKameleoonCustomEvent.call(window,"LegalConsentUpdated",{legalConsentUpdate:this.getConsent()})};this.getConfiguredConsent=()=>({AB_TESTING:Kameleoon.Internals.configuration.abtestConsent,PERSONALIZATION:Kameleoon.Internals.configuration.personalizationConsent});this.getConsent=()=>({AB_TESTING:this.AB_TESTING,PERSONALIZATION:this.PERSONALIZATION});this.hasGlobalConsent=()=>{return this.AB_TESTING||this.PERSONALIZATION};this.initialize=e=>{Kameleoon.Utils.sendKameleoonCustomEvent("Internals",{type:"consent/initialize",consent:e});this.AB_TESTING=e.AB_TESTING;this.PERSONALIZATION=e.PERSONALIZATION;this.initializeSdk()};this.initializeSdk=()=>{if(this.AB_TESTING)return;try{const e=localStorage.getItem("kameleoonConsentData");if(e){const n=JSON.parse(e)[Kameleoon.Utils.readLocalData("kameleoonVisitorCode","COOKIE")];if(n)this.AB_TESTING=!0}}catch(e){}};this.purge=()=>{if(Kameleoon.Internals.runtime){const e=e=>{if(null!=e)for(const n in e)Kameleoon.Utils.createLocalData(e[n].name,e[n].value,e[n].days,e[n].domain,e[n].forceLocalAccess,e[n].jsonFormat,null,!0)};e(Kameleoon.Internals.runtime.localDataMap?.["LS"]);e(Kameleoon.Internals.runtime.localDataMap?.["COOKIE"]);Kameleoon.Internals.runtime.localDataMap=null;Kameleoon.Analyst.Actions.processAllActions();}};this.setup=()=>{let e={AB_TESTING:!1,PERSONALIZATION:!1};const n=Kameleoon.Internals.runtime.readFromStorageOrExternal("kameleoonLegalConsent","LS");if(null!=n)if(1==n)e={AB_TESTING:!0,PERSONALIZATION:!0};else e=n;else{e={AB_TESTING:"OFF"==Kameleoon.Internals.configuration.abtestConsent?!0:null,PERSONALIZATION:"OFF"==Kameleoon.Internals.configuration.personalizationConsent?!0:null};}this.initialize(e)};this.write=()=>{Kameleoon.Utils.createLocalData("kameleoonLegalConsent",this.getConsent(),Utils.MAX_STORAGE_DAYS,null,"LS",!0,null,!0)};this.AB_TESTING=!1;this.PERSONALIZATION=!1}}class Device{get adBlocker(){return Kameleoon.Internals.runtime.adBlocker}get os(){return Kameleoon.Gatherer.OperatingSystem.obtain()}get screenHeight(){return window.screen.height}get screenWidth(){return window.screen.width}get timeZone(){return Kameleoon.Gatherer.TimeZone.obtainId()}get windowHeight(){return window.innerHeight}get windowWidth(){return window.innerWidth}constructor(){const e=Kameleoon.Utils.bowser.parsedResult=Kameleoon.Utils.bowser.parsedResult||Kameleoon.Utils.bowser.parse(navigator.userAgent);this.browser=e.browser.name||"Other";this.type="tablet"===e.platform.type?"Tablet":"mobile"===e.platform.type?"Phone":"Desktop";if("Safari"===this.browser&&"Desktop"===this.type&&"ontouchend"in document.documentElement)this.type="Tablet";let t=e.browser.version||"Safari"===this.browser&&e.os.version;try{if(t&&t.split(".").length>1)t=t.split(".")[0]+"."+t.split(".")[1]}catch(e){}this.browserVersion=t?parseFloat(t):null}}class Experiment{constructor(i,t){this.executeGlobalScript=()=>{};this.handleSpecialCase=()=>{if(!0!==this.targeting&&this.redirectProcessed){this.performVariationAssignment(!0);Kameleoon.Analyst.Actions.performActionsTracking([this])}else if(this.preAssignVariation)this.performVariationAssignment(!0)};this.obtainVariationAssignmentRandomNumber=()=>{let i="";this.variations.forEach((function(t){if(t.respoolTime)i+=t.respoolTime}));const t=Kameleoon.Internals.runtime.Visitor.obtainIdentifierValue();return Kameleoon.Utils.seededRandom(t+this.id+i,!0)};this.performVariationAssignment=i=>{if(this.displayedVariation&&!i&&!this.deferredLoading)return;if(void 0!==this.registeredVariationId&&this.assignmentTime)this.variations.forEach((i=>{if(this.registeredVariationId==i.id&&i.respoolTime>this.assignmentTime||null===this.registeredVariationId&&this.untrackedRespoolTime>this.assignmentTime)this.registeredVariationId=void 0}));if(void 0===this.registeredVariationId&&!Kameleoon.Internals.runtime.simulationMode&&0==this.variations.filter((i=>i.id==this.registeredVariationId)).length)this.registeredVariationId=void 0;if(this.mentalistEnabled&&this.mentalistVariationReassignationPermission)this.registeredVariationId=void 0;if(void 0===this.registeredVariationId){if(this.mentalistEnabled){}else if(Kameleoon.Internals.runtime.customVariationSelectionFunction){this.registeredVariationId=Kameleoon.Internals.runtime.customVariationSelectionFunction(this);if(null!=this.registeredVariationId)if("reference"==this.registeredVariationId.toString())this.registeredVariationId=0;else if("none"==this.registeredVariationId.toString())this.registeredVariationId=null}else{const i=this.obtainVariationAssignmentRandomNumber();let t=0;this.registeredVariationId=null;for(let e=0,n=this.variations.length;e<n;++e){t+=this.variations[e].deviation;if(i<=t){this.registeredVariationId=this.variations[e].id;break}}}this.assignmentTime=(new Date).getTime();this.writeLocalData()}Kameleoon.Analyst.Actions.associateActionAndVariation(this,this.registeredVariationId,i?0:2)};this.setBlocked=i=>{this.blockingReason=i;this.blocked=!0};this.setTargetingObject=(i,t,e,n)=>{this[i]=t.find((i=>i.id==e))||null;if(!n||n==e){this.targeting=void 0;this.rescheduleTargeting=null;this.numberTargetingCheckings=0;this.displayedVariation=null}};this.setTargetingSegment=i=>{this.setTargetingObject("targetingSegment",Kameleoon.Internals.runtime.targetingSegments,this.targetingSegmentId,i)};this.setTargetingTrigger=i=>{this.setTargetingObject("targetingTrigger",Kameleoon.Internals.runtime.targetingTriggers,this.targetingTriggerId,i)};this.trigger=()=>{if(!this.targeting){this.targeting=!0;this.displayedVariation=null}};this.writeLocalData=()=>{const i=this.registeredVariationId+(this.mentalistEnabled?"-mentalist":"")+"/"+this.assignmentTime;if(!this.simulationMode)Kameleoon.Utils.createLocalData("kameleoonExperiment-"+this.id,i,this.cookieDuration||30,this.cookieDomain,"LS",!1)};for(const t in i)this[t]=i[t];const e="kameleoonRedirect-"+this.id;const n=(t&&t[e])??Kameleoon.Utils.readLocalData(e,"LS",!1)??Kameleoon.Internals.runtime.parameters[e];if(null!=n){this.registeredVariationId=n;this.assignmentTime=(new Date).getTime();this.redirectProcessed=!0;Kameleoon.Utils.eraseLocalData(e,null,null)}const a="kameleoonExperiment-"+this.id;let s=t?t[a]:Kameleoon.Utils.readLocalData(a,"LS",!1);for(const i in Kameleoon.Internals.runtime.parameters)if(0==i.indexOf("kameleoonRedirect-"+this.id)){s=Kameleoon.Internals.runtime.parameters[i]+"/"+(new Date).getTime()+"/"+!1;this.writeLocalData()}if(s&&-1!=this.id){const i=s.split("/");this.registeredVariationId="null"==i[0]?null:i[0];this.assignmentTime=parseInt(i[1]);if(this.registeredVariationId){if("reference"==this.registeredVariationId.toString()){this.registeredVariationId=0;this.writeLocalData()}if("none"==this.registeredVariationId.toString()){this.registeredVariationId=null;this.writeLocalData()}}if(null!=this.winningVariationId&&!Kameleoon.Internals.runtime.simulationMode&&!Kameleoon.Internals.runtime.disableCache&&this.winningVariationId!=this.registeredVariationId)this.registeredVariationId=this.winningVariationId;}if(this.registeredVariationId&&-1!=this.registeredVariationId.toString().indexOf("-mentalist")){this.registeredVariationId=parseInt(this.registeredVariationId.toString().replace("-mentalist",""));this.mentalistEnabled=!0}if(this.registeredVariationId&&s&&null==this.deviation[this.registeredVariationId])this.registeredVariationId=void 0;if(this.targetingSegmentId&&this.targetingTriggerId){this.setTargetingSegment();this.setTargetingTrigger()}else if(this.targetingTriggerId&&!this.targetingSegmentId)this.setTargetingTrigger();else this.setTargetingSegment();if(this.redirectProcessed&&null!=this.registeredVariationId)this.writeLocalData();const r=Kameleoon.Internals.runtime.storedData.obtainField("Runtime","blockedExperiments",[]);if(r.length>0&&-1!=r.indexOf(this.id))this.setBlocked("API");}static performMutualExclusiveGroup(){}}class Goals{constructor(){this.goals={};this.run=()=>{const e=[];const n=[];const o=[];const t=[];this.getList().forEach((s=>{switch(s.type){case"ENGAGEMENT":n.push({goal:s});break;case"URL":{const n=new RegExp(s.url);if(n.test(Kameleoon.Utils.computeCurrentPageCleanAbsoluteURL()))e.push({goal:s});break}case"CUSTOM":if(s.jsCode)Kameleoon.Utils.runProtectedScript(s.jsCode,`kameleoonCustomGoal-${s.id}.js`);break;}}));if(e.length>0)this.processConversions(e);Kameleoon.Utils.addEventListener(document,Kameleoon.Internals.runtime.mouseDownEvent,(e=>{this.processConversions(n)}),!0);};this.processConversions=e=>{if(Kameleoon.Internals.runtime.gathererRun)for(let n=0,o=e.length;n<o;++n){const o=e[n];const t=o.goal;const s=!0===o.negative;if(s||"PAGE_VIEWS"!=t.type&&"TIME_SPENT"!=t.type&&"ENGAGEMENT"!=t.type||0==Kameleoon.Internals.runtime.Visitor.currentVisit.obtainNumberConversions(t.id)){Kameleoon.Utils.sendKameleoonCustomEvent.call(window,"ConversionTriggered",new APIGoal(t),"goal/process");Kameleoon.Gatherer.track(VisitEvent_Conversions,{goalId:t.id,revenue:o.revenue?o.revenue:0,negative:s,metadata:o.metadata});}}}}add(e){this.goals[String(e.id)]={...e}}addList(e){this.goals={};e.forEach((e=>this.add(e)))}get(e){if(null!=e)return this.goals[String(e)]}getList(){return Object.values(this.goals)}}class KGeolocation{constructor(){let e=Kameleoon.Internals.runtime.storedData.obtainField("Runtime","geolocation");if(null==e)Kameleoon.Internals.runtime.RequestManager.addCallback((()=>{Kameleoon.Utils.performBeaconServerCall(Kameleoon.Internals.runtime.RequestManager.obtainGeolocationUrl(),(e=>{if(4==e.readyState&&(200==e.status||204==e.status)){let t=e.getResponseHeader("geoip_country_name");let o=e.getResponseHeader("geoip_region_name");let i=e.getResponseHeader("geoip_city");this.country=t?Kameleoon.Utils.decodeUTF8(t):null;this.city=i?Kameleoon.Utils.decodeUTF8(i):null;this.latitude=e.getResponseHeader("geoip_latitude");this.longitude=e.getResponseHeader("geoip_longitude");this.postalCode=e.getResponseHeader("geoip_postal_code");this.region=o?Kameleoon.Utils.decodeUTF8(o):null;this.loaded=!0;Kameleoon.Gatherer.track(VisitEvent_Geolocation,this);Kameleoon.Internals.runtime.storedData.saveField("Runtime","geolocation",this)}}),null)}));else{this.loaded=!0;this.country=e.country;this.city=e.city;this.latitude=e.latitude;this.longitude=e.longitude;this.postalCode=e.postalCode;this.region=e.region}}}class KMutationObserver{static addMutationElementsToInternalObjects(e){for(let t=0;t<e.length;++t){const n=e[t];if(n&&n.id)Kameleoon.Internals.runtime.addedIDs["#"+n.id]=!0;if(n&&n.className&&"string"===typeof n.className){const e=n.className.split(" ");for(let t=0;t<e.length;++t)Kameleoon.Internals.runtime.addedClasses["."+e[t]]=!0}}}static checkSelectorInDomTree(e){if(!e.selectors)KMutationObserver.fillClassesAndIdsForSelector(e);if(0===e.selectorClasses.length&&0===e.selectorIDs.length)return!0;let t=!1;for(let n=0;n<e.selectors.length;++n)if(KMutationObserver.checkIDsForSelector(e.selectorIDs[n],e)&&KMutationObserver.checkClassesForSelector(e.selectorClasses[n],e)){t=!0;break}return t}static fillClassesAndIdsForSelector(e){const t=[];const n=[];const o=e.selector&&e.selector.split(",")||[];if(e.currentQuery&&e.selector!=e.currentQuery)o.push(e.currentQuery);o.forEach((e=>{if(-1!==e.indexOf(".")||-1!==e.indexOf("#")){let o;let r;if(-1!==e.indexOf("\\")||-1!==e.indexOf("contains")||-1!==e.indexOf(":not")){const t=e.replace(/(:[^:]+\(.+?\)|\\)/g,"").replace(/(\-)?(\[.*?\])/g,((e,t)=>t?e:""));o=t.match(/\.([^\s.]+)/g);r=t.match(/#([^\s:\[]+)/g)}else{o=e.replace(/\[[^\]]*\]/g,"").match(/\.([^\s.:\[]+)/g);r=e.replace(/\[[^\]]*\]/g,"").match(/#([^\s.:[>]+)/g)}n.push(o||[]);t.push(r||[])}}));e.selectors=o;e.selectorClasses=n;e.selectorIDs=t;return e}static checkClassesForSelector(e,t){if(null==e)return!0;for(let t=0,n=e.length;t<n;++t){const n=e[t];if(-1===n.indexOf("kameleoon")&&null==Kameleoon.Internals.runtime.addedClasses[n])return!1}return!0}static checkIDsForSelector(e,t){if(null==e)return!0;for(let t=0,o=e.length;t<o;++t){const o=e[t];if(-1!==o.indexOf("kameleoonElement")){}else if(null==Kameleoon.Internals.runtime.addedIDs[o])return!1}return!0}static fillInternalObjectsForMutationObserver(e){if(!e)e=document;const t=e.getElementsByTagName("*");for(let e=0,n=t.length;e<n;++e){const n=t[e];if(n.id)Kameleoon.Internals.runtime.addedIDs["#"+n.id]=!0;if(n.className&&"string"===typeof n.className){const e=n.className.split(" ");for(let t=0;t<e.length;++t)Kameleoon.Internals.runtime.addedClasses["."+e[t]]=!0}}}static removeMutationElementsFromInternalObjects(e){for(let t=0;t<e.length;++t){const n=e[t];if(n&&n.id)if(1==Kameleoon.Internals.runtime.addedIDs["#"+n.id])delete Kameleoon.Internals.runtime.addedIDs["#"+n.id]}}static performWaitingElementPresentObject(){for(let e=Kameleoon.Internals.runtime.waitingElementPresentObjects.length-1;e>=0;e-=1){const t=Kameleoon.Internals.runtime.waitingElementPresentObjects[e];if(t&&t.useAntiFlicker)if(KMutationObserver.checkSelectorInDomTree(t)){const n=Kameleoon.Utils.querySelectorAll(t.selector);if(0<n.length){Kameleoon.Utils.runProtectedFunction((function(){t.callback(n)}),!0);Kameleoon.Internals.runtime.waitingElementPresentObjects.splice(e,1)}}}}static performVariationsElementSet(e){}static performAsyncMutations(){Kameleoon.Internals.runtime.domMutationThrottling=!0;if(!KMutationObserver.asyncMutationsTimeoutId)KMutationObserver.asyncMutationsTimeoutId=Kameleoon.Utils.setTimeout((()=>{if(KMutationObserver.mutationList.length>=KMutationObserver.MAX_MUTATIONS_LENGTH_FOR_ITERATION)KMutationObserver.fillInternalObjectsForMutationObserver();else KMutationObserver.mutationList.forEach((e=>{const t=e.addedNodes,n=e.removedNodes;const o=Array.prototype.slice.call(t);const r=Array.prototype.slice.call(n);const a=o.concat(r);KMutationObserver.removeMutationElementsFromInternalObjects(n);KMutationObserver.addMutationElementsToInternalObjects(t);for(let t=0;t<a.length;++t){const n=a[t];if(n&&n.innerHTML&&"childList"===e.type)KMutationObserver.fillInternalObjectsForMutationObserver(n)}}));KMutationObserver.mutationList=[];KMutationObserver.performWaitingElementPresentObject();Kameleoon.Utils.clearTimeout(KMutationObserver.asyncMutationsTimeoutId);KMutationObserver.asyncMutationsTimeoutId=null}),250)}static setMutationObserver(){if(Kameleoon.Internals.runtime.cantUseMutationObserver||Kameleoon.Internals.runtime.mutationObserver)return;KMutationObserver.fillInternalObjectsForMutationObserver();const e=document.documentElement;const t={attributes:!0,childList:!0,characterData:!0,subtree:!0};Kameleoon.Internals.runtime.mutationObserver=new MutationObserver((function(e){let t=!0;if(!Kameleoon.Internals.runtime.domReady&&e.length>=KMutationObserver.MAX_MUTATIONS_LENGTH){KMutationObserver.mutationList=KMutationObserver.mutationList.concat(e);KMutationObserver.performAsyncMutations();return}e.forEach((e=>{const n=e.addedNodes,o=e.removedNodes;const r=Array.prototype.slice.call(n);const a=Array.prototype.slice.call(o);const s=r.concat(a);KMutationObserver.removeMutationElementsFromInternalObjects(o);KMutationObserver.addMutationElementsToInternalObjects(n);for(let n=0;n<s.length;++n){const o=s[n];if((Kameleoon.Internals.runtime.editorMode||Kameleoon.Internals.runtime.kameleoonSelectionIframeMode)&&o&&o.id&&"string"==typeof o.id&&null!==o.id.match("kameleoon"))if(o.closest&&null!==o.closest(".KameleoonProtected"))t=!1;if(t&&o&&o.innerHTML&&"childList"===e.type)KMutationObserver.fillInternalObjectsForMutationObserver(o)}}));KMutationObserver.performWaitingElementPresentObject();}));if("function"===typeof Kameleoon.Internals.runtime.mutationObserver.observe)Kameleoon.Internals.runtime.mutationObserver.observe(e,t);if(Kameleoon.Internals.runtime.singlePageSupport)KMutationObserver.setMutationObserverSPA()}static setMutationObserverSPA(){if(Kameleoon.Internals.runtime.mutationObserverSpa||Kameleoon.Internals.runtime.cantUseMutationObserver)return;Kameleoon.API.Core.runWhenElementPresent("body",(e=>{const t={childList:!0,subtree:!0};Kameleoon.Internals.runtime.mutationObserverSpa=new MutationObserver((function(e){Kameleoon.Internals.runtime.listenVariations=[];Kameleoon.Internals.runtime.mutationObserverSpa.disconnect();KMutationObserver.executeCallbacks(e);KMutationObserver.checkDynamicElements();n()}));const n=()=>{t.characterData=Kameleoon.ElementSet&&Kameleoon.ElementSet.pageElementSetsSpa.length>0||Kameleoon.Internals.runtime.listenSpaCallbacks.length>0;Kameleoon.Internals.runtime.mutationObserverSpa.observe(e[0],t)};n()}))}}KMutationObserver.MAX_MUTATIONS_LENGTH=3e3;KMutationObserver.MAX_MUTATIONS_LENGTH_FOR_ITERATION=5e3;KMutationObserver.asyncMutationsTimeoutId=null;KMutationObserver.mutationList=[];KMutationObserver.executeCallbacks=e=>{Kameleoon.Internals.runtime.listenSpaCallbacks.forEach((e=>Kameleoon.Utils.runProtectedFunction(e,!0)))};KMutationObserver.checkDynamicElements=()=>{Kameleoon.Internals.runtime.waitingDynamicElements.forEach((e=>{const t=Kameleoon.Utils.querySelectorAll(e.selector).filter((t=>null==t.getAttribute(e.attribute)));t.length>0&&e.callback(t)}))};KMutationObserver.checkElementSetIntegrity=()=>{};KMutationObserver.resetElementSet=(e,t,n)=>{};KMutationObserver.containsDomOperationElements=e=>{};class Logger{constructor(){this.send=(e,o,n)=>{if(Kameleoon.Internals.runtime?.parameters?.kameleoonDebug)console.log(e)}}}class RequestManager{constructor(){this.errorKey="kameleoonRequestEvents";this.processRequests=()=>{if(Kameleoon.Internals.runtime.Consent.hasGlobalConsent()){if(!this.tabId){this.tabId=Kameleoon.Utils.obtainRandomString(8,Analyst.HEXADECIMAL_ALPHABET);Kameleoon.Utils.secureSessionStorage("setItem","kameleoonTabId",this.tabId)}if(this.callbacksToExecute.length>0){const e=this.callbacksToExecute.splice(0,1e3);e.forEach((e=>e()))}if(this.eventsToSend.length>0&&this.validateTrackingRequest()){const e=this.eventsToSend.splice(0,1e3);const t=this.obtainVisitUrl();const n=this.obtainRequestBody(e);this.send(t,"POST",n,(()=>{}),(()=>{this.createErrorEventsQueue(n)}));if(this.eventsToSend.length>0)this.processRequests()}}};this.obtainRequestBody=e=>{const t=Kameleoon.Internals.runtime.Consent.getConsent();const n=sessionStorage.getItem(this.errorKey);let s="";s+=e.reduce(((e,n)=>{if(!n.notTrack&&this.validateTrackingConsent(n.eventType,t))e+=n.obtainRequestData()+"\n";return e}),"");if(n){s+=n;sessionStorage.removeItem(this.errorKey)}return s};this.obtainVisitUrl=()=>{const e=Kameleoon.Internals.runtime.Visitor.currentVisit.visitorCode;return`${this.url}/visit/events?siteCode=${this.siteCode}&visitorCode=${e}&itp=${"Safari"===Kameleoon.Internals.runtime.Device.browser}${this.tabId?`&tabId=${this.tabId}`:""}`};this.obtainIpUrl=()=>this.url+"/ip";this.obtainGeolocationUrl=()=>this.url+"/geolocation";this.obtainWeatherUrl=e=>this.url+"/weather"+(e?"/forecast":"/weather");this.send=(e,t,n,s,i,o)=>{const r=new XMLHttpRequest;r.open(t,e,!0);if(s)r.onreadystatechange=function(e){s.bind(r)(e.target)};if(i){r.onabort=function(e){i.bind(r)(e.target)};r.onerror=function(e){i.bind(r)(e.target)};r.ontimeout=function(e){i.bind(r)(e.target)}}r.timeout=o||15*60*1e3;r.send("POST"==t&&n?n:null);};this.sendActiveScript=()=>{};this.obtainRemoteSynchronizationData=(e,t)=>{this.send(`${Kameleoon.Internals.runtime.DATA_URL}/visit/visitor?${e}`,"GET",null,t)};this.sendProduct=(e,t)=>{this.send(`${this.url}/product/events?siteCode=${this.siteCode}&ean=${encodeURIComponent(e.toString())}`,"POST",t);};this.eventsToSend=[];this.callbacksToExecute=[];this.url=Kameleoon.Internals.runtime.DATA_URL;this.siteCode=Kameleoon.Internals.configuration.siteCode;this.tabId=Kameleoon.Utils.secureSessionStorage("getItem","kameleoonTabId");Kameleoon.Utils.setInterval(this.processRequests.bind(this),500);Kameleoon.Utils.addEventListener(window,Kameleoon.Internals.runtime.beforeUnloadEvent,"Safari"===Kameleoon.Internals.runtime.Device.browser?()=>this.eventsToSend.length&&this.createErrorEventsQueue(this.obtainRequestBody(this.eventsToSend)):this.processRequests.bind(this))}addCallback(e){if(Kameleoon.Internals.runtime.Consent.hasGlobalConsent())e();else this.callbacksToExecute.push(e)}addRequest(e){this.eventsToSend.push(e)}createErrorEventsQueue(e){if(e)sessionStorage.setItem(this.errorKey,(sessionStorage.getItem(this.errorKey)||"")+e)}validateTrackingConsent(e,t){return"experiment"!==e&&"personalization"!==e||t.AB_TESTING&&"experiment"===e||t.PERSONALIZATION&&"personalization"===e}validateTrackingRequest(){const n=(!Kameleoon.Internals.runtime.simulationMode||Kameleoon.Internals.runtime.enableRemoteVisitorSynchronization||Kameleoon.Internals.runtime.parameters["kameleoon-qa-mode"])&&!Kameleoon.Internals.runtime.proxyMode&&!Kameleoon.Internals.runtime.kameleoonSelectionIframeMode;return n}}class Targeting{constructor(){this.targetings={};this.obtainTargeting=e=>e&&this.targetings[e];this.checkTargetingCondition=(e,t,i)=>{let r;if(null==t.numberTargetingCheckings)t.numberTargetingCheckings=0;if(!this.checkIfTargetingMustBeComputed(t.targeting,t.rescheduleTargeting||0==t.numberTargetingCheckings,void 0))r={targeting:t.targeting,rescheduleTargeting:!1};else{let n=Kameleoon.Targeting["evaluate_"+t.type];let a;if(null!=n)a=n.bind(this)(t,e,i);else a=null;if(null==a)a={targeting:void 0,rescheduleTargeting:!1};let g=a.targeting;if(!0!==t.include)if(void 0===g){if(!0===a.excludedUndefinedIsTargeted)g=!0}else g=!g;r={targeting:g,rescheduleTargeting:this.checkIfTargetingMustBeComputed(g,a.rescheduleTargeting,void 0)};t.targeting=r.targeting;t.rescheduleTargeting=r.rescheduleTargeting;t.numberTargetingCheckings++}if(!0===r.targeting)r.weight=t.weight;else r.weight=0;return r};this.checkTargetingSegmentsTargeting=e=>{let t=[];for(let i=0,r=e.length;i<r;++i){let r=e[i];if(null==r.numberTargetingCheckings)r.numberTargetingCheckings=0;if(this.checkIfTargetingMustBeComputed(r.targeting,r.rescheduleTargeting||0==r.numberTargetingCheckings,!1))t.push(r)}e=t;for(let t=0,i=e.length;t<i;++t){let i=e[t];let r=this.checkTree(null,i?i.tree:null,!1,i);i.targeting=r.targeting;i.rescheduleTargeting=r.rescheduleTargeting;i.numberTargetingCheckings++}let i=[];for(let t=0,r=e.length;t<r;++t){let r=e[t];if(this.checkIfTargetingMustBeComputed(r.targeting,r.rescheduleTargeting,!1))i.push(r)}if(i.length>0){let e=Kameleoon.Utils.setTimeout((()=>{Kameleoon.Utils.clearTimeout(e);this.processTargetingSegments(i)}),Kameleoon.Internals.runtime.domReady?Kameleoon.Internals.runtime.PAGE_LOADED_POLL_DELAY:Kameleoon.Internals.runtime.PAGE_LOADING_POLL_DELAY)}};this.checkTree=(e,t,i,r)=>{let n;if(null==t){n={targeting:!0,rescheduleTargeting:!1};if(i)n.weight=0}else{if(null==t.numberTargetingCheckings)t.numberTargetingCheckings=0;if(!this.checkIfTargetingMustBeComputed(t.targeting,t.rescheduleTargeting||0==t.numberTargetingCheckings,i)){n={targeting:t.targeting,rescheduleTargeting:!1};if(i)n.weight=t.weight}else{if(null!=t.targetingCondition)n=this.checkTargetingCondition(e,t.targetingCondition,r);else{let a=this.checkTree(e,t.leftChild,i,r);let g=Kameleoon.Internals.runtime.simulationMode||i;if(!g)switch(a.targeting){case!0:if(!t.orOperator)g=!0;break;case!1:if(t.orOperator)g=!0;break;case void 0:default:g=!0;break}let l=null;if(g)l=this.checkTree(e,t.rightChild,i,r);let s;switch(a.targeting){case!0:if(t.orOperator)s=!0;else switch(l.targeting){case!0:s=!0;break;case!1:s=!1;break;case void 0:default:s=void 0;break}break;case!1:if(t.orOperator)switch(l.targeting){case!0:s=!0;break;case!1:s=!1;break;case void 0:default:s=void 0;break}else s=!1;break;case void 0:default:if(t.orOperator)switch(l.targeting){case!0:s=!0;break;case!1:s=void 0;break;case void 0:default:s=void 0;break}else switch(l.targeting){case!0:s=void 0;break;case!1:s=!1;break;case void 0:default:s=void 0;break}break}n={targeting:s,rescheduleTargeting:this.checkIfTargetingMustBeComputed(s,a.rescheduleTargeting||g&&l.rescheduleTargeting,i)};if(i){let e;if(t.orOperator)e=Math.max(a.weight,l.weight);else e=a.weight+l.weight;n.weight=e}}t.targeting=n.targeting;t.rescheduleTargeting=n.rescheduleTargeting;if(i)t.weight=n.weight}t.numberTargetingCheckings++}return n};this.computeDisplayableTree=e=>{let t=new Array;let i=new Array;this.computeDisplayableTreeFirstLevelAddIn(e,t,i);if(i.length>0){let e=new Array;let r=new Array;let n=this.createIterator(t);let a=this.createIterator(i);while(a.hasNext()){let t=a.next();if(Kameleoon.Utils.testEmptyMap(t.conditions)){if(a.hasNext())n.next()}else{r.push(t);if(a.hasNext())e.push(n.next())}}t=r.length>0?e.slice(0,r.length-1):e;i=r}return{firstLevelOrOperators:t,secondLevel:i}};this.computeDisplayableTreeFirstLevelAddIn=(e,t,i)=>{if(null!=e)if(null==e.targetingCondition)if(0==e.orGuiLevel){this.computeDisplayableTreeFirstLevelAddIn(e.leftChild,t,i);t.push(e.orOperator);this.computeDisplayableTreeFirstLevelAddIn(e.rightChild,t,i)}else i.push(this.computeDisplayableTreeSecondLevel(e));else i.push(this.computeDisplayableTreeSecondLevel(e))};this.computeDisplayableTreeSecondLevel=e=>{let t=new Array;let i=new Array;this.computeDisplayableTreeSecondLevelAddIn(e,t,i);if(i.length>0){let e=new Array;let r=new Array;let n=this.createIterator(t);let a=this.createIterator(i);while(a.hasNext()){let t=a.next();if(t.disabled){if(a.hasNext())n.next()}else{r.push(t);if(a.hasNext())e.push(n.next())}}t=r.length>0?e.slice(0,r.length-1):e;i=r}return{orOperators:t,conditions:i}};this.computeDisplayableTreeSecondLevelAddIn=(e,t,i)=>{if(null!=e)if(null==e.targetingCondition){this.computeDisplayableTreeSecondLevelAddIn(e.leftChild,t,i);t.push(e.orOperator);this.computeDisplayableTreeSecondLevelAddIn(e.rightChild,t,i)}else i.push(e.targetingCondition)};this.flattenTree=e=>{let t=(e,i)=>{if(null!=e)if(null!=e.targetingCondition)return!1===e.targetingCondition.targeting?["!",e.targetingCondition]:e.targetingCondition;else{let r=e.orOperator?"OR":"AND";let n=[t(e.leftChild,r),r,t(e.rightChild,r)];return"AND"==i&&"OR"==r?["(",n,")"]:n}};return Kameleoon.Utils.flatten(t(e,"OR"))};this.processAllTargetings=()=>{let e=Kameleoon.Internals.runtime.targetingSegments||[];e.forEach((e=>{this.targetings[e.id]=e}));this.processTargetingSegments(e)};this.processTargetingSegments=e=>{this.checkTargetingSegmentsTargeting(e);let t=[];for(let i=0,r=e.length;i<r;++i){let r=e[i];if(!0===r.targeting)t.push(r)}this.performSegmentsTracking(t)}}checkIfTargetingMustBeComputed(e,t,i){let r=!0===t&&(void 0===e||!1===e&&!0===i);return r}createIterator(e){let t=0;return{hasNext:function(){return t<e.length},next:function(){return e[t++]}}}performSegmentsTracking(e){for(let t=0,i=e.length;t<i;++t){let i=e[t];Kameleoon.Utils.sendKameleoonCustomEvent.call(window,"SegmentTriggered",{segment:{id:i.id,name:i.name}});if(i.audience||i.onboarding||Kameleoon.Internals.runtime.mentalistRun&&i.mentalist)Kameleoon.Gatherer.track(VisitEvent_TargetingSegments,{id:i.id});}}}Targeting.prototype.evaluate_PAGE_URL=function(e){let t=new RegExp(Kameleoon.Utils.computeURLRegExpNoKameleoonParameters(e.value));let a;try{a=t.test(decodeURI(Kameleoon.Utils.computeCurrentPageCleanAbsoluteURL()))}catch(e){try{a=unescape?t.test(unescape(Kameleoon.Utils.computeCurrentPageCleanAbsoluteURL())):!1}catch(e){a=!1}}return{targeting:a,rescheduleTargeting:!1}};Targeting.prototype.evaluate_DEVICE_TYPE=function(e){return{targeting:e.value==Kameleoon.Internals.runtime.Device.type.toLocaleUpperCase(),rescheduleTargeting:!1}};Targeting.prototype.evaluate_SEGMENT=function(e){let g=Kameleoon.Targeting.obtainTargeting(e.linkedSegmentId)||Kameleoon.Internals.runtime.targetingSegments.find((g=>g.id==e.linkedSegmentId));if(g){if(null==g.numberTargetingCheckings)Kameleoon.Targeting.processTargetingSegments([g]);e.value=g.name;e.targeting=g.targeting;e.rescheduleTargeting=void 0===g.targeting;return{targeting:g.targeting,rescheduleTargeting:void 0===g.targeting}}return{targeting:void 0,rescheduleTargeting:!0}};Targeting.prototype.evaluate_JS_CODE=function(targetingCondition,container,segment){let targeting;try{if(!targetingCondition.valueGeneratedCode)if(targetingCondition.async){targetingCondition.valueGeneratedCode="(function(setTargeting) {\n"+targetingCondition.value+"\n})(asyncCallback);";Kameleoon.Utils.runProtectedScript(targetingCondition.valueGeneratedCode,"",(()=>{var asyncCallback=e=>{targetingCondition.targeting=e};eval(targetingCondition.valueGeneratedCode)}))}else targetingCondition.valueGeneratedCode="(function() {\n"+targetingCondition.value+"\n})();";if(targetingCondition.async)targeting=targetingCondition.targeting||void 0;else if(!targetingCondition.domReady||Kameleoon.Internals.runtime.domReady){const value=Kameleoon.Utils.runProtectedScript(targetingCondition.valueGeneratedCode,"",(()=>eval(targetingCondition.valueGeneratedCode)));targeting="boolean"==typeof value?value:void 0}}catch(e){targeting=!1;const t=segment?segment.name:null;console.log(e,t)}return{targeting:targeting,rescheduleTargeting:void 0===targeting}};class Tracking{constructor(){this.timeBeforeSendTracking=20*60*1e3;this.checkAndSetKameleoonTrackingTime=(t,e)=>{const n=Kameleoon.Utils.secureSessionStorage("getItem","kameleoonAnalyticsTrackingTimes");const i=null==n?{}:JSON.parse(n);const a="Experiment-"+t;if(null==i[e]||null==i[e][a]||(new Date).getTime()>=i[e][a]+this.timeBeforeSendTracking){if(null==i[e])i[e]={};i[e][a]=(new Date).getTime();Kameleoon.Utils.secureSessionStorage("setItem","kameleoonAnalyticsTrackingTimes",JSON.stringify(i));return!0}return!1};this.obtainTealiumData=()=>{};this.processCustomIntegration=t=>{const e=Kameleoon.Internals.configuration.customIntegrations;for(let n=0;n<t.customIntegrations.length;n++){const i=t.customIntegrations[n];const a=e.filter((t=>t.name==i))[0];if(a){const e="'"+t.name.replace(/(['"])/g,"\\$1")+"'";Kameleoon.Utils.runProtectedScript(`(function(\n\t\t\t\t\t\texperimentID,\n\t\t\t\t\t\texperimentName,\n\t\t\t\t\t\tpersonalizationID,\n\t\t\t\t\t\tpersonalizationName,\n\t\t\t\t\t\tvariationID,\n\t\t\t\t\t\tvariationName) {\n\t\t\t\t\t\t\t${a.jsCode}\n\t\t\t\t\t})(\n\t\t\t\t\t\t${t.experimentAction?t.id:null},\n\t\t\t\t\t\t${t.experimentAction?e:null},\n\t\t\t\t\t\t${!t.experimentAction?t.id:null},\n\t\t\t\t\t\t${!t.experimentAction?e:null},\n\t\t\t\t\t\t${"reference"==t.associatedVariation.id.toString()?0:t.associatedVariation.id},\n\t\t\t\t\t\t${"'"+t.associatedVariation.name+"'"}\n\t\t\t\t\t)`,"kameleoonCustomIntegration"+i+".js")}}}}}Tracking.prototype.processGlassbox=function(e){if(window._detector){const a=e.experimentAction?"Experiment":"Personalization";window._detector.triggerCustomEventMap("Kameleoon",{type:a,campaign_id:e.id,campaign_name:e.name,variation_id:e.associatedVariation.id,variation_name:e.associatedVariation.name})}else{const a=Kameleoon.Utils.setTimeout((function(){Kameleoon.Utils.clearInterval(a);Kameleoon.Tracking.processGlassbox.apply(Kameleoon.Tracking,[e])}),150)}};Tracking.prototype.processAir360=function(e){if(window.Air360)window.Air360.track("kameleoon",{event:e.experimentAction?"kameleoon_experiment":"kameleoon_personalization",campaign_id:e.id,campaign_name:e.name,variation_id:e.associatedVariation.id,variation_name:e.associatedVariation.name});else{const a=Kameleoon.Utils.setTimeout((()=>{Kameleoon.Utils.clearInterval(a);Kameleoon.Tracking.processAir360.apply(Kameleoon.Tracking,[e])}),150)}};class Variation{constructor(e){this.getAction=()=>Kameleoon.Internals.runtime.Campaigns.obtainCampaign(this.actionId);for(const t in e)this[t]=e[t]}applyJavascriptCode(e){if(this.javaScriptCode&&this.javaScriptCode.code&&(null==this.javaScriptCode.evaluated||e)){this.javaScriptCode.evaluated=!0;return Kameleoon.Utils.runProtectedScript(this.javaScriptCode.code,"kameleoonVariationJavaScriptCode-"+this.id+".js")}return null}preProcessRedirect(e){}process(){const e=Kameleoon.Internals.runtime.Campaigns.obtainCampaign(this.actionId);if(!this.styleSheetAdded){this.styleSheetAdded=!0;Kameleoon.Utils.addCSSStyleSheet(this.css,e,null)}if(this.javaScriptCode&&!this.permanentRefreshActive)if(!this.javaScriptCode.afterDOMReady)this.applyJavascriptCode(!1);else if(!this.permanentRefreshActive)Kameleoon.Utils.domReady((()=>{this.applyJavascriptCode(!1)}));const t="enginePollerForVariation"+this.id;if(Kameleoon.Internals.runtime[t]&&!this.permanentRefreshActive){if(Kameleoon.Internals.runtime.cantUseMutationObserver)Kameleoon.Utils.clearInterval(Kameleoon.Internals.runtime[t]);Kameleoon.Internals.runtime[t]=null}if(!Kameleoon.Internals.runtime[t]&&!Kameleoon.Internals.runtime.editorMode&&!Kameleoon.Internals.runtime.kameleoonSelectionIframeMode){this.permanentRefreshActive=!0;Kameleoon.Internals.runtime.listenVariations.push(this);Kameleoon.Internals.runtime[t]=!0;if(Kameleoon.Internals.runtime.cantUseMutationObserver)Kameleoon.Internals.runtime[t]=Kameleoon.Utils.setInterval((()=>{this.process()}),10)}}processReplaceData(e){}}class Visit{constructor(t){this.addActionTriggered=(t,e)=>{const i=e?"experimentsTriggered":"personalizationsTriggered";const s=Kameleoon.Internals.runtime.storedData.obtainField("Gatherer",i,{});s[t.toString()]=!0;Kameleoon.Internals.runtime.storedData.saveField("Gatherer",i,s);};this.addEvent=t=>{this.lastEventDate=t};this.addAdBlocker=()=>{this.Device.adBlocker=!0};this.addConversions=(t,e,i,s)=>{let n=s?-1:1;e*=n;i*=n;let a=this.conversions[t];let o=a?a.count:0;let r=a?a.revenue:0;let l=o+e;let u=r+i;if(l>0)if(u>=0)this.conversions[t]={count:l,revenue:u};else delete this.conversions[t];else delete this.conversions[t]};this.addCustomData=(t,e,i)=>{if(Kameleoon.Utils.testEmptyMap(e)){if(i)delete this.customData[t]}else{if(i||null==this.customData[t])this.customData[t]={};for(let i in e)this.customData[t][i]=(this.customData[t][i]||0)+e[i]}};this.addExperiment=(t,e,i)=>{if(null===i)return;if(void 0===this.ExperimentActivations[e])this.ExperimentActivations[e]={associatedVariationID:i,times:[]};this.ExperimentActivations[e].times.push(t);if(-1!=e){let t=Kameleoon.Internals.runtime.Campaigns.obtainCampaign(e,!0);let i=t?t.attributionWindow:Visitor.INFLUENCE_DELAY;if(i>0)this.ExperimentActivations[e].influence=i}};this.addGeolocation=t=>{this.Geolocation=t};this.addClicks=t=>{if(t>0)this.clicks+=t};this.addPage=(t,e,i,s)=>{let n=s.filter((t=>null!=t));this.pages.push({timestamp:t,keyPagesMatched:i,referrersMatched:n.length>0?n:[]});let a=this.pageURLsVisited[e];if(null==a){a=[];this.pageURLsVisited[e]=a}a.push(t);for(let t in this.productEansLastPage)this.productEansAllButLastPages[t]=!0;this.productEansLastPage={}};this.addPersonalization=(t,e,i)=>{};this.addProduct=t=>{this.productEansLastPage[t]=!0};this.addTargetingSegment=(t,e)=>{let i=this.activatedSegments[e];if(null==i){i=[];this.activatedSegments[e]=i}i.push(t);};this.addWeather=t=>{this.Weather=t};this.clearCustomDataPage=()=>{for(let t in Kameleoon.Internals.runtime.Gatherer.configuration.customData){let e=Kameleoon.Internals.runtime.Gatherer.configuration.customData[t];if("PAGE"==e.scope)delete this.customData[t]}};this.computeActionNumberActivations=(t,e,i,s)=>{if(null==s[t])return 0;return this.computeObjectNumberPresence(e,i,s[t].times)};this.computeObjectNumberPresence=(t,e,i)=>{let s=0;for(let n=0,a=i.length;n<a;++n){let a=i[n];if((null==t||a>=t)&&(null==e||a<=e))s++}return s};this.isVisitFinished=()=>this.lastEventDate<(new Date).getTime()-Kameleoon.Internals.runtime.Gatherer.configuration.maxVisitIdleDuration;this.obtainKeyPageIsVisited=t=>{let e=this.pages.filter((e=>-1!=e.keyPagesMatched.indexOf(t)));return e.length>0};this.obtainMeanPageDuration=()=>{};this.obtainNumberConversions=t=>{let e=this.conversions[t];return null==e?0:e.count};this.obtainPageNumberViews=(t,e,i,s)=>{let n=0;for(let a in this.pageURLsVisited)if(null!=a){let o=Kameleoon.Utils.computeRelativeURL(a);if((null==t||t.test(a)||t.test(o))&&(null==e||!e.test(a)&&!e.test(o)))n+=this.computeObjectNumberPresence(i,s,this.pageURLsVisited[a])}return n};this.obtainTimesStartedPages=()=>{let t=[];for(let e in this.pageURLsVisited)t.concat(this.pageURLsVisited[e]);return t.sort()};this.obtainPersonalizationNumberActivations=(t,e,i)=>this.computeActionNumberActivations(t,e,i,this.PersonalizationActivations);this.obtainReferrerIsPresent=t=>{let e=null==t?null:t+1;let i=this.pages.filter((t=>-1!=t.referrersMatched.indexOf(e)));return i.length>0};this.visitNumber=t.visitNumber||0;this.landingPageURL=t.landingPageURL||null;this.productEansAllButLastPages=t.productEansAllButLastPages||{};this.productEansLastPage=t.productEansLastPage||{};this.startDate=t.startDate||0;this.pageURLsVisited=t.pageURLsVisited||{};this.activatedSegments=t.activatedSegments||{};this.visitorCode=t.visitorCode||"";this.customData=t.customData||{};this.clicks=t.clicks||0;this.lastEventDate=t.lastEventDate||t.lastActivityDate||this.startDate;let e=t.Device||{};this.Device={adBlocker:e.adBlocker||!1,browser:e.browser||"Other",browserVersion:e.browserVersion||null,os:e.os||"Other",screenHeight:e.screenHeight||null,screenWidth:e.screenWidth||null,timeZone:e.timeZone||"UTC",type:e.type?e.type.toLocaleUpperCase():null,windowHeight:e.windowHeight||null,windowWidth:e.windowWidth||null};let i=t.Geolocation||{};this.Geolocation={city:i.city||null,country:i.country||null,latitude:i.latitude||null,longitude:i.longitude||null,postalCode:i.postalCode||null,region:i.region||null};let s=t.Weather||{};this.Weather={conditionCode:s.conditionCode||null,conditionDescription:s.conditionDescription||null,cloudiness:s.cloudiness||null,humidity:s.humidity||null,pressure:s.pressure||null,sunrise:s.sunrise||null,sunset:s.sunset||null,temperature:s.temperature||null,windSpeed:s.windSpeed||null};this.conversions=t.conversions||{};this.ExperimentActivations=t.ExperimentActivations||{};this.PersonalizationActivations=t.PersonalizationActivations||{};this.pages=t.pages||[]}obtainExperimentNumberActivations(t,e,i){return this.computeActionNumberActivations(t,e,i,this.ExperimentActivations)}}class Visitor{constructor(){this.addVisit=t=>{this.visits.push(t);this.currentVisit=t;this.totalVisits++;if(null==this.timeStartedEldestVisit)this.timeStartedEldestVisit=t.startDate;const e=this.visits.length;const i=Math.max(1,Kameleoon.Internals.configuration.maxNumberLocalVisits);if(e>i)this.visits=this.visits.slice(e-i)};this.obtainKeyPageIsVisited=t=>{for(let e=0,i=this.visits.length;e<i;++e)if(this.visits[e].obtainKeyPageIsVisited(t))return!0;return!1};this.obtainReferrerIsPresent=t=>{for(let e=0,i=this.visits.length;e<i;++e)if(this.visits[e].obtainReferrerIsPresent(t))return!0;return!1};this.obtainNumberConversions=t=>{let e=0;for(let i=this.visits.length-1;i>=0;--i)e+=this.visits[i].obtainNumberConversions(t);return e};this.obtainActionNumberActivations=(t,e,i,o,s,n,r,a)=>{const l=a?"obtainExperimentNumberActivations":"obtainPersonalizationNumberActivations";const m=this.visits.length;let c=0;if(m>0&&(s||n)){let e=0;let a=m;if(!n&&s)e=m-1;else if(n&&!s)a=m-1;for(let s=e;s<a;++s){const e=this.visits[s][l](t,i,o);c+=r?Number(e>0):e}}return c};this.obtainPageNumberViews=(t,e,i,o,s,n)=>{const r=this.visits.length;let a=0;if(r>0&&(s||n)){let l=0;let m=r;if(!n&&s)l=r-1;else if(n&&!s)m=r-1;for(let s=l;s<m;s++)a+=this.visits[s].obtainPageNumberViews(t,e,i,o)}return a};this.obtainTimeSincePreviousVisit=()=>{let t=0;if(this.visits.length>1){t=this.currentVisit.startDate-this.visits.slice(-2)[0].lastEventDate;t=Math.max(t,Kameleoon.Internals.runtime.Gatherer.configuration.maxVisitIdleDuration)}return t};this.obtainVisitorCode=t=>{let e=!1;let i=Kameleoon.Utils.readLocalData("kameleoonVisitorCode","COOKIE");const o=Kameleoon.Internals.runtime.storedData.obtainField("Gatherer","timeNextSynchronization",null);if(Kameleoon.Internals.configuration.useWideDomainSupport||Kameleoon.Internals.configuration.useVisitorCodeInLocalStorage){const t=Kameleoon.Internals.runtime.incomingStoredData?.["kameleoonVisitorCode"]??Kameleoon.Utils.readLocalData("kameleoonVisitorCode","LS");if(t)i=t}if(t||null==i){i=Kameleoon.Utils.obtainRandomString(Visitor.VISITOR_CODE_LENGTH,Analyst.CODE_ALPHABET);e=!0}Kameleoon.Utils.saveVisitorCode(i,null==o);this.visitorCode=i;return e};this.obtainVisitorFromStoredData=()=>Kameleoon.Internals.runtime.storedData.Visitor;this.saveToStoredData=()=>{this.saveFieldToStoredData("visits",this.visits);this.saveFieldToStoredData("totalVisits",this.totalVisits);this.saveFieldToStoredData("timeStartedEldestVisit",this.timeStartedEldestVisit)};this.setVisitorCode=t=>{if(this.visitorCode!=t){Kameleoon.Internals.runtime.newVisitorCode=!0;Kameleoon.Utils.saveVisitorCode(t);this.visitorCode=t;Kameleoon.Internals.runtime.Visitor.currentVisit.visitorCode=t;if(this.visits)this.visits.forEach((e=>{e.visitorCode=t}));Kameleoon.Internals.runtime.Campaigns.obtainCampaignsList(0).forEach((t=>{if(void 0!==t.registeredVariationId){t.registeredVariationId=void 0;t.performVariationAssignment(!0)}}));this.saveToStoredData();Kameleoon.Gatherer.track(VisitEvent_Page);Kameleoon.Gatherer.track(VisitEvent_StaticData)}};this.updateFromStoredData=(t,e,i)=>{const o=this.obtainVisitorFromStoredData();const s=o.visits;if(!this.visitorCode){const t=this.obtainVisitorCode(i);if(t)i=!0}if(s){const t=s.slice(-1)[0].visitorCode;if(t!=this.visitorCode){const e=Kameleoon.Utils.readLocalData("kameleoonVisitorCode","LS")||Kameleoon.Utils.readLocalData("kameleoonVisitorCode","COOKIE");if(e==t||!Kameleoon.Internals.runtime.Consent.hasGlobalConsent()){this.visitorCode=t;try{delete Kameleoon.Internals.runtime.localDataMap.COOKIE["kameleoonVisitorCode"];delete Kameleoon.Internals.runtime.localDataMap.LS["kameleoonVisitorCode"]}catch(t){}}else if(e==this.visitorCode)i=!0}}if(i||t){e=!0;if(i)this.totalVisits=0}this.visits=[];if(!i&&s){s.forEach((t=>{this.addVisit(new Visit(t))}));this.totalVisits=o.totalVisits;this.timeStartedEldestVisit=o.timeStartedEldestVisit}let n=0;if(e||!this.currentVisit||this.currentVisit.isVisitFinished()){const{Device:t,storedData:e}=Kameleoon.Internals.runtime;const o=e.obtainField("Gatherer","startsOfVisitForCurrentPage");e.saveField("Gatherer","startsOfVisitForCurrentPage",o+1);Kameleoon.Internals.runtime.Gatherer.startOfVisit=!0;e.resetForStartOfVisit();e.saveField("Runtime","firstReferrerHref",Kameleoon.Gatherer.Referrer.obtainCorrected(!0)||null);e.saveField("Runtime","firstReferrersIndices",Kameleoon.Gatherer.Referrer.obtainIndexes(!0)||[null]);e.saveField("Runtime","landingKeyPagesIndices",Kameleoon.Gatherer.KeyPage.obtainIndexes()||[null]);let s;if(!this.currentVisit||i)s=0;else s=this.currentVisit.visitNumber+1;this.addVisit(new Visit({visitorCode:this.visitorCode,startDate:(new Date).getTime(),visitNumber:s,landingPageURL:Kameleoon.Utils.computeCurrentPageCleanAbsoluteURL(),Device:{browser:Kameleoon.Gatherer.Browser.obtain(),browserVersion:t.browserVersion,os:Kameleoon.Gatherer.OperatingSystem.obtain(),screenHeight:t.screenHeight,screenWidth:t.screenWidth,timeZone:Kameleoon.Gatherer.TimeZone.obtainId(),type:t.type,windowHeight:t.windowHeight,windowWidth:t.windowWidth}}));n=2}this.saveToStoredData();Kameleoon.Internals.runtime.storedData.save(n)};this.getCustomDataVisitor=()=>{const t={};const e=Kameleoon.Internals.runtime.Gatherer.configuration.customData;for(const i in Kameleoon.Internals.runtime.Visitor.currentVisit.customData){const o=e[i];if(null!=o&&!o.disabled)if("VISITOR"==o.scope){const e=Kameleoon.Internals.runtime.Visitor.currentVisit.customData[i];t[i]=e}}return t};this.registerVisitsRequestSuccess=t=>{const e=[];for(let i=0,o=t.previousVisits.length;i<o;++i)e.push(new Visit(t.previousVisits[i]));if(e.length>0){const t=t=>{if(null!=this.currentVisit){const e=this.currentVisit;const i=[];for(let t=0,e=this.visits.length-1;t<e;++t)i.push(this.visits[t]);for(let e=0,o=t.length;e<o;++e)i.push(t[e]);i.sort(((t,e)=>t.startDate-e.startDate));this.visits=[];let o=null;let s=null;for(let t=0,e=i.length;t<e;t++){const e=i[t];const n=e.visitorCode;const r=e.startDate;if(n!=o||r!=s)this.addVisit(e);o=n;s=r}this.addVisit(e)}};t(e);if(Kameleoon.Internals.runtime.Gatherer.startOfVisit&&this.visits.length>1)Kameleoon.Gatherer.track(VisitEvent_StaticData);this.saveToStoredData()}return e;};this.compareCurrentVisitFromServer=t=>{try{const e=new Set(["Device","Geolocation","Weather"]);const i=new Set(["firstReferrerHref","landingKeyPagesIndices","firstReferrersIndices"]);const o=t=>null!==t&&"object"===typeof t&&!Array.isArray(t);for(const s in t){if(e.has(s))continue;const n=this.currentVisit[s];const r=t[s];if(o(n)&&o(r))for(const t in r)if(null==n[t])n[t]=r[t];if(i.has(s)&&t[s])Kameleoon.Internals.runtime.storedData.saveField("Runtime",s,t[s])}}catch(t){}};this.performRemoteVisitorSynchronization=()=>{if(Kameleoon.Internals.runtime.enableRemoteVisitorSynchronization&&!Kameleoon.Internals.runtime.isReloaded){const t=Kameleoon.Gatherer.Referrer.obtain()&&new URL(Kameleoon.Gatherer.Referrer.obtain()).origin;const e=t!=window.location.origin;if(e||Kameleoon.Internals.configuration.useFeatureFlagCondition){const t=t=>{if(t.previousVisits&&t.previousVisits.length)this.registerVisitsRequestSuccess(t);if(t.currentVisit)this.compareCurrentVisitFromServer(t.currentVisit)};const i=Kameleoon.Internals.configuration.enableHistoryReconciliation?0:e?Kameleoon.Internals.configuration.maxNumberLocalVisits:0;this.remoteSynchronisation("visitorCode",this.visitorCode,t,i)}}};this.obtainProductData=(t,e,i,o)=>{const s=`${Kameleoon.Internals.runtime.DATA_URL}/product/${t}`;i.siteCode=Kameleoon.Internals.configuration.siteCode;i.eans=encodeURIComponent(JSON.stringify((e instanceof Array?e:[e]).map((t=>t.toString()))));Kameleoon.Utils.performBeaconServerCall(Kameleoon.Utils.addParameterToURL(s,Kameleoon.Utils.parseObjectToUrlParams(i),!1),(function(t){if(4===t.readyState&&200===t.status)o(JSON.parse(t.response||"{}"))}),(function(t){console.error(t)}));};this.obtainIdentifierValue=()=>{let t=null;return t||this.visitorCode};this.visits=[];this.currentVisit=null;this.totalVisits=0;this.updateFromStoredData(!1);Object.defineProperty(this,"customData",{enumerable:!0,get:()=>this.getCustomDataVisitor()})}saveFieldToStoredData(t,e){Kameleoon.Internals.runtime.storedData.Visitor[t]=e}remoteSynchronisation(t,e,i,o){if("string"==typeof e&&e.length>0){const s={siteCode:Kameleoon.Internals.configuration.siteCode,currentVisit:"customData"!==t,format:"ENGINE",maxNumberPreviousVisits:"number"==typeof o?o:Kameleoon.Internals.configuration.maxNumberLocalVisits,version:3};"customData"==t&&(s.mappingValue=e);"visitorCode"==t&&(s.visitorCode=e);Kameleoon.Internals.runtime.remoteSynchronisationProcess=!0;Kameleoon.Internals.runtime.RequestManager.addCallback((()=>{Kameleoon.Internals.runtime.RequestManager.obtainRemoteSynchronizationData(Kameleoon.Utils.parseObjectToUrlParams(s),(t=>{if(4==t.readyState&&200==t.status){const e=JSON.parse(t.responseText);i&&i(e);Kameleoon.Utils.sendKameleoonCustomEvent.call(window,"RemoteSynchronizationPerformed",{visitsFromServer:e});delete Kameleoon.Internals.runtime.remoteSynchronisationProcess}}))}))}}}Visitor.VISITOR_CODE_LENGTH=16;Visitor.INFLUENCE_DELAY=1e3*60*60*24*7;try{window.Kameleoon=new KameleoonEngine}catch(o){console.log(o)}
Kameleoon.Internals = {"configuration":{"API_HOST_NAME":"api","APP_HOST_NAME":"app","BACK_OFFICE_HOST_NAME":"old","EDITOR_SRC":"src/main.ts","STATIC_IMAGES_URL":"//static.kameleoon.com/js/editor/source/images/","BASE_EDITOR_URL":"//static.kameleoon.com/js/editor/","NEW_EDITOR_URL":"//graphical-editor.kameleoon.com","EDITOR_HOST_NAME":"editor","DOMAIN":"kameleoon.com","SITE_RESOURCES_DOMAIN":"kameleoon.io","GUI_ESTIMATED_LOADING_TIME":3000,"IMAGE_PATH":"https://6p840t8orn.kameleoon.io/images/","PROXY_HOST_NAME":"proxy","QOOXDOO_ESTIMATED_LOADING_TIME":2000,"SERVER_CALL_ESTIMATED_LOADING_TIME":500,"STATIC_DIRECT_HOST_NAME":"static-direct","STATIC_HOST_NAME":"static","environment":"PRODUCTION","staticURL":"//static.kameleoon.eu/","maxNumberLocalVisits":25,"memberCode":"0","siteCode":"6p840t8orn","abtestConsent":"OFF","abtestConsentOptout":"RUN","beforeAbtestConsent":"ALL","beforePersonalizationConsent":"ALL","personalizationConsent":"OFF","personalizationConsentOptout":"RUN","personalizationsDeviation":1,"experiments":[{"id":279551,"name":"KAM_AA_TEST_BR","baseURL":"https://www.kaspersky.com.br/","experimentAction":true,"executeCodeForReference":true,"forcedTechnical":true,"dateModified":1738158302000,"dateStatusModified":1737125241000,"goals":[362439,362126,359383,362438],"deviation":{"0":0.5,"1043189":0.5},"variations":[{"name":"Reference","id":0,"deviation":0.5},{"name":"Variation 1","id":1043189,"deviation":0.5}],"targetingSegmentId":301056,"attributionWindow":"604800000","kameleoonTracking":{"mainGoalId":362439},"customIntegrations":["Yandex Metrica Global","GA custom integration"]},{"id":308348,"name":"CO-3982 - LP_BR_VPN_CompetitorsCT","baseURL":"https://www.kaspersky.com.br/lp/vpn-comparison","experimentAction":true,"executeCodeForReference":true,"forcedTechnical":true,"dateModified":1758175813000,"dateStatusModified":1758175813000,"goals":[362439,362126,362438,379195],"deviation":{"0":0,"1113931":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":1113931,"deviation":1}],"targetingSegmentId":364767,"attributionWindow":"604800000","winningVariationId":1113931,"kameleoonTracking":{"mainGoalId":362439},"customIntegrations":["Glassbox 2","Glassbox Custom Integration","Yandex Metrica Global","GA custom integration"],"glassboxTracking":true,"air360Tracking":true},{"id":315513,"name":"AA_BR_LP_Special_Offer_Premium_","baseURL":"https://www.kaspersky.com.br/lp/special-offer-premium","experimentAction":true,"forcedTechnical":true,"dateModified":1751445773000,"dateStatusModified":1751371584000,"goals":[362438,379195,362126,359383,362439],"deviation":{"0":0.5,"1129946":0.5},"variations":[{"name":"Reference","id":0,"deviation":0.5},{"name":"Variation 1","id":1129946,"deviation":0.5}],"targetingSegmentId":338906,"attributionWindow":"604800000","kameleoonTracking":{"mainGoalId":362438},"customIntegrations":["Glassbox Custom Integration","Yandex Metrica Global","GA custom integration"],"air360Tracking":true},{"id":322966,"name":"CO-3985 - MO_BR_Cart_1ColSummary[fixed]","baseURL":"https://www.kaspersky.com.br/","experimentAction":true,"executeCodeForReference":true,"forcedTechnical":true,"dateModified":1757399360000,"dateStatusModified":1757399360000,"goals":[362126,379195,362439,362438,359383],"deviation":{"0":0,"1146219":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":1146219,"deviation":1}],"targetingSegmentId":348649,"attributionWindow":"604800000","winningVariationId":1146219,"kameleoonTracking":{"mainGoalId":362126},"customIntegrations":["Yandex test integration (CA)","Glassbox 2","Glassbox Custom Integration","Glassbox Event","Yandex Metrica Global"],"glassboxTracking":true,"air360Tracking":true},{"id":323195,"name":"CO-4072 - LP_BR_SpecialOffer_NewScript - LP ONLY","baseURL":"https://www.kaspersky.com.br/lp/special-offer","experimentAction":true,"executeCodeForReference":true,"forcedTechnical":true,"dateModified":1757001067000,"dateStatusModified":1755620847000,"goals":[362126,379195,362439,362438,359383],"deviation":{"0":0,"1146903":1},"variations":[{"name":"Reference","id":0,"deviation":0},{"name":"Variation 1","id":1146903,"deviation":1}],"targetingSegmentId":349422,"attributionWindow":"604800000","winningVariationId":1146903,"kameleoonTracking":{"mainGoalId":362126},"customIntegrations":["Yandex test integration (CA)","Glassbox 2","Glassbox Event","Yandex Metrica Global","GA custom integration"],"glassboxTracking":true,"air360Tracking":true},{"id":324752,"name":"CO-4148 MO_BR_Cart_NewMobileScript","baseURL":"https://cart.kaspersky.com.br/checkout/add?cartid=f6446607-63e0-43a2-af82-74b7657f2840&cjevent=ed9e598c9d1411f082bc01c60a18b8f7&demand_level=2&initial_license_generation=0&layout=sub&lockselector=true&removaloption=false&spage=product__premium&theme=sub&typnews=br_b2b-eg-lf_acq_ona_dis_bra_onl_b2b_criteo_ban_","experimentAction":true,"executeCodeForReference":true,"forcedTechnical":true,"dateModified":1759219806000,"dateStatusModified":1759219806000,"goals":[362126,362439,379195,362438,359383],"deviation":{"0":0.5,"1150317":0.5},"variations":[{"name":"Reference","id":0,"deviation":0.5},{"name":"Variation 1","id":1150317,"deviation":0.5}],"targetingSegmentId":369012,"attributionWindow":"604800000","kameleoonTracking":{"mainGoalId":362126},"customIntegrations":["Yandex test integration (CA)","Glassbox 2","YM Test Integration","Glassbox Custom Integration","Glassbox Event","Yandex Metrica Global","GA custom integration"],"glassboxTracking":true,"air360Tracking":true},{"id":329440,"name":"CO-4181 | BR_VSB_KSOS_NewDesign","baseURL":"https://www.kaspersky.com.br/small-business-security","experimentAction":true,"javaScriptCode":"window.__BR_VSB_KSOS_NewDesign=(n,e)=>{const t=n=>new Promise((e=>{const t=()=>{const a=n();a?e(a):requestAnimationFrame(t)};requestAnimationFrame(t)})),a=e=>{n.__KASPERSKY__ST__REDUX__STORE__.dispatch({type:\"SWITCHER/SET_DISPLAY\",payload:e})},o=e=>{const t=n.document.createElement(\"style\");t.innerHTML=e,n.document.head.appendChild(t)};n.__BR_VSB_KSOS_NewDesign__loaded__||(n.__BR_VSB_KSOS_NewDesign__loaded__=!0,t((()=>n.__KASPERSKY__ST__REDUX__STORE__READY__&&n.__KASPERSKY__ST__CHANGE_PAGE_PROPS_READY__)).then((()=>{const{pathname:e}=n.location,_=\"/small-business-security/small-office-security\"===e;\"/small-business-security\"===e&&(a({MastheadOpenBuyblock_hidden_co_4181:!0,DetailAndMedia_hidden_co_4181:!0,ButtonedCarousel_hidden_co_4181:!0,TextAccordion_hidden_co_4181:!0,ProductCards_hidden_co_4181:!0,IconCards_hidden_co_4181:!0,ImageSplit_hidden_co_4181:!0,ComparisonTable2023_hidden_co_4181:!0,MastheadOpenBuyblock:!1,ContentWithCSS:!1,IconCards:!1,MediaCardsFullwidth:!1,AlternatingFeatures:!1,ComparisonTable2023:!1,ContentWithCSS:!1,MediaCardsFullwidth:!1,ProductCards:!1,BodyContent:!1}),o('\\n        [data-at-selector-plugin-name=\"@kl.content.ContentWithCss\"][data-at-selector-content-key=\"business-banner\"] { \\n          display: none !important; \\n        }\\n    ')),_&&(a({MastheadBuyblock2_hidden_co_4181:!0,BodyImage_hidden_co_4181:!0,AwardsAndPerformance_hidden_co_4181:!0,SideBySide_hidden_co_4181:!0,BodyImage_hidden_co_4181:!0,MediaCards_hidden_co_4181:!0,DetailAndMedia_hidden_co_4181:!0,HorizontalReviews_hidden_co_4181:!0,ComparisonTable2023_hidden_co_4181:!0,FocusedAction_hidden_co_4181:!0,IconCards_hidden_co_4181:!0,MastheadBuyblock2:!1,AwardsAndPerformance:!1,ImageInfoStrip:!1,ButtonedCarousel:!1,AlternatingFeatures:!1,IconedFeatures:!1,HorizontalReviews:!1,ComparisonTable2023:!1,MediaCardsFullwidth:!1,IconCards:!1}),t((()=>__KASPERSKY__ST__REDUX__STORE__.getState().switcher.display)).then((()=>{const n=document.querySelector('[class*=\"BodyImage_hasContentAbove__\"]'),e=document.createElement(\"a\");e.innerHTML=\"Saiba mais\",e.setAttribute(\"href\",\"#features\"),e.setAttribute(\"class\",\"learn-button\"),n.appendChild(e)})),o('\\n            a.learn-button {\\n                position: absolute;\\n                bottom: 32px;\\n                border: 1px solid #00A88E;\\n                color: #34CAB3;\\n                text-decoration: none;\\n                height: 56px;\\n                padding: 14.5px 32px;\\n                border-radius: 4px;\\n                background: rgba(255, 255, 255, 0.80);\\n                backdrop-filter: blur(2px);\\n                font-size: 18px;\\n                font-style: normal;\\n                font-weight: 600;\\n                text-align: center;\\n            }\\n            [data-at-selector-plugin-name=\"@kl.content.B2BBaseline.MastheadBuyBlock2\"] [class*=\"BuyBlock_disclaimer__\"] {\\n              color: #444 !important;\\n            }\\n            [data-at-selector-plugin-name=\"@kl.content.Baseline.IconCards\"] [class*=\".IconCard_iconCard__\"] {\\n              justify-content: center !important;\\n            }\\n            [data-at-selector-plugin-name=\"@kl.content.Baseline.IconCards\"] [class*=\"IconCard_iconCardContent__\"] {\\n              flex-direction: row !important;\\n            }\\n            [data-at-selector-plugin-name=\"@kl.content.Baseline.IconCards\"] [class*=\"IconCard_iconCardCtaWrapper__\"] {\\n              display: none !important;\\n            }\\n          @media only screen and (min-width: 768px) {\\n                a.learn-button {\\n                    bottom: 56px !important;\\n                }\\n            }\\n            @media only screen and (min-width: 1232px) {\\n                a.learn-button {\\n                    bottom: 121px !important;\\n                    width: 202px;\\n                }\\n            }\\n           @media only screen and (max-width: 767px) {\\n                [data-at-selector-plugin-name=\"@kl.content.B2BBaseline.MastheadBuyBlock2\"] [class*=\"CompatibleBlock_iconWrapper__\"] {\\n                  color: #444 !important;\\n                }\\n                [data-at-selector-plugin-name=\"@kl.content.B2BBaseline.MastheadBuyBlock2\"] [class*=\"CompatibleBlock_compatibleWithText__\"] {\\n                  color: #444 !important;\\n                }\\n                [data-at-selector-plugin-name=\"@kl.content.B2BBaseline.MastheadBuyBlock2\"] [class*=\"MastHead_text__\"] {\\n                  color: #444 !important;\\n                }\\n                [data-at-selector-plugin-name=\"@kl.content.B2BBaseline.MastheadBuyBlock2\"] [class*=\"MastHead_title__\"] {\\n                  color: #444 !important;\\n                }\\n                [data-at-selector-plugin-name=\"@kl.content.B2BBaseline.MastheadBuyBlock2\"] [class*=\"Product_mainTitle__\"] {\\n                  color: #444 !important;\\n                }\\n                [data-at-selector-plugin-name=\"@kl.content.B2BBaseline.MastheadBuyBlock2\"] [class*=\"Product_kaspersky__\"] {\\n                  color: #444 !important;\\n                }\\n           }\\n    '))})))};","forcedTechnical":true,"dateModified":1758016487000,"dateStatusModified":1758016487000,"goals":[],"deviation":{"0":0.5,"1162592":0.5},"variations":[{"name":"Reference","id":0,"deviation":0.5},{"name":"B_NewDesign","id":1162592,"deviation":0.5}],"targetingSegmentId":359615,"attributionWindow":"604800000","customIntegrations":["Glassbox 2","Glassbox Custom Integration","Yandex Metrica Global","GA custom integration"],"air360Tracking":true}],"personalizations":[],"targetingSegments":[{"id":301056,"name":"Segment for Test 1","tree":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"https\\://www\\.kaspersky\\.com\\.br//?([\\?#].*)?$","include":true}}},{"id":338906,"name":"A segment for AA_BR_LP_Special_Offer_Premium_","tree":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)lp/special-offer-premium(.*)","include":true}}},{"id":331439,"name":"Desktop","tree":{"orOperator":false,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"DEVICE_TYPE","disabled":false,"weight":1,"value":"DESKTOP","include":true}},"rightChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)/checkout(.*)","include":true}}}},{"id":348649,"name":"A segment for CO-3985 - MO_BR_Cart_1ColSummary","tree":{"orOperator":false,"orGuiLevel":1,"leftChild":{"orOperator":false,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)https\\://cart\\.kaspersky\\.com\\.br/checkout/add\\?(.*)","include":true}},"rightChild":{"targetingCondition":{"type":"SEGMENT","disabled":false,"weight":1,"include":true,"linkedSegmentId":331439}}},"rightChild":{"orOperator":false,"orGuiLevel":1,"leftChild":{"orOperator":false,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)layout\\=trial(.*)","include":false}},"rightChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)layout\\=anon(.*)","include":false}}},"rightChild":{"targetingCondition":{"type":"JS_CODE","disabled":false,"weight":1,"value":"return window.__INITIAL_STATE__.cart.scenario === 'acquisition'","include":true,"domReady":true}}}}},{"id":349422,"name":"LP_BR_SpecialOffer_NewScript [DEV]","tree":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)https\\://www\\.kaspersky\\.com\\.br/lp/special-offer(.*)","include":true}}},{"id":359615,"name":"A segment for CO-4181 | BR_VSB_KSOS_NewDesign","tree":{"orOperator":true,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)https\\://www\\.kaspersky\\.com\\.br/small-business-security(.*)","include":true}},"rightChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)https\\://www\\.kaspersky\\.com\\.br/small-business-security/small-office-security(.*)","include":true}}}},{"id":364767,"name":"A segment for CO-3982 - LP_BR_VPN_CompetitorsCT","tree":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)www\\.kaspersky\\.com\\.br/lp/vpn-comparison(.*)","include":true}}},{"id":369012,"name":"A segment for CO-4148 MO_BR_Cart_NewMobileScript","tree":{"orOperator":false,"orGuiLevel":1,"leftChild":{"orOperator":false,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"DEVICE_TYPE","disabled":false,"weight":1,"value":"PHONE","include":true}},"rightChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)cart\\.kaspersky\\.com\\.br/checkout/add\\?(.*)","include":true}}},"rightChild":{"orOperator":false,"orGuiLevel":1,"leftChild":{"orOperator":false,"orGuiLevel":1,"leftChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)layout\\=trial(.*)","include":false}},"rightChild":{"targetingCondition":{"type":"PAGE_URL","disabled":false,"weight":1,"value":"(.*)layout\\=anon(.*)","include":false}}},"rightChild":{"targetingCondition":{"type":"JS_CODE","disabled":false,"weight":1,"value":"return window.__INITIAL_STATE__.cart.scenario === 'acquisition' || window.__INITIAL_STATE__.cart.scenario === 'retention';","include":true,"domReady":true}}}}}],"targetingTriggers":[],"variations":[{"name":"Variation 1","id":1043189,"css":"","elementSets":[]},{"name":"Variation 1","id":1113931,"css":".kamKaspersky_vpn-comparison-container{font-family:KasperskySansDisplay;background-color:#1d1d1b;color:#fff;line-height:1.6;padding:20px;min-height:100vh}.kamKaspersky_container{max-width:1440px;margin:0 auto;padding-bottom:100px}.kamKaspersky_vpn-comparison-container h1{font-size:2.5rem;font-weight:700;margin-bottom:10px;text-align:center}.kamKaspersky_vpn-comparison-container .subtitle{font-size:21px;color:#fff;opacity:.8;text-align:center;margin-bottom:40px}.kamKaspersky_comparison-table{display:grid;grid-template-columns:1fr;border-radius:10px;overflow:hidden;margin-bottom:30px}.kamKaspersky_table-row{display:grid;grid-template-columns:1.5fr repeat(5,1fr);background-color:transparent}.kamKaspersky_table-row:nth-child(2n){background-color:#292929;border-radius:16px}.kamKaspersky_table-row:first-child{background-color:transparent}.kamKaspersky_table-row:first-child>.kamKaspersky_provider-cell.kamKaspersky{border-top-left-radius:16px;border-top-right-radius:16px}.kamKaspersky_table-row:last-child>.kamKaspersky_provider-cell.kamKaspersky{border-bottom-left-radius:16px;border-bottom-right-radius:16px}.kamKaspersky_logo-container{display:flex;align-items:center;justify-content:center;text-align:left;gap:4px}.kamKaspersky_logo-container img{width:50px}.kamKaspersky_header-row{font-weight:600;font-size:18px;line-height:22px}.kamKaspersky_feature-cell,.kamKaspersky_provider-cell{padding:15px;display:flex;align-items:center;justify-content:center;text-align:center}.kamKaspersky_feature-cell{justify-content:flex-start;padding-left:20px;text-align:left}.kamKaspersky_feature-name{font-size:18px;font-weight:500}.kamKaspersky_provider-cell.kamKaspersky{background-color:#fff;color:#333}.kamKaspersky_value{font-size:18px;font-weight:500}.limited-text{display:flex;flex-direction:column;align-items:center;gap:5px;font-size:18px}.small-text{font-size:14px;opacity:.7;max-width:145px}.special-text{font-size:18px;font-weight:500;text-align:center}.kamKaspersky_buy-button{background-color:#dd2635;color:#fff;border:none;padding:10px 20px;border-radius:4px;font-size:18px;font-weight:600;cursor:pointer;transition:background-color .3s}.kamKaspersky_mobile-navigation{display:none;justify-content:center;margin-bottom:20px}.kamKaspersky_nav-dots{display:flex;gap:10px}.kamKaspersky_nav-dot{width:16px;height:16px;border-radius:50%;border:#23d1ae 2px solid;background-color:transparent;cursor:pointer;transition:background-color .3s}.kamKaspersky_nav-dot.kamKaspersky_active{border:#23d1ae 1px solid;background-color:#23d1ae}.kamKaspersky_nav-dot:hover{background-color:#23d1ae;opacity:.8}.kamKaspersky_legal-container{display:flex;flex-direction:column;align-items:center;justify-content:center}.kamKaspersky_legal-container *{font-size:14px;color:#f2f2f2;text-align:center;margin-bottom:10px;padding:0 20px}@media (min-width:769px){.kamKaspersky_table-row{grid-template-columns:1.5fr repeat(5,1fr)}}@media (max-width:1024px) and (min-width:769px){.kamKaspersky_container{height:100%}.kamKaspersky_table-row{grid-template-columns:1.2fr repeat(5,1fr)}.kamKaspersky_feature-name,.kamKaspersky_value{font-size:14px}.special-text{font-size:14px}.small-text{font-size:12px}.kamKaspersky_buy-button{padding:5px 8px;font-size:14px}}@media (max-width:1295px) and (min-width:1025px){.kamKaspersky_buy-button{padding:5px 8px;font-size:14px}}@media (max-width:920px) and (min-width:835px){.kamKaspersky_buy-button{padding:5px 8px;font-size:12px!important}}@media (max-width:834px) and (min-width:769px){.kamKaspersky_buy-button{padding:5px 8px;font-size:10px!important}}@media (max-width:768px){.kamKaspersky_container{height:100%}.kamKaspersky_vpn-comparison-container h1{font-size:1.8rem}.kamKaspersky_vpn-comparison-container .subtitle{font-size:1rem}.kamKaspersky_mobile-navigation{display:flex}.kamKaspersky_buy-button{padding:5px 8px;font-size:14px}.kamKaspersky_table-row{grid-template-columns:1fr 1fr}.kamKaspersky_table-row .kamKaspersky_provider-cell{display:none}.kamKaspersky_table-row .kamKaspersky_provider-cell.kamKaspersky_active{display:flex}.kamKaspersky_feature-name,.kamKaspersky_value{font-size:14px}.special-text{font-size:14px}.small-text{font-size:12px}}@media (max-width:480px){.kamKaspersky_container{height:100%}.kamKaspersky_vpn-comparison-container h1{font-size:1.5rem}.kamKaspersky_vpn-comparison-container .subtitle{font-size:.9rem}.kamKaspersky_feature-name,.kamKaspersky_value{font-size:14px}.special-text{font-size:14px}.kamKaspersky_buy-button{padding:5px 8px;font-size:14px}.small-text{font-size:12px}}@media (max-width:768px){.kamKaspersky_provider-cell:not(.kamKaspersky_active){display:none!important}}","elementSets":[],"javaScriptCode":{"code":"const kamKasperskyHtml='\\n<div class=\"kamKaspersky_container\">\\n  <h1> por isso que voc deve escolher o Kaspersky VPN</h1>\\n  <p class=\"subtitle\"> assim que nos comparamos com outros provedores de VPN.</p>\\n\\n  <div class=\"kamKaspersky_comparison-table\" id=\"comparisonTable\">\\n    <div class=\"kamKaspersky_table-row kamKaspersky_header-row\">\\n      <div class=\"kamKaspersky_feature-cell\"></div>\\n      <div class=\"kamKaspersky_provider-cell kamKaspersky\" data-provider=\"kaspersky\">\\n        <div class=\"kamKaspersky_logo-container\">\\n          <img src=\"https://6p840t8orn.kameleoon.io/images/29315-22a45666-095a-4b13-b8ba-e637b4e5d388.png\" alt=\"Kaspersky VPN\" />\\n          Kaspersky<br/>VPN\\n        </div>\\n      </div>\\n      <div class=\"kamKaspersky_provider-cell\" data-provider=\"norton\" style=\"color:#FFE01A\">Norton</div>\\n      <div class=\"kamKaspersky_provider-cell\" data-provider=\"nordvpn\" style=\"color:#4580FF\">NordVPN</div>\\n      <div class=\"kamKaspersky_provider-cell\" data-provider=\"surfshark\" style=\"color:#1EBFBF\">Surfshark</div>\\n      <div class=\"kamKaspersky_provider-cell\" data-provider=\"protonvpn\" style=\"color:#6D4AFF\">ProtonVPN</div>\\n    </div>\\n\\n\\x3c!-- 1. Servidores globais e locais --\\x3e\\n<div class=\"kamKaspersky_table-row\">\\n  <div class=\"kamKaspersky_feature-cell\">\\n    <div class=\"kamKaspersky_feature-name\">Servidores globais e locais em 6 continentes</div>\\n  </div>\\n  <div class=\"kamKaspersky_provider-cell kamKaspersky\" data-provider=\"kaspersky\">\\n    <img src=\"https://6p840t8orn.kameleoon.io/images/29315-177f8c64-cfa4-49b0-bb78-795dfb6aa4bb.png\" alt=\"Yes\"/>\\n  </div>\\n  \\x3c!--  Swapped content: Norton now shows \"Limitada\" --\\x3e\\n  <div class=\"kamKaspersky_provider-cell\" data-provider=\"norton\">\\n    <div class=\"limited-text\">\\n      <div>Limitada</div>\\n      <div class=\"small-text\">Pode afetar a velocidade e a disponibilidade</div>\\n    </div>\\n  </div>\\n  \\x3c!--  Swapped content: NordVPN now shows \"Yes\" --\\x3e\\n  <div class=\"kamKaspersky_provider-cell\" data-provider=\"nordvpn\">\\n    <img src=\"https://6p840t8orn.kameleoon.io/images/29315-177f8c64-cfa4-49b0-bb78-795dfb6aa4bb.png\" alt=\"Yes\"/>\\n  </div>\\n  <div class=\"kamKaspersky_provider-cell\" data-provider=\"surfshark\">\\n    <img src=\"https://6p840t8orn.kameleoon.io/images/29315-177f8c64-cfa4-49b0-bb78-795dfb6aa4bb.png\" alt=\"Yes\"/>\\n  </div>\\n  <div class=\"kamKaspersky_provider-cell\" data-provider=\"protonvpn\">\\n    <img src=\"https://6p840t8orn.kameleoon.io/images/29315-177f8c64-cfa4-49b0-bb78-795dfb6aa4bb.png\" alt=\"Yes\"/>\\n  </div>\\n</div>\\n\\n    \\x3c!-- 2. Conexo 10 Gbps --\\x3e\\n    <div class=\"kamKaspersky_table-row\">\\n      <div class=\"kamKaspersky_feature-cell\">\\n        <div class=\"kamKaspersky_feature-name\">Conexo de 10 Gbps</div>\\n      </div>\\n      <div class=\"kamKaspersky_provider-cell kamKaspersky\" data-provider=\"kaspersky\">\\n        <img src=\"https://6p840t8orn.kameleoon.io/images/29315-177f8c64-cfa4-49b0-bb78-795dfb6aa4bb.png\" alt=\"Yes\"/>\\n      </div>\\n      <div class=\"kamKaspersky_provider-cell\" data-provider=\"norton\">\\n        <img src=\"https://6p840t8orn.kameleoon.io/images/29315-1e58b2cb-1332-4e18-8927-7ef8302b98d9.png\" alt=\"No\"/>\\n      </div>\\n      <div class=\"kamKaspersky_provider-cell\" data-provider=\"nordvpn\">\\n        <img src=\"https://6p840t8orn.kameleoon.io/images/29315-177f8c64-cfa4-49b0-bb78-795dfb6aa4bb.png\" alt=\"Yes\"/>\\n      </div>\\n      <div class=\"kamKaspersky_provider-cell\" data-provider=\"surfshark\">\\n        <img src=\"https://6p840t8orn.kameleoon.io/images/29315-177f8c64-cfa4-49b0-bb78-795dfb6aa4bb.png\" alt=\"Yes\"/>\\n      </div>\\n      <div class=\"kamKaspersky_provider-cell\" data-provider=\"protonvpn\">\\n        <img src=\"https://6p840t8orn.kameleoon.io/images/29315-177f8c64-cfa4-49b0-bb78-795dfb6aa4bb.png\" alt=\"Yes\"/>\\n      </div>\\n    </div>\\n    \\x3c!-- 3. Protocolo proprietrio auditvel --\\x3e\\n    <div class=\"kamKaspersky_table-row\">\\n      <div class=\"kamKaspersky_feature-cell\">\\n        <div class=\"kamKaspersky_feature-name\">Protocolo proprietrio auditvel de alta velocidade e segurana</div>\\n      </div>\\n      <div class=\"kamKaspersky_provider-cell kamKaspersky\" data-provider=\"kaspersky\">\\n        <div class=\"special-text\">Projetado para velocidade, segurana e eficincia</div>\\n      </div>\\n      <div class=\"kamKaspersky_provider-cell\" data-provider=\"norton\">\\n        <img src=\"https://6p840t8orn.kameleoon.io/images/29315-1e58b2cb-1332-4e18-8927-7ef8302b98d9.png\" alt=\"No\"/>\\n      </div>\\n      <div class=\"kamKaspersky_provider-cell\" data-provider=\"nordvpn\">\\n        <img src=\"https://6p840t8orn.kameleoon.io/images/29315-1e58b2cb-1332-4e18-8927-7ef8302b98d9.png\" alt=\"No\"/>\\n      </div>\\n      <div class=\"kamKaspersky_provider-cell\" data-provider=\"surfshark\">\\n        <img src=\"https://6p840t8orn.kameleoon.io/images/29315-1e58b2cb-1332-4e18-8927-7ef8302b98d9.png\" alt=\"No\"/>\\n      </div>\\n      <div class=\"kamKaspersky_provider-cell\" data-provider=\"protonvpn\">\\n        <img src=\"https://6p840t8orn.kameleoon.io/images/29315-1e58b2cb-1332-4e18-8927-7ef8302b98d9.png\" alt=\"No\"/>\\n      </div>\\n    </div>\\n\\n    \\x3c!-- 4. VPN adaptvel --\\x3e\\n    <div class=\"kamKaspersky_table-row\">\\n      <div class=\"kamKaspersky_feature-cell\">\\n        <div class=\"kamKaspersky_feature-name\">VPN adaptvel com proteo inteligente</div>\\n      </div>\\n      <div class=\"kamKaspersky_provider-cell kamKaspersky\" data-provider=\"kaspersky\">\\n        <img src=\"https://6p840t8orn.kameleoon.io/images/29315-177f8c64-cfa4-49b0-bb78-795dfb6aa4bb.png\" alt=\"Yes\"/>\\n      </div>\\n      <div class=\"kamKaspersky_provider-cell\" data-provider=\"norton\">\\n        <img src=\"https://6p840t8orn.kameleoon.io/images/29315-1e58b2cb-1332-4e18-8927-7ef8302b98d9.png\" alt=\"No\"/>\\n      </div>\\n      <div class=\"kamKaspersky_provider-cell\" data-provider=\"nordvpn\">\\n        <img src=\"https://6p840t8orn.kameleoon.io/images/29315-1e58b2cb-1332-4e18-8927-7ef8302b98d9.png\" alt=\"No\"/>\\n      </div>\\n      <div class=\"kamKaspersky_provider-cell\" data-provider=\"surfshark\">\\n        <img src=\"https://6p840t8orn.kameleoon.io/images/29315-1e58b2cb-1332-4e18-8927-7ef8302b98d9.png\" alt=\"No\"/>\\n      </div>\\n      <div class=\"kamKaspersky_provider-cell\" data-provider=\"protonvpn\">\\n        <img src=\"https://6p840t8orn.kameleoon.io/images/29315-1e58b2cb-1332-4e18-8927-7ef8302b98d9.png\" alt=\"No\"/>\\n      </div>\\n    </div>\\n\\n    \\x3c!-- 5. VPN dupla com criptografia --\\x3e\\n    <div class=\"kamKaspersky_table-row\">\\n      <div class=\"kamKaspersky_feature-cell\">\\n        <div class=\"kamKaspersky_feature-name\">VPN dupla com criptografia instalada</div>\\n      </div>\\n      <div class=\"kamKaspersky_provider-cell kamKaspersky\" data-provider=\"kaspersky\">\\n        <img src=\"https://6p840t8orn.kameleoon.io/images/29315-177f8c64-cfa4-49b0-bb78-795dfb6aa4bb.png\" alt=\"Yes\"/>\\n      </div>\\n      <div class=\"kamKaspersky_provider-cell\" data-provider=\"norton\">\\n        <img src=\"https://6p840t8orn.kameleoon.io/images/29315-1e58b2cb-1332-4e18-8927-7ef8302b98d9.png\" alt=\"No\"/>\\n      </div>\\n      <div class=\"kamKaspersky_provider-cell\" data-provider=\"nordvpn\">\\n        <img src=\"https://6p840t8orn.kameleoon.io/images/29315-1e58b2cb-1332-4e18-8927-7ef8302b98d9.png\" alt=\"No\"/>\\n      </div>\\n      <div class=\"kamKaspersky_provider-cell\" data-provider=\"surfshark\">\\n        <img src=\"https://6p840t8orn.kameleoon.io/images/29315-1e58b2cb-1332-4e18-8927-7ef8302b98d9.png\" alt=\"No\"/>\\n      </div>\\n      <div class=\"kamKaspersky_provider-cell\" data-provider=\"protonvpn\">\\n        <img src=\"https://6p840t8orn.kameleoon.io/images/29315-1e58b2cb-1332-4e18-8927-7ef8302b98d9.png\" alt=\"No\"/>\\n      </div>\\n    </div>\\n    <div class=\"kamKaspersky_table-row\">\\n  <div class=\"kamKaspersky_feature-cell\">\\n    <div class=\"kamKaspersky_feature-name\">\\n      Servidores otimizados com baixa latncia para jogadores\\n    </div>\\n  </div>\\n  <div class=\"kamKaspersky_provider-cell kamKaspersky\" data-provider=\"kaspersky\">\\n    <img src=\"https://6p840t8orn.kameleoon.io/images/29315-177f8c64-cfa4-49b0-bb78-795dfb6aa4bb.png\" alt=\"Yes\"/>\\n  </div>\\n  <div class=\"kamKaspersky_provider-cell\" data-provider=\"norton\">\\n    <img src=\"https://6p840t8orn.kameleoon.io/images/29315-1e58b2cb-1332-4e18-8927-7ef8302b98d9.png\" alt=\"No\"/>\\n  </div>\\n  <div class=\"kamKaspersky_provider-cell\" data-provider=\"nordvpn\">\\n    <img src=\"https://6p840t8orn.kameleoon.io/images/29315-1e58b2cb-1332-4e18-8927-7ef8302b98d9.png\" alt=\"No\"/>\\n  </div>\\n  <div class=\"kamKaspersky_provider-cell\" data-provider=\"surfshark\">\\n    <img src=\"https://6p840t8orn.kameleoon.io/images/29315-1e58b2cb-1332-4e18-8927-7ef8302b98d9.png\" alt=\"No\"/>\\n  </div>\\n  <div class=\"kamKaspersky_provider-cell\" data-provider=\"protonvpn\">\\n    <img src=\"https://6p840t8orn.kameleoon.io/images/29315-1e58b2cb-1332-4e18-8927-7ef8302b98d9.png\" alt=\"No\"/>\\n  </div>\\n</div>\\n\\n    \\x3c!-- 6. A VPN mais testada e certificada --\\x3e\\n    <div class=\"kamKaspersky_table-row\">\\n      <div class=\"kamKaspersky_feature-cell\">\\n        <div class=\"kamKaspersky_feature-name\">A VPN mais testada e certificada do mercado*</div>\\n      </div>\\n      <div class=\"kamKaspersky_provider-cell kamKaspersky\" data-provider=\"kaspersky\">\\n        <img src=\"https://6p840t8orn.kameleoon.io/images/29315-177f8c64-cfa4-49b0-bb78-795dfb6aa4bb.png\" alt=\"Yes\"/>\\n      </div>\\n      <div class=\"kamKaspersky_provider-cell\" data-provider=\"norton\">\\n        <img src=\"https://6p840t8orn.kameleoon.io/images/29315-1e58b2cb-1332-4e18-8927-7ef8302b98d9.png\" alt=\"No\"/>\\n      </div>\\n      <div class=\"kamKaspersky_provider-cell\" data-provider=\"nordvpn\">\\n        <img src=\"https://6p840t8orn.kameleoon.io/images/29315-1e58b2cb-1332-4e18-8927-7ef8302b98d9.png\" alt=\"No\"/>\\n      </div>\\n      <div class=\"kamKaspersky_provider-cell\" data-provider=\"surfshark\">\\n        <img src=\"https://6p840t8orn.kameleoon.io/images/29315-1e58b2cb-1332-4e18-8927-7ef8302b98d9.png\" alt=\"No\"/>\\n      </div>\\n      <div class=\"kamKaspersky_provider-cell\" data-provider=\"protonvpn\">\\n        <img src=\"https://6p840t8orn.kameleoon.io/images/29315-1e58b2cb-1332-4e18-8927-7ef8302b98d9.png\" alt=\"No\"/>\\n      </div>\\n    </div>\\n    \\x3c!-- 7.  Verso para Windows (reordered here) --\\x3e\\n    <div class=\"kamKaspersky_table-row\">\\n      <div class=\"kamKaspersky_feature-cell\">\\n        <div class=\"kamKaspersky_feature-name\">Verso para Windows</div>\\n      </div>\\n      <div class=\"kamKaspersky_provider-cell kamKaspersky\" data-provider=\"kaspersky\">\\n        <div class=\"kamKaspersky_value\">21.20.8.505</div>\\n      </div>\\n      <div class=\"kamKaspersky_provider-cell\" data-provider=\"norton\">\\n        <div class=\"kamKaspersky_value\">25.2.9898</div>\\n      </div>\\n      <div class=\"kamKaspersky_provider-cell\" data-provider=\"nordvpn\">\\n        <div class=\"kamKaspersky_value\">7.36.1.0</div>\\n      </div>\\n      <div class=\"kamKaspersky_provider-cell\" data-provider=\"surfshark\">\\n        <div class=\"kamKaspersky_value\">5.14.2999</div>\\n      </div>\\n      <div class=\"kamKaspersky_provider-cell\" data-provider=\"protonvpn\">\\n        <div class=\"kamKaspersky_value\">3.5.3</div>\\n      </div>\\n    </div>\\n\\n    \\x3c!-- 8.  Suporte prioritrio --\\x3e\\n    <div class=\"kamKaspersky_table-row\">\\n      <div class=\"kamKaspersky_feature-cell\">\\n        <div class=\"kamKaspersky_feature-name\">Suporte prioritrio e bate-papo ao vivo 24/7</div>\\n      </div>\\n      <div class=\"kamKaspersky_provider-cell kamKaspersky\" data-provider=\"kaspersky\">\\n        <img src=\"https://6p840t8orn.kameleoon.io/images/29315-177f8c64-cfa4-49b0-bb78-795dfb6aa4bb.png\" alt=\"Yes\"/>\\n      </div>\\n      <div class=\"kamKaspersky_provider-cell\" data-provider=\"norton\">\\n        <img src=\"https://6p840t8orn.kameleoon.io/images/29315-177f8c64-cfa4-49b0-bb78-795dfb6aa4bb.png\" alt=\"Yes\"/>\\n      </div>\\n      <div class=\"kamKaspersky_provider-cell\" data-provider=\"nordvpn\">\\n        <img src=\"https://6p840t8orn.kameleoon.io/images/29315-177f8c64-cfa4-49b0-bb78-795dfb6aa4bb.png\" alt=\"Yes\"/>\\n      </div>\\n      <div class=\"kamKaspersky_provider-cell\" data-provider=\"surfshark\">\\n        <img src=\"https://6p840t8orn.kameleoon.io/images/29315-177f8c64-cfa4-49b0-bb78-795dfb6aa4bb.png\" alt=\"Yes\"/>\\n      </div>\\n      <div class=\"kamKaspersky_provider-cell\" data-provider=\"protonvpn\">\\n        <img src=\"https://6p840t8orn.kameleoon.io/images/29315-177f8c64-cfa4-49b0-bb78-795dfb6aa4bb.png\" alt=\"Yes\"/>\\n      </div>\\n    </div>\\n\\n    \\x3c!-- 9.  CTA row --\\x3e\\n    <div class=\"kamKaspersky_table-row\">\\n      <div class=\"kamKaspersky_feature-cell\"></div>\\n      <div class=\"kamKaspersky_provider-cell kamKaspersky\" data-provider=\"kaspersky\">\\n        <button class=\"kamKaspersky_buy-button\">Comprar Agora</button>\\n      </div>\\n      <div class=\"kamKaspersky_provider-cell\" data-provider=\"norton\"></div>\\n      <div class=\"kamKaspersky_provider-cell\" data-provider=\"nordvpn\"></div>\\n      <div class=\"kamKaspersky_provider-cell\" data-provider=\"surfshark\"></div>\\n      <div class=\"kamKaspersky_provider-cell\" data-provider=\"protonvpn\"></div>\\n    </div>\\n  </div>\\n\\n  \\x3c!-- Mobile navigation --\\x3e\\n  <div class=\"kamKaspersky_mobile-navigation\">\\n    <div class=\"kamKaspersky_nav-dots\">\\n      <button class=\"kamKaspersky_nav-dot kamKaspersky_active\" data-provider=\"kaspersky\" aria-label=\"Kaspersky VPN\"></button>\\n      <button class=\"kamKaspersky_nav-dot\" data-provider=\"norton\" aria-label=\"Norton\"></button>\\n      <button class=\"kamKaspersky_nav-dot\" data-provider=\"nordvpn\" aria-label=\"NordVPN\"></button>\\n      <button class=\"kamKaspersky_nav-dot\" data-provider=\"surfshark\" aria-label=\"Surfshark\"></button>\\n      <button class=\"kamKaspersky_nav-dot\" data-provider=\"protonvpn\" aria-label=\"ProtonVPN\"></button>\\n    </div>\\n  </div>\\n\\n  \\x3c!-- Legal disclaimer --\\x3e\\n  <div class=\"kamKaspersky_legal-container\">\\n    <a href=\"https://www.kaspersky.com.br/best-secure-vpn\" style=\"text-decoration: underline;\">\\n      *Aprovado pelo laboratrio independente AV-Test.\\n    </a>\\n    <p>As informaes fornecidas nesta pesquisa so baseadas em dados disponveis em 27 de fevereiro de 2025. Os provedores \\n    de VPN podem atualizar seus servios, localizaes de servidores, preos ou polticas ao longo do tempo. Para obter os detalhes mais atualizados, \\n    consulte os sites oficiais dos respectivos fornecedores.</p>\\n  </div>\\n</div>',{Utils:Utils}=Kameleoon.API,mobileComparisonNavigation=a=>{let e=0,s=0;const r=a.querySelectorAll(\".kamKaspersky_nav-dot\"),o=a.querySelectorAll(\".kamKaspersky_provider-cell\"),i=Array.from(r).map((a=>a.dataset.provider));let n=i.indexOf(\"kaspersky\");const d=a=>{r.forEach((e=>{e.classList.toggle(\"kamKaspersky_active\",e.dataset.provider===a)})),o.forEach((e=>{e.classList.toggle(\"kamKaspersky_active\",e.dataset.provider===a)})),n=i.indexOf(a)};d(\"kaspersky\"),Utils.addEventListener(a,\"click\",(({target:a})=>{a.matches(\".kamKaspersky_nav-dot\")&&d(a.dataset.provider)})),Utils.addEventListener(a,\"touchstart\",(a=>{e=a.changedTouches[0].screenX})),Utils.addEventListener(a,\"touchend\",(a=>{s=a.changedTouches[0].screenX;const r=s-e;Math.abs(r)>50&&(n=r<0?(n+1)%i.length:(n-1+i.length)%i.length,d(i[n]))}))},{Core:{runWhenElementPresent:RWEP},CurrentVisit:{device:{type:deviceType}},Goals:{processConversion:processConversion},Utils:Utils$1}=Kameleoon.API,goals={\"Click on Comprar Agora\":379195};RWEP('[data-at-selector-content-key=\"masthead\"]',(([a])=>{const e=document.createElement(\"div\");e.className=\"kamKaspersky_vpn-comparison-container\",e.innerHTML=kamKasperskyHtml,a.insertAdjacentElement(\"afterend\",e),Utils$1.addEventListener(e,\"click\",(({target:a})=>{a.closest(\".kamKaspersky_buy-button\")&&(processConversion(goals[\"Click on Comprar Agora\"]),RWEP(\"#comparison\",(([a])=>{a.scrollIntoView({behavior:\"smooth\",block:\"start\"})})))})),\"Phone\"===deviceType&&mobileComparisonNavigation(e)}),null,!0);","afterDOMReady":false}},{"name":"Variation 1","id":1129946,"css":"","elementSets":[]},{"name":"Variation 1","id":1146219,"css":"","elementSets":[],"javaScriptCode":{"code":"setTimeout((()=>{if(__INITIAL_STATE__){if((__INITIAL_STATE__?.cart?.products||[]).some((n=>\"B2B\"===n.businessSegment)))return}function n(){const n=document.querySelector(\".PriceWrapper.savings .value\"),t=document.querySelector(\".Container.cartBill\");if(n&&t){const e=n.textContent.trim(),o=document.createElement(\"div\");o.className=\"youSave\",o.textContent=`DESCONTO DE  ${e}`;const r=t.querySelector(\".Container.cartBill .youSave\");r&&r.remove(),t.appendChild(o)}}function t(){const n=document.querySelector(\".Container.cartBill\"),t=document.querySelector(\".checkoutContent.col-xs-12\");if(n&&t){const e=n.cloneNode(!0),o=e.querySelector(\".ContainerHeader.ProductsHeader\"),r=e.querySelector(\".Products\"),i=e.querySelector(\".youSave\");o&&o.remove(),r&&r.remove(),i&&i.remove(),e.className=\"Container disclaimers\";const a=n.querySelector(\".read-more\"),c=e.querySelector(\".read-more\");c&&a&&c.addEventListener(\"click\",(()=>{a.click()}));const l=t.querySelector(\".Container.disclaimers\");l&&l.remove(),t.appendChild(e)}}function e(n){if(!document.body||!n)return;const t=n.querySelector(\".lifetime-variant .lifeTime\"),e=n.querySelector(\".lifetime-variant .variant\"),o=n.querySelector(\".next-renewal .renewalPrice\"),r=document.createElement(\"div\");if(r.className=\"customSubscriptionInfo\",t&&e){const n=t.textContent.trim().toLowerCase(),o=e.textContent.trim().toLowerCase(),i=n.match(/(\\d+\\s+(ano|anos|ms|meses))/i),a=i?i[1]:\"\",c=document.createElement(\"div\");c.textContent=o,c.className=\"customSubscriptionInfo__variant\";const l=document.createElement(\"div\");l.textContent=a,l.className=\"customSubscriptionInfo__duration\";const s=document.createElement(\"div\");s.className=\"customSubscriptionInfo__childWrapper\",s.appendChild(c),s.appendChild(l),r.appendChild(s)}if(o){const n=o.textContent.trim().match(/Renovao:\\s+(.+?)\\s+por/i),t=`${n?n[1]:\"\"} renovao por ano`,e=document.createElement(\"div\");e.textContent=t,e.className=\"customSubscriptionInfo__renewal\",r.appendChild(e)}n.querySelector(\".customSubscriptionInfo\")||n.appendChild(r)}!function(){const n=document.querySelector(\".Container.cartBill\");if(!n)return;new MutationObserver((n=>{n.forEach((()=>{document.querySelectorAll(\".Container.cartBill .Product\").forEach(e),t()}))})).observe(n,{childList:!0,subtree:!0}),document.querySelectorAll(\".Container.cartBill .Product\").forEach(e),t()}(),function(){const t=document.querySelector(\".Container.cartAmount .PriceWrapper.savings .value\");if(!t)return;new MutationObserver((t=>{t.forEach((()=>{n()}))})).observe(t,{childList:!0,subtree:!0,characterData:!0}),n()}(),function(){const n=document.querySelector(\".Container.cartAmount\");if(n){const t=document.createElement(\"p\");t.className=\"getActivationCode\",t.textContent=\"Receba seu cdigo de ativao imediatamente aps o pagamento\";const e=document.createElement(\"div\");e.className=\"moneyBackGuarantee\",e.textContent=\"Garantia de devoluo de 30 dias\",n.appendChild(t),n.appendChild(e)}}(),function(){const n=document.querySelector(\".Container.cartBill h3\");n&&(n.textContent=\"Resumo da compra\")}();const o=document.createElement(\"style\");o.type=\"text/css\",o.textContent=\"\\n  .checkoutContent {\\n    display: grid;\\n  }\\n\\n  .Container.cartBill {\\n      grid-area: 1 / 1;\\n  }\\n\\n  .Container.cartAmount {\\n      grid-area: 2 / 1;\\n  }\\n\\n  .Container.disclaimers {\\n    grid-area: 3 / 1;\\n  }\\n\\n  @media screen and (min-width: 768px) {\\n      .Container.cartBill {\\n          grid-area: 1 / 2;\\n      }\\n\\n      .Container.cartAmount {\\n          grid-area: 2 / 2;\\n      }\\n\\n      .Container.disclaimers {\\n        grid-area: 3 / 2;\\n      }\\n  }\\n\\n\\n  .Container.cartAmount, .Container.cartBill {\\n    padding: 24px;\\n  }\\n\\n\\n\\n\\n  .Container.cartAmount {\\n    border-radius: 0;\\n    box-shadow: 0px 10px 10px rgba(29, 29, 29, 0.08);\\n  }\\n\\n  .Container.cartAmount .ContainerHeader,\\n  .Container.cartAmount .PriceBlock .PriceWrapper.exclVat,\\n  .Container.cartAmount .PriceBlock .PriceWrapper.savings {\\n    display: none;\\n  }\\n\\n  .Container.cartAmount .PriceBlock .PriceWrapper.inclVat {\\n    align-items: center;\\n  }\\n\\n  .Container.cartAmount .PriceBlock .PriceWrapper.total .value.before {\\n    font-size: 14px !important;\\n    color: #666666 !important;\\n    font-weight: 400 !important;\\n    opacity: 1;\\n  }\\n\\n  .Container.cartAmount .PriceBlock .PriceWrapper.total .value {\\n    font-size: 32px !important;\\n    color: #1D1D1B !important;\\n  }\\n\\n  .DynamicLayout .Container.cartAmount .PriceBlock .PriceWrapper.total .headline .afterTax > span {\\n    font-size: 16px !important;\\n    color: #666;\\n    font-weight: 300;\\n    margin-top: 5px;\\n    display: block;\\n  }\\n\\n  .Container.cartAmount .PriceBlock .PriceWrapper.total .headline {\\n    color: #1D1D1B;\\n    font-size: 16px;\\n    font-weight: 400;\\n    \\n  }  \\n  .Container.cartAmount .PriceBlock .PriceWrapper.total .headline span {\\n    display: flex;\\n    flex-direction: column;\\n    align-items: flex-start;\\n  }\\n  .vatAmount .PopDescription {\\n    display: none;\\n  }\\n\\n  .Discount { \\n    margin-top: 20px;\\n  }  \\n\\n\\n  .Container.cartBill .DisclaimerSubscription,\\n  .Container.cartBill .Reinsurrance,\\n  .Container.cartBill .subscriptionMessage {\\n    display: none;\\n  }\\n\\n  .disclaimer .list:not(:empty)::before, .DisclaimerSubscription::before {\\n    content: none;\\n  }\\n\\n  .DisclaimerSubscription.recurring {\\n    margin: 0;\\n  }\\n\\n  .ContainerHeader.ProductsHeader {\\n    padding-bottom: 16px;\\n    margin-bottom: 16px;\\n  }\\n\\n  .Container.cartBill {\\n      margin-bottom: 0;\\n      border-radius: 0;\\n      position: relative;\\n  }\\n\\n  .Product {\\n    padding-right: 0 !important;\\n  }\\n  .Product:not(:last-child) {\\n    border-bottom: 1px solid #ccc;\\n    padding-bottom: 10px;\\n  }\\n\\n  .Products:not(.-reco)>.Product>.wrapper .action {\\n    top: 15px;\\n    right: -5px;\\n  }\\n\\n  .ProductMain .PopDescription .fa.fa-question-circle-o {\\n    top: -40px;\\n  }\\n\\n  .Product .prices {\\n    margin-top: 0 !important;\\n  }\\n\\n  .Product .prices .value{\\n    font-size: 21px !important;\\n  }\\n  .Product .prices .subscription-note {\\n    font-size: 17px !important;\\n  }\\n  .Product .prices .value.before {\\n      font-size: 13px !important;\\n  }\\n\\n\\n  .Products,\\n  .Products.-candyrack {\\n    position: relative;\\n    padding-bottom: 30px;\\n  }\\n\\n\\n  .Container.cartBill {\\n    padding-bottom: 0;\\n  }\\n  .Container cartAmount {\\n    padding-top: 0;\\n  }\\n  .youSave {\\n    background-color: #FFE810;\\n    border-radius: 20px;\\n    padding: 7px;\\n    width: 65%;\\n\\n    font-weight: 700;\\n    font-size: 21px;\\n    text-align: center;\\n    position: absolute;\\n    left: 50%;\\n    transform: translateX(-50%);\\n    bottom: -20px;\\n    z-index: 99;\\n  }\\n\\n\\n\\n  .getActivationCode {\\n    font-size: 16px;\\n    font-weight: 400;\\n    color: #666;  \\n    text-align: center;\\n    margin-top: 20px;\\n    margin-bottom: 10px;\\n  }\\n\\n  .moneyBackGuarantee {\\n    font-size: 14px;\\n    color: #1D1D1D;\\n    text-align: center;\\n    font-weight: 400;\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n  }\\n  .moneyBackGuarantee:before {\\n    content: \\\"\\\";\\n    display: inline-block;\\n    width: 25px;\\n    height: 24px;\\n    margin-right: 8px;\\n    background-image:  url(\\\"data:image/svg+xml,%3Csvg width='25' height='24' viewBox='0 0 25 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M21.2987 16.7109C21.2987 16.1243 21.6384 15.3053 22.0526 14.8905L24.1889 12.7543C24.6037 12.3394 24.6037 11.6607 24.1889 11.2457L22.0526 9.10957C21.6384 8.69473 21.2987 7.87568 21.2987 7.28911V4.26831C21.2987 3.68122 20.8188 3.20183 20.2321 3.20183H17.2113C16.6242 3.20183 15.8051 2.86216 15.3902 2.44731L13.254 0.311148C12.8397 -0.103716 12.1603 -0.103716 11.7461 0.311148L9.60981 2.44731C9.19492 2.86216 8.37585 3.20183 7.78874 3.20183H4.76788C4.18129 3.20183 3.70138 3.68122 3.70138 4.26831V7.28911C3.70138 7.87568 3.36169 8.69473 2.94736 9.10957L0.811148 11.2457C0.396284 11.6607 0.396284 12.3394 0.811148 12.7543L2.94736 14.8905C3.36169 15.3053 3.70138 16.1243 3.70138 16.7109V19.7322C3.70138 20.3188 4.18129 20.7988 4.76788 20.7988H7.78874C8.37585 20.7988 9.19492 21.1379 9.60981 21.5527L11.7461 23.6889C12.1603 24.1037 12.8397 24.1037 13.254 23.6889L15.3902 21.5527C15.8051 21.1379 16.6242 20.7988 17.2113 20.7988H20.2321C20.8188 20.7988 21.2987 20.3188 21.2987 19.7322V16.7109ZM8.52212 11.4616C8.22476 11.1732 7.74994 11.1805 7.46158 11.4779C7.17323 11.7753 7.18054 12.2501 7.4779 12.5385L10.5716 15.5385C10.8674 15.8253 11.3393 15.8197 11.6282 15.5261L17.5345 9.52609C17.8251 9.23101 17.8213 8.7561 17.5261 8.46552C17.231 8.17494 16.7561 8.17868 16.4655 8.47387L11.0815 13.9434L8.52212 11.4616Z' fill='%2300A88E'/%3E%3C/svg%3E\\\");\\n    vertical-align: middle;\\n  }\\n\\n\\n  .customSubscriptionInfo {\\n    display: flex;\\n    justify-content: space-between;\\n    font-size: 16px;\\n    font-weight: 400;\\n    margin-top: 8px;\\n    margin-bottom: 8px;\\n  }\\n  .customSubscriptionInfo__childWrapper {\\n    display: flex;\\n  }\\n  .customSubscriptionInfo__variant {\\n    padding-right: 10px;\\n    position: relative\\n  }\\n  .customSubscriptionInfo__variant:after {\\n    content: '';\\n    position: absolute;\\n    display: block;\\n    width: 1px;\\n    height: 18px;\\n    background-color: #ccc;\\n    top: 1px;\\n    right: 0;\\n  }\\n  .customSubscriptionInfo__duration {\\n    padding-left: 10px;\\n  }\\n  .customSubscriptionInfo__renewal {\\n    max-width: 155px;\\n    text-align: right;\\n    font-size: 14px;\\n    color: #666;\\n  }\\n  \",document.head.appendChild(o)}),500);","afterDOMReady":false}},{"name":"Variation 1","id":1146903,"css":"@media (max-width:2600px){[data-at-selector-plugin-index=\"1\"]>section[class*=ThemeContainer_themed]{background-size:100% 680px}.kam_bespoke_secondContainer{margin:700px auto 60px}}.kamBespoke_2025_buttonSection{display:flex;gap:30px;align-items:center}[data-at-selector-plugin-index=\"9\"]{display:none}[data-at-selector-plugin-index=\"4\"]{display:none}[data-at-selector-plugin-index=\"5\"]{display:none}[data-at-selector-plugin-index=\"11\"]{display:none}.kam_protection_mainBlock{position:relative}.kam_protection_mainImage img{box-shadow:0 8px 24px 0 #1d1D1D14}[data-at-selector-plugin-index=\"7\"] .kam_bespoke_awardSection ul li{width:186px}.kam-award-Heading{color:#00a88e}[data-at-selector-plugin-index=\"7\"] div[class*=AwardsAndPerformance_text] h3{text-align:start;font-size:18px}[data-at-selector-plugin-index=\"7\"] div[class*=AwardsAndPerformance_text] h2{text-align:start}[data-at-selector-plugin-index=\"7\"] div[class*=AwardsAndPerformance_text] p{text-align:start;font-size:20px;font-weight:700;margin-bottom:6px}#kam_protection_activeImage{box-shadow:0 8px 24px 0 #1d1D1D14;height:496px;max-width:780px}.kam_protection_textContent{position:absolute;top:30%;transform:translateY(-50%);max-width:300px;padding-left:24px}[data-at-selector-plugin-index=\"1\"] [class*=MastHead_plugin] [class*=OpenBuyBlockColumn_columnFeatures]{padding-top:6px}.kam-award-Sub{font-weight:600}.kam_bespoke_awardSection{display:flex;justify-content:center;align-items:center;max-width:1120px;margin:0 auto}[data-at-selector-plugin-index=\"1\"]>section[class*=ThemeContainer_themed]{background-size:100% 680px;padding-bottom:0;background-image:url(\"https://6p840t8orn.kameleoon.io/images/29315-a6065e3a-3f00-438b-98fb-01bfaab3fefd.jpeg\");background-repeat:no-repeat}[data-at-selector-plugin-index=\"1\"] [class*=AnimationRotation_tablet]{background-size:125% 700px!important}.kam_bespokeHeading span{color:#00a88e}[class*=OpenBuyBlockTableContent_productColumnWrapper]:first-child [data-at-match-height-group=OpenBuyBlockColumnPlatforms] [class*=CompatibleBlock_compatibleBlock]:after{content:'12 recursos de proteo';font-weight:700;font-style:Bold;font-size:16px;line-height:20px;margin:10px auto;background:#c9ffbe;padding:3px 15px;border-radius:12px;color:#000;text-align:center}[class*=OpenBuyBlockTableContent_productColumnWrapper]:nth-child(2) [data-at-match-height-group=OpenBuyBlockColumnPlatforms] [class*=CompatibleBlock_compatibleBlock]:after{content:'17 recursos de proteo';font-weight:700;font-style:Bold;font-size:16px;line-height:20px;margin:10px auto;background:#c9ffbe;padding:3px 15px;border-radius:12px;color:#000;text-align:center}[class*=OpenBuyBlockTableContent_productColumnWrapper]:nth-child(3) [data-at-match-height-group=OpenBuyBlockColumnPlatforms] [class*=CompatibleBlock_compatibleBlock]:after{content:'24 recursos de proteo';font-weight:700;font-style:Bold;font-size:16px;line-height:20px;margin:10px auto;background:#7eff33;padding:3px 15px;border-radius:12px;color:#000;text-align:center}[class*=BuyBlock_buyblock]:first-child [class*=CompatibleBlock_compatibleBlock] ul:after{content:'12 recursos de proteo';font-weight:700;font-style:Bold;font-size:16px;line-height:20px;margin:10px auto;background:#c9ffbe;padding:3px 15px;border-radius:12px;color:#000}[class*=BuyBlock_buyblock]:nth-child(2) [class*=CompatibleBlock_compatibleBlock] ul:after{content:'17 recursos de proteo';font-weight:700;font-style:Bold;font-size:16px;line-height:20px;margin:10px auto;background:#c9ffbe;padding:3px 15px;border-radius:12px;color:#000}[class*=BuyBlock_buyblock]:nth-child(3) [class*=CompatibleBlock_compatibleBlock] ul:after{content:'24 recursos de proteo';font-weight:700;font-style:Bold;font-size:16px;line-height:20px;margin:10px auto;background:#7eff33;padding:3px 15px;border-radius:12px;color:#000}[data-at-selector=learn-more-button]{display:none}.kamBespoke_button{background:#00a88e;padding:18px 16px;border-radius:4px;font-weight:500;font-style:Medium;font-size:24px;line-height:28px;text-align:center;vertical-align:middle;min-width:305px;cursor:pointer}.kamBespoke_2025_firstContainer{margin-top:30px}img.kaspersky-platform-icon{height:26px;margin:0 7px}.kamBespokeTextSection{padding:25px 0 38px 0;display:flex;align-items:center;gap:5px}.kamBespokeLastSection div{background:#e0ffdb;border-radius:16px;padding:13px 15px;min-width:162px;max-width:162px;color:#000;text-align:center;display:flex;justify-content:center;align-items:center;font-weight:600;font-style:SemiBold;font-size:14px;line-height:15px;letter-spacing:0;text-align:center;vertical-align:middle}.kamBespokeLastSection{display:flex;gap:35px}.kam_bespokeimageText span:first-child{font-size:16px}.kam_bespokeimageText span:nth-child(2){font-size:14px;max-width:365px}.kam_bespoke_secondContainer{display:flex;margin-top:80px;max-width:1108px;margin:153px auto 60px;align-items:start}h2.kam_bespokeHeading{font-weight:700;font-style:Bold;font-size:40px;leading-trim:NONE;line-height:44px;letter-spacing:0;color:#1d1d1b}p.kam_bespokeSubHeading{font-weight:400;font-style:Regular;font-size:18px;leading-trim:NONE;line-height:22px;letter-spacing:0;color:#444;margin-bottom:24px;margin-top:8px}.kam_bespokeSubText{display:flex;justify-content:space-between;color:#444;text-align:center;gap:80px}p.sunTextHeading{font-weight:700;font-style:Bold;font-size:40px;leading-trim:NONE;line-height:100%;letter-spacing:0}p.sunTextDescription{font-weight:500;font-style:Medium;font-size:18px;leading-trim:NONE;line-height:20px;letter-spacing:0;text-align:center}.kam_BespokeTextSection{max-width:59%}.kam_bespoke_secondContainer img{width:244px}.kam_bespokeImage{margin-left:60px;display:flex;flex-direction:column;justify-content:center;align-items:center;gap:16px}.kam_bespokeimageText{text-align:center;display:flex;flex-direction:column;color:#1d1d1b;font-style:SemiBold;font-size:16px;leading-trim:NONE;line-height:20px;letter-spacing:0;text-align:center}.kam_bespokeimageText span:first-child{font-weight:600}.kam_bespokeAwards{margin-left:60px;display:flex;flex-direction:column;justify-content:center;align-items:center}.kam_awardsGrid{display:grid;grid-template-columns:repeat(3,1fr);grid-template-rows:repeat(2,1fr);gap:20px;max-width:400px}.kam_awardBadge{display:flex;justify-content:center;align-items:center;background:#fff;border-radius:8px;padding:12px;box-shadow:0 2px 8px rgba(0,0,0,.1);border:1px solid #e0e0e0;transition:transform .2s ease,box-shadow .2s ease}.kam_awardBadge:hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,0,0,.15)}.kam_awardBadge img{max-width:100%;max-height:60px;width:auto;height:auto;object-fit:contain}.kam_bespokeDescription{font-weight:400;font-size:16px;line-height:20px;color:#666;margin-top:16px;margin-bottom:0}.kam_bespoke_secondContainer .kam_BespokeTextSection{width:60%;max-width:640px}.kam_bespoke_thirdContainer{max-width:1108px;margin:73px auto 97px auto;padding:0 20px}.kam_protection_header{text-align:center;margin-bottom:60px}.kam_protection_title{font-weight:700;font-size:40px;line-height:44px;color:#1d1d1b;margin:0 0 8px 0}.kam_protection_subtitle{font-weight:400;font-size:18px;line-height:22px;color:#444;margin:0;margin-bottom:24px!important}.kam_protection_content{display:flex;gap:16px;align-items:flex-start}.kam_protection_mainBlock{flex:1}.kam_protection_mainImage{position:relative;margin-bottom:30px}.kam_protection_mainImage img{width:100%;max-width:680px;height:auto;border-radius:12px}.kam_protection_closeIcon{position:absolute;left:32px;top:unset;bottom:41px;cursor:pointer;background:rgba(255,255,255,.9);border-radius:50%;width:40px;height:40px;display:flex;align-items:center;justify-content:center;transition:background-color .3s ease}.kam_protection_closeIcon:hover{background:#fff}.kam_protection_closeIcon img{width:30px;height:30px}.kam_protection_textContent h3{font-weight:700;font-size:32px;line-height:36px;color:#1d1d1b;margin:0 0 16px 0}.kam_protection_textContent p{font-weight:400;font-size:18px;line-height:22px;color:#444;margin:0}.kam_highlight{color:#00a88e}.kam_protection_sidebar{display:flex;flex-direction:column;gap:16px;min-width:312px}.kam_protection_smallBlock{height:112px;width:312px;max-height:112px;background:linear-gradient(92.24deg,#f1ffef 17.63%,#ccfae7 82.08%);border-radius:12px;padding:24px 80px 24px 24px;cursor:pointer;transition:all .3s ease;border:2px solid transparent;display:flex;align-items:center;justify-content:center;position:relative}.kam_protection_smallBlock:hover{transform:translateY(-2px);box-shadow:0 8px 20px rgba(0,168,142,.15)}.kam_protection_smallContent{display:flex;justify-content:space-between;align-items:center;width:100%}.kam_protection_smallContent span{font-weight:600;font-size:20px;line-height:24px;color:#1d1d1b;flex:1;margin-right:16px}.kam_protection_plusIcon{top:unset;width:24px;height:24px;flex-shrink:0;position:absolute;bottom:24px;right:24px}.kam_bespoke_fourthContainer{display:flex;max-width:1108px;margin:144px auto 0 auto;gap:76px;align-items:center;flex-direction:column}.kam_realtime_mainTitle{font-weight:700;font-size:40px;line-height:44px;color:#1d1d1b;text-align:center}.kam_realtime_contentWrapper{display:flex;gap:48px;align-items:center}.kam_realtime_mainTitle{font-weight:700;font-size:40px;line-height:44px;color:#1d1d1b;text-align:center}.kam_realtime_contentWrapper{display:flex;gap:30px;align-items:center}.kam_realtime_imageSection{flex:0 0 526px;max-width:526px}.kam_realtime_mainImage{width:100%;height:auto;border-radius:12px}.kam_realtime_contentSection{flex:1;padding-left:20px}.kam_realtime_title{font-weight:700;font-size:40px;line-height:44px;color:#1d1d1b;margin:0 0 16px 0}.kam_realtime_description{font-weight:400;font-size:18px;line-height:22px;color:#444;margin:0 0 32px 0}.kam_realtime_featureList{list-style:none;padding:0;margin:0}.kam_realtime_featureItem{display:flex;align-items:flex-start;margin-bottom:24px}.kam_realtime_featureItem:last-child{margin-bottom:0}.kam_realtime_checkIcon{width:20px;height:20px;margin-right:16px;margin-top:2px;flex-shrink:0}.kam_realtime_featureText{display:flex;flex-direction:column}.kam_realtime_featureTitle{font-weight:700;font-size:18px;line-height:22px;color:#1d1d1b;margin-bottom:4px}.kam_realtime_featureDesc{font-weight:400;font-size:18px;line-height:22px;color:#444}.kam_bespoke_secondContainer_mobile{max-width:100%;margin:60px auto;padding:0 20px;background:#fff}.kam_BespokeTextSection_mobile{text-align:center;margin-bottom:24px;display:flex}.kam_bespokeHeading_mobile{font-weight:700;font-size:28px;line-height:32px;color:#1d1d1b;margin:0 0 16px 0}.kam_bespokeHeading_mobile span{color:#00a88e}.kam_bespokeSubHeading_mobile{font-weight:400;font-size:14px;line-height:20px;color:#444;margin:0 0 30px 0}.kam_bespokeAwardSection_mobile{display:flex;justify-content:center;align-items:center;gap:20px;margin-bottom:40px}.kam_bespokeLogo_mobile img{width:60px;height:auto}.kam_bespokeAward_mobile{display:flex;align-items:center;gap:12px;background:#f8f8f8;padding:12px 16px;border-radius:8px;border:1px solid #e0e0e0}.kam_bespokeAward_mobile img{width:40px;height:auto}.kam_bespokeAwardText_mobile{display:flex;flex-direction:column;gap:2px}.kam_bespokeAwardText_mobile .awardTitle{font-weight:600;font-size:14px;line-height:16px;color:#666;text-transform:uppercase}.kam_bespokeAwardText_mobile .awardSubtitle{font-weight:700;font-size:12px;line-height:14px;color:#1d1d1b}.kam_bespokeStatsGrid_mobile{display:grid;grid-template-columns:1fr 1fr;gap:16px;max-width:400px;margin:0 auto;justify-self:center}.kam_bespokeStatBox_mobile{background:#fff;border-radius:12px;padding:12px;text-align:center;width:140px;box-shadow:0 0 16px 0 #7218FF14;transition:transform .2s ease,box-shadow .2s ease}.kam_bespokeStatBox_mobile:hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,0,0,.1)}.kam_bespokeStatBox_mobile .statNumber{font-weight:700;font-size:28px;line-height:32px;color:#1d1d1b;margin:0 0 8px 0}.kam_bespokeStatBox_mobile .statDescription{font-weight:500;font-size:14px;line-height:16px;color:#444;margin:0}.kam_protection_choice_container{text-align:center}.kam_protection_choice_title{font-weight:700;font-size:40px;line-height:36px;color:#1d1d1b;margin:0 0 13px 0}.kam_protection_choice_title .kam_highlight{color:#00a88e}.kam_protection_choice_description{font-weight:300;font-size:16px;line-height:22px;color:#666;margin:0 auto;margin-bottom:48px!important}@media (max-width:1250px){#kam_protection_activeImage{height:440px}}@media (max-width:1231px){[data-at-selector-plugin-index=\"7\"] section{max-width:1024px;padding:0 20px;margin:0 auto}[data-at-selector-plugin-index=\"7\"] div[class*=AwardsAndPerformance_text] h3 br{display:none}ul[class*=AwardsAndPerformance_awards]{padding-top:0!important}[data-at-selector-plugin-index=\"7\"] .kam_bespoke_awardSection ul li{width:145px}}@media (max-width:1093px){#kam_protection_activeImage{max-width:100%;height:100%}.kam_protection_plusIcon{bottom:37%}.kam_protection_content{flex-direction:column;justify-content:center;align-items:center}.kam_protection_sidebar{width:100%}.kam_protection_smallBlock{width:100%}}@media (max-width:1024px){.kam_realtime_imageSection{max-width:470px}}@media (max-width:767px){.kam_protection_choice_container{margin:40px auto;padding:24px 16px;display:none}[class*=BuyBlock_buyblock]:first-child [class*=CompatibleBlock_compatibleBlock] ul:after{content:'24 recursos de proteo';font-weight:700;font-style:Bold;font-size:16px;line-height:20px;margin:10px auto;background:#7eff33;padding:3px 15px;border-radius:12px;color:#000}[class*=BuyBlock_buyblock]:nth-child(2) [class*=CompatibleBlock_compatibleBlock] ul:after{content:'17 recursos de proteo';font-weight:700;font-style:Bold;font-size:16px;line-height:20px;margin:10px auto;background:#c9ffbe;padding:3px 15px;border-radius:12px;color:#000}[class*=BuyBlock_buyblock]:nth-child(3) [class*=CompatibleBlock_compatibleBlock] ul:after{content:'12 recursos de proteo';font-weight:700;font-style:Bold;font-size:16px;line-height:20px;margin:10px auto;background:#c9ffbe;padding:3px 15px;border-radius:12px;color:#000}.kam_protection_mainImage{margin-bottom:0}.kam_bespoke_secondContainer_mobile{margin:30px auto 60px auto}.banner-Section-checkList{margin:0 auto;max-width:312px}[class*=MastheadSpecialOfferMulti_masthead] [class*=MastheadSpecialOfferMulti_container] p{font-size:12px!important;display:flex;justify-content:flex-start}[class*=MastheadSpecialOfferMulti_masthead] [class*=MastheadSpecialOfferMulti_container]>h1{text-align:center!important;vertical-align:middle;font-size:24px;font-weight:400}[class*=MastheadSpecialOfferMulti_masthead] [class*=MastheadSpecialOfferMulti_container]>h2{max-width:260px;margin:0 auto 16px auto!important;text-align:center!important}.kam_BespokeTextSection_mobile{position:relative}.kam_bespokeStatBox_mobile .statDescription{font-size:12px}.banner-Section-checkList img{width:16px;margin-right:5px}.kam_bespokeStatBox_mobile .statNumber{font-size:24px;margin:0 0 2px 0}[data-at-selector-plugin-index=\"10\"]>section{display:none}.kam_protection_closeIcon{bottom:17px;left:21px}.kam_protection_textContent{max-width:182px;margin-top:15px}.kam_protection_textContent h3{font-size:20px;line-height:20px;margin-bottom:4px}.kam_protection_textContent p{font-size:10px;line-height:12px}[data-at-selector-plugin-index=\"7\"] .kam_bespoke_awardSection ul li{width:160px}.kam_realtime_contentWrapper{flex-direction:column}.kam_protection_choice_title{font-size:24px;line-height:28px}.kam_protection_choice_description{font-size:16px;line-height:20px}}@media (max-width:1231px){.kam_bespoke_secondContainer{max-width:768px;padding:0 24px}p.sunTextHeading{font-size:25px}}@media (max-width:767px){.kam_bespoke_thirdContainer{margin:0 auto 70px auto;padding:0 16px}.kam_protection_smallContent span{font-size:16px;margin-right:5px}.kam_protection_header{margin-bottom:0}[data-at-selector-plugin-index=\"2\"]>section{padding-bottom:45px!important}[data-at-selector-plugin-index=\"6\"]{display:none}.kam_bespokeAwardSection_mobile img{width:170px}.kam_bespokeAwardSection_mobile{position:absolute;right:0;top:45px}.kam_bespokeSubHeading_mobile{margin-bottom:16px;max-width:177px}.kam_bespokeHeading_mobile_container{width:67%;text-align:start}.kam_realtime_featureList{display:none}.kam_bespoke_awardSection p{display:none}.kam_bespoke_awardSection h3{display:none}.kam_bespoke_awardSection{flex-direction:column}.kamBespoke_2025_buttonSection{flex-direction:column}.kamBespoke_2025_firstContainer{display:flex;flex-direction:column;justify-content:center;align-items:center}.kamBespoke_button{max-width:251px;min-width:unset;color:#fff;font-size:21px}.kamBespokeTextSection{color:#fef6f6;padding-bottom:0}.kamBespokeLastSection{display:none}.kam_protection_title{font-size:32px;line-height:36px}.kam_protection_content{flex-direction:column;gap:4px}.kam_protection_sidebar{min-width:auto;width:100%;gap:4px}.kam_protection_smallBlock{width:100%;height:auto;min-height:64px}.kam_protection_textContent h3{font-size:20px;line-height:20px}.kam_protection_textContent p{font-size:14px;line-height:18px}.kam_bespoke_secondContainer{flex-direction:column;gap:40px}.kam_bespokeAwards{margin-left:0;margin-top:30px}.kam_bespoke_secondContainer .kam_BespokeTextSection{max-width:100%;padding-right:0}.kam_realtime_mainTitle{font-size:28px;line-height:32px}[data-at-selector-plugin-index=\"7\"] div[class*=AwardsAndPerformance_text] h2{text-align:center}.kam_realtime_description{font-size:18px}.kam_awardsGrid{grid-template-columns:repeat(2,1fr);grid-template-rows:repeat(3,1fr);max-width:300px}.kam_bespoke_fourthContainer{flex-direction:column;margin:60px auto 0 auto;gap:30px}.kam_realtime_imageSection{flex:none;max-width:100%;order:2;width:300px}.kam_realtime_contentSection{padding-left:0;order:1}.kam_realtime_title{font-size:32px;line-height:36px;text-align:center}.kam_realtime_description{font-size:16px;line-height:20px;text-align:center}.kam_realtime_featureTitle{font-size:16px;line-height:20px}.kam_realtime_featureDesc{font-size:16px;line-height:20px}}@media (max-width:400px){.kam_protection_textContent p{font-size:12px;line-height:14px}.kam_protection_textContent{max-width:160px;margin-top:15px}}@media (max-width:380px){.kam_bespokeHeading_mobile_container{width:50%}.kam_protection_textContent{max-width:150px;margin-top:15px}.kam_protection_textContent p{font-size:10px;line-height:14px}.kam_protection_textContent h3{font-size:15px;line-height:16px}.kam_bespokeAwardSection_mobile{position:unset}}@media (max-width:480px){.kam_awardsGrid{grid-template-columns:1fr;grid-template-rows:repeat(5,1fr);max-width:200px}}","elementSets":[],"javaScriptCode":{"code":"const firstBlockHtml=\"\\n  <div class='kamBespoke_2025_firstContainer'>\\n    <div class='kamBespoke_2025_buttonSection'>\\n        <div class='kamBespoke_button'>Ver todos os produtos</div>\\n        <div class='kamBespokeLogo'>\\n            <img src='https://6p840t8orn.kameleoon.io/images/29315-34dfc7a9-415a-451b-9963-8543dd00fe5e.png' alt='Windows' class='kaspersky-platform-icon'>\\n            <img src='https://6p840t8orn.kameleoon.io/images/29315-bdd0de7b-6071-4504-ad49-05529d62ba65.png' alt='Apple' class='kaspersky-platform-icon'>\\n            <img src='https://6p840t8orn.kameleoon.io/images/29315-01f86c0d-0f2b-4c7a-b468-4cfd1fb3ed1d.png' alt='Android' class='kaspersky-platform-icon'>\\n            <img src='https://6p840t8orn.kameleoon.io/images/29315-2a6c6cc8-0b02-4446-9047-81d7e0eec7d6.png' alt='iOS' class='kaspersky-platform-icon'>\\n        </div>\\n    </div>\\n    <div class='kamBespokeTextSection'>\\n    <img src='https://c32cqx0ogd.kameleoon.io/images/29326-444e5a82-03d9-4348-8048-36b28fa742df.svg'>\\n    <span>Garantia de devoluo de 30 dias</span>\\n    </div>\\n    <div class='kamBespokeLastSection'>\\n        <div>Antivrus premiado</div>\\n        <div>Mais de 25 anos<br> de experincia</div>\\n        <div>Capturar ameaas novas e emergentes</div>\\n    </div>\\n  </div>\\n\",secondBlockHtml='<div class=\"kam_bespoke_secondContainer\">\\n    <div class=\"kam_BespokeTextSection\">\\n        <h2 class=\"kam_bespokeHeading\">Com a confiana <span>de milhes</span></h2>\\n        <p class=\"kam_bespokeSubHeading\">Com milhes de clientes satisfeitos, voc pode contar com o histrico comprovado de 25 anos do Kaspersky na proteo de pessoas e empresas em todo o mundo.</p>\\n        <div class=\"kam_bespokeSubText\">\\n            <div class=\"kam_bespokesubTextRow\">\\n                <p class=\"sunTextHeading\">400M+</p>\\n                <p class=\"sunTextDescription\">usurios globais</p>\\n            </div>\\n            <div class=\"kam_bespokesubTextRow\">\\n                <p class=\"sunTextHeading\">1M+</p>\\n                <p class=\"sunTextDescription\">ataques interrompidos por dia</p>\\n            </div>\\n            <div class=\"kam_bespokesubTextRow\">\\n                <p class=\"sunTextHeading\">300K+</p>\\n                <p class=\"sunTextDescription\">organizaes protegidas</p>\\n            </div>\\n        </div>\\n    </div>\\n    <div class=\"kam_bespokeImage\">\\n        <img src=\"https://6p840t8orn.kameleoon.io/images/29315-af14f361-e937-4c95-a676-9d3d0ed64101.png\" alt=\"\">\\n        <div class=\"kam_bespokeimageText\">\\n            <span>Proteo 100% Online do Ano</span>\\n            <span>Em maro de 2025, o Kaspersky Premium Antivirus foi o nico produto a bloquear 100% dos ataques nos testes da AV-Comparatives, um laboratrio de testes lder na Europa, superando 18 concorrentes.</span>\\n        </div>\\n    </div>\\n</div>\\n',secondBlockHtmlMobile='<div class=\"kam_bespoke_secondContainer_mobile\">\\n    <div class=\"kam_BespokeTextSection_mobile\">\\n        <div class=\\'kam_bespokeHeading_mobile_container\\'>\\n        <h2 class=\"kam_bespokeHeading_mobile\">Com a confiana de milhes</h2>\\n        <p class=\"kam_bespokeSubHeading_mobile\">Com 25 anos de experincia, a Kaspersky protege milhes de pessoas e empresas no mundo todo.</p>\\n        </div>\\n        <div class=\"kam_bespokeAwardSection_mobile\">\\n            <img src=\\'https://6p840t8orn.kameleoon.io/images/29315-cb0ce191-36ce-425c-bffe-ae9b5eda23c6.png\\'>\\n        </div>\\n    </div>\\n    <div class=\"kam_bespokeStatsGrid_mobile\">\\n        <div class=\"kam_bespokeStatBox_mobile\">\\n            <p class=\"statNumber\">+1M</p>\\n            <p class=\"statDescription\">ataques interrompidos por dia</p>\\n        </div>\\n        <div class=\"kam_bespokeStatBox_mobile\">\\n            <p class=\"statNumber\">300 K+</p>\\n            <p class=\"statDescription\">organizaes protegidas</p>\\n        </div>\\n        <div class=\"kam_bespokeStatBox_mobile\">\\n            <p class=\"statNumber\">400 M+</p>\\n            <p class=\"statDescription\">usurios globais</p>\\n        </div>\\n        <div class=\"kam_bespokeStatBox_mobile\">\\n            <p class=\"statNumber\">25</p>\\n            <p class=\"statDescription\">anos de experincia</p>\\n        </div>\\n    </div>\\n</div>\\n',thirdBlockHtml='<div class=\"kam_bespoke_thirdContainer\">\\n    <div class=\"kam_protection_header\">\\n        <h2 class=\"kam_protection_title\">Proteger o que  mais importante</h2>\\n        <p class=\"kam_protection_subtitle\">Tenha uma vida on-line melhor e mais segura com o Kaspersky.</p>\\n    </div>\\n    <div class=\"kam_protection_content\">\\n        <div class=\"kam_protection_mainBlock\">\\n            <div class=\"kam_protection_mainImage\">\\n                <img id=\"kam_protection_activeImage\" src=\"https://6p840t8orn.kameleoon.io/images/29315-fd0b2637-e755-4db1-a26f-f1d6f61629b3.png\" alt=\"Protection feature\">\\n                <div class=\"kam_protection_closeIcon\" data-action=\"close\">\\n                    <img src=\"https://6p840t8orn.kameleoon.io/images/29315-8f8e04cb-ecc7-44ce-b0be-a5b2472327b6.png\" alt=\"Close\">\\n                </div>\\n            </div>\\n            <div class=\"kam_protection_textContent\" id=\"kam_protection_textContent\">\\n                <h3 id=\"kam_protection_activeTitle\"><span class=\"kam_highlight\">Antivrus</span> para tranquilidade</h3>\\n                <p id=\"kam_protection_activeText\">O antivrus em tempo real protege seus dispositivos contra vrus, malware e muito mais, para que seus dados permaneam seguros.</p>\\n            </div>\\n        </div>\\n        <div class=\"kam_protection_sidebar\">\\n            <div class=\"kam_protection_smallBlock\" data-index=\"0\" style=\"display: none;\" id=\"antivirus-block\">\\n                <div class=\"kam_protection_smallContent\">\\n                    <span>Antivrus para tranquilidade</span>\\n                    <img class=\"kam_protection_plusIcon\" src=\"https://6p840t8orn.kameleoon.io/images/29315-848565fc-f042-43c7-9540-c22bae9eb176.png\" alt=\"Expand\">\\n                </div>\\n            </div>\\n            <div class=\"kam_protection_smallBlock\" data-index=\"1\" style=\"display: flex;\">\\n                <div class=\"kam_protection_smallContent\">\\n                    <span>Compre on-line com segurana</span>\\n                    <img class=\"kam_protection_plusIcon\" src=\"https://6p840t8orn.kameleoon.io/images/29315-848565fc-f042-43c7-9540-c22bae9eb176.png\" alt=\"Expand\">\\n                </div>\\n            </div>\\n            <div class=\"kam_protection_smallBlock\" data-index=\"2\" style=\"display: flex;\">\\n                <div class=\"kam_protection_smallContent\">\\n                    <span>Proteja-se dos hackers</span>\\n                    <img class=\"kam_protection_plusIcon\" src=\"https://6p840t8orn.kameleoon.io/images/29315-848565fc-f042-43c7-9540-c22bae9eb176.png\" alt=\"Expand\">\\n                </div>\\n            </div>\\n            <div class=\"kam_protection_smallBlock\" data-index=\"3\" style=\"display: flex;\">\\n                <div class=\"kam_protection_smallContent\">\\n                    <span>Remover ameaas existentes</span>\\n                    <img class=\"kam_protection_plusIcon\" src=\"https://6p840t8orn.kameleoon.io/images/29315-848565fc-f042-43c7-9540-c22bae9eb176.png\" alt=\"Expand\">\\n                </div>\\n            </div>\\n            <div class=\"kam_protection_smallBlock\" data-index=\"4\" style=\"display: flex;\">\\n                <div class=\"kam_protection_smallContent\">\\n                    <span>Evite o roubo de identidade</span>\\n                    <img class=\"kam_protection_plusIcon\" src=\"https://6p840t8orn.kameleoon.io/images/29315-848565fc-f042-43c7-9540-c22bae9eb176.png\" alt=\"Expand\">\\n                </div>\\n            </div>\\n        </div>\\n    </div>\\n</div>\\n',protectionChoiceHtml='<div class=\"kam_protection_choice_container\">\\n    <h2 class=\"kam_protection_choice_title\">Escolha a <span class=\"kam_highlight\">proteo</span> certa para voc</h2>\\n    <p class=\"kam_protection_choice_description\">Se voc deseja cobrir apenas o essencial ou precisa de um nvel para toda a famlia, temos um plano para voc.</p>\\n</div>\\n',fourthBlockHtml='<div class=\"kam_bespoke_fourthContainer\">\\n    <h2 class=\"kam_realtime_mainTitle\">Protegendo-o contra ameaas cibernticas em tempo real</h2>\\n    <div class=\"kam_realtime_contentWrapper\">\\n        <div class=\"kam_realtime_imageSection\">\\n            <picture>\\n                <source media=\"(max-width: 768px)\" srcset=\"https://6p840t8orn.kameleoon.io/images/29315-28a027ea-872e-451f-b3ef-d013a8bc52b0.png\">\\n                <img src=\"https://6p840t8orn.kameleoon.io/images/29315-a8ff5e89-4feb-41f2-8503-3e7f61739ae8.png\" alt=\"Protegendo-o contra ameaas cibernticas em tempo real\" class=\"kam_realtime_mainImage\">\\n            </picture>\\n        </div>\\n        <div class=\"kam_realtime_contentSection\">\\n            <p class=\"kam_realtime_description\">Nossa proteo multicamadas protege seus dispositivos e dados 24 horas por dia, 7 dias por semana, para que voc possa ficar tranquilo sabendo que estamos presentes, descobrindo e removendo ameaas cibernticas comuns e complexas  medida que elas ocorrem.</p>\\n            <ul class=\"kam_realtime_featureList\">\\n                <li class=\"kam_realtime_featureItem\">\\n                    <img src=\"https://6p840t8orn.kameleoon.io/images/29315-1f210736-a1bf-4e19-a0f3-a6d5ecb6de96.png\" alt=\"Check\" class=\"kam_realtime_checkIcon\">\\n                    <div class=\"kam_realtime_featureText\">\\n                        <span class=\"kam_realtime_featureTitle\">Antivrus</span>\\n                        <span class=\"kam_realtime_featureDesc\">Protege continuamente seus dispositivos contra vrus e malware, inclusive ameaas complexas, como ataques sem arquivo ou rootkits.</span>\\n                    </div>\\n                </li>\\n                <li class=\"kam_realtime_featureItem\">\\n                    <img src=\"https://6p840t8orn.kameleoon.io/images/29315-1f210736-a1bf-4e19-a0f3-a6d5ecb6de96.png\" alt=\"Check\" class=\"kam_realtime_checkIcon\">\\n                    <div class=\"kam_realtime_featureText\">\\n                        <span class=\"kam_realtime_featureTitle\">Anti-Hacking</span>\\n                        <span class=\"kam_realtime_featureDesc\">Bloqueia sites mal-intencionados, e-mails de phishing, anncios infectados e skimmers de carto de crdito criados por hackers para roubar seus dados.</span>\\n                    </div>\\n                </li>\\n                <li class=\"kam_realtime_featureItem\">\\n                    <img src=\"https://6p840t8orn.kameleoon.io/images/29315-1f210736-a1bf-4e19-a0f3-a6d5ecb6de96.png\" alt=\"Check\" class=\"kam_realtime_checkIcon\">\\n                    <div class=\"kam_realtime_featureText\">\\n                        <span class=\"kam_realtime_featureTitle\">Anti-Ransomware</span>\\n                        <span class=\"kam_realtime_featureDesc\">Monitora seu computador em busca de ransomware e bloqueia qualquer ataque antes que ele ocorra, garantindo que seus arquivos no sejam mantidos como refns.</span>\\n                    </div>\\n                </li>\\n            </ul>\\n        </div>\\n    </div>\\n</div>\\n',mobileSection='<div class=\\'banner-Section-checkList\\'>\\n    <p><img src=\"https://6p840t8orn.kameleoon.io/images/29315-1f210736-a1bf-4e19-a0f3-a6d5ecb6de96.png\"> Bloqueia vrus, golpes e ransomware em tempo real</p>\\n    <p><img src=\"https://6p840t8orn.kameleoon.io/images/29315-1f210736-a1bf-4e19-a0f3-a6d5ecb6de96.png\"> Protege compras e pagamentos on-line contra fraudes</p>\\n</div>',waitSelector={firstSection:'div[class*=\"MastHead_textsWrapper\"] > div:first-child, [class*=\"MastheadSpecialOfferMulti_masthead\"] [class*=\"MastheadSpecialOfferMulti_container\"]',secondSection:'[class*=\"MastHead_plugin\"], [class*=\"MastheadSpecialOfferMulti_buyblocks\"]',thirdSection:'[data-at-selector-plugin-index=\"3\"] > section > div',fourthSection:'[data-at-selector-plugin-index=\"7\"] > section > ul[class*=\"AwardsAndPerformance_awardsGrid\"]',targetSection:'[class^=\"OpenBuyBlock_root\"]',imageToChange:'[class*=\"ImageInfoStrip_container\"] [class*=\"ImageInfoStrip_media\"] img',award3Element:'[data-at-selector-plugin-index=\"7\"] ul[class*=\"AwardsAndPerformance_awardsGrid\"] > li:nth-child(3)',awardUl:'[data-at-selector-plugin-index=\"7\"] ul[class*=\"AwardsAndPerformance_awardsGrid\"]',awardSection:'[data-at-selector-plugin-index=\"7\"] div[class*=\"AwardsAndPerformance_text\"]',awardHEading:'[data-at-selector-plugin-index=\"7\"] div[class*=\"AwardsAndPerformance_text\"] h2',awardSub:'[data-at-selector-plugin-index=\"7\"] div[class*=\"AwardsAndPerformance_text\"] h3',protectionChoiceSection:'[data-at-selector-plugin-index=\"1\"] [class*=\"MastHead_plugin\"], [data-at-selector-plugin-index=\"2\"]',imageText:'[class*=\"ImageInfoStrip_container\"] [class*=\"ImageInfoStrip_text\"] p'},isPhone=\"Phone\"===Kameleoon.API.CurrentVisit.device.type;function updateSidebarVisibility(e){if(!document.querySelector(\".kam_protection_sidebar\"))return;const a=document.querySelectorAll(\".kam_protection_smallBlock[data-index]\"),t=document.getElementById(\"antivirus-block\");a.forEach((a=>{const t=parseInt(a.getAttribute(\"data-index\"),10);a.style.display=t===e?\"none\":\"flex\"})),t&&(t.style.display=0===e?\"none\":\"flex\"),document.querySelectorAll(\".kam_protection_smallBlock\").forEach((e=>{e.classList.remove(\"active\")}))}const changeBannerText=e=>{const a=e.querySelector(\"h1\"),t=e.querySelector(\"h2\"),s=e.querySelector(\"div\");a.textContent=\"Proteo para sua vida online\",t.textContent=\"Planos ideais para trabalho, famlia e lazer. Escolha o seu.\",s.innerHTML=mobileSection},kamBespokeInti=([[e],[a],[t],[s],[n],[o],[i],[r],[c],[l],[d],[m],[p]])=>{e.insertAdjacentHTML(\"afterend\",firstBlockHtml),o.src=\"https://6p840t8orn.kameleoon.io/images/29315-da1a4a73-ebe2-4fb7-8650-e9618c1ff8dd.png\",s.insertAdjacentHTML(\"afterend\",fourthBlockHtml),l.innerHTML=isPhone?\"Excelncia comprovada em <br> <span class='kam-award-Heading'>segurana <br> ciberntica</span>\":\"Excelncia comprovada <br> em <span class='kam-award-Heading'>segurana <br> ciberntica</span>\",d.innerHTML=\"No ano passado, os produtos Kaspersky apareceram em <br> mais de 100 testes independentes, <span class='kam-award-Sub'>ganhando 93 prmios <br> de primeiro lugar</span>\",l.insertAdjacentHTML(\"beforebegin\",\"<p>Proteo premiada em que voc pode confiar</p>\"),isPhone?i.closest(\"ul\").querySelector(\"li:last-child\")?.insertAdjacentHTML(\"beforebegin\",\"<br>\"):i.insertAdjacentHTML(\"afterend\",\"<br>\");const u=document.createElement(\"div\");u.classList.add(\"kam_bespoke_awardSection\"),isPhone&&changeBannerText(e),c.insertAdjacentElement(\"afterend\",u),u.insertAdjacentElement(\"afterbegin\",r),u.insertAdjacentElement(\"afterbegin\",c);const k=window.innerWidth<768?secondBlockHtmlMobile:secondBlockHtml;a.insertAdjacentHTML(\"beforebegin\",k),t.insertAdjacentHTML(\"afterbegin\",thirdBlockHtml),p.innerHTML='Na Kaspersky, temos certeza de que seu novo Kaspersky Antivirus para Android proteger totalmente seus dispositivos Android, por isso oferecemos uma <span class=\"kam-award-Sub\" style=\"font-weight: 700;\">garantia de reembolso de 30 dias</span>',m.insertAdjacentHTML(\"afterbegin\",protectionChoiceHtml),setTimeout((()=>{const e=document.querySelector('.kam_protection_closeIcon[data-action=\"close\"]');e&&e.addEventListener(\"click\",kamProtectionNext);document.querySelectorAll(\".kam_protection_smallBlock[data-index]\").forEach((e=>{const a=parseInt(e.getAttribute(\"data-index\"),10);e.addEventListener(\"click\",(()=>kamProtectionSelect(a)))}));const a=document.querySelector(\".kamBespoke_button\");a&&a.addEventListener(\"click\",(()=>{isPhone?n.closest(\"#__next\")?.querySelector('[data-at-selector-plugin-index=\"2\"] [class*=\"MastheadSpecialOfferMulti_buyblocks\"]')?.scrollIntoView({behavior:\"smooth\"}):n.scrollIntoView({behavior:\"smooth\"})})),updateSidebarVisibility(0)}),100)},protectionData=[{title:'<span class=\"kam_highlight\">Antivrus</span> para tranquilidade',text:\"O antivrus em tempo real protege seus dispositivos contra vrus, malware e muito mais, para que seus dados permaneam seguros.\",image:\"https://6p840t8orn.kameleoon.io/images/29315-fd0b2637-e755-4db1-a26f-f1d6f61629b3.png\",showGreenText:!1},{title:'Compre on-line com <span class=\"kam_highlight\">segurana</span>',text:\"O Safe Money protege suas transaes financeiras e mantm suas compras on-line em um navegador da Web seguro.\",image:\"https://6p840t8orn.kameleoon.io/images/29315-17d65905-3b13-4f17-b40d-af30f287ed00.png\",showGreenText:!1},{title:'<span class=\"kam_highlight\">Proteja-se</span> dos hackers',text:\"Nossas ferramentas anti-hacking impedem o acesso no autorizado aos seus dispositivos e o ajudam a evitar golpes de phishing.\",image:\"https://6p840t8orn.kameleoon.io/images/29315-fa1e8f1c-b64b-48e1-96bd-88138c4c03c7.png\",showGreenText:!1},{title:'<span class=\"kam_highlight\">Remover</span> ameaas existentes',text:\"A Remoo de Ameaas Existentes remove qualquer vrus existente em seu computador e o repara, caso tenha sido danificado.\",image:\"https://6p840t8orn.kameleoon.io/images/29315-7236aef2-9021-4f75-94e8-52e75bd41b9f.png\",showGreenText:!0,greenText:\"O antivrus em tempo real protege seus dispositivos contra vrus, malware e muito mais, para que seus dados permaneam seguros.\"},{title:'<span class=\"kam_highlight\">Evite</span> o roubo de identidade',text:\"Receba alertas se as contas vinculadas ao seu nmero de telefone vazarem dados que possam ser usados para falsificar sua identidade.\",image:\"https://6p840t8orn.kameleoon.io/images/29315-70f1bf5e-3fa4-4be2-b3fe-33ed707f974a.png\",showGreenText:!1}];let currentActiveIndex=0,hasSeenRemover=!1;function reorderSidebarItems(){const e=document.querySelector(\".kam_protection_sidebar\");if(!e)return;const a=document.querySelectorAll(\".kam_protection_smallBlock[data-index]\"),t=document.getElementById(\"antivirus-block\");a.forEach((e=>{e.style.display=\"none\"})),a.forEach((e=>{3!==parseInt(e.getAttribute(\"data-index\"),10)&&(e.style.display=\"flex\")})),t&&(t.style.display=\"flex\",e.insertBefore(t,e.firstChild)),document.querySelectorAll(\".kam_protection_smallBlock\").forEach((e=>{e.classList.remove(\"active\")}))}function kamProtectionSelect(e){currentActiveIndex=e;const a=document.getElementById(\"kam_protection_activeImage\"),t=document.getElementById(\"kam_protection_activeTitle\"),s=document.getElementById(\"kam_protection_activeText\");document.getElementById(\"kam_protection_textContent\");a&&t&&s&&(a.src=protectionData[e].image,t.innerHTML=protectionData[e].title,s.textContent=protectionData[e].text,protectionData[e].showGreenText?s.textContent=protectionData[e].greenText:s.textContent=protectionData[e].text),3===e?(reorderSidebarItems(),hasSeenRemover=!0):updateSidebarVisibility(e)}function kamProtectionNext(){let e=(currentActiveIndex+1)%protectionData.length;hasSeenRemover&&3===e&&(e=4),kamProtectionSelect(e)}Kameleoon.API.Core.runWhenConditionTrue((()=>window.dataLayer?.some((e=>\"dataReady\"===e.event))),(()=>{Promise.all(Object.values(waitSelector).map((e=>new Promise((a=>{Kameleoon.API.Core.runWhenElementPresent(e,a)}))))).then(kamBespokeInti)}));","afterDOMReady":false}},{"name":"Variation 1","id":1150317,"css":".checkout-center{position:absolute;right:15px;top:50%;transform:translateY(-50%);display:inline-flex;align-items:center;gap:6px;font-weight:700;color:#1d1d1b;white-space:nowrap}.checkout-center .lock-icon{font-size:32px}.checkout-center::after{content:\"\";display:inline-block;width:16px;height:15px;background-image:url('https://6p840t8orn.kameleoon.io/images/29315-1e642b10-f551-430d-b2e0-e0be03b40172.svg');background-size:16px 15px;background-repeat:no-repeat}.HeaderText{display:none}.checkoutContent{margin-top:25px}.rating{display:flex;vertical-align:middle;gap:2px;margin-top:4px;font-size:13px;line-height:1}.star.full{color:gold}.star.half{position:relative;display:inline-block;color:#d3d3d3}.star.half .base{display:block}.star.half .overlay{position:absolute;top:0;left:0;width:50%;overflow:hidden;color:gold}.Products:not(.-reco)>.Product>.wrapper .action{top:0}.checkoutContent{display:grid}.cartAmount .PriceWrapper.savings .content{border-radius:20px;background-color:#ffe810;padding:2px 10px}.cartAmount .PriceWrapper.total .value.before{margin:5px 0}.cartAmount .PriceWrapper.total .value{color:#1d1d1b;line-height:1}.Container.cartAmount{grid-row:2}.newElements{display:flex;gap:20px;justify-content:center;grid-row:3;color:#444}.card{position:relative;font-size:14px;display:flex;align-items:center;gap:8px;flex:1}.card .logo{display:block;height:40px;width:40px;min-width:40px;background-repeat:no-repeat;background-position:center;background-size:contain}.card .logo.mbg{background-image:url('https://6p840t8orn.kameleoon.io/images/29315-6454d32a-7cb5-486b-9616-5ab0fecccee7.png')}.card .logo.dss{background-image:url('https://6p840t8orn.kameleoon.io/images/29315-117933a8-8534-4890-aa93-2ef3eb3e6545.png')}.card .tooltip{position:absolute;top:95%;left:50%;transform:translateX(-50%);background-color:#fff;color:#444;padding:10px;border-radius:4px;font-size:13px;visibility:hidden;opacity:0;transition:opacity .3s ease;pointer-events:none;z-index:999;max-width:100%;width:250px;box-shadow:0 0 16px 0 rgb(29 29 29 / 24%)}.PaymentPanel .subheader-text{font-size:14px}.PaymentPanel .subheader-text span{display:none}.ProductsHeader{justify-content:space-between}.Container.cartBill .subscriptionMessage{display:none}.customSubscriptionInfo{display:flex;justify-content:space-between;font-size:14px;margin-top:8px;margin-bottom:8px}.customSubscriptionInfo__childWrapper{display:flex}.customSubscriptionInfo__variant{padding-right:10px;position:relative}.customSubscriptionInfo__duration{padding-left:10px}.customSubscriptionInfo__renewal{max-width:155px;text-align:right;font-size:14px;color:#666}#disclaimers-container .title{font-size:14px;font-weight:400;color:#333;padding:.2em .6em .3em}#disclaimer-list{list-style-type:disc;padding-left:20px;color:#1d1d1b;font-size:14px}#disclaimer-list li::marker{font-size:8px}.DisclaimerSubscription.recurring,.DisclaimerSubscription.secondDisclaimer,.Reinsurrance.disclaimer{display:none}.Products.-candyrack{padding:0;border:none}@media screen and (max-width:450px){.Product.-candyrack.-wide .wrapper .main .prices{flex-basis:initial}.Product .ProductMain{justify-content:space-between}.Product .ProductMain .referentials{display:none}.Products:not(.-reco)>.Product>.wrapper .action{position:absolute;top:-5px}.Product.-candyrack.-wide .wrapper .main .prices{margin:0}.-candyrack .ProductMain>.info{padding-right:0}}.Reinsurrance.disclaimer .list{border-top:1px solid #dcdcdc;margin-top:5px}.collapse-toggle{position:relative;font-size:14px;padding-top:5px}.collapse-toggle::after{content:'';width:10px;height:10px;border-width:0 2px 2px 0;border-style:solid;border-color:#999;position:absolute;transform:rotate(225deg);right:30px;top:10px}.collapse-toggle.collapsed::after{transform:rotate(45deg);top:5px}","elementSets":[],"javaScriptCode":{"code":"const MAIN_HEADER=\"Checkout seguro\",COLLAPSE_TEXT=\"Detalhes do plano e do pagamento\",CONTINUE_1_STEP=\"Continuar\",PRODUCT_HEADING=\"Seu carrinho\",FORM_HEADING=\"1. Dados de faturamento\",PAYMENT_HEADING=\"2. Informaes sobre pagamento\",MBG_TEXT=\"Garantia de devoluo\",MBG_TOOLTIP=\"Voc pode solicitar um reembolso total em at 30 dias aps a compra se no estiver satisfeito com seu novo plano.\",PCI_DSS_TEXT=\"Cumpre com PCI DSS\",PCI_DSS_TOOLTIP=\"Todos os seus dados de pagamento so estritamente protegidos de acordo com os padres globais de segurana do setor (PCI DSS) para garantir que suas informaes permaneam seguras e protegidas.\",PRODUCT_LIST=[\"plus\",\"premium\",\"standard\"],FROM_RENEWAL=\"renovao por 1 ano\",LIFE_TIME_REGEX=/(\\d+\\s+(year|years|month|months))/i,NEXT_RENEWAL_REGEX=/Next renewal:\\s+(.+?)\\s+for/i,REINSURRANCE_MX=\"Esta licencia solo se puede activar en Mxico. No se puede activar en Amrica Latina, las Islas del Caribe ni las Islas Ultramarinas Menores de EE. UU. Se requiere una cuenta de My Kaspersky.\",REINSURRANCE_DEFAULT=\"Esta licena no pode ser ativada fora do Brasil. necessrio ter uma conta My Kaspersky.\";function isMX(){return location.hostname.includes(\"shop-mx\")}function addNewelements(){const e=document.querySelector(\".checkoutContent\"),t=document.createElement(\"div\");function n(e,t,n){const a=document.createElement(\"div\");a.classList.add(\"card\");const o=document.createElement(\"div\");o.classList.add(\"logo\",n);const r=document.createElement(\"span\");r.textContent=e;const c=document.createElement(\"i\");c.classList.add(\"fa\",\"fa-question-circle-o\");const s=document.createElement(\"div\");return s.classList.add(\"tooltip\"),s.textContent=t,c.addEventListener(\"mouseenter\",(()=>{s.style.visibility=\"visible\",s.style.opacity=\"1\"})),c.addEventListener(\"mouseleave\",(()=>{s.style.visibility=\"hidden\",s.style.opacity=\"0\"})),a.appendChild(o),a.appendChild(r),a.appendChild(c),c.appendChild(s),a}t.classList.add(\"Container\",\"newElements\");const a=n(MBG_TEXT,MBG_TOOLTIP,\"mbg\"),o=n(PCI_DSS_TEXT,PCI_DSS_TOOLTIP,\"dss\");t.appendChild(a),t.appendChild(o),e.appendChild(t)}function addMainHeading(){const e=document.querySelector(\".TopBar\");if(!e)return;const t=document.createElement(\"div\");t.className=\"checkout-center\";const n=document.createElement(\"span\");n.textContent=MAIN_HEADER,t.appendChild(n),e.appendChild(t)}function addProductRaiting(e){const t=e.querySelector(\".ProductMain .name\");if(!PRODUCT_LIST.some((e=>t.textContent.toLowerCase().includes(e))))return;if(e.querySelector(\".rating\"))return;const n=document.createElement(\"span\");n.classList.add(\"rating\");for(let e=0;e<4;e++){const e=document.createElement(\"span\");e.classList.add(\"star\",\"full\"),e.textContent=\"\",n.appendChild(e)}const a=document.createElement(\"span\");a.classList.add(\"star\",\"half\");const o=document.createElement(\"span\");o.classList.add(\"base\"),o.textContent=\"\";const r=document.createElement(\"span\");r.classList.add(\"overlay\"),r.textContent=\"\",a.appendChild(o),a.appendChild(r),n.appendChild(a),n.setAttribute(\"aria-label\",\"Rating: 4.5 out of 5\"),t.appendChild(n)}function processProduct(e){if(!document.body||!e)return;const t=e.querySelector(\".lifetime-variant .lifeTime\"),n=e.querySelector(\".lifetime-variant .variant\"),a=e.querySelector(\".next-renewal .renewalPrice\"),o=document.createElement(\"div\");if(o.className=\"customSubscriptionInfo\",t&&n){const e=t.textContent.trim().toLowerCase(),a=n.textContent.trim().toLowerCase(),r=e.match(LIFE_TIME_REGEX),c=r?r[1]:\"\",s=document.createElement(\"div\");s.textContent=a,s.className=\"customSubscriptionInfo__variant\";const i=document.createElement(\"div\");i.textContent=c,i.className=\"customSubscriptionInfo__duration\";const d=document.createElement(\"div\");d.className=\"customSubscriptionInfo__childWrapper\",d.appendChild(s),d.appendChild(i),o.appendChild(d)}if(a){const e=a.textContent.trim().match(NEXT_RENEWAL_REGEX),t=`${e?e[1]:\"\"} ${FROM_RENEWAL}`,n=document.createElement(\"div\");n.textContent=t,n.className=\"customSubscriptionInfo__renewal\",o.appendChild(n)}addProductRaiting(e),e.querySelector(\".customSubscriptionInfo\")||e.appendChild(o)}function changeContinueButtonText(){const e=document.querySelector(\".FormPanel .Continue .Button.nextAccordion\");(e||\"Continuar\"===e.textContent)&&(e.textContent=\"Continuar\")}function updateProductPanelHeading(){const e=document.querySelector(\".ProductsHeader span\");e&&\"Seu carrinho\"!==e.textContent&&(e.textContent=\"Seu carrinho\")}function updateFormPanelHeading(){const e=document.querySelector(\".FormPanel .wording.header-text\");e&&e.textContent!==FORM_HEADING&&(e.textContent=FORM_HEADING)}function updatePaymentPanelHeading(){const e=document.querySelector(\".PaymentPanel .wording.header-text\");e&&e.textContent!==PAYMENT_HEADING&&(e.textContent=PAYMENT_HEADING)}function updateReinsurrance(){const e=isMX()?REINSURRANCE_MX:REINSURRANCE_DEFAULT,t=document.querySelector(\".Reinsurrance.disclaimer .Disclaimer\");t&&t.textContent!==e&&(t.textContent=e)}function addDisclamerCollapse(){const e=document.querySelector(\".Container.cartBill\"),t=document.querySelectorAll(\".cartBill .DisclaimerSubscription\");if(document.querySelector(\".collapse-toggle\")||0===t.length)return;let n=!0;const a=document.createElement(\"div\");a.textContent=COLLAPSE_TEXT,a.classList.add(\"collapse-toggle\"),a.classList.toggle(\"collapsed\",n),t.forEach((e=>e.style.display=n?\"none\":\"flex\")),a.addEventListener(\"click\",(()=>{n=!n,t.forEach((e=>e.style.display=n?\"none\":\"flex\")),a.classList.toggle(\"collapsed\",n)})),e.insertBefore(a,t[0])}function addNewDisclamer(){const e=['Como funciona a assinatura:sua assinatura comea no dia da compra e ser automaticamente renovada a cada perodo para que sua proteo no seja interrompida. Ns enviaremos um lembrete por e-mail sobre a cobrana futura, e voc ser cobrado pelo preo sem desconto (que est sujeito a alterao) antes do incio do prximo perodo de assinatura. Voc pode cancelar a qualquer momento. <a href=\"#\" id=\"saiba-mais-link\">Saiba mais</a>',\"Pagamentos recorrentes: O nosso revendedor oficial, Nexway, cobrar ao seu mtodo de pagamento armazenado o preo de renovao aplicvel nesse momento.\",\"Esta licena no pode ser ativada fora do Brasil. necessrio ter uma conta My Kaspersky..\"];if(document.getElementById(\"disclaimers-container\"))return;const t=document.querySelector(\".checkoutForms .form.row\"),n=document.querySelector(\".Container.cartBill .DisclaimerSubscription.recurring .read-more\"),a=document.createElement(\"div\");a.id=\"disclaimers-container\";const o=document.createElement(\"div\");o.className=\"title\",o.textContent=\"Detalhes do plano e do pagamento:\",a.appendChild(o);const r=document.createElement(\"ul\");r.id=\"disclaimer-list\",e.forEach(((e,t)=>{const n=document.createElement(\"li\");n.innerHTML=e,r.appendChild(n)}));r.querySelector(\"#saiba-mais-link\").addEventListener(\"click\",(function(e){e.preventDefault(),n&&n.click()})),a.appendChild(r),t.appendChild(a)}function observeForms(){const e=document.querySelector(\".FormPanel .wording.header-text\");if(!e)return;new MutationObserver((e=>{e.forEach((()=>{changeContinueButtonText(),updateFormPanelHeading(),addNewDisclamer()}))})).observe(e,{childList:!0,subtree:!0,characterData:!0}),changeContinueButtonText(),updateFormPanelHeading(),addNewDisclamer()}function observeProducts(){const e=document.querySelector(\".Container.cartBill\");if(!e)return;new MutationObserver((e=>{e.forEach((()=>{document.querySelectorAll(\".Container.cartBill .Product\").forEach(processProduct),updateProductPanelHeading(),updateReinsurrance()}))})).observe(e,{childList:!0,subtree:!0}),document.querySelectorAll(\".Container.cartBill .Product\").forEach(processProduct),updateProductPanelHeading(),updateReinsurrance()}setTimeout((()=>{observeProducts(),observeForms(),addMainHeading(),addNewelements(),updatePaymentPanelHeading()}),600);","afterDOMReady":false}},{"name":"B_NewDesign","id":1162592,"css":"","elementSets":[],"javaScriptCode":{"code":"window.__BR_VSB_KSOS_NewDesign(window);","afterDOMReady":false}},{"id":0,"name":"Reference","css":"","elementSets":[]},{"id":null,"name":"Excluded"}],"goals":[{"id":359383,"name":"Retention rate","type":"ENGAGEMENT"},{"id":362126,"name":"Revenue Goal","type":"CUSTOM"},{"id":362438,"name":"Confirmation page","type":"URL","url":"(.*)/checkout/confirmation(.*)"},{"id":362439,"name":"Cart_addition","type":"URL","url":"(.*)/checkout/add(.*)"},{"id":379195,"name":"Click on Comprar Agora","type":"CUSTOM"}],"scriptProduceTime":1759219883160,"timeZone":"Europe/London","webExperimentationSetup":true,"boLocale":"ENGLISH","graphicalEditorVersion":"v1","isNewEditorEnabled":true,"DATA_URL":"https://eu-data.kameleoon.io","useMultipleSiteCodes":true,"useWideDomainSupport":true,"geolocation":true,"customIntegrations":[{"name":"Yandex Metrica Global","jsCode":"let YM_ID;\r\n\r\nconst yandexIds = [\r\n    { url: 'kaspersky.com.au', id: 98379142 },\r\n    { url: 'kaspersky.be', id: 98382158 },\r\n    { url: 'kaspersky.com.br', id: 98379184 },\r\n    { url: 'kaspersky.ca', id: 98379224 },\r\n    { url: 'kaspersky.com.cn', id: 98379257 },\r\n    { url: 'kaspersky.cz', id: 98379280 },\r\n    { url: 'kaspersky.de', id: 98379301 },\r\n    { url: 'kaspersky.fr', id: 98380211 },\r\n    { url: 'kaspersky.com', id: 98380851 },\r\n    { url: 'kaspersky.gr', id: 98380235 },\r\n    { url: 'kaspersky.com.hk', id: 93595297 },\r\n    { url: 'kaspersky.co.in', id: 93595185 },\r\n    { url: 'kaspersky.it', id: 98380456 },\r\n    { url: 'kaspersky.co.jp', id: 98380489 },\r\n    { url: 'kaspersky.kz', id: 98380519 },\r\n    { url: 'kaspersky.co.kr', id: 93595166 },\r\n    { url: 'latam.kaspersky.com', id: 93595105 },\r\n    { url: 'me-en.kaspersky.com', id: 93595236 },\r\n    { url: 'me.kaspersky.com', id: 93595236 },\r\n    { url: 'kaspersky.nl', id: 98380606 },\r\n    { url: 'kaspersky.pt', id: 98380641 },\r\n    { url: 'kaspersky.ru', id: 24906428 },\r\n    { url: 'kaspersky.co.za', id: 93595271 },\r\n    { url: 'kaspersky.es', id: 98380706 },\r\n    { url: 'kaspersky.com.tw', id: 93595129 },\r\n    { url: 'kaspersky.co.th', id: 98380742 },\r\n    { url: 'kaspersky.com.tr', id: 93595200 },\r\n    { url: 'kaspersky.co.uk', id: 98380769 },\r\n    { url: 'usa.kaspersky.com', id: 98380790 },\r\n    { url: 'kaspersky.com.vn', id: 93595289 },\r\n    { url: 'afrique.kaspersky.com', id: 98380806 },\r\n    { url: 'africa.kaspersky.com', id: 93595271 },\r\n    { url: 'kaspersky.my', id: 98380851 },\r\n    { url: 'hu.kaspersky.com', id: 98380374 },\r\n    { url: 'kaspersky.ro', id: 98380655 },\r\n    { url: 'bg.kaspersky.com', id: 98379204 },\r\n    { url: 'kaspersky.ma', id: 93595218 },\r\n    { url: 'kaspersky.rs', id: 98380666 },\r\n    { url: 'no.kaspersky.com', id: 98380627 },\r\n    { url: 'kaspersky.se', id: 98380720 },\r\n    { url: 'kaspersky.fi', id: 98380190 },\r\n    { url: 'kaspersky.de', id: 98379313 }\r\n    ]\r\n\r\n\r\nconst currentUrl = window.location.href;\r\nconst parsedUrl = new URL(currentUrl);\r\n\r\nyandexIds.sort((a, b) => b.url.length - a.url.length);\r\n\r\nconst match = yandexIds.find(item => {\r\n    return parsedUrl.hostname === item.url || parsedUrl.hostname.includes(item.url);\r\n});\r\n\r\n// Optional : send data to a specific web data stream by providing a Measurement ID (replace G-XXXXXXXXXXX by your Measurement ID)\r\nYM_ID = match?.id;\r\n\r\n// Define the id of the current experiment or personalization\r\nconst id = experimentID ? experimentID : personalizationID;\r\n\r\n// Define the name of the current experiment or personalization\r\nconst name = experimentName ? experimentName : personalizationName;\r\n\r\nconst processYM = function () {\r\n    window.ym(YM_ID, \"params\", {\r\n        'ab_test': {\r\n            [name]: {\r\n                [variationName]: {},\r\n            }\r\n        }\r\n    });\r\n    window.ym(YM_ID, \"userParams\", {\r\n        'ab_test_user': {\r\n            [name]: {\r\n                [variationName]: {},\r\n            }\r\n        }\r\n    });\r\n};\r\n\r\nKameleoon.API.Core.runWhenConditionTrue(function () {\r\n    return window.ym != null;\r\n}, processYM, 150);"},{"name":"GA custom integration","jsCode":"// Define the id of the current experiment or personalization\r\nconst id = experimentID ? experimentID : personalizationID;\r\n\r\n// Define the name of the current experiment or personalization\r\nconst name = experimentName ? experimentName : personalizationName;\r\n\r\n// Optional : send data to a specific web data stream by providing a Measurement ID (replace G-XXXXXXXXXXX by your Measurement ID)\r\n\r\nconst processGA4Audience =(measurementID)=> {\r\n    window.gtag(\"event\", \"ab_test\", {\r\n        exp_variant_string: `KAM-${id}-${variationID}`,\r\n        ab_test_id: id,\r\n        ab_test_name: name,\r\n        ab_test_variant_id: variationID,\r\n        ab_test_variant_name: variationName,\r\n        send_to: measurementID\r\n    });\r\n};\r\n\r\nKameleoon.API.Core.runWhenConditionTrue(\r\n    () => { return window.google_tag_manager && window.gtag != null; }, \r\n    () => { \r\n        const findGtagID =()=> {\r\n            for (const key in window.google_tag_manager) {\r\n                if (key.startsWith('G-')) {\r\n                    return key; // Return the matching key\r\n                }\r\n            }\r\n            return null; // Return null if no match is found\r\n        }\r\n        \r\n        const matchingId = findGtagID();\r\n        if (matchingId) {\r\n            Kameleoon.API.Data.setCustomData(\"Measurement ID and domain\", `${matchingId} - ${window.location.hostname}`);\r\n            processGA4Audience(`${matchingId}`)\r\n        }       \r\n\r\n    }, 150\r\n);"},{"name":"Glassbox Event","jsCode":"// Define the name of the current experiment or personalization\r\nconst name = experimentName ? experimentName : personalizationName;\r\n\r\n// Define the id of the current experiment or personalization\r\nconst id = experimentID ? experimentID : personalizationID;\r\n\r\nconst campaign_id = experimentID;\r\nconst campaign_name = experimentName;\r\nconst variation_id = variationID;\r\nconst variantion_name = variationName;\r\n\r\nconst processGlassBox = function () {\r\n  window._detector.triggerABTestingEvent(\"Kameleoon\", campaign_id, campaign_name, variation_id, variantion_name);\r\n};\r\n\r\nKameleoon.API.Core.runWhenConditionTrue(\r\n  function () {\r\n    return typeof window._detector != \"undefined\";\r\n  },\r\n  processGlassBox,\r\n  150\r\n);"},{"name":"Glassbox Custom Integration","jsCode":"// Define the name of the current experiment or personalization\r\nconst name = experimentName ? experimentName : personalizationName;\r\n\r\n// Define the id of the current experiment or personalization\r\nconst id = experimentID ? experimentID : personalizationID;\r\n\r\nconst processGlassBox = function () {\r\n  window._detector.triggerABTestingEvent(\"Kameleoon\", String(id), name, String(variationID), variationName);\r\n};\r\n\r\nKameleoon.API.Core.runWhenConditionTrue(\r\n  function () {\r\n    return typeof window._detector != \"undefined\";\r\n  },\r\n  processGlassBox,\r\n  150\r\n);"},{"name":"Glassbox 2","jsCode":"\r\n// Define the name of the current experiment or personalization\r\nconst name = experimentName ? experimentName : personalizationName;\r\n\r\n// Define the id of the current experiment or personalization\r\nconst id = experimentID ? experimentID : personalizationID;\r\n\r\n// Define the event type\r\nconst eventType = experimentID ? \"Experiment\" : \"Personalization\";\r\n\r\nconst experimentId = id;\r\nconst experimentName = name;\r\nconst variantId = variationID;\r\nconst variantName = variationName;\r\n\r\nconst processGlassBox = function () {\r\n  window._detector.triggerABTestingEvent(\"Kameleoon\", experimentId, experimentName, variantId, variantName);\r\n  /*{\r\n    event: eventType,\r\n    campaign_id: id,\r\n    campaign_name: name,\r\n    variation_id: variationID,\r\n    variation_name: variationName,\r\n  });*/\r\n};\r\n\r\nKameleoon.API.Core.runWhenConditionTrue(\r\n  function () {\r\n    return typeof window._detector != \"undefined\";\r\n  },\r\n  processGlassBox,\r\n  150\r\n);\r\n"}],"globalScript":"console.log(\"[Script Last Update]\",new Date(Kameleoon.Internals.configuration.scriptProduceTime).toLocaleString());class GlobalScript{handleConsent(){}triggerEvents(){}convertGoalsAndSetCDs(){location.href.includes(\"/checkout/add\")&&Kameleoon.API.Core.runWhenConditionTrue((()=>window.kaspersky&&window.kaspersky.referrer),(()=>{Kameleoon.API.Data.setCustomData(\"referrer\",window.kaspersky.referrer)})),Kameleoon.API.Core.runWhenConditionTrue((()=>window.kaspersky&&window.kaspersky.pageType),(()=>{Kameleoon.API.Data.setCustomData(\"pageType\",window.kaspersky.pageType)})),window.location.href.includes(\"checkout/add\")&&Kameleoon.API.Core.runWhenConditionTrue((()=>window.kaspersky.products),(()=>{const e=window.kaspersky.products.find((e=>\"\"!==e.licenseType)).licenseType;e&&Kameleoon.API.Data.setCustomData(\"licenceType\",e);const o=window.kaspersky.products.find((e=>\"\"!==e.business)).business;o&&Kameleoon.API.Data.setCustomData(\"business\",o)})),window.location.href.includes(\"/renewal-center/\")&&Kameleoon.API.Core.runWhenConditionTrue((()=>window.kaspersky?.verdictDaysExpired),(()=>{const e=window.kaspersky?.verdictDaysExpired;e>=-90&&e<=-50?Kameleoon.API.Data.setCustomData(\"LRC_Exit\",\"90-50 days before exp\"):e>=-49&&e<=-31?Kameleoon.API.Data.setCustomData(\"LRC_Exit\",\"50-31 days before exp\"):e>=-30&&e<=-16?Kameleoon.API.Data.setCustomData(\"LRC_Exit\",\"30-16 days before exp\"):e>=-15&&e<=0?Kameleoon.API.Data.setCustomData(\"LRC_Exit\",\"15-0 days before exp\"):e>=1&&e<=21?Kameleoon.API.Data.setCustomData(\"LRC_Exit\",\"0-21 days after exp\"):e>21&&Kameleoon.API.Data.setCustomData(\"LRC_Exit\",\"more than 21 days after exp\")}));const e=[\"couponCode\",\"currency\",\"orderId\",\"orderLevelDiscount\",\"paymentMethod\",\"products\"];if(/cart\\.kaspersky.*\\/confirmation/.test(location.href)&&!sessionStorage.getItem(\"goalAlreadyConvert\")){let o={};Kameleoon.API.Core.runWhenConditionTrue((()=>{if(o.purchase=\"purchase\"===window?.kaspersky?.events??null,o.revenu=window?.kaspersky?.revenueWoVat??null,o.currency=window?.kaspersky?.currency??null,o.revenu&&o.currency&&o.purchase)return o}),(()=>{(async function(e,o){if(\"0\"===e)return 0;const t=fetch(`https://customers.kameleoon.com/kameleoon/currencies/convert?inputCurr=${o}&outputCurr=USD&amount=${e}`,{method:\"GET\",headers:{\"Content-Type\":\"text/plain\"}});return(await t).json()})(o.revenu.toString(),o.currency).then((o=>{sessionStorage.setItem(\"goalAlreadyConvert\",\"true\"),Kameleoon.API.Goals.processConversion(362126,o),e.forEach((e=>{Kameleoon.API.Core.runWhenConditionTrue((()=>\"products\"===e?window.kaspersky?.products?.some((e=>\"\"!==e.itemName)):window.kaspersky?.hasOwnProperty(e)),(()=>{let o;o=\"products\"===e?window.kaspersky.products.find((e=>\"\"!==e.itemName)).itemName:window.kaspersky[e],o||(o=\"UNDEFINED\"),Kameleoon.API.Data.setCustomData(e,o)}),200)}))})).catch((e=>{console.error(\"Error in currency conversion: \",e)}))}))}else!/cart\\.kaspersky.*\\/confirmation/.test(location.href)&&sessionStorage.getItem(\"goalAlreadyConvert\")&&sessionStorage.removeItem(\"goalAlreadyConvert\")}configExternalTools(){}init(){this.convertGoalsAndSetCDs()}}const globalScript=new GlobalScript;globalScript.init();","abortCustomScript":"return /.*kaspersky.*|.*Bot\\/Crawler.*|.*Chrome-Lighthouse.*/i.test(navigator.userAgent);","enableRemoteVisitorSynchronization":true,"track":true,"trackerExcludedIPRanges":[],"useProduct":true,"Gatherer":"eyJtYXhWaXNpdElkbGVEdXJhdGlvbiI6MTgwMDAwMCwiZGlyZWN0Tm9uZVJlZmVycmVyT25seUZpcnN0IjpmYWxzZSwiYnJvd3NlcnMiOnsiMCI6eyJuYW1lIjoiQ0hST01FIn0sIjEiOnsibmFtZSI6IkVYUExPUkVSIn0sIjIiOnsibmFtZSI6IkZJUkVGT1gifSwiMyI6eyJuYW1lIjoiU0FGQVJJIn0sIjQiOnsibmFtZSI6Ik9QRVJBIn19LCJvc3MiOnsiMCI6eyJuYW1lIjoiV0lORE9XUyJ9LCIxIjp7Im5hbWUiOiJNQUMifSwiMiI6eyJuYW1lIjoiSU9TIn0sIjMiOnsibmFtZSI6IkxJTlVYIn0sIjQiOnsibmFtZSI6IkFORFJPSUQifSwiNSI6eyJuYW1lIjoiV0lORE9XUyBQSE9ORSJ9fSwibm9SZWZlcnJlclBhZ2VzIjpbXSwicmVmZXJyZXJzIjp7IjAiOnsibmFtZSI6Ikdvb2dsZSBBZFdvcmRzIiwicHJpb3JpdHkiOjAsImRldGVjdGlvbnMiOlt7Im1ldGhvZCI6MCwiYW5kIjpmYWxzZSwicGFyYW1ldGVycyI6Il4uK1xcXFwuZ29vZ2xlKFxcXFwuY29tPyk/XFxcXC5bXi9cXFxcLl0rL2FjbGsoW1xcXFw/JiNdLip8KSQifSx7Im1ldGhvZCI6MSwiYW5kIjpmYWxzZSwicGFyYW1ldGVycyI6IltcXFxcPyYjXWdjbGlkPSJ9XX0sIjEiOnsibmFtZSI6Ikdvb2dsZSBPcmdhbmljIFNlYXJjaCIsInByaW9yaXR5IjowLCJkZXRlY3Rpb25zIjpbeyJtZXRob2QiOjAsImFuZCI6ZmFsc2UsInBhcmFtZXRlcnMiOiJeLitcXFxcLmdvb2dsZShcXFxcLmNvbT8pP1xcXFwuW14vXFxcXC5dKy8oPyFhY2xrfGltZ3JlcykuKltcXFxcPyYjXXE9LiooW1xcXFw/JiNdLip8KSQifSx7Im1ldGhvZCI6MCwiYW5kIjpmYWxzZSwicGFyYW1ldGVycyI6Il4uK1xcXFwuZ29vZ2xlKFxcXFwuY29tPyk/XFxcXC5bXi9cXFxcLl0rLz8kIn1dfSwiMiI6eyJuYW1lIjoiQmluZyBPcmdhbmljIFNlYXJjaCIsInByaW9yaXR5IjowLCJkZXRlY3Rpb25zIjpbeyJtZXRob2QiOjAsImFuZCI6ZmFsc2UsInBhcmFtZXRlcnMiOiJeLitcXFxcLmJpbmdcXFxcLlteL1xcXFwuXSsvLipbXFxcXD8mI11xPS4qKFtcXFxcPyYjXS4qfCkkIn1dfSwiMyI6eyJuYW1lIjoiWWFob28gT3JnYW5pYyBTZWFyY2giLCJwcmlvcml0eSI6MCwiZGV0ZWN0aW9ucyI6W3sibWV0aG9kIjowLCJhbmQiOmZhbHNlLCJwYXJhbWV0ZXJzIjoiXi4rXFxcXC55YWhvb1xcXFwuW14vXFxcXC5dKy8uKltcXFxcPyYjXXA9LiooW1xcXFw/JiNdLip8KSQifV19LCI0Ijp7Im5hbWUiOiJCYWlkdSBPcmdhbmljIFNlYXJjaCIsInByaW9yaXR5IjowLCJkZXRlY3Rpb25zIjpbeyJtZXRob2QiOjAsImFuZCI6ZmFsc2UsInBhcmFtZXRlcnMiOiJeLitcXFxcLmJhaWR1XFxcXC5bXi9cXFxcLl0rLy4qW1xcXFw/JiNdd2Q9LiooW1xcXFw/JiNdLip8KSQifV19fSwia2V5UGFnZXMiOnt9LCJjdXN0b21EYXRhIjp7IjAiOnsibWV0aG9kIjoiQ0xJRU5UIiwibmFtZSI6InJlZmVycmVyIiwiZm9ybWF0IjotMSwic2NvcGUiOiJWSVNJVCIsInR5cGUiOiJVTklRVUUifSwiMSI6eyJtZXRob2QiOiJDTElFTlQiLCJuYW1lIjoicGFnZVR5cGUiLCJmb3JtYXQiOi0xLCJzY29wZSI6IlBBR0UiLCJ0eXBlIjoiVU5JUVVFIn0sIjIiOnsibWV0aG9kIjoiQ0xJRU5UIiwibmFtZSI6ImNvdXBvbkNvZGUiLCJmb3JtYXQiOi0xLCJzY29wZSI6IlZJU0lUIiwidHlwZSI6IlVOSVFVRSJ9LCIzIjp7Im1ldGhvZCI6IkNMSUVOVCIsIm5hbWUiOiJwYXltZW50TWV0aG9kIiwiZm9ybWF0IjotMSwic2NvcGUiOiJWSVNJVCIsInR5cGUiOiJVTklRVUUifSwiNCI6eyJtZXRob2QiOiJDTElFTlQiLCJuYW1lIjoicHJvZHVjdHMiLCJmb3JtYXQiOi0xLCJzY29wZSI6IlZJU0lUIiwidHlwZSI6IlVOSVFVRSJ9LCI1Ijp7Im1ldGhvZCI6IkNMSUVOVCIsIm5hbWUiOiJvcmRlckxldmVsRGlzY291bnQiLCJmb3JtYXQiOjAsInNjb3BlIjoiVklTSVQiLCJ0eXBlIjoiVU5JUVVFIn0sIjYiOnsibWV0aG9kIjoiQ0xJRU5UIiwibmFtZSI6ImN1cnJlbmN5IiwiZm9ybWF0IjotMSwic2NvcGUiOiJWSVNJVCIsInR5cGUiOiJVTklRVUUifSwiNyI6eyJtZXRob2QiOiJDTElFTlQiLCJuYW1lIjoib3JkZXJJZCIsImZvcm1hdCI6LTEsInNjb3BlIjoiVklTSVQiLCJ0eXBlIjoiVU5JUVVFIn0sIjgiOnsibWV0aG9kIjoiQ0xJRU5UIiwibmFtZSI6Ik1lYXN1cmVtZW50IElEIGFuZCBkb21haW4iLCJmb3JtYXQiOi0xLCJzY29wZSI6IlBBR0UiLCJ0eXBlIjoiVU5JUVVFIn0sIjkiOnsibWV0aG9kIjoiQ0xJRU5UIiwibmFtZSI6ImxpY2VuY2VUeXBlIiwiZm9ybWF0IjotMSwic2NvcGUiOiJWSVNJVCIsInR5cGUiOiJVTklRVUUifSwiMTAiOnsibWV0aG9kIjoiQ0xJRU5UIiwibmFtZSI6ImJ1c2luZXNzIiwiZm9ybWF0IjotMSwic2NvcGUiOiJWSVNJVCIsInR5cGUiOiJVTklRVUUifSwiMTEiOnsibWV0aG9kIjoiQ0xJRU5UIiwibmFtZSI6IkxSQ19FeGl0IiwiZm9ybWF0IjotMSwic2NvcGUiOiJWSVNJVCIsInR5cGUiOiJVTklRVUUifX19"}};
})();if (window.kameleoonLightIframe){if (window.kameleoonExternalIFrameLoadedData) { window.kameleoonQueue = window.kameleoonQueue || [];window.kameleoonQueue.push({level: 'IMMEDIATE',command: function () {Kameleoon.Utils.runProtectedScript(window.kameleoonExternalIFrameLoadedData);}}); Kameleoon.Analyst.load();}}else{Kameleoon.Analyst.load();}}