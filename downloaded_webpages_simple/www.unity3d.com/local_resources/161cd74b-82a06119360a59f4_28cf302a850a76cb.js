try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="c0c60868-5ffe-407f-a8f4-7feb2561d924",e._sentryDebugIdIdentifier="sentry-dbid-c0c60868-5ffe-407f-a8f4-7feb2561d924")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2211],{25163:(e,t,r)=>{r.d(t,{$9:()=>p1,FX:()=>hA,Iz:()=>yk,Qv:()=>h2,Um:()=>h4,VV:()=>p6,dl:()=>y6,sc:()=>p3,u6:()=>ui}),r(37811);var n=Object.create,a=Object.defineProperty,i=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,s=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,u=(e,t,r)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,c=r(66778),d=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),f=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let s of o(t))l.call(e,s)||s===r||a(e,s,{get:()=>t[s],enumerable:!(n=i(t,s))||n.enumerable});return e},p=(e,t,r)=>(r=null!=e?n(s(e)):{},f(!t&&e&&e.__esModule?r:a(r,"default",{value:e,enumerable:!0}),e)),h=(e,t,r)=>u(e,"symbol"!=typeof t?t+"":t,r),g=d((e,t)=>{"use strict";t.exports=function(e){if(0==arguments.length)throw TypeError("1 argument required, but only 0 present.");if((e=(e="".concat(e)).replace(/[ \t\n\f\r]/g,"")).length%4==0&&(e=e.replace(/==?$/,"")),e.length%4==1||/[^+/0-9A-Za-z]/.test(e))return null;let t="",r=0,n=0;for(let a=0;a<e.length;a++)r<<=6,r|=function(e){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e);return t<0?void 0:t}(e[a]),24===(n+=6)&&(t+=String.fromCharCode((0xff0000&r)>>16),t+=String.fromCharCode((65280&r)>>8),t+=String.fromCharCode(255&r),r=n=0);return 12===n?(r>>=4,t+=String.fromCharCode(r)):18===n&&(r>>=2,t+=String.fromCharCode((65280&r)>>8),t+=String.fromCharCode(255&r)),t}}),y=d((e,t)=>{"use strict";t.exports=function(e){let t;if(0==arguments.length)throw TypeError("1 argument required, but only 0 present.");for(e="".concat(e),t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return null;let r="";for(t=0;t<e.length;t+=3){let n=[void 0,void 0,void 0,void 0];n[0]=e.charCodeAt(t)>>2,n[1]=(3&e.charCodeAt(t))<<4,e.length>t+1&&(n[1]|=e.charCodeAt(t+1)>>4,n[2]=(15&e.charCodeAt(t+1))<<2),e.length>t+2&&(n[2]|=e.charCodeAt(t+2)>>6,n[3]=63&e.charCodeAt(t+2));for(let e=0;e<n.length;e++)typeof n[e]>"u"?r+="=":r+=function(e){if(e>=0&&e<64)return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e]}(n[e])}return r}}),m=d((e,t)=>{"use strict";t.exports={atob:g(),btoa:y()}}),v=d((e,t)=>{"use strict";var r="u">typeof self?self:"u">typeof window?window:void 0;if(!r)throw Error("Unable to find global scope. Are you sure this is running in the browser?");if(!r.AbortController)throw Error('Could not find "AbortController" in the global scope. You need to polyfill it first');t.exports.AbortController=r.AbortController}),w=d((e,t)=>{"use strict";t.exports=fetch}),S=d(e=>{"use strict";var t=e&&e.__assign||function(){return(t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var r={delayFirstAttempt:!1,jitter:"none",maxDelay:1/0,numOfAttempts:10,retry:function(){return!0},startingDelay:100,timeMultiple:2};e.getSanitizedOptions=function(e){var n=t(t({},r),e);return n.numOfAttempts<1&&(n.numOfAttempts=1),n}}),b=d(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.fullJitter=function(e){return Math.round(Math.random()*e)}}),C=d(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.noJitter=function(e){return e}}),I=d(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=b(),r=C();e.JitterFactory=function(e){return"full"===e.jitter?t.fullJitter:r.noJitter}}),q=d(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=I();e.Delay=function(){function e(e){this.options=e,this.attempt=0}return e.prototype.apply=function(){var e=this;return new Promise(function(t){return setTimeout(t,e.jitteredDelay)})},e.prototype.setAttemptNumber=function(e){this.attempt=e},Object.defineProperty(e.prototype,"jitteredDelay",{get:function(){return t.JitterFactory(this.options)(this.delay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){return Math.min(this.options.startingDelay*Math.pow(this.options.timeMultiple,this.numOfDelayedAttempts),this.options.maxDelay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt},enumerable:!0,configurable:!0}),e}()}),k=d(e=>{"use strict";var t=e&&e.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),r=e&&e.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(a,i){function o(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(o,s)}l((n=n.apply(e,t||[])).next())})},n=e&&e.__generator||function(e,t){var r,n,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){var l=[i,s];if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(a=2&l[0]?n.return:l[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,l[1])).done)return a;switch(n=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,n=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){o.label=l[1];break}if(6===l[0]&&o.label<a[1]){o.label=a[1],a=l;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(l);break}a[2]&&o.ops.pop(),o.trys.pop();continue}l=t.call(e,o)}catch(e){l=[6,e],n=0}finally{r=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}};Object.defineProperty(e,"__esModule",{value:!0}),e.SkipFirstDelay=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return t(a,e),a.prototype.apply=function(){return r(this,void 0,void 0,function(){return n(this,function(t){return[2,!!this.isFirstAttempt||e.prototype.apply.call(this)]})})},Object.defineProperty(a.prototype,"isFirstAttempt",{get:function(){return 0===this.attempt},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt-1},enumerable:!0,configurable:!0}),a}(q().Delay)}),O=d(e=>{"use strict";var t=e&&e.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.AlwaysDelay=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return t(r,e),r}(q().Delay)}),x=d(e=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=k(),r=O();e.DelayFactory=function(e,n){var a,i=(a=e).delayFirstAttempt?new r.AlwaysDelay(a):new t.SkipFirstDelay(a);return i.setAttemptNumber(n),i}}),A=d(e=>{"use strict";var t=e&&e.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(a,i){function o(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(o,s)}l((n=n.apply(e,t||[])).next())})},r=e&&e.__generator||function(e,t){var r,n,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){var l=[i,s];if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(a=2&l[0]?n.return:l[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,l[1])).done)return a;switch(n=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,n=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){o.label=l[1];break}if(6===l[0]&&o.label<a[1]){o.label=a[1],a=l;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(l);break}a[2]&&o.ops.pop(),o.trys.pop();continue}l=t.call(e,o)}catch(e){l=[6,e],n=0}finally{r=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}};Object.defineProperty(e,"__esModule",{value:!0});var n=S(),a=x();e.backOff=function(e,a){return void 0===a&&(a={}),t(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,new i(e,n.getSanitizedOptions(a)).execute()];case 1:return[2,t.sent()]}})})};var i=function(){function e(e,t){this.request=e,this.options=t,this.attemptNumber=0}return e.prototype.execute=function(){return t(this,void 0,void 0,function(){var e;return r(this,function(t){switch(t.label){case 0:if(this.attemptLimitReached)return[3,7];t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this.applyDelay()];case 2:return t.sent(),[4,this.request()];case 3:return[2,t.sent()];case 4:return e=t.sent(),this.attemptNumber++,[4,this.options.retry(e,this.attemptNumber)];case 5:if(!t.sent()||this.attemptLimitReached)throw e;return[3,6];case 6:return[3,0];case 7:throw Error("Something went wrong.")}})})},Object.defineProperty(e.prototype,"attemptLimitReached",{get:function(){return this.attemptNumber>=this.options.numOfAttempts},enumerable:!0,configurable:!0}),e.prototype.applyDelay=function(){return t(this,void 0,void 0,function(){return r(this,function(e){switch(e.label){case 0:return[4,a.DelayFactory(this.options,this.attemptNumber).apply()];case 1:return e.sent(),[2]}})})},e}()}),R=d((e,t)=>{"use strict";!function(n,a){"object"==typeof e&&"u">typeof t?t.exports=a():"function"==typeof define&&r.amdO?define(a):(n="u">typeof globalThis?globalThis:n||self).dayjs=a()}(e,function(){var e="millisecond",t="second",r="minute",n="hour",a="week",i="month",o="quarter",s="year",l="date",u="Invalid Date",c=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,d=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,f=function(e,t,r){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(r)+e},p="en",h={};h[p]={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],r=e%100;return"["+e+(t[(r-20)%10]||t[r]||t[0])+"]"}};var g="$isDayjsObject",y=function(e){return e instanceof S||!(!e||!e[g])},m=function e(t,r,n){var a;if(!t)return p;if("string"==typeof t){var i=t.toLowerCase();h[i]&&(a=i),r&&(h[i]=r,a=i);var o=t.split("-");if(!a&&o.length>1)return e(o[0])}else{var s=t.name;h[s]=t,a=s}return!n&&a&&(p=a),a||!n&&p},v=function(e,t){if(y(e))return e.clone();var r="object"==typeof t?t:{};return r.date=e,r.args=arguments,new S(r)},w={s:f,z:function(e){var t=-e.utcOffset(),r=Math.abs(t);return(t<=0?"+":"-")+f(Math.floor(r/60),2,"0")+":"+f(r%60,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var n=12*(r.year()-t.year())+(r.month()-t.month()),a=t.clone().add(n,i),o=r-a<0,s=t.clone().add(n+(o?-1:1),i);return+(-(n+(r-a)/(o?a-s:s-a))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(u){return({M:i,y:s,w:a,d:"day",D:l,h:n,m:r,s:t,ms:e,Q:o})[u]||String(u||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}};w.l=m,w.i=y,w.w=function(e,t){return v(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var S=function(){function f(e){this.$L=m(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[g]=!0}var p=f.prototype;return p.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(w.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(c);if(n){var a=n[2]-1||0,i=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],a,n[3]||1,n[4]||0,n[5]||0,n[6]||0,i)):new Date(n[1],a,n[3]||1,n[4]||0,n[5]||0,n[6]||0,i)}}return new Date(t)}(e),this.init()},p.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},p.$utils=function(){return w},p.isValid=function(){return this.$d.toString()!==u},p.isSame=function(e,t){var r=v(e);return this.startOf(t)<=r&&r<=this.endOf(t)},p.isAfter=function(e,t){return v(e)<this.startOf(t)},p.isBefore=function(e,t){return this.endOf(t)<v(e)},p.$g=function(e,t,r){return w.u(e)?this[t]:this.set(r,e)},p.unix=function(){return Math.floor(this.valueOf()/1e3)},p.valueOf=function(){return this.$d.getTime()},p.startOf=function(e,o){var u=this,c=!!w.u(o)||o,d=w.p(e),f=function(e,t){var r=w.w(u.$u?Date.UTC(u.$y,t,e):new Date(u.$y,t,e),u);return c?r:r.endOf("day")},p=function(e,t){return w.w(u.toDate()[e].apply(u.toDate("s"),(c?[0,0,0,0]:[23,59,59,999]).slice(t)),u)},h=this.$W,g=this.$M,y=this.$D,m="set"+(this.$u?"UTC":"");switch(d){case s:return c?f(1,0):f(31,11);case i:return c?f(1,g):f(0,g+1);case a:var v=this.$locale().weekStart||0,S=(h<v?h+7:h)-v;return f(c?y-S:y+(6-S),g);case"day":case l:return p(m+"Hours",0);case n:return p(m+"Minutes",1);case r:return p(m+"Seconds",2);case t:return p(m+"Milliseconds",3);default:return this.clone()}},p.endOf=function(e){return this.startOf(e,!1)},p.$set=function(a,o){var u,c=w.p(a),d="set"+(this.$u?"UTC":""),f=((u={}).day=d+"Date",u[l]=d+"Date",u[i]=d+"Month",u[s]=d+"FullYear",u[n]=d+"Hours",u[r]=d+"Minutes",u[t]=d+"Seconds",u[e]=d+"Milliseconds",u)[c],p="day"===c?this.$D+(o-this.$W):o;if(c===i||c===s){var h=this.clone().set(l,1);h.$d[f](p),h.init(),this.$d=h.set(l,Math.min(this.$D,h.daysInMonth())).$d}else f&&this.$d[f](p);return this.init(),this},p.set=function(e,t){return this.clone().$set(e,t)},p.get=function(e){return this[w.p(e)]()},p.add=function(e,o){var l,u=this;e=Number(e);var c=w.p(o),d=function(t){var r=v(u);return w.w(r.date(r.date()+Math.round(t*e)),u)};if(c===i)return this.set(i,this.$M+e);if(c===s)return this.set(s,this.$y+e);if("day"===c)return d(1);if(c===a)return d(7);var f=((l={})[r]=6e4,l[n]=36e5,l[t]=1e3,l)[c]||1,p=this.$d.getTime()+e*f;return w.w(p,this)},p.subtract=function(e,t){return this.add(-1*e,t)},p.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return r.invalidDate||u;var n=e||"YYYY-MM-DDTHH:mm:ssZ",a=w.z(this),i=this.$H,o=this.$m,s=this.$M,l=r.weekdays,c=r.months,f=r.meridiem,p=function(e,r,a,i){return e&&(e[r]||e(t,n))||a[r].slice(0,i)},h=function(e){return w.s(i%12||12,e,"0")},g=f||function(e,t,r){var n=e<12?"AM":"PM";return r?n.toLowerCase():n};return n.replace(d,function(e,n){return n||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return w.s(t.$y,4,"0");case"M":return s+1;case"MM":return w.s(s+1,2,"0");case"MMM":return p(r.monthsShort,s,c,3);case"MMMM":return p(c,s);case"D":return t.$D;case"DD":return w.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return p(r.weekdaysMin,t.$W,l,2);case"ddd":return p(r.weekdaysShort,t.$W,l,3);case"dddd":return l[t.$W];case"H":return String(i);case"HH":return w.s(i,2,"0");case"h":return h(1);case"hh":return h(2);case"a":return g(i,o,!0);case"A":return g(i,o,!1);case"m":return String(o);case"mm":return w.s(o,2,"0");case"s":return String(t.$s);case"ss":return w.s(t.$s,2,"0");case"SSS":return w.s(t.$ms,3,"0");case"Z":return a}return null}(e)||a.replace(":","")})},p.utcOffset=function(){return-(15*Math.round(this.$d.getTimezoneOffset()/15))},p.diff=function(e,l,u){var c,d=this,f=w.p(l),p=v(e),h=(p.utcOffset()-this.utcOffset())*6e4,g=this-p,y=function(){return w.m(d,p)};switch(f){case s:c=y()/12;break;case i:c=y();break;case o:c=y()/3;break;case a:c=(g-h)/6048e5;break;case"day":c=(g-h)/864e5;break;case n:c=g/36e5;break;case r:c=g/6e4;break;case t:c=g/1e3;break;default:c=g}return u?c:w.a(c)},p.daysInMonth=function(){return this.endOf(i).$D},p.$locale=function(){return h[this.$L]},p.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),n=m(e,t,!0);return n&&(r.$L=n),r},p.clone=function(){return w.w(this.$d,this)},p.toDate=function(){return new Date(this.valueOf())},p.toJSON=function(){return this.isValid()?this.toISOString():null},p.toISOString=function(){return this.$d.toISOString()},p.toString=function(){return this.$d.toUTCString()},f}(),b=S.prototype;return v.prototype=b,[["$ms",e],["$s",t],["$m",r],["$H",n],["$W","day"],["$M",i],["$y",s],["$D",l]].forEach(function(e){b[e[1]]=function(t){return this.$g(t,e[0],e[1])}}),v.extend=function(e,t){return e.$i||(e(t,S,v),e.$i=!0),v},v.locale=m,v.isDayjs=y,v.unix=function(e){return v(1e3*e)},v.en=h[p],v.Ls=h,v.p={},v})}),E=d((e,t)=>{"use strict";!function(n,a){"object"==typeof e&&"u">typeof t?t.exports=a():"function"==typeof define&&r.amdO?define(a):(n="u">typeof globalThis?globalThis:n||self).dayjs_plugin_quarterOfYear=a()}(e,function(){var e="month",t="quarter";return function(r,n){var a=n.prototype;a.quarter=function(e){return this.$utils().u(e)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(e-1))};var i=a.add;a.add=function(r,n){return r=Number(r),this.$utils().p(n)===t?this.add(3*r,e):i.bind(this)(r,n)};var o=a.startOf;a.startOf=function(r,n){var a=this.$utils(),i=!!a.u(n)||n;if(a.p(r)===t){var s=this.quarter()-1;return i?this.month(3*s).startOf(e).startOf("day"):this.month(3*s+2).endOf(e).endOf("day")}return o.bind(this)(r,n)}}})}),F=d((e,t)=>{"use strict";!function(n,a){"object"==typeof e&&"u">typeof t?t.exports=a():"function"==typeof define&&r.amdO?define(a):(n="u">typeof globalThis?globalThis:n||self).dayjs_plugin_customParseFormat=a()}(e,function(){var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,r=/\d\d/,n=/\d\d?/,a=/\d*[^-_:/,()\s\d]+/,i={},o=function(e){return(e*=1)+(e>68?1900:2e3)},s=function(e){return function(t){this[e]=+t}},l=[/[+-]\d\d:?(\d\d)?|Z/,function(e){(this.zone||(this.zone={})).offset=function(e){if(!e||"Z"===e)return 0;var t=e.match(/([+-]|\d\d)/g),r=60*t[1]+(+t[2]||0);return 0===r?0:"+"===t[0]?-r:r}(e)}],u=function(e){var t=i[e];return t&&(t.indexOf?t:t.s.concat(t.f))},c=function(e,t){var r,n=i.meridiem;if(n){for(var a=1;a<=24;a+=1)if(e.indexOf(n(a,0,t))>-1){r=a>12;break}}else r=e===(t?"pm":"PM");return r},d={A:[a,function(e){this.afternoon=c(e,!1)}],a:[a,function(e){this.afternoon=c(e,!0)}],S:[/\d/,function(e){this.milliseconds=100*e}],SS:[r,function(e){this.milliseconds=10*e}],SSS:[/\d{3}/,function(e){this.milliseconds=+e}],s:[n,s("seconds")],ss:[n,s("seconds")],m:[n,s("minutes")],mm:[n,s("minutes")],H:[n,s("hours")],h:[n,s("hours")],HH:[n,s("hours")],hh:[n,s("hours")],D:[n,s("day")],DD:[r,s("day")],Do:[a,function(e){var t=i.ordinal,r=e.match(/\d+/);if(this.day=r[0],t)for(var n=1;n<=31;n+=1)t(n).replace(/\[|\]/g,"")===e&&(this.day=n)}],M:[n,s("month")],MM:[r,s("month")],MMM:[a,function(e){var t=u("months"),r=(u("monthsShort")||t.map(function(e){return e.slice(0,3)})).indexOf(e)+1;if(r<1)throw Error();this.month=r%12||r}],MMMM:[a,function(e){var t=u("months").indexOf(e)+1;if(t<1)throw Error();this.month=t%12||t}],Y:[/[+-]?\d+/,s("year")],YY:[r,function(e){this.year=o(e)}],YYYY:[/\d{4}/,s("year")],Z:l,ZZ:l};return function(r,n,a){a.p.customParseFormat=!0,r&&r.parseTwoDigitYear&&(o=r.parseTwoDigitYear);var s=n.prototype,l=s.parse;s.parse=function(r){var n=r.date,o=r.utc,s=r.args;this.$u=o;var u=s[1];if("string"==typeof u){var c=!0===s[2],f=!0===s[3],p=s[2];f&&(p=s[2]),i=this.$locale(),!c&&p&&(i=a.Ls[p]),this.$d=function(r,n,a){try{if(["x","X"].indexOf(n)>-1)return new Date(("X"===n?1e3:1)*r);var o=(function(r){var n,a;n=r,a=i&&i.formats;for(var o=(r=n.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(t,r,n){var i=n&&n.toUpperCase();return r||a[n]||e[n]||a[i].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(e,t,r){return t||r.slice(1)})})).match(t),s=o.length,l=0;l<s;l+=1){var u=o[l],c=d[u],f=c&&c[0],p=c&&c[1];o[l]=p?{regex:f,parser:p}:u.replace(/^\[|\]$/g,"")}return function(e){for(var t={},r=0,n=0;r<s;r+=1){var a=o[r];if("string"==typeof a)n+=a.length;else{var i=a.regex,l=a.parser,u=e.slice(n),c=i.exec(u)[0];l.call(t,c),e=e.replace(c,"")}}return function(e){var t=e.afternoon;if(void 0!==t){var r=e.hours;t?r<12&&(e.hours+=12):12===r&&(e.hours=0),delete e.afternoon}}(t),t}})(n)(r),s=o.year,l=o.month,u=o.day,c=o.hours,f=o.minutes,p=o.seconds,h=o.milliseconds,g=o.zone,y=new Date,m=u||(s||l?1:y.getDate()),v=s||y.getFullYear(),w=0;s&&!l||(w=l>0?l-1:y.getMonth());var S=c||0,b=f||0,C=p||0,I=h||0;return g?new Date(Date.UTC(v,w,m,S,b,C,I+60*g.offset*1e3)):a?new Date(Date.UTC(v,w,m,S,b,C,I)):new Date(v,w,m,S,b,C,I)}catch(e){return new Date("")}}(n,u,o),this.init(),p&&!0!==p&&(this.$L=this.locale(p).$L),(c||f)&&n!=this.format(u)&&(this.$d=new Date("")),i={}}else if(u instanceof Array)for(var h=u.length,g=1;g<=h;g+=1){s[1]=u[g-1];var y=a.apply(this,s);if(y.isValid()){this.$d=y.$d,this.$L=y.$L,this.init();break}g===h&&(this.$d=new Date(""))}else l.call(this,r)}}})}),T=d((e,t)=>{"use strict";var r=/(^|; )Coveo-Pendragon=([^;]*)/;t.exports=()=>{var e;return(null==(e=r.exec(document.cookie))?void 0:e.pop())||null}}),D=d((e,t)=>{"use strict";!function(n,a){"object"==typeof e&&"u">typeof t?t.exports=a():"function"==typeof define&&r.amdO?define(a):(n="u">typeof globalThis?globalThis:n||self).dayjs_plugin_timezone=a()}(e,function(){var e={year:0,month:1,day:2,hour:3,minute:4,second:5},t={};return function(r,n,a){var i,o=function(e,r,n){void 0===n&&(n={});var a,i,o,s,l=new Date(e);return(void 0===(a=n)&&(a={}),(s=t[o=r+"|"+(i=a.timeZoneName||"short")])||(s=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:r,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:i}),t[o]=s),s).formatToParts(l)},s=function(t,r){for(var n=o(t,r),i=[],s=0;s<n.length;s+=1){var l=n[s],u=l.type,c=l.value,d=e[u];d>=0&&(i[d]=parseInt(c,10))}var f=i[3],p=i[0]+"-"+i[1]+"-"+i[2]+" "+(24===f?0:f)+":"+i[4]+":"+i[5]+":000",h=+t;return(a.utc(p).valueOf()-(h-=h%1e3))/6e4},l=n.prototype;l.tz=function(e,t){void 0===e&&(e=i);var r,n=this.utcOffset(),o=this.toDate(),s=o.toLocaleString("en-US",{timeZone:e}),l=Math.round((o-new Date(s))/1e3/60),u=-(15*Math.round(o.getTimezoneOffset()/15))-l;if(Number(u)){if(r=a(s,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(u,!0),t){var c=r.utcOffset();r=r.add(n-c,"minute")}}else r=this.utcOffset(0,t);return r.$x.$timezone=e,r},l.offsetName=function(e){var t=this.$x.$timezone||a.tz.guess(),r=o(this.valueOf(),t,{timeZoneName:e}).find(function(e){return"timezonename"===e.type.toLowerCase()});return r&&r.value};var u=l.startOf;l.startOf=function(e,t){if(!this.$x||!this.$x.$timezone)return u.call(this,e,t);var r=a(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return u.call(r,e,t).tz(this.$x.$timezone,!0)},a.tz=function(e,t,r){var n=r&&t,o=r||t||i,l=s(+a(),o);if("string"!=typeof e)return a(e).tz(o);var u=function(e,t,r){var n=e-60*t*1e3,a=s(n,r);if(t===a)return[n,t];var i=s(n-=60*(a-t)*1e3,r);return a===i?[n,a]:[e-60*Math.min(a,i)*1e3,Math.max(a,i)]}(a.utc(e,n).valueOf(),l,o),c=u[0],d=u[1],f=a(c).utcOffset(d);return f.$x.$timezone=o,f},a.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},a.tz.setDefault=function(e){i=e}}})}),j=d((e,t)=>{"use strict";!function(n,a){"object"==typeof e&&"u">typeof t?t.exports=a():"function"==typeof define&&r.amdO?define(a):(n="u">typeof globalThis?globalThis:n||self).dayjs_plugin_utc=a()}(e,function(){var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(n,a,i){var o=a.prototype;i.utc=function(e){var t={date:e,utc:!0,args:arguments};return new a(t)},o.utc=function(t){var r=i(this.toDate(),{locale:this.$L,utc:!0});return t?r.add(this.utcOffset(),e):r},o.local=function(){return i(this.toDate(),{locale:this.$L,utc:!1})};var s=o.parse;o.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),s.call(this,e)};var l=o.init;o.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else l.call(this)};var u=o.utcOffset;o.utcOffset=function(n,a){var i=this.$utils().u;if(i(n))return this.$u?0:i(this.$offset)?u.call(this):this.$offset;if("string"==typeof n&&null===(n=function(e){void 0===e&&(e="");var n=e.match(t);if(!n)return null;var a=(""+n[0]).match(r)||["-",0,0],i=a[0],o=60*a[1]+ +a[2];return 0===o?0:"+"===i?o:-o}(n)))return this;var o=16>=Math.abs(n)?60*n:n,s=this;if(a)return s.$offset=o,s.$u=0===n,s;if(0!==n){var l=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(s=this.local().add(o+l,e)).$offset=o,s.$x.$localOffset=l}else s=this.utc();return s};var c=o.format;o.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return c.call(this,t)},o.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*e},o.isUTC=function(){return!!this.$u},o.toISOString=function(){return this.toDate().toISOString()},o.toString=function(){return this.toDate().toUTCString()};var d=o.toDate;o.toDate=function(e){return"s"===e&&this.$offset?i(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():d.call(this)};var f=o.diff;o.diff=function(e,t,r){if(e&&this.$u===e.$u)return f.call(this,e,t,r);var n=this.local(),a=i(e).local();return f.call(n,a,t,r)}}})}),M=d((e,t)=>{"use strict";function r(e){try{return JSON.stringify(e)}catch(e){return'"[Circular]"'}}t.exports=function(e,t,n){var a=n&&n.stringify||r;if("object"==typeof e&&null!==e){var i=t.length+1;if(1===i)return e;var o=Array(i);o[0]=a(e);for(var s=1;s<i;s++)o[s]=a(t[s]);return o.join(" ")}if("string"!=typeof e)return e;var l=t.length;if(0===l)return e;for(var u="",c=0,d=-1,f=e&&e.length||0,p=0;p<f;){if(37===e.charCodeAt(p)&&p+1<f){switch(d=d>-1?d:0,e.charCodeAt(p+1)){case 100:case 102:if(c>=l||null==t[c])break;d<p&&(u+=e.slice(d,p)),u+=Number(t[c]),d=p+2,p++;break;case 105:if(c>=l||null==t[c])break;d<p&&(u+=e.slice(d,p)),u+=Math.floor(Number(t[c])),d=p+2,p++;break;case 79:case 111:case 106:if(c>=l||void 0===t[c])break;d<p&&(u+=e.slice(d,p));var h=typeof t[c];if("string"===h){u+="'"+t[c]+"'",d=p+2,p++;break}if("function"===h){u+=t[c].name||"<anonymous>",d=p+2,p++;break}u+=a(t[c]),d=p+2,p++;break;case 115:if(c>=l)break;d<p&&(u+=e.slice(d,p)),u+=String(t[c]),d=p+2,p++;break;case 37:d<p&&(u+=e.slice(d,p)),u+="%",d=p+2,p++,c--}++c}++p}return -1===d?e:(d<f&&(u+=e.slice(d)),u)}}),P=d((e,t)=>{"use strict";var r=M();t.exports=u;var n=function(){function e(e){return"u">typeof e&&e}try{return"u">typeof globalThis||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch(t){return e(self)||e(window)||e(this)||{}}}().console||{};function a(e,t){return"silent"===e?1/0:t.levels.values[e]}var i=Symbol("pino.logFuncs"),o=Symbol("pino.hierarchy"),s={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function l(e,t){let r={logger:t,parent:e[o]};t[o]=r}function u(e){var t,r,o;let p,h,g;(e=e||{}).browser=e.browser||{};let w=e.browser.transmit;if(w&&"function"!=typeof w.send)throw Error("pino: transmit option must have a send function");let S=e.browser.write||n;e.browser.write&&(e.browser.asObject=!0);let b=e.serializers||{},C=(t=e.browser.serialize,Array.isArray(t)?t.filter(function(e){return"!stdSerializers.err"!==e}):!0===t&&Object.keys(b)),I=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(I=!1);let q=Object.keys(e.customLevels||{}),k=["error","fatal","warn","info","debug","trace"].concat(q);"function"==typeof S&&k.forEach(function(e){S[e]=S}),(!1===e.enabled||e.browser.disabled)&&(e.level="silent");let O=e.level||"info",x=Object.create(S);x.log||(x.log=y),p={},k.forEach(e=>{p[e]=S[e]?S[e]:n[e]||n[s[e]||"log"]||y}),x[i]=p,l({},x),Object.defineProperty(x,"levelVal",{get:function(){return a(this.level,this)}}),Object.defineProperty(x,"level",{get:function(){return this._level},set:function(e){if("silent"!==e&&!this.levels.values[e])throw Error("unknown level "+e);this._level=e,c(this,A,x,"error"),c(this,A,x,"fatal"),c(this,A,x,"warn"),c(this,A,x,"info"),c(this,A,x,"debug"),c(this,A,x,"trace"),q.forEach(e=>{c(this,A,x,e)})}});let A={transmit:w,serialize:C,asObject:e.browser.asObject,formatters:e.browser.formatters,levels:k,timestamp:"function"==typeof(r=e).timestamp?r.timestamp:!1===r.timestamp?m:v};return h=e.customLevels||{},x.levels={values:Object.assign({},u.levels.values,h),labels:Object.assign({},u.levels.labels,(g={},Object.keys(o=h).forEach(function(e){g[o[e]]=e}),g))},x.level=O,x.setMaxListeners=x.getMaxListeners=x.emit=x.addListener=x.on=x.prependListener=x.once=x.prependOnceListener=x.removeListener=x.removeAllListeners=x.listeners=x.listenerCount=x.eventNames=x.write=x.flush=y,x.serializers=b,x._serialize=C,x._stdErrSerialize=I,x.child=function(t,r){if(!t)throw Error("missing bindings for child Pino");r=r||{},C&&t.serializers&&(r.serializers=t.serializers);let n=r.serializers;if(C&&n){var a=Object.assign({},b,n),i=!0===e.browser.serialize?Object.keys(a):C;delete t.serializers,d([t],i,a,this._stdErrSerialize)}function o(e){this._childLevel=(0|e._childLevel)+1,this.bindings=t,a&&(this.serializers=a,this._serialize=i),w&&(this._logEvent=f([].concat(e._logEvent.bindings,t)))}o.prototype=this;let s=new o(this);return l(this,s),s.level=this.level,s},w&&(x._logEvent=f()),x}function c(e,t,s,l){var u,c,p,h,g,m,v;if(Object.defineProperty(e,l,{value:a(e.level,s)>a(l,s)?y:s[i][l],writable:!0,enumerable:!0,configurable:!0}),!t.transmit&&e[l]===y)return;e[l]=(u=e,c=t,p=s,h=l,g=u[i][h],function(){let e=c.timestamp(),t=Array(arguments.length),i=Object.getPrototypeOf&&Object.getPrototypeOf(this)===n?n:this;for(var o,s,l,y=0;y<t.length;y++)t[y]=arguments[y];if(c.serialize&&!c.asObject&&d(t,this._serialize,this.serializers,this._stdErrSerialize),c.asObject||c.formatters?g.call(i,function(e,t,n,a){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},{level:o=()=>e.levels.values[t],log:s=e=>e}=i;e._serialize&&d(n,e._serialize,e.serializers,e._stdErrSerialize);let l=n.slice(),u=l[0],c={};a&&(c.time=a),c.level=o(t,e.levels.values[t]);let f=(0|e._childLevel)+1;if(f<1&&(f=1),null!==u&&"object"==typeof u){for(;f--&&"object"==typeof l[0];)Object.assign(c,l.shift());u=l.length?r(l.shift(),l):void 0}else"string"==typeof u&&(u=r(l.shift(),l));return void 0!==u&&(c.msg=u),s(c)}(this,h,t,e,c.formatters)):g.apply(i,t),c.transmit){let r,n,i,g,y,m,v=c.transmit.level||u._level,w=p.levels.values[v],S=p.levels.values[h];if(S<w)return;o=this,s={ts:e,methodLevel:h,methodValue:S,transmitLevel:v,transmitValue:p.levels.values[c.transmit.level||u._level],send:c.transmit.send,val:a(u._level,p)},l=t,r=s.send,n=s.ts,i=s.methodLevel,g=s.methodValue,y=s.val,m=o._logEvent.bindings,d(l,o._serialize||Object.keys(o.serializers),o.serializers,void 0===o._stdErrSerialize||o._stdErrSerialize),o._logEvent.ts=n,o._logEvent.messages=l.filter(function(e){return -1===m.indexOf(e)}),o._logEvent.level.label=i,o._logEvent.level.value=g,r(i,o._logEvent,y),o._logEvent=f(m)}});let w=function(e){let t=[];e.bindings&&t.push(e.bindings);let r=e[o];for(;r.parent;)(r=r.parent).logger.bindings&&t.push(r.logger.bindings);return t.reverse()}(e);0!==w.length&&(e[l]=(m=w,v=e[l],function(){return v.apply(this,[...m,...arguments])}))}function d(e,t,r,n){for(let a in e)if(n&&e[a]instanceof Error)e[a]=u.stdSerializers.err(e[a]);else if("object"==typeof e[a]&&!Array.isArray(e[a]))for(let n in e[a])t&&t.indexOf(n)>-1&&n in r&&(e[a][n]=r[n](e[a][n]))}function f(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function p(e){let t={type:e.constructor.name,msg:e.message,stack:e.stack};for(let r in e)void 0===t[r]&&(t[r]=e[r]);return t}function h(){return{}}function g(e){return e}function y(){}function m(){return!1}function v(){return Date.now()}u.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},u.stdSerializers={mapHttpRequest:h,mapHttpResponse:h,wrapRequestSerializer:g,wrapResponseSerializer:g,wrapErrorSerializer:g,req:h,res:h,err:p,errWithCause:p},u.stdTimeFunctions=Object.assign({},{nullTime:m,epochTime:v,unixTime:function(){return Math.round(Date.now()/1e3)},isoTime:function(){return new Date(Date.now()).toISOString()}}),t.exports.default=u,t.exports.pino=u});function U(e){return"Minified Redux error #".concat(e,"; visit https://redux.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}var _="function"==typeof Symbol&&Symbol.observable||"@@observable",V=()=>Math.random().toString(36).substring(7).split("").join("."),Q={INIT:"@@redux/INIT".concat(V()),REPLACE:"@@redux/REPLACE".concat(V()),PROBE_UNKNOWN_ACTION:()=>"@@redux/PROBE_UNKNOWN_ACTION".concat(V())};function L(e){if("object"!=typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function N(e){let t=Object.keys(e),r={};for(let n=0;n<t.length;n++){let a=t[n];"function"==typeof e[a]&&(r[a]=e[a])}let n=Object.keys(r),a;try{Object.keys(r).forEach(e=>{let t=r[e];if(typeof t(void 0,{type:Q.INIT})>"u")throw Error(U(12));if(typeof t(void 0,{type:Q.PROBE_UNKNOWN_ACTION()})>"u")throw Error(U(13))})}catch(e){a=e}return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(a)throw a;let i=!1,o={};for(let a=0;a<n.length;a++){let s=n[a],l=r[s],u=e[s],c=l(u,t);if(typeof c>"u")throw t&&t.type,Error(U(14));o[s]=c,i=i||c!==u}return(i=i||n.length!==Object.keys(e).length)?o:e}}function z(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?e=>e:1===t.length?t[0]:t.reduce((e,t)=>function(){for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];return e(t(...n))})}function $(e){return L(e)&&"type"in e&&"string"==typeof e.type}var B=Symbol.for("immer-nothing"),H=Symbol.for("immer-draftable"),Y=Symbol.for("immer-state");function W(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: ".concat(e,". Full error at: https://bit.ly/3cXEKWf"))}var G=Object.getPrototypeOf;function K(e){return!!e&&!!e[Y]}function J(e){var t;return!!e&&(X(e)||Array.isArray(e)||!!e[H]||!!(null==(t=e.constructor)?void 0:t[H])||ei(e)||eo(e))}var Z=Object.prototype.constructor.toString();function X(e){if(!e||"object"!=typeof e)return!1;let t=G(e);if(null===t)return!0;let r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===Z}function ee(e,t){0===et(e)?Object.entries(e).forEach(r=>{let[n,a]=r;t(n,a,e)}):e.forEach((r,n)=>t(n,r,e))}function et(e){let t=e[Y];return t?t.type_:Array.isArray(e)?1:ei(e)?2:3*!!eo(e)}function er(e,t){return 2===et(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function en(e,t){return 2===et(e)?e.get(t):e[t]}function ea(e,t,r){let n=et(e);2===n?e.set(t,r):3===n?e.add(r):e[t]=r}function ei(e){return e instanceof Map}function eo(e){return e instanceof Set}function es(e){return e.copy_||e.base_}function el(e,t){if(ei(e))return new Map(e);if(eo(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);if(!t&&X(e))return G(e)?{...e}:Object.assign(Object.create(null),e);let r=Object.getOwnPropertyDescriptors(e);delete r[Y];let n=Reflect.ownKeys(r);for(let t=0;t<n.length;t++){let a=n[t],i=r[a];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(r[a]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[a]})}return Object.create(G(e),r)}function eu(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return ed(e)||K(e)||!J(e)||(et(e)>1&&(e.set=e.add=e.clear=e.delete=ec),Object.freeze(e),t&&ee(e,(e,t)=>eu(t,!0),!0)),e}function ec(){W(2)}function ed(e){return Object.isFrozen(e)}var ef={};function ep(e){let t=ef[e];return t||W(0,e),t}function eh(e,t){t&&(ep("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function eg(e){ey(e),e.drafts_.forEach(ev),e.drafts_=null}function ey(e){e===nt&&(nt=e.parent_)}function em(e){return nt={drafts_:[],parent_:nt,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function ev(e){let t=e[Y];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function ew(e,t){t.unfinalizedDrafts_=t.drafts_.length;let r=t.drafts_[0];return void 0!==e&&e!==r?(r[Y].modified_&&(eg(t),W(4)),J(e)&&(e=eS(t,e),t.parent_||eC(t,e)),t.patches_&&ep("Patches").generateReplacementPatches_(r[Y].base_,e,t.patches_,t.inversePatches_)):e=eS(t,r,[]),eg(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==B?e:void 0}function eS(e,t,r){if(ed(t))return t;let n=t[Y];if(!n)return ee(t,(a,i)=>eb(e,n,t,a,i,r),!0),t;if(n.scope_!==e)return t;if(!n.modified_)return eC(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;let t=n.copy_,a=t,i=!1;3===n.type_&&(a=new Set(t),t.clear(),i=!0),ee(a,(a,o)=>eb(e,n,t,a,o,r,i)),eC(e,t,!1),r&&e.patches_&&ep("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function eb(e,t,r,n,a,i,o){if(K(a)){let o=eS(e,a,i&&t&&3!==t.type_&&!er(t.assigned_,n)?i.concat(n):void 0);if(ea(r,n,o),!K(o))return;e.canAutoFreeze_=!1}else o&&r.add(a);if(J(a)&&!ed(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;eS(e,a),t&&t.scope_.parent_||eC(e,a)}}function eC(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&eu(t,r)}var eI={get(e,t){if(t===Y)return e;let r=es(e);if(!er(r,t)){var n,a;let i;return n=e,(i=eO(r,t))?"value"in i?i.value:null==(a=i.get)?void 0:a.call(n.draft_):void 0}let i=r[t];return e.finalized_||!J(i)?i:i===ek(e.base_,t)?(eA(e),e.copy_[t]=eR(i,e)):i},has:(e,t)=>t in es(e),ownKeys:e=>Reflect.ownKeys(es(e)),set(e,t,r){let n=eO(es(e),t);if(null==n?void 0:n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){let n=ek(es(e),t),a=null==n?void 0:n[Y];if(a&&a.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if((r===n?0!==r||1/r==1/n:r!=r&&n!=n)&&(void 0!==r||er(e.base_,t)))return!0;eA(e),ex(e)}return e.copy_[t]===r&&(void 0!==r||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==ek(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,eA(e),ex(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){let r=es(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:n.enumerable,value:r[t]}},defineProperty(){W(11)},getPrototypeOf:e=>G(e.base_),setPrototypeOf(){W(12)}},eq={};function ek(e,t){let r=e[Y];return(r?es(r):e)[t]}function eO(e,t){if(!(t in e))return;let r=G(e);for(;r;){let e=Object.getOwnPropertyDescriptor(r,t);if(e)return e;r=G(r)}}function ex(e){e.modified_||(e.modified_=!0,e.parent_&&ex(e.parent_))}function eA(e){e.copy_||(e.copy_=el(e.base_,e.scope_.immer_.useStrictShallowCopy_))}function eR(e,t){let r=ei(e)?ep("MapSet").proxyMap_(e,t):eo(e)?ep("MapSet").proxySet_(e,t):function(e,t){let r=Array.isArray(e),n={type_:+!!r,scope_:t?t.scope_:nt,modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1},a=n,i=eI;r&&(a=[n],i=eq);let{revoke:o,proxy:s}=Proxy.revocable(a,i);return n.draft_=s,n.revoke_=o,s}(e,t);return(t?t.scope_:nt).drafts_.push(r),r}ee(eI,(e,t)=>{eq[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),eq.deleteProperty=function(e,t){return eq.set.call(this,e,t,void 0)},eq.set=function(e,t,r){return eI.set.call(this,e[0],t,r,e[0])};var eE=new class{createDraft(e){var t;J(e)||W(8),K(e)&&(K(t=e)||W(10,t),e=function e(t){if(!J(t)||ed(t))return t;let r=t[Y],n;if(r){if(!r.modified_)return r.base_;r.finalized_=!0,n=el(t,r.scope_.immer_.useStrictShallowCopy_)}else n=el(t,!0);return ee(n,(t,r)=>{ea(n,t,e(r))}),r&&(r.finalized_=!1),n}(t));let r=em(this),n=eR(e,void 0);return n[Y].isManual_=!0,ey(r),n}finishDraft(e,t){let r=e&&e[Y];r&&r.isManual_||W(9);let{scope_:n}=r;return eh(n,t),ew(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){let n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));let n=ep("Patches").applyPatches_;return K(e)?n(e,t):this.produce(e,e=>n(e,t))}constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,r)=>{let n;if("function"==typeof e&&"function"!=typeof t){let r=t;t=e;let n=this;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;for(var a=arguments.length,i=Array(a>1?a-1:0),o=1;o<a;o++)i[o-1]=arguments[o];return n.produce(e,e=>t.call(this,e,...i))}}if("function"!=typeof t&&W(6),void 0!==r&&"function"!=typeof r&&W(7),J(e)){let a=em(this),i=eR(e,void 0),o=!0;try{n=t(i),o=!1}finally{o?eg(a):ey(a)}return eh(a,r),ew(n,a)}if(e&&"object"==typeof e)W(1,e);else{if(void 0===(n=t(e))&&(n=e),n===B&&(n=void 0),this.autoFreeze_&&eu(n,!0),r){let t=[],a=[];ep("Patches").generateReplacementPatches_(e,n,t,a),r(t,a)}return n}},this.produceWithPatches=(e,t)=>{let r,n;var a=this;return"function"==typeof e?function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return a.produceWithPatches(t,t=>e(t,...n))}:[this.produce(e,t,(e,t)=>{r=e,n=t}),r,n]},"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof(null==e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}},eF=eE.produce,eT=eE.produceWithPatches.bind(eE),eD=(eE.setAutoFreeze.bind(eE),eE.setUseStrictShallowCopy.bind(eE),eE.applyPatches.bind(eE));eE.createDraft.bind(eE),eE.finishDraft.bind(eE);var ej=e=>Array.isArray(e)?e:[e];Symbol(),Object.getPrototypeOf({});var eM="u">typeof WeakRef?WeakRef:class{deref(){return this.value}constructor(e){this.value=e}};function eP(){return{s:0,v:void 0,o:null,p:null}}function eU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=eP(),{resultEqualityCheck:n}=t,a,i=0;function o(){let t=r,{length:o}=arguments;for(let e=0;e<o;e++){let r=arguments[e];if("function"==typeof r||"object"==typeof r&&null!==r){let e=t.o;null===e&&(t.o=e=new WeakMap);let n=e.get(r);void 0===n?(t=eP(),e.set(r,t)):t=n}else{let e=t.p;null===e&&(t.p=e=new Map);let n=e.get(r);void 0===n?(t=eP(),e.set(r,t)):t=n}}let s=t,l;if(1===t.s?l=t.v:(l=e.apply(null,arguments),i++),s.s=1,n){var u,c;let e=null!=(c=null==a||null==(u=a.deref)?void 0:u.call(a))?c:a;null!=e&&n(e,l)&&(l=e,0!==i&&i--),a="object"==typeof l&&null!==l||"function"==typeof l?new eM(l):l}return s.v=l,l}return o.clearCache=()=>{r=eP(),o.resetResultsCount()},o.resultsCount=()=>i,o.resetResultsCount=()=>{i=0},o}var e_=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];let a="function"==typeof e?{memoize:e,memoizeOptions:r}:e,i=function(){let e;for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];let i=0,o=0,s,l={},u=r.pop();"object"==typeof u&&(l=u,u=r.pop()),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected a function, instead received ".concat(typeof e);if("function"!=typeof e)throw TypeError(t)}(u,"createSelector expects an output function after the inputs, but received: [".concat(typeof u,"]"));let{memoize:c,memoizeOptions:d=[],argsMemoize:f=eU,argsMemoizeOptions:p=[],devModeChecks:h={}}={...a,...l},g=ej(d),y=ej(p),m=(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected all items to be functions, instead received the following types: ";if(!e.every(e=>"function"==typeof e)){let r=e.map(e=>"function"==typeof e?"function ".concat(e.name||"unnamed","()"):typeof e).join(", ");throw TypeError("".concat(t,"[").concat(r,"]"))}}(e=Array.isArray(r[0])?r[0]:r,"createSelector expects all input-selectors to be functions, but received the following types: "),e),v=c(function(){return i++,u.apply(null,arguments)},...g);return Object.assign(f(function(){o++;let e=function(e,t){let r=[],{length:n}=e;for(let a=0;a<n;a++)r.push(e[a].apply(null,t));return r}(m,arguments);return s=v.apply(null,e)},...y),{resultFunc:u,memoizedResultFunc:v,dependencies:m,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>s,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:c,argsMemoize:f})};return Object.assign(i,{withTypes:()=>i}),i}(eU),eV=Object.assign(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e_;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected an object, instead received ".concat(typeof e);if("object"!=typeof e)throw TypeError(t)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ".concat(typeof e));let r=Object.keys(e);return t(r.map(t=>e[t]),function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((e,t,n)=>(e[r[n]]=t,e),{})})},{withTypes:()=>eV});function eQ(e){return t=>{let{dispatch:r,getState:n}=t;return t=>a=>"function"==typeof a?a(r,n,e):t(a)}}var eL=eQ(),eN="u">typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!=arguments.length)return"object"==typeof arguments[0]?z:z.apply(null,arguments)},ez=("u">typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__,e=>e&&"function"==typeof e.match);function e$(e,t){function r(){for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];if(t){let r=t(...n);if(!r)throw Error(tv(0));return{type:e,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:e,payload:n[0]}}return r.toString=()=>"".concat(e),r.type=e,r.match=t=>$(t)&&t.type===e,r}var eB=class e extends Array{static get[Symbol.species](){return e}concat(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return super.concat.apply(this,t)}prepend(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return 1===r.length&&Array.isArray(r[0])?new e(...r[0].concat(this)):new e(...r.concat(this))}constructor(...t){super(...t),Object.setPrototypeOf(this,e.prototype)}};function eH(e){return J(e)?eF(e,()=>{}):e}function eY(e,t,r){if(e.has(t)){let n=e.get(t);return r.update&&(n=r.update(n,t,e),e.set(t,n)),n}if(!r.insert)throw Error(tv(10));let n=r.insert(t,e);return e.set(t,n),n}var eW=()=>function(e){let{thunk:t=!0,immutableCheck:r=!0,serializableCheck:n=!0,actionCreatorCheck:a=!0}=null!=e?e:{},i=new eB;return t&&("boolean"==typeof t?i.push(eL):i.push(eQ(t.extraArgument))),i},eG="RTK_autoBatch",eK=()=>e=>({payload:e,meta:{[eG]:!0}}),eJ=e=>t=>{setTimeout(t,e)},eZ="u">typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:eJ(10),eX=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"raf"};return t=>function(){for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];let i=t(...n),o=!0,s=!1,l=!1,u=new Set,c="tick"===e.type?queueMicrotask:"raf"===e.type?eZ:"callback"===e.type?e.queueNotification:eJ(e.timeout),d=()=>{l=!1,s&&(s=!1,u.forEach(e=>e()))};return Object.assign({},i,{subscribe(e){let t=i.subscribe(()=>o&&e());return u.add(e),()=>{t(),u.delete(e)}},dispatch(e){try{var t;return(s=!(o=!(null==e||null==(t=e.meta)?void 0:t[eG])))&&(l||(l=!0,c(d))),i.dispatch(e)}finally{o=!0}}})}},e0=e=>function(t){let{autoBatch:r=!0}=null!=t?t:{},n=new eB(e);return r&&n.push(eX("object"==typeof r?r:void 0)),n};function e1(e){let t={},r=[],n,a={addCase(e,r){let n="string"==typeof e?e:e.type;if(!n)throw Error(tv(28));if(n in t)throw Error(tv(29));return t[n]=r,a},addMatcher:(e,t)=>(r.push({matcher:e,reducer:t}),a),addDefaultCase:e=>(n=e,a)};return e(a),[t,r,n]}function e2(e,t){let[r,n,a]=e1(t),i;if("function"==typeof e)i=()=>eH(e());else{let t=eH(e);i=()=>t}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i(),t=arguments.length>1?arguments[1]:void 0,o=[r[t.type],...n.filter(e=>{let{matcher:r}=e;return r(t)}).map(e=>{let{reducer:t}=e;return t})];return 0===o.filter(e=>!!e).length&&(o=[a]),o.reduce((e,r)=>{if(r)if(K(e)){let n=r(e,t);return void 0===n?e:n}else{if(J(e))return eF(e,e=>r(e,t));{let n=r(e,t);if(void 0===n){if(null===e)return e;throw Error(tv(9))}return n}}return e},e)}return o.getInitialState=i,o}var e3=(e,t)=>ez(e)?e.match(t):e(t);function e5(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>t.some(t=>e3(t,e))}function e6(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>t.every(t=>e3(t,e))}function e4(e,t){if(!e||!e.meta)return!1;let r="string"==typeof e.meta.requestId,n=t.indexOf(e.meta.requestStatus)>-1;return r&&n}function e8(e){return"function"==typeof e[0]&&"pending"in e[0]&&"fulfilled"in e[0]&&"rejected"in e[0]}function e9(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?e=>e4(e,["pending"]):e8(t)?e5(...t.map(e=>e.pending)):e9()(t[0])}function e7(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?e=>e4(e,["rejected"]):e8(t)?e5(...t.map(e=>e.rejected)):e7()(t[0])}function te(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length||e8(t)?e6(e7(...t),e=>e&&e.meta&&e.meta.rejectedWithValue):te()(t[0])}function tt(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?e=>e4(e,["fulfilled"]):e8(t)?e5(...t.map(e=>e.fulfilled)):tt()(t[0])}function tr(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?e=>e4(e,["pending","fulfilled","rejected"]):e8(t)?e5(...t.flatMap(e=>[e.pending,e.rejected,e.fulfilled])):tr()(t[0])}var tn=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21,t="",r=e;for(;r--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},ta=["name","message","stack","code"],ti=class{constructor(e,t){h(this,"_type"),this.payload=e,this.meta=t}},to=class{constructor(e,t){h(this,"_type"),this.payload=e,this.meta=t}},ts=e=>{if("object"==typeof e&&null!==e){let t={};for(let r of ta)"string"==typeof e[r]&&(t[r]=e[r]);return t}return{message:String(e)}},tl=(()=>{function e(e,t,r){let n=e$(e+"/fulfilled",(e,t,r,n)=>({payload:e,meta:{...n||{},arg:r,requestId:t,requestStatus:"fulfilled"}})),a=e$(e+"/pending",(e,t,r)=>({payload:void 0,meta:{...r||{},arg:t,requestId:e,requestStatus:"pending"}})),i=e$(e+"/rejected",(e,t,n,a,i)=>({payload:a,error:(r&&r.serializeError||ts)(e||"Rejected"),meta:{...i||{},arg:n,requestId:t,rejectedWithValue:!!a,requestStatus:"rejected",aborted:(null==e?void 0:e.name)==="AbortError",condition:(null==e?void 0:e.name)==="ConditionError"}}));return Object.assign(function(e){return(o,s,l)=>{let u=(null==r?void 0:r.idGenerator)?r.idGenerator(e):tn(),c=new AbortController,d,f;function p(e){f=e,c.abort()}let h=async function(){let h;try{var g,y,m;let i=null==r||null==(g=r.condition)?void 0:g.call(r,e,{getState:s,extra:l});if(m=i,null!==m&&"object"==typeof m&&"function"==typeof m.then&&(i=await i),!1===i||c.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};let v=new Promise((e,t)=>{d=()=>{t({name:"AbortError",message:f||"Aborted"})},c.signal.addEventListener("abort",d)});o(a(u,e,null==r||null==(y=r.getPendingMeta)?void 0:y.call(r,{requestId:u,arg:e},{getState:s,extra:l}))),h=await Promise.race([v,Promise.resolve(t(e,{dispatch:o,getState:s,extra:l,requestId:u,signal:c.signal,abort:p,rejectWithValue:(e,t)=>new ti(e,t),fulfillWithValue:(e,t)=>new to(e,t)})).then(t=>{if(t instanceof ti)throw t;return t instanceof to?n(t.payload,u,e,t.meta):n(t,u,e)})])}catch(t){h=t instanceof ti?i(null,u,e,t.payload,t.meta):i(t,u,e)}finally{d&&c.signal.removeEventListener("abort",d)}return r&&!r.dispatchConditionRejection&&i.match(h)&&h.meta.condition||o(h),h}();return Object.assign(h,{abort:p,requestId:u,arg:e,unwrap:()=>h.then(tu)})}},{pending:a,rejected:i,fulfilled:n,settled:e5(i,n),typePrefix:e})}return e.withTypes=()=>e,e})();function tu(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}var tc=Symbol.for("rtk-slice-createasyncthunk"),td=function(){var e;let{creators:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=null==t||null==(e=t.asyncThunk)?void 0:e[tc];return function(e){let{name:t,reducerPath:n=t}=e;if(!t)throw Error(tv(11));let a=("function"==typeof e.reducers?e.reducers(function(){function e(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name](){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return e(...r)}}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},i=Object.keys(a),o={},s={},l={},u=[],c={addCase(e,t){let r="string"==typeof e?e:e.type;if(!r)throw Error(tv(12));if(r in s)throw Error(tv(13));return s[r]=t,c},addMatcher:(e,t)=>(u.push({matcher:e,reducer:t}),c),exposeAction:(e,t)=>(l[e]=t,c),exposeCaseReducer:(e,t)=>(o[e]=t,c)};function d(){let[t={},r=[],n]="function"==typeof e.extraReducers?e1(e.extraReducers):[e.extraReducers],a={...t,...s};return e2(e.initialState,e=>{for(let t in a)e.addCase(t,a[t]);for(let t of u)e.addMatcher(t.matcher,t.reducer);for(let t of r)e.addMatcher(t.matcher,t.reducer);n&&e.addDefaultCase(n)})}i.forEach(n=>{let i=a[n],o={reducerName:n,type:"".concat(t,"/").concat(n),createNotation:"function"==typeof e.reducers};"asyncThunk"===i._reducerDefinitionType?function(e,t,r,n){let{type:a,reducerName:i}=e;if(!n)throw Error(tv(18));let{payloadCreator:o,fulfilled:s,pending:l,rejected:u,settled:c,options:d}=t,f=n(a,o,d);r.exposeAction(i,f),s&&r.addCase(f.fulfilled,s),l&&r.addCase(f.pending,l),u&&r.addCase(f.rejected,u),c&&r.addMatcher(f.settled,c),r.exposeCaseReducer(i,{fulfilled:s||tf,pending:l||tf,rejected:u||tf,settled:c||tf})}(o,i,c,r):function(e,t,r){let n,a,{type:i,reducerName:o,createNotation:s}=e;if("reducer"in t){if(s&&"reducerWithPrepare"!==t._reducerDefinitionType)throw Error(tv(17));n=t.reducer,a=t.prepare}else n=t;r.addCase(i,n).exposeCaseReducer(o,n).exposeAction(o,a?e$(i,a):e$(i))}(o,i,c)});let f=e=>e,p=new Map,h;function g(e,t){return h||(h=d()),h(e,t)}function y(){return h||(h=d()),h.getInitialState()}function m(t){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(e){let n=e[t];return typeof n>"u"&&r&&(n=y()),n}function a(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,n=eY(p,r,{insert:()=>new WeakMap});return eY(n,t,{insert:()=>{var n;let a={};for(let[i,o]of Object.entries(null!=(n=e.selectors)?n:{}))a[i]=function(e,t,r,n){function a(a){for(var i=arguments.length,o=Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];let l=t(a);return typeof l>"u"&&n&&(l=r()),e(l,...o)}return a.unwrapped=e,a}(o,t,y,r);return a}})}return{reducerPath:t,getSelectors:a,get selectors(){return a(n)},selectSlice:n}}let v={name:t,reducer:g,actions:l,caseReducers:o,getInitialState:y,...m(n),injectInto(e){let{reducerPath:t,...r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=null!=t?t:n;return e.inject({reducerPath:a,reducer:g},r),{...v,...m(a,!0)}}};return v}}();function tf(){}var tp="listener";"".concat(tp,"-").concat("cancelled"),"".concat(tp,"-").concat("completed");var{assign:th}=Object,tg="listenerMiddleware",ty=th(e$("".concat(tg,"/add")),{withTypes:()=>ty}),tm=(e$("".concat(tg,"/removeAll")),th(e$("".concat(tg,"/remove")),{withTypes:()=>tm}));function tv(e){return"Minified Redux Toolkit error #".concat(e,"; visit https://redux-toolkit.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}Symbol.for("rtk-state-proxy-original");var tw=p(m()),tS=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return e+Math.random().toString(36).substring(2,2+t)};function tb(e){return Array.isArray(e)}function tC(e){var t;return t=JSON.stringify(e),("u">typeof btoa?btoa:tw.btoa)(encodeURI(t))}var tI=new Set(["1",1,"yes",!0]);function tq(e,t){return Object.fromEntries(Object.entries(e).map(e=>{let[r,n]=e;return[r,t(n,r)]}))}function tk(e){if("object"!=typeof e||!e)return e;try{return JSON.parse(JSON.stringify(e))}catch(t){return e}}function tO(e,t){let r=function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return e(...r)};for(let[e,n]of Object.entries(t))r[e]=n;return r}async function tx(e,t){let r=e.getReader(),n;for(;!(n=await r.read()).done;)t(n.value)}function tA(){return{data:"",event:"",id:"",retry:void 0}}var tR=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)0>t.indexOf(n[a])&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r},tE="text/event-stream",tF="last-event-id";function tT(){}function tD(e,t){var{signal:r,headers:n,onopen:a,onmessage:i,onclose:o,onerror:s,openWhenHidden:l,fetch:u}=t,c=tR(t,["signal","headers","onopen","onmessage","onclose","onerror","openWhenHidden","fetch"]);return new Promise((t,d)=>{let f,p=Object.assign({},n);function h(){null==f||f.abort(),document.hidden||S()}p.accept||(p.accept=tE),!l&&tT()&&document.addEventListener("visibilitychange",h);let g=1e3,y=0;function m(){tT()&&document.removeEventListener("visibilitychange",h),clearTimeout(y),null==f||f.abort()}null==r||r.addEventListener("abort",()=>{m(),t()});let v=null!=u?u:v,w=null!=a?a:tj;async function S(){var r,n,a,l;f=typeof AbortController>"u"?null:new AbortController;try{let r,s,u,d,h,y,S=await v(e,Object.assign(Object.assign({},c),{headers:p,signal:null==f?void 0:f.signal}));await w(S),await tx(S.body,(n=e=>{e?p[tF]=e:delete p[tF]},a=e=>{g=e},r=tA(),s=new TextDecoder,l=function(e,t){if(0===e.length)null==i||i(r),r=tA();else if(t>0){let i=s.decode(e.subarray(0,t)),o=t+(32===e[t+1]?2:1),l=s.decode(e.subarray(o));switch(i){case"data":r.data=r.data?r.data+"\n"+l:l;break;case"event":r.event=l;break;case"id":n(r.id=l);break;case"retry":let u=parseInt(l,10);isNaN(u)||a(r.retry=u)}}},y=!1,function(e){var t,r;let n;void 0===u?(u=e,d=0,h=-1):(t=u,r=e,(n=new Uint8Array(t.length+r.length)).set(t),n.set(r,t.length),u=n);let a=u.length,i=0;for(;d<a;){y&&(10===u[d]&&(i=++d),y=!1);let e=-1;for(;d<a&&-1===e;++d)switch(u[d]){case 58:-1===h&&(h=d-i);break;case 13:y=!0;case 10:e=d}if(-1===e)break;l(u.subarray(i,e),h),i=d,h=-1}i===a?u=void 0:0!==i&&(u=u.subarray(i),d-=i)})),null==o||o(),m(),t()}catch(e){if(!(null==f?void 0:f.signal.aborted))try{let t=null!=(r=null==s?void 0:s(e))?r:g;clearTimeout(y),y=setTimeout(S,t)}catch(e){m(),d(e)}}}S()})}function tj(e){let t=e.headers.get("content-type");if(!(null==t?void 0:t.startsWith(tE)))throw Error("Expected content-type to be ".concat(tE,", Actual: ").concat(t))}function tM(){if(typeof window>"u"){let{AbortController:e}=v();return new e}return typeof AbortController>"u"?null:new AbortController}var tP=class{addParam(e,t){this._params={...this.params,[e]:t}}get basePath(){return this._basePath}get params(){return this._params}get hasParams(){return Object.entries(this._params).length}get href(){return this.hasParams?"".concat(this.basePath,"?").concat(Object.entries(this.params).map(e=>{let[t,r]=e;return"".concat(t,"=").concat(encodeURIComponent(r))}).join("&")):this.basePath}constructor(e){this._params={},this._basePath=e}},tU=e=>/^https:\/\/platform(dev|stg|hipaa)?(-)?(eu|au)?\.cloud\.coveo\.com/.test(e),t_=(e,t)=>{let r=tV(e);return r&&r.organizationId===t?r:null},tV=e=>{let t=e.match(RegExp("^https:\\/\\/(?<organizationId>\\w+)\\.org(?<environment>dev|stg|hipaa)?\\.coveo\\.com"));return(null==t?void 0:t.groups)?t.groups:null},tQ=(e,t,r)=>new tP("".concat(e,"/rest/organizations/").concat(t,"/machinelearning/streaming/").concat(r)).href,tL=class extends Error{},tN=class extends Error{constructor(e){super(e.message),this.payload=e}},tz=class{add(e){this.timeouts.add(e)}remove(e){clearTimeout(e),this.timeouts.delete(e)}isActive(e){return this.timeouts.has(e)}constructor(){this.timeouts=new Set}},t$=class{streamGeneratedAnswer(e,t){let{url:r,organizationId:n,streamId:a,accessToken:i}=e,{write:o,abort:s,close:l,resetAnswer:u}=t,c=new tz;if(!a)return void this.logger.error("No stream ID found");let d=0,f,p=()=>{f&&!c.isActive(f)&&(null==g||g.abort(),u(),y())},h=()=>{c.remove(f),clearTimeout(f),f=setTimeout(p,5e3),c.add(f)},g=tM(),y=()=>tD(tQ(r,n,a),{method:"GET",fetch,headers:{Authorization:"Bearer ".concat(i),accept:"*/*"},openWhenHidden:!0,signal:null==g?void 0:g.signal,async onopen(e){if(!e.ok||"text/event-stream"!==e.headers.get("content-type"))throw e.status>=400&&e.status<500&&429!==e.status?new tN({message:"Error opening stream",code:e.status}):new tL},onmessage:e=>{if(null==g?void 0:g.signal.aborted)return;let t=JSON.parse(e.data);if("ERROR"===t.finishReason){c.remove(f),null==g||g.abort(),s({message:t.errorMessage,code:t.statusCode});return}o(t),d=0,"COMPLETED"===t.finishReason?(c.remove(f),l()):h()},onerror:e=>{if(!(null==g?void 0:g.signal.aborted)){if(c.remove(f),e instanceof tN)throw null==g||g.abort(),s(e),e;if(++d>3){this.logger.info("Maximum retry exceeded.");let e={message:"Failed to complete stream.",code:1};throw null==g||g.abort(),s(e),new tN(e)}this.logger.info("Retrying...(".concat(d,"/").concat(3,")")),u()}}});return y(),g}constructor(e){this.logger=e.logger}},tB=e=>e,tH=class extends Error{constructor(e){super(e),this.name="SchemaValidationError"}},tY=class{validate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r={...this.default,...e},n=[];for(let e in this.definition){let t=this.definition[e].validate(r[e]);t&&n.push("".concat(e,": ").concat(t))}if(n.length)throw new tH("\n  The following properties are invalid:\n\n    ".concat(n.join("\n	"),"\n  \n  ").concat(t,"\n  "));return r}get default(){let e={};for(let t in this.definition){let r=this.definition[t].default;void 0!==r&&(e[t]=r)}return e}constructor(e){this.definition=e}},tW=class{validate(e){return this.baseConfig.required&&tK(e)?"value is required.":null}get default(){return this.baseConfig.default instanceof Function?this.baseConfig.default():this.baseConfig.default}get required(){return!0===this.baseConfig.required}constructor(e={}){this.baseConfig=e}};function tG(e){return void 0===e}function tK(e){return tG(e)||null===e}var tJ=class{validate(e){var t;return this.value.validate(e)||(tG(t=e)||tZ(t)?e<this.config.min?"minimum value of ".concat(this.config.min," not respected."):e>this.config.max?"maximum value of ".concat(this.config.max," not respected."):null:"value is not a number.")}get default(){return this.value.default}get required(){return this.value.required}constructor(e={}){this.config=e,this.value=new tW(e)}};function tZ(e){return"number"==typeof e&&!isNaN(e)}var tX=class{validate(e){var t;return this.value.validate(e)||(tG(t=e)||t0(t)?null:"value is not a boolean.")}get default(){return this.value.default}get required(){return this.value.required}constructor(e={}){this.value=new tW(e)}};function t0(e){return"boolean"==typeof e}var t1=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i,t2=/^\d{4}(-\d\d(-\d\d(T\d\d:\d\d(:\d\d)?(\.\d+)?(([+-]\d\d:\d\d)|Z)?)?)?)?$/i,t3=class{validate(e){let{emptyAllowed:t,url:r,regex:n,constrainTo:a,ISODate:i}=this.config;return this.value.validate(e)||(tG(e)?null:t5(e)?t||e.length?r&&!t1.test(e)?"value is not a valid URL.":n&&!n.test(e)?"value did not match provided regex ".concat(n):a&&!a.includes(e)?"value should be one of: ".concat(a.join(", "),"."):i&&!(t2.test(e)&&"Invalid Date"!==new Date(e).toString())?"value is not a valid ISO8601 date string":null:"value is an empty string.":"value is not a string.")}get default(){return this.value.default}get required(){return this.value.required}constructor(e={}){this.config={emptyAllowed:!0,url:!1,...e},this.value=new tW(this.config)}};function t5(e){return"[object String]"===Object.prototype.toString.call(e)}var t6=class{validate(e){if(tG(e))return this.config.options.required?"value is required and is currently undefined":null;if(!t4(e))return"value is not an object";for(let[t,r]of Object.entries(this.config.values))if(r.required&&tK(e[t]))return"value does not contain ".concat(t);let t="";for(let[r,n]of Object.entries(this.config.values)){let a=e[r],i=n.validate(a);null!==i&&(t+=" "+i)}return""===t?null:t}get default(){}get required(){return!!this.config.options.required}constructor(e={}){this.config={options:{required:!1},values:{},...e}}};function t4(e){return void 0!==e&&"object"==typeof e}var t8=class{validate(e){if(!tK(e)&&!Array.isArray(e))return"value is not an array";let t=this.value.validate(e);if(null!==t)return t;if(tK(e))return null;if(void 0!==this.config.max&&e.length>this.config.max)return"value contains more than ".concat(this.config.max);if(void 0!==this.config.min&&e.length<this.config.min)return"value contains less than ".concat(this.config.min);if(void 0!==this.config.each){let t="";return e.forEach(r=>{this.config.each.required&&tK(r)&&(t="value is null or undefined: ".concat(e.join(",")));let n=this.validatePrimitiveValue(r,this.config.each);null!==n&&(t+=" "+n)}),""===t?null:t}return null}validatePrimitiveValue(e,t){return t0(e)||t5(e)||tZ(e)||t4(e)?t.validate(e):"value is not a primitive value"}get default(){}get required(){return this.value.required}constructor(e={}){this.config=e,this.value=new tW(this.config)}};function t9(e){return Array.isArray(e)}var t7=class{validate(e){let t=this.value.validate(e);return null!==t?t:tG(e)||Object.values(this.config.enum).find(t=>t===e)?null:"value is not in enum."}get default(){return this.value.default}get required(){return this.value.required}constructor(e){this.config=e,this.value=new tW(e)}};function re(){return{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0}}function rt(){return{response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],generateAutomaticFacets:{facets:[]},queryCorrections:[],triggers:[],questionAnswer:re(),pipeline:"",splitTestRun:"",termsToHighlight:{},phrasesToHighlight:{},extendedResults:{}},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[],searchResponseId:"",requestId:"",questionAnswer:re(),extendedResults:{}}}function rr(e){let{url:t,accessToken:r,organizationId:n,authentication:a,...i}=e;return i}var rn=e=>{let{response:t}=e;return t.body?ra(e):ri(t)},ra=e=>void 0!==e.body.exception?ro(e):void 0!==e.body.statusCode?e.body:{message:"unknown",statusCode:0,type:"unknown"},ri=e=>{let t=JSON.parse(JSON.stringify(e,Object.getOwnPropertyNames(e)));return{...t,message:"Client side error: ".concat(t.message||""),statusCode:400,type:"ClientError"}},ro=e=>({message:e.body.exception.code,statusCode:e.response.status,type:e.body.exception.code}),rs=p(w()),rl=p(A()),ru=Error("Failed to load reducers."),rc=class extends Error{constructor(){super(),this.name="ExpiredToken",this.message="The token being used to perform the request is expired."}},rd=class extends Error{constructor(e,t){super(),this.name="Disconnected",this.message="Client could not connect to the following URL: ".concat(e),this.statusCode=null!=t?t:0}};function rf(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e}var rp=class e{static async call(t){let r=function(e){let{url:t,method:r,requestParams:n,contentType:a,accessToken:i,signal:o}=e,s="POST"===e.method||"PUT"===e.method,l=function(e,t){return"application/x-www-form-urlencoded"===t?"object"==typeof e&&e&&Object.values(e).every(rf)?function(e){let t=[];for(let r in e){let n=encodeURIComponent(r),a=encodeURIComponent(e[r]);t.push("".concat(n,"=").concat(a))}return t.join("&")}(e):"":JSON.stringify(e)}(n,a);return{url:t,method:r,headers:{"Content-Type":a,Authorization:"Bearer ".concat(i),...e.headers},...s&&{body:l},signal:o}}(t),{logger:n}=t,a=await e.preprocessRequest(r,t);n.info(a,"Platform request");let{url:i,...o}=a,s=async()=>{let e=await (0,rs.default)(i,o);if(429===e.status)throw e;return e};try{let e=await (0,rl.backOff)(s,{retry:e=>{var t;let r=e&&(t=e.status,429===t);return r&&n.info("Platform retrying request"),r}});switch(e.status){case 419:case 401:throw n.info("Platform renewing token"),new rc;case 404:throw new rd(i,e.status);default:return n.info({response:e,requestInfo:a},"Platform response"),e}}catch(e){return"Failed to fetch"===e.message?new rd(i):e}}static async preprocessRequest(e,t){let{origin:r,preprocessRequest:n,logger:a,requestMetadata:i}=t,{signal:o,...s}=e,l=tk(s);try{let t=await n(e,r,i);return{...e,...t}}catch(e){a.error(e,"Platform request preprocessing failed. Returning default request options.")}return l}};function rh(e,t){let r=t&&t.environment&&"prod"!==t.environment?t.environment:"",n=t&&t.region&&"us"!==t.region?"-".concat(t.region):"";return"https://".concat(e).concat(r).concat(n,".cloud.coveo.com")}function rg(e){return(null==e?void 0:e.multiRegionSubDomain)?"https://".concat(e.multiRegionSubDomain,".org.coveo.com"):rh("platform",e)}var ry=class{async enqueue(e,t){let r=this.currentAbortController,n=this.currentAbortController=tM();r&&(t.warnOnAbort&&t.logger.warn("Cancelling current pending search query"),r.abort());try{var a;return await e(null!=(a=null==n?void 0:n.signal)?a:null)}finally{this.currentAbortController===n&&(this.currentAbortController=null)}}constructor(){this.currentAbortController=null}},rm=(e,t,r,n)=>{let a=new tP("".concat(e.url).concat(n));return a.addParam("organizationId",e.organizationId),e.authentication&&a.addParam("authentication",e.authentication),{accessToken:e.accessToken,method:t,contentType:r,url:a.href,origin:"searchApiFetch"}},rv=(e,t)=>{let r=new tP("".concat(e.url).concat(t));return r.addParam("access_token",e.accessToken),r.addParam("organizationId",e.organizationId),r.addParam("uniqueId",e.uniqueId),void 0!==e.q&&r.addParam("q",e.q),void 0!==e.enableNavigation&&r.addParam("enableNavigation","".concat(e.enableNavigation)),void 0!==e.requestedOutputSize&&r.addParam("requestedOutputSize","".concat(e.requestedOutputSize)),void 0!==e.visitorId&&r.addParam("visitorId","".concat(e.visitorId)),r.href},rw=async(e,t)=>{let r=await rp.call({...rm(e,"POST","application/x-www-form-urlencoded","/html"),requestParams:rr(e),requestMetadata:{method:"html"},...t});if(r instanceof Error)throw r;let n=((r.headers.get("content-type")||"").split(";").find(e=>-1!==e.indexOf("charset="))||"").split("=")[1]||"UTF-8",a=await r.arrayBuffer(),i=new TextDecoder(n).decode(a);return"string"==typeof i?{success:i}:{error:rn({response:r,body:i})}};function rS(e,t){if(t&&"AbortError"===e.name)return{error:{statusCode:e.code,type:e.name,message:e.message,ignored:!0}};if(e instanceof rd)return{error:{statusCode:e.statusCode,type:e.name,message:e.message}};throw e}var rb=class{async plan(e){let t=await rp.call({...rm(e,"POST","application/json","/plan"),requestParams:rr(e),requestMetadata:{method:"plan"},...this.options});if(t instanceof Error)return rS(t);let r=await t.json();return void 0!==r.preprocessingOutput?{success:r}:{error:rn({response:t,body:r})}}async querySuggest(e){let t=await rp.call({...rm(e,"POST","application/json","/querySuggest"),requestMetadata:{method:"querySuggest"},requestParams:rr(e),...this.options});if(t instanceof Error)return rS(t);let r=await t.json(),n={response:t,body:r};return void 0!==r.completions?{success:(await this.options.postprocessQuerySuggestResponseMiddleware(n)).body}:{error:rn(n)}}async search(e,t){var r;let n=null!=(r=null==t?void 0:t.origin)?r:"unknown",a=await this.apiCallsQueues[n].enqueue(r=>rp.call({...rm(e,"POST","application/json",""),requestParams:rr(e),requestMetadata:{method:"search",origin:null==t?void 0:t.origin},...this.options,signal:null!=r?r:void 0}),{logger:this.options.logger,warnOnAbort:!(null==t?void 0:t.disableAbortWarning)});if(a instanceof Error)return rS(a,null==t?void 0:t.disableAbortWarning);let i=await a.json(),o={response:a,body:i};return rq(i)?(o.body=rk(i),{success:(await this.options.postprocessSearchResponseMiddleware(o)).body}):{error:rn(o)}}async facetSearch(e){let t=await rp.call({...rm(e,"POST","application/json","/facet"),requestParams:rr(e),requestMetadata:{method:"facetSearch"},...this.options});if(t instanceof Error)throw t;let r=await t.json();return(await this.options.postprocessFacetSearchResponseMiddleware({response:t,body:r})).body}async recommendations(e){let t=await rp.call({...rm(e,"POST","application/json",""),requestParams:rr(e),requestMetadata:{method:"recommendations"},...this.options});if(t instanceof Error)throw t;let r=await t.json();if(rq(r)){let e={response:t,body:r};return e.body=rk(r),{success:(await this.options.postprocessSearchResponseMiddleware(e)).body}}return{error:rn({response:t,body:r})}}async html(e){return rw(e,{...this.options})}async productRecommendations(e){let t=await rp.call({...rm(e,"POST","application/json",""),requestParams:rr(e),requestMetadata:{method:"productRecommendations"},...this.options});if(t instanceof Error)throw t;let r=await t.json();return rq(r)?{success:r}:{error:rn({response:t,body:r})}}async fieldDescriptions(e){let t=await rp.call({...rm(e,"GET","application/json","/fields"),requestParams:{},requestMetadata:{method:"fieldDescriptions"},...this.options});if(t instanceof Error)throw t;let r=await t.json();return void 0!==r.fields?{success:r}:{error:rn({response:t,body:r})}}constructor(e){this.options=e,this.apiCallsQueues={unknown:new ry,mainSearch:new ry,facetValues:new ry,foldingCollection:new ry,instantResults:new ry}}},rC=e=>void 0!==e.success,rI=e=>void 0!==e.error;function rq(e){return void 0!==e.results}function rk(e){let t=re();return tK(e.questionAnswer)?e.questionAnswer=t:e.questionAnswer={...t,...e.questionAnswer},e}var rO=e=>e,rx=e=>e,rA=e=>e,rR=new t3({required:!0,emptyAllowed:!1}),rE=new t3({required:!1,emptyAllowed:!1}),rF=new t3({required:!0,emptyAllowed:!0}),rT=new t3({required:!1,emptyAllowed:!0}),rD=new t8({each:rR,required:!0}),rj=new t3({required:!1,emptyAllowed:!1,regex:/^\d+\.\d+\.\d+$/}),rM=e=>{let{message:t,name:r,stack:n}=e;return{message:t,name:r,stack:n}},rP=(e,t)=>{if("required"in t)return{payload:new tY({value:t}).validate({value:e}).value};let r=new t6({options:{required:!0},values:t}).validate(e);if(r)throw new tH(r);return{payload:e}},rU=(e,t)=>{try{return rP(e,t)}catch(t){return{payload:e,error:rM(t)}}},r_=(e,t,r,n)=>rQ(e,t,r,"Check the initialState of ".concat(n),"Controller initialization error"),rV=(e,t,r,n)=>rQ(e,t,r,"Check the options of ".concat(n),"Controller initialization error"),rQ=(e,t,r,n,a)=>{try{return t.validate(r,n)}catch(t){throw e.logger.error(t,a),t}},rL=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,rN="0.7.10";function rz(e,t,r,n){let{getReferrer:a,getLocation:i,getUserAgent:o}=r,s=function(e){let{trackingId:t}=e;return{trackingId:t}}(t),l=n.getClientId();return Object.freeze({type:e,config:s,ts:Date.now(),source:(t.source||[]).concat(["relay@".concat(rN)]),clientId:l,userAgent:o(),referrer:a(),location:i()})}function r$(e){let{url:t,token:r,trackingId:n,...a}=e;return Object.freeze({url:t,token:r,trackingId:n,...!!a.mode&&{mode:a.mode},...!!a.source&&{source:a.source}})}var rB=function(){let e="coveo_",t=e=>{let t=e.split(".").slice(-2);return 2==t.length?t.join("."):""};return{getItem(t){let r="".concat(e).concat(t,"=");for(let e of document.cookie.split(";")){let t=e.replace(/^\s+/,"");if(0===t.lastIndexOf(r,0))return t.substring(r.length,t.length)}return null},setItem(r,n,a){let i=t(window.location.hostname),o=";expires=".concat(new Date(new Date().getTime()+a).toUTCString());document.cookie="".concat(e).concat(r,"=").concat(n).concat(o).concat(i?";domain=".concat(i):"",";path=/;SameSite=Lax")},removeItem(e){this.setItem(e,"",-1)}}}(),rH="2.80.2",rY=e_(e=>e.source,e=>Object.entries(e).map(e=>{let[t,r]=e;return"".concat(t,"@").concat(r)}).concat("@coveo/headless@".concat(rH))),rW=e_(e=>e.configuration.accessToken,e=>e.configuration.analytics,e=>rY(e.configuration.analytics),(e,t,r)=>{let{trackingId:n,nextApiBaseUrl:a,enabled:i}=t;return function(e){let t,r=(t=r$(e),{get:()=>t,update:e=>{t=r$({...t,...e})}}),n=function(){let e=[];function t(t){let{type:r,callback:n}=t;return e.findIndex(e=>e.type===r&&e.callback===n)}function r(r,n){let a;n?(a=t({type:r,callback:n}))>=0&&e.splice(a,1):function(t){if("*"===t)e.length=0;else for(let r=e.length-1;r>=0;r--)e[r].type===t&&e.splice(r,1)}(r)}return{add:function(n){return 0>t(n)&&e.push(n),()=>r(n.type,n.callback)},call:function(t){e.forEach(e=>{var r;if(r=t.meta.type,"*"===e.type||r===e.type)try{e.callback(t)}catch(e){console.error(e)}})},remove:r}}(),a={get:()=>Object.freeze("disabled"!==r.get().mode&&function(){try{return"object"==typeof window}catch(e){return!1}}()&&function(){try{let e="__storage_test__";return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return e instanceof DOMException&&"QuotaExceededError"===e.name&&localStorage&&0!==localStorage.length}}()?{runtime:"browser",send:(e,t,r)=>{let n,a=navigator.sendBeacon("".concat(e,"?access_token=").concat(t),new Blob([JSON.stringify([r])],{type:"application/json"}));if((n="u">typeof window,{sendMessage(e){n&&window.postMessage(e,"*")}}).sendMessage({kind:"EVENT_PROTOCOL",event:r,url:e,token:t}),!a)throw Error("Failed to send the event(s) because the payload size exceeded the maximum allowed size (32 KB). Please contact support if the problem persists.")},getReferrer:()=>{let e;return""===(e=document.referrer)?null:e},getLocation:()=>window.location.href,getUserAgent:()=>navigator.userAgent,generateUUID:()=>crypto.randomUUID(),storage:{getItem:e=>rB.getItem(e)||localStorage.getItem(e),removeItem(e){rB.removeItem(e),localStorage.removeItem(e)},setItem(e,t){localStorage.setItem(e,t),rB.setItem(e,t,31556952e3)}}}:{runtime:"null",send:()=>{},getReferrer:()=>null,getLocation:()=>null,getUserAgent:()=>null,generateUUID:()=>"",storage:{getItem:()=>null,removeItem(){},setItem(){}}})},i={getClientId:()=>{var e;let t="visitorId",r=a.get(),n=r.storage,i=n.getItem(t),o=i&&"string"==typeof(e=i)&&rL.test(e)?i:r.generateUUID();return n.setItem(t,o),o}};return{emit:(e,t)=>{let o=r.get(),s=a.get(),l={...t,meta:rz(e,o,s,i)};return function(e){let{config:t,environment:r,event:n,listenerManager:a}=e,{url:i,token:o,mode:s}=t;"disabled"!==s&&(a.call(n),r.send(i,o,n))}({config:o,environment:s,event:l,listenerManager:n})},getMeta:e=>rz(e,r.get(),a.get(),i),on:(e,t)=>n.add({type:e,callback:t}),off:(e,t)=>n.remove(e,t),updateConfig:e=>r.update(e),version:rN}}({mode:i?"emit":"disabled",url:a,token:e,trackingId:n,source:r})});function rG(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)0>t.indexOf(n[a])&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function rK(e,t,r,n){return new(r||(r=Promise))(function(a,i){function o(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(o,s)}l((n=n.apply(e,t||[])).next())})}function rJ(){return"u">typeof window}function rZ(){return"u">typeof navigator}function rX(){return"u">typeof document}function r0(){try{return"u">typeof localStorage}catch(e){return!1}}function r1(){return rZ()&&navigator.cookieEnabled}!function(e){e.search="search",e.click="click",e.custom="custom",e.view="view",e.collect="collect"}(nr||(nr={}));var r2=[nr.click,nr.custom,nr.search,nr.view],r3=(e,t)=>-1!==r2.indexOf(e)?Object.assign({language:rX()?document.documentElement.lang:"unknown",userAgent:rZ()?navigator.userAgent:"unknown"},t):t,r5=class e{static set(e,t,r){var n,a,i;r&&(n=new Date).setTime(n.getTime()+r),-1===(i=window.location.hostname).indexOf(".")?r6(e,t,n):r6(e,t,n,(a=i.split("."))[a.length-2]+"."+a[a.length-1])}static get(e){for(var t=e+"=",r=document.cookie.split(";"),n=0;n<r.length;n++){var a=r[n];if(0===(a=a.replace(/^\s+/,"")).lastIndexOf(t,0))return a.substring(t.length,a.length)}return null}static erase(t){e.set(t,"",-1)}};function r6(e,t,r,n){document.cookie="".concat(e,"=").concat(t)+(r?";expires=".concat(r.toUTCString()):"")+(n?";domain=".concat(n):"")+";path=/;SameSite=Lax"}var r4=class e{getItem(t){return r5.get("".concat(e.prefix).concat(t))}removeItem(t){r5.erase("".concat(e.prefix).concat(t))}setItem(t,r,n){r5.set("".concat(e.prefix).concat(t),r,n)}};r4.prefix="coveo_";var r8,r9,r7,ne,nt,nr,nn,na=class{getItem(e){return localStorage.getItem(e)||this.cookieStorage.getItem(e)}removeItem(e){this.cookieStorage.removeItem(e),localStorage.removeItem(e)}setItem(e,t){localStorage.setItem(e,t),this.cookieStorage.setItem(e,t,31556926e3)}constructor(){this.cookieStorage=new r4}},ni=class{getItem(e){return null}removeItem(e){}setItem(e,t){}},no="__coveo.analytics.history",ns=class{addElement(e){e.internalTime=new Date().getTime(),e=this.cropQueryElement(this.stripEmptyQuery(e));let t=this.getHistoryWithInternalTime();null!=t?this.isValidEntry(e)&&this.setHistory([e].concat(t)):this.setHistory([e])}addElementAsync(e){return rK(this,void 0,void 0,function*(){e.internalTime=new Date().getTime(),e=this.cropQueryElement(this.stripEmptyQuery(e));let t=yield this.getHistoryWithInternalTimeAsync();null!=t?this.isValidEntry(e)&&this.setHistory([e].concat(t)):this.setHistory([e])})}getHistory(){let e=this.getHistoryWithInternalTime();return this.stripEmptyQueries(this.stripInternalTime(e))}getHistoryAsync(){return rK(this,void 0,void 0,function*(){let e=yield this.getHistoryWithInternalTimeAsync();return this.stripEmptyQueries(this.stripInternalTime(e))})}getHistoryWithInternalTime(){try{let e=this.store.getItem(no);return e&&"string"==typeof e?JSON.parse(e):[]}catch(e){return[]}}getHistoryWithInternalTimeAsync(){return rK(this,void 0,void 0,function*(){try{let e=yield this.store.getItem(no);return e?JSON.parse(e):[]}catch(e){return[]}})}setHistory(e){try{this.store.setItem(no,JSON.stringify(e.slice(0,20)))}catch(e){}}clear(){try{this.store.removeItem(no)}catch(e){}}getMostRecentElement(){let e=this.getHistoryWithInternalTime();return Array.isArray(e)?e.sort((e,t)=>(t.internalTime||0)-(e.internalTime||0))[0]:null}cropQueryElement(e){return e.name&&e.value&&"query"===e.name.toLowerCase()&&(e.value=e.value.slice(0,75)),e}isValidEntry(e){let t=this.getMostRecentElement();return!t||t.value!=e.value||(e.internalTime||0)-(t.internalTime||0)>6e4}stripInternalTime(e){return Array.isArray(e)?e.map(e=>{let{name:t,time:r,value:n}=e;return{name:t,time:r,value:n}}):[]}stripEmptyQuery(e){let{name:t,time:r,value:n}=e;return t&&"string"==typeof n&&"query"===t.toLowerCase()&&""===n.trim()?{name:t,time:r}:e}stripEmptyQueries(e){return e.map(e=>this.stripEmptyQuery(e))}constructor(e){this.store=e||(r0()?localStorage:r1()?new r4:!function(){try{return"u">typeof sessionStorage}catch(e){return!1}}()?new ni:sessionStorage)}},nl=Object.freeze({__proto__:null,HistoryStore:ns,MAX_NUMBER_OF_HISTORY_ELEMENTS:20,MAX_VALUE_SIZE:75,MIN_THRESHOLD_FOR_DUPLICATE_VALUE:6e4,STORE_KEY:no,default:ns}),nu=(e,t)=>rK(void 0,void 0,void 0,function*(){return e===nr.view?(yield nc(t.contentIdValue),Object.assign({location:window.location.toString(),referrer:document.referrer,title:document.title},t)):t}),nc=e=>rK(void 0,void 0,void 0,function*(){let t=new ns,r={name:"PageView",value:e,time:new Date().toISOString()};yield t.addElementAsync(r)}),nd=new Uint8Array(16),nf=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function np(e){return"string"==typeof e&&nf.test(e)}var nh=[];for(let e=0;e<256;++e)nh.push((e+256).toString(16).slice(1));function ng(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(nh[e[t+0]]+nh[e[t+1]]+nh[e[t+2]]+nh[e[t+3]]+"-"+nh[e[t+4]]+nh[e[t+5]]+"-"+nh[e[t+6]]+nh[e[t+7]]+"-"+nh[e[t+8]]+nh[e[t+9]]+"-"+nh[e[t+10]]+nh[e[t+11]]+nh[e[t+12]]+nh[e[t+13]]+nh[e[t+14]]+nh[e[t+15]]).toLowerCase()}var ny={randomUUID:"u">typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function nm(e,t,r){if(ny.randomUUID&&!t&&!e)return ny.randomUUID();let n=(e=e||{}).random||(e.rng||function(){if(!nn&&!(nn="u">typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return nn(nd)})();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return ng(n)}function nv(e,t){return e<<t|e>>>32-t}var nw=function(e,t,r){function n(e,t,n,a){var i;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof t&&(t=function(e){if(!np(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/0x10000000000&255,r[11]=t/0x100000000&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r}(t)),(null==(i=t)?void 0:i.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let o=new Uint8Array(16+e.length);if(o.set(t),o.set(e,t.length),(o=r(o))[6]=15&o[6]|80,o[8]=63&o[8]|128,n){a=a||0;for(let e=0;e<16;++e)n[a+e]=o[e];return n}return ng(o)}try{n.name="v5"}catch(e){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}(0,0,function(e){let t=[0x5a827999,0x6ed9eba1,0x8f1bbcdc,0xca62c1d6],r=[0x67452301,0xefcdab89,0x98badcfe,0x10325476,0xc3d2e1f0];if("string"==typeof e){let t=unescape(encodeURIComponent(e));e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);let n=Math.ceil((e.length/4+2)/16),a=Array(n);for(let t=0;t<n;++t){let r=new Uint32Array(16);for(let n=0;n<16;++n)r[n]=e[64*t+4*n]<<24|e[64*t+4*n+1]<<16|e[64*t+4*n+2]<<8|e[64*t+4*n+3];a[t]=r}a[n-1][14]=(e.length-1)*8/0x100000000,a[n-1][14]=Math.floor(a[n-1][14]),a[n-1][15]=(e.length-1)*8|0;for(let e=0;e<n;++e){let n=new Uint32Array(80);for(let t=0;t<16;++t)n[t]=a[e][t];for(let e=16;e<80;++e)n[e]=nv(n[e-3]^n[e-8]^n[e-14]^n[e-16],1);let i=r[0],o=r[1],s=r[2],l=r[3],u=r[4];for(let e=0;e<80;++e){let r=Math.floor(e/20),a=nv(i,5)+function(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:case 3:return t^r^n;case 2:return t&r^t&n^r&n}}(r,o,s,l)+u+t[r]+n[e]>>>0;u=l,l=s,s=nv(o,30)>>>0,o=i,i=a}r[0]=r[0]+i>>>0,r[1]=r[1]+o>>>0,r[2]=r[2]+s>>>0,r[3]=r[3]+l>>>0,r[4]=r[4]+u>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]}),nS="2.30.26",nb=e=>"".concat(e.protocol,"//").concat(e.hostname).concat(0===e.pathname.indexOf("/")?e.pathname:"/".concat(e.pathname)).concat(e.search),nC={pageview:"pageview",event:"event"},nI=class{constructor({client:e,uuidGenerator:t=nm}){this.client=e,this.uuidGenerator=t}},nq=class extends nI{getApi(e){return"setAction"===e?this.setAction:null}setAction(e,t){this.action=e,this.actionData=t}clearData(){this.clearPluginData(),this.action=void 0,this.actionData={}}getLocationInformation(e,t){return Object.assign({hitType:e},this.getNextValues(e,t))}updateLocationInformation(e,t){this.updateLocationForNextPageView(e,t)}getDefaultContextInformation(e){let t={title:rX()?document.title:"",encoding:rX()?document.characterSet:"UTF-8"},r={screenResolution:"".concat(screen.width,"x").concat(screen.height),screenColor:"".concat(screen.colorDepth,"-bit")},n={language:navigator.language,userAgent:navigator.userAgent};return Object.assign(Object.assign(Object.assign(Object.assign({},{time:Date.now(),eventId:this.uuidGenerator()}),r),n),t)}updateLocationForNextPageView(e,t){let{pageViewId:r,referrer:n,location:a}=this.getNextValues(e,t);this.lastReferrer=n,this.pageViewId=r,this.currentLocation=a,e===nC.pageview&&(this.nextPageViewId=this.uuidGenerator(),this.hasSentFirstPageView=!0)}getNextValues(e,t){return{pageViewId:e===nC.pageview?this.nextPageViewId:this.pageViewId,referrer:e===nC.pageview&&this.hasSentFirstPageView?this.currentLocation:this.lastReferrer,location:e===nC.pageview?this.getCurrentLocationFromPayload(t):this.currentLocation}}getCurrentLocationFromPayload(e){return e.page?"".concat(this.currentLocation.split("/").slice(0,3).join("/")).concat(e.page.replace(/^\/?(.*)$/,"/$1")):nb(window.location)}constructor({client:e,uuidGenerator:t=nm}){super({client:e,uuidGenerator:t}),this.actionData={},this.pageViewId=t(),this.nextPageViewId=this.pageViewId,this.currentLocation=nb(window.location),this.lastReferrer=rX()?document.referrer:"",this.addHooks()}},nk=class e{toString(){return this.clientId.replace(/-/g,"")+"."+this.creationDate.toString()}get expired(){let t=Math.floor(Date.now()/1e3)-this.creationDate;return t<0||t>e.expirationTime}validate(e,t){return!this.expired&&this.matchReferrer(e,t)}matchReferrer(e,t){try{let r=new URL(e);return t.some(e=>RegExp(e.replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")+"$").test(r.host))}catch(e){return!1}}static fromString(t){let r=t.split(".");if(2!==r.length)return null;let[n,a]=r;if(32!==n.length||isNaN(parseInt(a)))return null;let i=n.substring(0,8)+"-"+n.substring(8,12)+"-"+n.substring(12,16)+"-"+n.substring(16,20)+"-"+n.substring(20,32);return np(i)?new e(i,1e3*Number.parseInt(a)):null}constructor(e,t){if(!np(e))throw Error("Not a valid uuid");this.clientId=e,this.creationDate=Math.floor(t/1e3)}};nk.cvo_cid="cvo_cid",nk.expirationTime=120;var nO=Object.keys;function nx(e){return null!==e&&"object"==typeof e&&!Array.isArray(e)}var nA={id:"svc_ticket_id",subject:"svc_ticket_subject",description:"svc_ticket_description",category:"svc_ticket_category",productId:"svc_ticket_product_id",custom:"svc_ticket_custom"},nR=[...nO(nA).map(e=>nA[e])].join("|"),nE=new RegExp("^(".concat(nR,"$)")),nF=e=>nO(e).filter(t=>void 0!==e[t]).reduce((t,r)=>{let n=nA[r]||r;return Object.assign(Object.assign({},t),{[n]:e[r]})},{}),nT=[e=>nE.test(e)],nD={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",price:"pr",quantity:"qt",coupon:"cc",position:"ps",group:"group"},nj={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",position:"ps",price:"pr",group:"group"},nM={action:"pa",list:"pal",listSource:"pls"},nP={id:"ti",revenue:"tr",tax:"tt",shipping:"ts",coupon:"tcc",affiliation:"ta",step:"cos",option:"col"},nU={id:"quoteId",affiliation:"quoteAffiliation"},n_={id:"reviewId",rating:"reviewRating",comment:"reviewComment"},nV={add:nM,bookmark_add:nM,bookmark_remove:nM,click:nM,checkout:nM,checkout_option:nM,detail:nM,impression:nM,remove:nM,refund:Object.assign(Object.assign({},nM),nP),purchase:Object.assign(Object.assign({},nM),nP),quickview:nM,quote:Object.assign(Object.assign({},nM),nU),review:Object.assign(Object.assign({},nM),n_)},nQ=nO(nD).map(e=>nD[e]),nL=nO(nj).map(e=>nj[e]),nN=nO(nM).map(e=>nM[e]),nz=nO(nP).map(e=>nP[e]),n$=nO(n_).map(e=>n_[e]),nB=nO(nU).map(e=>nU[e]),nH=[...nQ,"custom"].join("|"),nY=[...nL,"custom"].join("|"),nW="(pr[0-9]+)",nG="(il[0-9]+pi[0-9]+)",nK=new RegExp("^".concat(nW,"(").concat(nH,")$")),nJ=new RegExp("^(".concat(nG,"(").concat(nY,"))|(il[0-9]+nm)$")),nZ=new RegExp("^(".concat(nN.join("|"),")$")),nX=new RegExp("^(".concat(nz.join("|"),")$")),n0=new RegExp("^".concat(nW,"custom$")),n1=new RegExp("^".concat(nG,"custom$")),n2=new RegExp("^(".concat(["loyaltyCardId","loyaltyTier","thirdPartyPersona","companyName","favoriteStore","storeName","userIndustry","userRole","userDepartment","businessUnit",...n$,...nB].join("|"),")$")),n3=[e=>nJ.test(e),e=>nK.test(e),e=>nZ.test(e),e=>nX.test(e),e=>n2.test(e)],n5=[n0,n1],n6=Object.assign(Object.assign({},Object.assign(Object.assign(Object.assign(Object.assign({},{anonymizeIp:"aip"}),{eventCategory:"ec",eventAction:"ea",eventLabel:"el",eventValue:"ev",page:"dp",visitorId:"cid",clientId:"cid",userId:"uid",currencyCode:"cu"}),{hitType:"t",pageViewId:"pid",encoding:"de",location:"dl",referrer:"dr",screenColor:"sd",screenResolution:"sr",title:"dt",userAgent:"ua",language:"ul",eventId:"z",time:"tm"}),["contentId","contentIdKey","contentType","searchHub","tab","searchUid","permanentId","contentLocale","trackingId"].reduce((e,t)=>Object.assign(Object.assign({},e),{[t]:t}),{}))),{svcAction:"svc_action",svcActionData:"svc_action_data"}),n4=e=>{let t=!!e.action&&nV[e.action]||{};return nO(e).reduce((r,n)=>{let a=t[n]||n6[n]||n;return Object.assign(Object.assign({},r),{[a]:e[n]})},{})},n8=nO(n6).map(e=>n6[e]),n9=e=>-1!==n8.indexOf(e),n7=e=>"custom"===e,ae=e=>[...n3,...nT,n9,n7].some(t=>t(e)),at=e=>nO(e).reduce((t,r)=>{let n=ar(r);return n?Object.assign(Object.assign({},t),an(n,e[r])):Object.assign(Object.assign({},t),{[r]:e[r]})},{}),ar=e=>{let t;return[...n5].every(r=>{var n;return!(t=null==(n=r.exec(e))?void 0:n[1])}),t},an=(e,t)=>nO(t).reduce((r,n)=>Object.assign(Object.assign({},r),{["".concat(e).concat(n)]:t[n]}),{}),aa=class{sendEvent(e,t){return rK(this,void 0,void 0,function*(){if(!this.isAvailable())throw Error('navigator.sendBeacon is not supported in this browser. Consider adding a polyfill like "sendbeacon-polyfill".');let{baseUrl:r,preprocessRequest:n}=this.opts,a=yield this.getQueryParamsForEventType(e),{url:i,payload:o}=yield this.preProcessRequestAsPotentialJSONString("".concat(r,"/analytics/").concat(e,"?").concat(a),t,n),s=new Blob([this.encodeForEventType(e,o)],{type:"application/x-www-form-urlencoded"});navigator.sendBeacon(i,s)})}isAvailable(){return"sendBeacon"in navigator}deleteHttpCookieVisitorId(){return Promise.resolve()}preProcessRequestAsPotentialJSONString(e,t,r){return rK(this,void 0,void 0,function*(){let n=e,a=t;if(r){let{url:i,body:o}=yield r({url:e,body:JSON.stringify(t)},"analyticsBeacon");n=i||e;try{a=JSON.parse(o)}catch(e){console.error("Unable to process the request body as a JSON string",e)}}return{payload:a,url:n}})}encodeForEventType(e,t){return this.isEventTypeLegacy(e)?this.encodeEventToJson(e,t):this.encodeEventToJson(e,t,this.opts.token)}getQueryParamsForEventType(e){return rK(this,void 0,void 0,function*(){let{token:t,visitorIdProvider:r}=this.opts,n=yield r.getCurrentVisitorId();return[t&&this.isEventTypeLegacy(e)?"access_token=".concat(t):"",n?"visitorId=".concat(n):"","discardVisitInfo=true"].filter(e=>!!e).join("&")})}isEventTypeLegacy(e){return -1!==[nr.click,nr.custom,nr.search,nr.view].indexOf(e)}encodeEventToJson(e,t,r){let n="".concat(e,"Event=").concat(encodeURIComponent(JSON.stringify(t)));return r&&(n="access_token=".concat(encodeURIComponent(r),"&").concat(n)),n}constructor(e){this.opts=e}},ai=class{sendEvent(e,t){return rK(this,void 0,void 0,function*(){return Promise.resolve()})}deleteHttpCookieVisitorId(){return rK(this,void 0,void 0,function*(){return Promise.resolve()})}},ao=window.fetch,as=class{sendEvent(e,t){return rK(this,void 0,void 0,function*(){let{baseUrl:r,visitorIdProvider:n,preprocessRequest:a}=this.opts,i=this.shouldAppendVisitorId(e)?yield this.getVisitorIdParam():"",o={url:"".concat(r,"/analytics/").concat(e).concat(i),credentials:"include",mode:"cors",headers:this.getHeaders(),method:"POST",body:JSON.stringify(t)},s=Object.assign(Object.assign({},o),a?yield a(o,"analyticsFetch"):{}),{url:l}=s,u=rG(s,["url"]),c;try{c=yield ao(l,u)}catch(e){console.error("An error has occured when sending the event.",e);return}if(c.ok){let e=yield c.json();return e.visitorId&&n.setCurrentVisitorId(e.visitorId),e}try{c.json()}catch(e){}throw console.error('An error has occured when sending the "'.concat(e,'" event.'),c,t),Error('An error has occurred when sending the "'.concat(e,'" event. Check the console logs for more details.'))})}deleteHttpCookieVisitorId(){return rK(this,void 0,void 0,function*(){let{baseUrl:e}=this.opts;yield ao("".concat(e,"/analytics/visit"),{headers:this.getHeaders(),method:"DELETE"})})}shouldAppendVisitorId(e){return -1!==[nr.click,nr.custom,nr.search,nr.view].indexOf(e)}getVisitorIdParam(){return rK(this,void 0,void 0,function*(){let{visitorIdProvider:e}=this.opts,t=yield e.getCurrentVisitorId();return t?"?visitor=".concat(t):""})}getHeaders(){let{token:e}=this.opts;return Object.assign(Object.assign({},e?{Authorization:"Bearer ".concat(e)}:{}),{"Content-Type":"application/json"})}constructor(e){this.opts=e}},al=class{getClientDependingOnEventType(e){return"click"===e&&this.beaconClient.isAvailable()?this.beaconClient:this.client}constructor(e,t){r0()&&r1()?this.storage=new na:r0()?this.storage=localStorage:(console.warn("BrowserRuntime detected no valid storage available.",this),this.storage=new ni),this.client=new as(e),this.beaconClient=new aa(e),window.addEventListener("beforeunload",()=>{for(let{eventType:e,payload:r}of t())this.beaconClient.sendEvent(e,r)})}},au=class{getClientDependingOnEventType(e){return this.client}constructor(e,t){this.storage=t||new ni,this.client=new as(e)}},ac=class{getClientDependingOnEventType(e){return this.client}constructor(){this.storage=new ni,this.client=new ai}},ad=e=>(null==e?void 0:e.startsWith("xx"))||!1,af=["1",1,"yes",!0];function ap(){return rZ()&&[navigator.globalPrivacyControl,navigator.doNotTrack,navigator.msDoNotTrack,window.doNotTrack].some(e=>-1!==af.indexOf(e))}var ah,ag={default:"https://analytics.cloud.coveo.com/rest/ua"},ay=class{get defaultOptions(){return{endpoint:ag.default,isCustomEndpoint:!1,token:"",version:"v15",beforeSendHooks:[],afterSendHooks:[]}}get version(){return nS}initRuntime(e){return rJ()&&rX()?new al(e,()=>{let e=[...this.bufferedRequests];return this.bufferedRequests=[],e}):("u">typeof navigator&&"ReactNative"==navigator.product&&console.warn("\n        We've detected you're using React Native but have not provided the corresponding runtime, \n        for an optimal experience please use the \"coveo.analytics/react-native\" subpackage.\n        Follow the Readme on how to set it up: https://github.com/coveo/coveo.analytics.js#using-react-native\n    "),new au(e))}get storage(){return this.runtime.storage}determineVisitorId(){return rK(this,void 0,void 0,function*(){try{return rJ()&&this.extractClientIdFromLink(window.location.href)||(yield this.storage.getItem("visitorId"))||nm()}catch(e){return console.log("Could not get visitor ID from the current runtime environment storage. Using a random ID instead.",e),nm()}})}getCurrentVisitorId(){return rK(this,void 0,void 0,function*(){if(!this.visitorId){let e=yield this.determineVisitorId();yield this.setCurrentVisitorId(e)}return this.visitorId})}setCurrentVisitorId(e){return rK(this,void 0,void 0,function*(){this.visitorId=e,yield this.storage.setItem("visitorId",e)})}setClientId(e,t){return rK(this,void 0,void 0,function*(){if(np(e))this.setCurrentVisitorId(e.toLowerCase());else{if(!t)throw Error("Cannot generate uuid client id without a specific namespace string.");this.setCurrentVisitorId(nw(e,nw(t,"38824e1f-37f5-42d3-8372-a4b8fa9df946")))}})}getParameters(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return rK(this,void 0,void 0,function*(){return yield this.resolveParameters(e,...r)})}getPayload(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return rK(this,void 0,void 0,function*(){let t=yield this.resolveParameters(e,...r);return yield this.resolvePayloadForParameters(e,t)})}get currentVisitorId(){return"string"!=typeof(this.visitorId||this.storage.getItem("visitorId"))&&this.setCurrentVisitorId(nm()),this.visitorId}set currentVisitorId(e){this.visitorId=e,this.storage.setItem("visitorId",e)}extractClientIdFromLink(e){if(ap())return null;try{let t=new URL(e).searchParams.get(nk.cvo_cid);if(null==t)return null;let r=nk.fromString(t);return r&&rX()&&r.validate(document.referrer,this.acceptedLinkReferrers)?r.clientId:null}catch(e){}return null}resolveParameters(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return rK(this,void 0,void 0,function*(){let{variableLengthArgumentsNames:t=[],addVisitorIdParameter:n=!1,usesMeasurementProtocol:a=!1,addClientIdParameter:i=!1}=this.eventTypeMapping[e]||{};return yield[e=>t.length>0?this.parseVariableArgumentsPayload(t,e):e[0],e=>rK(this,void 0,void 0,function*(){return Object.assign(Object.assign({},e),{visitorId:n?yield this.getCurrentVisitorId():""})}),e=>rK(this,void 0,void 0,function*(){return i?Object.assign(Object.assign({},e),{clientId:yield this.getCurrentVisitorId()}):e}),e=>a?this.ensureAnonymousUserWhenUsingApiKey(e):e,t=>this.beforeSendHooks.reduce((t,r)=>rK(this,void 0,void 0,function*(){let n=yield t;return yield r(e,n)}),t)].reduce((e,t)=>rK(this,void 0,void 0,function*(){let r=yield e;return yield t(r)}),Promise.resolve(r))})}resolvePayloadForParameters(e,t){return rK(this,void 0,void 0,function*(){let{usesMeasurementProtocol:r=!1}=this.eventTypeMapping[e]||{};return yield[e=>this.setTrackingIdIfTrackingIdNotPresent(e),t=>this.removeEmptyPayloadValues(t,e),t=>this.validateParams(t,e),e=>r?n4(e):e,e=>r?this.removeUnknownParameters(e):e,e=>r?this.processCustomParameters(e):this.mapCustomParametersToCustomData(e)].reduce((e,t)=>rK(this,void 0,void 0,function*(){let r=yield e;return yield t(r)}),Promise.resolve(t))})}makeEvent(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return rK(this,void 0,void 0,function*(){let{newEventType:t=e}=this.eventTypeMapping[e]||{},n=yield this.resolveParameters(e,...r),a=yield this.resolvePayloadForParameters(e,n);return{eventType:t,payload:a,log:r=>rK(this,void 0,void 0,function*(){return this.bufferedRequests.push({eventType:t,payload:Object.assign(Object.assign({},a),r)}),yield Promise.all(this.afterSendHooks.map(t=>t(e,Object.assign(Object.assign({},n),r)))),yield this.deferExecution(),yield this.sendFromBuffer()})}})}sendEvent(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return rK(this,void 0,void 0,function*(){return(yield this.makeEvent(e,...r)).log({})})}deferExecution(){return new Promise(e=>setTimeout(e,0))}sendFromBuffer(){return rK(this,void 0,void 0,function*(){let e=this.bufferedRequests.shift();if(e){let{eventType:t,payload:r}=e;return this.runtime.getClientDependingOnEventType(t).sendEvent(t,r)}})}clear(){this.storage.removeItem("visitorId"),new ns().clear()}deleteHttpOnlyVisitorId(){this.runtime.client.deleteHttpCookieVisitorId()}makeSearchEvent(e){return rK(this,void 0,void 0,function*(){return this.makeEvent(nr.search,e)})}sendSearchEvent(e){var{searchQueryUid:t}=e,r=rG(e,["searchQueryUid"]);return rK(this,void 0,void 0,function*(){return(yield this.makeSearchEvent(r)).log({searchQueryUid:t})})}makeClickEvent(e){return rK(this,void 0,void 0,function*(){return this.makeEvent(nr.click,e)})}sendClickEvent(e){var{searchQueryUid:t}=e,r=rG(e,["searchQueryUid"]);return rK(this,void 0,void 0,function*(){return(yield this.makeClickEvent(r)).log({searchQueryUid:t})})}makeCustomEvent(e){return rK(this,void 0,void 0,function*(){return this.makeEvent(nr.custom,e)})}sendCustomEvent(e){var{lastSearchQueryUid:t}=e,r=rG(e,["lastSearchQueryUid"]);return rK(this,void 0,void 0,function*(){return(yield this.makeCustomEvent(r)).log({lastSearchQueryUid:t})})}makeViewEvent(e){return rK(this,void 0,void 0,function*(){return this.makeEvent(nr.view,e)})}sendViewEvent(e){return rK(this,void 0,void 0,function*(){return(yield this.makeViewEvent(e)).log({})})}getVisit(){return rK(this,void 0,void 0,function*(){let e=yield(yield fetch("".concat(this.baseUrl,"/analytics/visit"))).json();return this.visitorId=e.visitorId,e})}getHealth(){return rK(this,void 0,void 0,function*(){return yield(yield fetch("".concat(this.baseUrl,"/analytics/monitoring/health"))).json()})}registerBeforeSendEventHook(e){this.beforeSendHooks.push(e)}registerAfterSendEventHook(e){this.afterSendHooks.push(e)}addEventTypeMapping(e,t){this.eventTypeMapping[e]=t}setAcceptedLinkReferrers(e){if(Array.isArray(e)&&e.every(e=>"string"==typeof e))this.acceptedLinkReferrers=e;else throw Error("Parameter should be an array of domain strings")}parseVariableArgumentsPayload(e,t){let r={};for(let n=0,a=t.length;n<a;n++){let a=t[n];if("string"==typeof a)r[e[n]]=a;else if("object"==typeof a)return Object.assign(Object.assign({},r),a)}return r}isKeyAllowedEmpty(e,t){return -1!==(({[nr.search]:["queryText"]})[e]||[]).indexOf(t)}removeEmptyPayloadValues(e,t){let r=e=>"u">typeof e&&null!==e&&""!==e;return Object.keys(e).filter(n=>this.isKeyAllowedEmpty(t,n)||r(e[n])).reduce((t,r)=>Object.assign(Object.assign({},t),{[r]:e[r]}),{})}removeUnknownParameters(e){return Object.keys(e).filter(e=>{if(ae(e))return!0;console.log(e,"is not processed by coveoua")}).reduce((t,r)=>Object.assign(Object.assign({},t),{[r]:e[r]}),{})}processCustomParameters(e){let{custom:t}=e,r=rG(e,["custom"]),n={};t&&nx(t)&&(n=this.lowercaseKeys(t));let a=at(r);return Object.assign(Object.assign({},n),a)}mapCustomParametersToCustomData(e){let{custom:t}=e,r=rG(e,["custom"]);if(!(t&&nx(t)))return e;{let n=this.lowercaseKeys(t);return Object.assign(Object.assign({},r),{customData:Object.assign(Object.assign({},n),e.customData)})}}lowercaseKeys(e){let t=Object.keys(e),r={};return t.forEach(t=>{r[t.toLowerCase()]=e[t]}),r}validateParams(e,t){let{anonymizeIp:r}=e,n=rG(e,["anonymizeIp"]);return void 0!==r&&-1==["0","false","undefined","null","{}","[]",""].indexOf("".concat(r).toLowerCase())&&(n.anonymizeIp=1),(t==nr.view||t==nr.click||t==nr.search||t==nr.custom)&&(n.originLevel3=this.limit(n.originLevel3,128)),t==nr.view&&(n.location=this.limit(n.location,128)),("pageview"==t||"event"==t)&&(n.referrer=this.limit(n.referrer,2048),n.location=this.limit(n.location,2048),n.page=this.limit(n.page,2048)),n}ensureAnonymousUserWhenUsingApiKey(e){let{userId:t}=e,r=rG(e,["userId"]);return ad(this.options.token)&&!t?(r.userId="anonymous",r):e}setTrackingIdIfTrackingIdNotPresent(e){let{trackingId:t}=e,r=rG(e,["trackingId"]);return t?e:(r.hasOwnProperty("custom")&&nx(r.custom)&&(r.custom.hasOwnProperty("context_website")||r.custom.hasOwnProperty("siteName"))&&(r.trackingId=r.custom.context_website||r.custom.siteName),r.hasOwnProperty("customData")&&nx(r.customData)&&(r.customData.hasOwnProperty("context_website")||r.customData.hasOwnProperty("siteName"))&&(r.trackingId=r.customData.context_website||r.customData.siteName),r)}limit(e,t){return"string"!=typeof e?e:e.substring(0,t)}get baseUrl(){return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ag.default,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"v15",r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e=e.replace(/\/$/,""),r)return"".concat(e,"/").concat(t);let n=e.endsWith("/rest")||e.endsWith("/rest/ua");return"".concat(e).concat(n?"":"/rest","/").concat(t)}(this.options.endpoint,this.options.version,this.options.isCustomEndpoint)}constructor(e){if(this.acceptedLinkReferrers=[],!e)throw Error("You have to pass options to this constructor");this.options=Object.assign(Object.assign({},this.defaultOptions),e),this.visitorId="",this.bufferedRequests=[],this.beforeSendHooks=[nu,r3].concat(this.options.beforeSendHooks),this.afterSendHooks=this.options.afterSendHooks,this.eventTypeMapping={};let t={baseUrl:this.baseUrl,token:this.options.token,visitorIdProvider:this,preprocessRequest:this.options.preprocessRequest};ap()?this.runtime=new ac:this.runtime=this.options.runtimeEnvironment||this.initRuntime(t),this.addEventTypeMapping(nr.view,{newEventType:nr.view,addClientIdParameter:!0}),this.addEventTypeMapping(nr.click,{newEventType:nr.click,addClientIdParameter:!0}),this.addEventTypeMapping(nr.custom,{newEventType:nr.custom,addClientIdParameter:!0}),this.addEventTypeMapping(nr.search,{newEventType:nr.search,addClientIdParameter:!0})}};!function(e){e.contextChanged="contextChanged",e.expandToFullUI="expandToFullUI",e.openUserActions="openUserActions",e.showPrecedingSessions="showPrecedingSessions",e.showFollowingSessions="showFollowingSessions",e.clickViewedDocument="clickViewedDocument",e.clickPageView="clickPageView",e.createArticle="createArticle"}(ah||(ah={})),function(e){e.interfaceLoad="interfaceLoad",e.interfaceChange="interfaceChange",e.didyoumeanAutomatic="didyoumeanAutomatic",e.didyoumeanClick="didyoumeanClick",e.resultsSort="resultsSort",e.searchboxSubmit="searchboxSubmit",e.searchboxClear="searchboxClear",e.searchboxAsYouType="searchboxAsYouType",e.breadcrumbFacet="breadcrumbFacet",e.breadcrumbResetAll="breadcrumbResetAll",e.documentQuickview="documentQuickview",e.documentOpen="documentOpen",e.omniboxAnalytics="omniboxAnalytics",e.omniboxFromLink="omniboxFromLink",e.searchFromLink="searchFromLink",e.triggerNotify="notify",e.triggerExecute="execute",e.triggerQuery="query",e.undoTriggerQuery="undoQuery",e.triggerRedirect="redirect",e.pagerResize="pagerResize",e.pagerNumber="pagerNumber",e.pagerNext="pagerNext",e.pagerPrevious="pagerPrevious",e.pagerScrolling="pagerScrolling",e.staticFilterClearAll="staticFilterClearAll",e.staticFilterSelect="staticFilterSelect",e.staticFilterDeselect="staticFilterDeselect",e.facetClearAll="facetClearAll",e.facetSearch="facetSearch",e.facetSelect="facetSelect",e.facetSelectAll="facetSelectAll",e.facetDeselect="facetDeselect",e.facetExclude="facetExclude",e.facetUnexclude="facetUnexclude",e.facetUpdateSort="facetUpdateSort",e.facetShowMore="showMoreFacetResults",e.facetShowLess="showLessFacetResults",e.queryError="query",e.queryErrorBack="errorBack",e.queryErrorClear="errorClearQuery",e.queryErrorRetry="errorRetry",e.recommendation="recommendation",e.recommendationInterfaceLoad="recommendationInterfaceLoad",e.recommendationOpen="recommendationOpen",e.likeSmartSnippet="likeSmartSnippet",e.dislikeSmartSnippet="dislikeSmartSnippet",e.expandSmartSnippet="expandSmartSnippet",e.collapseSmartSnippet="collapseSmartSnippet",e.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",e.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",e.sendSmartSnippetReason="sendSmartSnippetReason",e.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",e.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion",e.showMoreSmartSnippetSuggestion="showMoreSmartSnippetSuggestion",e.showLessSmartSnippetSuggestion="showLessSmartSnippetSuggestion",e.openSmartSnippetSource="openSmartSnippetSource",e.openSmartSnippetSuggestionSource="openSmartSnippetSuggestionSource",e.openSmartSnippetInlineLink="openSmartSnippetInlineLink",e.openSmartSnippetSuggestionInlineLink="openSmartSnippetSuggestionInlineLink",e.recentQueryClick="recentQueriesClick",e.clearRecentQueries="clearRecentQueries",e.recentResultClick="recentResultClick",e.clearRecentResults="clearRecentResults",e.noResultsBack="noResultsBack",e.showMoreFoldedResults="showMoreFoldedResults",e.showLessFoldedResults="showLessFoldedResults",e.copyToClipboard="copyToClipboard",e.caseSendEmail="Case.SendEmail",e.feedItemTextPost="FeedItem.TextPost",e.caseAttach="caseAttach",e.caseDetach="caseDetach",e.retryGeneratedAnswer="retryGeneratedAnswer",e.likeGeneratedAnswer="likeGeneratedAnswer",e.dislikeGeneratedAnswer="dislikeGeneratedAnswer",e.openGeneratedAnswerSource="openGeneratedAnswerSource",e.generatedAnswerStreamEnd="generatedAnswerStreamEnd",e.generatedAnswerSourceHover="generatedAnswerSourceHover",e.generatedAnswerCopyToClipboard="generatedAnswerCopyToClipboard",e.generatedAnswerHideAnswers="generatedAnswerHideAnswers",e.generatedAnswerShowAnswers="generatedAnswerShowAnswers",e.generatedAnswerExpand="generatedAnswerExpand",e.generatedAnswerCollapse="generatedAnswerCollapse",e.generatedAnswerFeedbackSubmit="generatedAnswerFeedbackSubmit",e.rephraseGeneratedAnswer="rephraseGeneratedAnswer",e.generatedAnswerFeedbackSubmitV2="generatedAnswerFeedbackSubmitV2"}(r8||(r8={}));var am={[r8.triggerNotify]:"queryPipelineTriggers",[r8.triggerExecute]:"queryPipelineTriggers",[r8.triggerQuery]:"queryPipelineTriggers",[r8.triggerRedirect]:"queryPipelineTriggers",[r8.queryError]:"errors",[r8.queryErrorBack]:"errors",[r8.queryErrorClear]:"errors",[r8.queryErrorRetry]:"errors",[r8.pagerNext]:"getMoreResults",[r8.pagerPrevious]:"getMoreResults",[r8.pagerNumber]:"getMoreResults",[r8.pagerResize]:"getMoreResults",[r8.pagerScrolling]:"getMoreResults",[r8.facetSearch]:"facet",[r8.facetShowLess]:"facet",[r8.facetShowMore]:"facet",[r8.recommendation]:"recommendation",[r8.likeSmartSnippet]:"smartSnippet",[r8.dislikeSmartSnippet]:"smartSnippet",[r8.expandSmartSnippet]:"smartSnippet",[r8.collapseSmartSnippet]:"smartSnippet",[r8.openSmartSnippetFeedbackModal]:"smartSnippet",[r8.closeSmartSnippetFeedbackModal]:"smartSnippet",[r8.sendSmartSnippetReason]:"smartSnippet",[r8.expandSmartSnippetSuggestion]:"smartSnippetSuggestions",[r8.collapseSmartSnippetSuggestion]:"smartSnippetSuggestions",[r8.showMoreSmartSnippetSuggestion]:"smartSnippetSuggestions",[r8.showLessSmartSnippetSuggestion]:"smartSnippetSuggestions",[r8.clearRecentQueries]:"recentQueries",[r8.recentResultClick]:"recentlyClickedDocuments",[r8.clearRecentResults]:"recentlyClickedDocuments",[r8.showLessFoldedResults]:"folding",[r8.caseDetach]:"case",[r8.likeGeneratedAnswer]:"generatedAnswer",[r8.dislikeGeneratedAnswer]:"generatedAnswer",[r8.openGeneratedAnswerSource]:"generatedAnswer",[r8.generatedAnswerStreamEnd]:"generatedAnswer",[r8.generatedAnswerSourceHover]:"generatedAnswer",[r8.generatedAnswerCopyToClipboard]:"generatedAnswer",[r8.generatedAnswerHideAnswers]:"generatedAnswer",[r8.generatedAnswerShowAnswers]:"generatedAnswer",[r8.generatedAnswerExpand]:"generatedAnswer",[r8.generatedAnswerCollapse]:"generatedAnswer",[r8.generatedAnswerFeedbackSubmit]:"generatedAnswer",[r8.generatedAnswerFeedbackSubmitV2]:"generatedAnswer",[ah.expandToFullUI]:"interface",[ah.openUserActions]:"User Actions",[ah.showPrecedingSessions]:"User Actions",[ah.showFollowingSessions]:"User Actions",[ah.clickViewedDocument]:"User Actions",[ah.clickPageView]:"User Actions",[ah.createArticle]:"createArticle"},av=class{getPayload(){return Promise.resolve()}getParameters(){return Promise.resolve()}makeEvent(e){return Promise.resolve({eventType:e,payload:null,log:()=>Promise.resolve()})}sendEvent(){return Promise.resolve()}makeSearchEvent(){return this.makeEvent(nr.search)}sendSearchEvent(){return Promise.resolve()}makeClickEvent(){return this.makeEvent(nr.click)}sendClickEvent(){return Promise.resolve()}makeCustomEvent(){return this.makeEvent(nr.custom)}sendCustomEvent(){return Promise.resolve()}makeViewEvent(){return this.makeEvent(nr.view)}sendViewEvent(){return Promise.resolve()}getVisit(){return Promise.resolve({id:"",visitorId:""})}getHealth(){return Promise.resolve({status:""})}registerBeforeSendEventHook(){}registerAfterSendEventHook(){}addEventTypeMapping(){}get version(){return nS}constructor(){this.runtime=new ac,this.currentVisitorId=""}},aw=e=>(function e(t){let r=t.join(";");return r.length<=256?r:e(t.slice(1))})(function(e){let t="";return e.filter(e=>{let r=e!==t;return t=e,r})}(e.map(e=>e.replace(/;/g,""))));function aS(e){let t="string"==typeof e.partialQueries?e.partialQueries:aw(e.partialQueries),r="string"==typeof e.suggestions?e.suggestions:aw(e.suggestions);return Object.assign(Object.assign({},e),{partialQueries:t,suggestions:r})}var ab=class{disable(){this.coveoAnalyticsClient=new av}enable(){this.coveoAnalyticsClient=new ay(this.opts)}makeInterfaceLoad(){return this.makeSearchEvent(r8.interfaceLoad)}logInterfaceLoad(){return rK(this,void 0,void 0,function*(){return(yield this.makeInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendationInterfaceLoad(){return this.makeSearchEvent(r8.recommendationInterfaceLoad)}logRecommendationInterfaceLoad(){return rK(this,void 0,void 0,function*(){return(yield this.makeRecommendationInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendation(){return this.makeCustomEvent(r8.recommendation)}logRecommendation(){return rK(this,void 0,void 0,function*(){return(yield this.makeRecommendation()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendationOpen(e,t){return this.makeClickEvent(r8.recommendationOpen,e,t)}logRecommendationOpen(e,t){return rK(this,void 0,void 0,function*(){return(yield this.makeRecommendationOpen(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterClearAll(e){return this.makeSearchEvent(r8.staticFilterClearAll,e)}logStaticFilterClearAll(e){return rK(this,void 0,void 0,function*(){return(yield this.makeStaticFilterClearAll(e)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterSelect(e){return this.makeSearchEvent(r8.staticFilterSelect,e)}logStaticFilterSelect(e){return rK(this,void 0,void 0,function*(){return(yield this.makeStaticFilterSelect(e)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterDeselect(e){return this.makeSearchEvent(r8.staticFilterDeselect,e)}logStaticFilterDeselect(e){return rK(this,void 0,void 0,function*(){return(yield this.makeStaticFilterDeselect(e)).log({searchUID:this.provider.getSearchUID()})})}makeFetchMoreResults(){return this.makeCustomEvent(r8.pagerScrolling,{type:"getMoreResults"})}logFetchMoreResults(){return rK(this,void 0,void 0,function*(){return(yield this.makeFetchMoreResults()).log({searchUID:this.provider.getSearchUID()})})}makeInterfaceChange(e){return this.makeSearchEvent(r8.interfaceChange,e)}logInterfaceChange(e){return rK(this,void 0,void 0,function*(){return(yield this.makeInterfaceChange(e)).log({searchUID:this.provider.getSearchUID()})})}makeDidYouMeanAutomatic(){return this.makeSearchEvent(r8.didyoumeanAutomatic)}logDidYouMeanAutomatic(){return rK(this,void 0,void 0,function*(){return(yield this.makeDidYouMeanAutomatic()).log({searchUID:this.provider.getSearchUID()})})}makeDidYouMeanClick(){return this.makeSearchEvent(r8.didyoumeanClick)}logDidYouMeanClick(){return rK(this,void 0,void 0,function*(){return(yield this.makeDidYouMeanClick()).log({searchUID:this.provider.getSearchUID()})})}makeResultsSort(e){return this.makeSearchEvent(r8.resultsSort,e)}logResultsSort(e){return rK(this,void 0,void 0,function*(){return(yield this.makeResultsSort(e)).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxSubmit(){return this.makeSearchEvent(r8.searchboxSubmit)}logSearchboxSubmit(){return rK(this,void 0,void 0,function*(){return(yield this.makeSearchboxSubmit()).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxClear(){return this.makeSearchEvent(r8.searchboxClear)}logSearchboxClear(){return rK(this,void 0,void 0,function*(){return(yield this.makeSearchboxClear()).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxAsYouType(){return this.makeSearchEvent(r8.searchboxAsYouType)}logSearchboxAsYouType(){return rK(this,void 0,void 0,function*(){return(yield this.makeSearchboxAsYouType()).log({searchUID:this.provider.getSearchUID()})})}makeBreadcrumbFacet(e){return this.makeSearchEvent(r8.breadcrumbFacet,e)}logBreadcrumbFacet(e){return rK(this,void 0,void 0,function*(){return(yield this.makeBreadcrumbFacet(e)).log({searchUID:this.provider.getSearchUID()})})}makeBreadcrumbResetAll(){return this.makeSearchEvent(r8.breadcrumbResetAll)}logBreadcrumbResetAll(){return rK(this,void 0,void 0,function*(){return(yield this.makeBreadcrumbResetAll()).log({searchUID:this.provider.getSearchUID()})})}makeDocumentQuickview(e,t){return this.makeClickEvent(r8.documentQuickview,e,t)}logDocumentQuickview(e,t){return rK(this,void 0,void 0,function*(){return(yield this.makeDocumentQuickview(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeDocumentOpen(e,t){return this.makeClickEvent(r8.documentOpen,e,t)}logDocumentOpen(e,t){return rK(this,void 0,void 0,function*(){return(yield this.makeDocumentOpen(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeOmniboxAnalytics(e){return this.makeSearchEvent(r8.omniboxAnalytics,aS(e))}logOmniboxAnalytics(e){return rK(this,void 0,void 0,function*(){return(yield this.makeOmniboxAnalytics(e)).log({searchUID:this.provider.getSearchUID()})})}makeOmniboxFromLink(e){return this.makeSearchEvent(r8.omniboxFromLink,aS(e))}logOmniboxFromLink(e){return rK(this,void 0,void 0,function*(){return(yield this.makeOmniboxFromLink(e)).log({searchUID:this.provider.getSearchUID()})})}makeSearchFromLink(){return this.makeSearchEvent(r8.searchFromLink)}logSearchFromLink(){return rK(this,void 0,void 0,function*(){return(yield this.makeSearchFromLink()).log({searchUID:this.provider.getSearchUID()})})}makeTriggerNotify(e){return this.makeCustomEvent(r8.triggerNotify,e)}logTriggerNotify(e){return rK(this,void 0,void 0,function*(){return(yield this.makeTriggerNotify(e)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerExecute(e){return this.makeCustomEvent(r8.triggerExecute,e)}logTriggerExecute(e){return rK(this,void 0,void 0,function*(){return(yield this.makeTriggerExecute(e)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerQuery(){return this.makeCustomEvent(r8.triggerQuery,{query:this.provider.getSearchEventRequestPayload().queryText},"queryPipelineTriggers")}logTriggerQuery(){return rK(this,void 0,void 0,function*(){return(yield this.makeTriggerQuery()).log({searchUID:this.provider.getSearchUID()})})}makeUndoTriggerQuery(e){return this.makeSearchEvent(r8.undoTriggerQuery,e)}logUndoTriggerQuery(e){return rK(this,void 0,void 0,function*(){return(yield this.makeUndoTriggerQuery(e)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerRedirect(e){return this.makeCustomEvent(r8.triggerRedirect,Object.assign(Object.assign({},e),{query:this.provider.getSearchEventRequestPayload().queryText}))}logTriggerRedirect(e){return rK(this,void 0,void 0,function*(){return(yield this.makeTriggerRedirect(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerResize(e){return this.makeCustomEvent(r8.pagerResize,e)}logPagerResize(e){return rK(this,void 0,void 0,function*(){return(yield this.makePagerResize(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerNumber(e){return this.makeCustomEvent(r8.pagerNumber,e)}logPagerNumber(e){return rK(this,void 0,void 0,function*(){return(yield this.makePagerNumber(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerNext(e){return this.makeCustomEvent(r8.pagerNext,e)}logPagerNext(e){return rK(this,void 0,void 0,function*(){return(yield this.makePagerNext(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerPrevious(e){return this.makeCustomEvent(r8.pagerPrevious,e)}logPagerPrevious(e){return rK(this,void 0,void 0,function*(){return(yield this.makePagerPrevious(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerScrolling(){return this.makeCustomEvent(r8.pagerScrolling)}logPagerScrolling(){return rK(this,void 0,void 0,function*(){return(yield this.makePagerScrolling()).log({searchUID:this.provider.getSearchUID()})})}makeFacetClearAll(e){return this.makeSearchEvent(r8.facetClearAll,e)}logFacetClearAll(e){return rK(this,void 0,void 0,function*(){return(yield this.makeFacetClearAll(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSearch(e){return this.makeSearchEvent(r8.facetSearch,e)}logFacetSearch(e){return rK(this,void 0,void 0,function*(){return(yield this.makeFacetSearch(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSelect(e){return this.makeSearchEvent(r8.facetSelect,e)}logFacetSelect(e){return rK(this,void 0,void 0,function*(){return(yield this.makeFacetSelect(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetDeselect(e){return this.makeSearchEvent(r8.facetDeselect,e)}logFacetDeselect(e){return rK(this,void 0,void 0,function*(){return(yield this.makeFacetDeselect(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetExclude(e){return this.makeSearchEvent(r8.facetExclude,e)}logFacetExclude(e){return rK(this,void 0,void 0,function*(){return(yield this.makeFacetExclude(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetUnexclude(e){return this.makeSearchEvent(r8.facetUnexclude,e)}logFacetUnexclude(e){return rK(this,void 0,void 0,function*(){return(yield this.makeFacetUnexclude(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSelectAll(e){return this.makeSearchEvent(r8.facetSelectAll,e)}logFacetSelectAll(e){return rK(this,void 0,void 0,function*(){return(yield this.makeFacetSelectAll(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetUpdateSort(e){return this.makeSearchEvent(r8.facetUpdateSort,e)}logFacetUpdateSort(e){return rK(this,void 0,void 0,function*(){return(yield this.makeFacetUpdateSort(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetShowMore(e){return this.makeCustomEvent(r8.facetShowMore,e)}logFacetShowMore(e){return rK(this,void 0,void 0,function*(){return(yield this.makeFacetShowMore(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetShowLess(e){return this.makeCustomEvent(r8.facetShowLess,e)}logFacetShowLess(e){return rK(this,void 0,void 0,function*(){return(yield this.makeFacetShowLess(e)).log({searchUID:this.provider.getSearchUID()})})}makeQueryError(e){return this.makeCustomEvent(r8.queryError,e)}logQueryError(e){return rK(this,void 0,void 0,function*(){return(yield this.makeQueryError(e)).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorBack(){return rK(this,void 0,void 0,function*(){let e=yield this.makeCustomEvent(r8.queryErrorBack);return{description:e.description,log:()=>rK(this,void 0,void 0,function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(r8.queryErrorBack)})}})}logQueryErrorBack(){return rK(this,void 0,void 0,function*(){return(yield this.makeQueryErrorBack()).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorRetry(){return rK(this,void 0,void 0,function*(){let e=yield this.makeCustomEvent(r8.queryErrorRetry);return{description:e.description,log:()=>rK(this,void 0,void 0,function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(r8.queryErrorRetry)})}})}logQueryErrorRetry(){return rK(this,void 0,void 0,function*(){return(yield this.makeQueryErrorRetry()).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorClear(){return rK(this,void 0,void 0,function*(){let e=yield this.makeCustomEvent(r8.queryErrorClear);return{description:e.description,log:()=>rK(this,void 0,void 0,function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(r8.queryErrorClear)})}})}logQueryErrorClear(){return rK(this,void 0,void 0,function*(){return(yield this.makeQueryErrorClear()).log({searchUID:this.provider.getSearchUID()})})}makeLikeSmartSnippet(){return this.makeCustomEvent(r8.likeSmartSnippet)}logLikeSmartSnippet(){return rK(this,void 0,void 0,function*(){return(yield this.makeLikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeDislikeSmartSnippet(){return this.makeCustomEvent(r8.dislikeSmartSnippet)}logDislikeSmartSnippet(){return rK(this,void 0,void 0,function*(){return(yield this.makeDislikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeExpandSmartSnippet(){return this.makeCustomEvent(r8.expandSmartSnippet)}logExpandSmartSnippet(){return rK(this,void 0,void 0,function*(){return(yield this.makeExpandSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeCollapseSmartSnippet(){return this.makeCustomEvent(r8.collapseSmartSnippet)}logCollapseSmartSnippet(){return rK(this,void 0,void 0,function*(){return(yield this.makeCollapseSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetFeedbackModal(){return this.makeCustomEvent(r8.openSmartSnippetFeedbackModal)}logOpenSmartSnippetFeedbackModal(){return rK(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})})}makeCloseSmartSnippetFeedbackModal(){return this.makeCustomEvent(r8.closeSmartSnippetFeedbackModal)}logCloseSmartSnippetFeedbackModal(){return rK(this,void 0,void 0,function*(){return(yield this.makeCloseSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})})}makeSmartSnippetFeedbackReason(e,t){return this.makeCustomEvent(r8.sendSmartSnippetReason,{reason:e,details:t})}logSmartSnippetFeedbackReason(e,t){return rK(this,void 0,void 0,function*(){return(yield this.makeSmartSnippetFeedbackReason(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeExpandSmartSnippetSuggestion(e){return this.makeCustomEvent(r8.expandSmartSnippetSuggestion,"documentId"in e?e:{documentId:e})}logExpandSmartSnippetSuggestion(e){return rK(this,void 0,void 0,function*(){return(yield this.makeExpandSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})})}makeCollapseSmartSnippetSuggestion(e){return this.makeCustomEvent(r8.collapseSmartSnippetSuggestion,"documentId"in e?e:{documentId:e})}logCollapseSmartSnippetSuggestion(e){return rK(this,void 0,void 0,function*(){return(yield this.makeCollapseSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})})}makeShowMoreSmartSnippetSuggestion(e){return this.makeCustomEvent(r8.showMoreSmartSnippetSuggestion,e)}logShowMoreSmartSnippetSuggestion(e){return rK(this,void 0,void 0,function*(){return(yield this.makeShowMoreSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})})}makeShowLessSmartSnippetSuggestion(e){return this.makeCustomEvent(r8.showLessSmartSnippetSuggestion,e)}logShowLessSmartSnippetSuggestion(e){return rK(this,void 0,void 0,function*(){return(yield this.makeShowLessSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSource(e,t){return this.makeClickEvent(r8.openSmartSnippetSource,e,t)}logOpenSmartSnippetSource(e,t){return rK(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSource(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSuggestionSource(e,t){return this.makeClickEvent(r8.openSmartSnippetSuggestionSource,e,{contentIDKey:t.documentId.contentIdKey,contentIDValue:t.documentId.contentIdValue},t)}makeCopyToClipboard(e,t){return this.makeClickEvent(r8.copyToClipboard,e,t)}logCopyToClipboard(e,t){return rK(this,void 0,void 0,function*(){return(yield this.makeCopyToClipboard(e,t)).log({searchUID:this.provider.getSearchUID()})})}logOpenSmartSnippetSuggestionSource(e,t){return rK(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSuggestionSource(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetInlineLink(e,t){return this.makeClickEvent(r8.openSmartSnippetInlineLink,e,{contentIDKey:t.contentIDKey,contentIDValue:t.contentIDValue},t)}logOpenSmartSnippetInlineLink(e,t){return rK(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetInlineLink(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSuggestionInlineLink(e,t){return this.makeClickEvent(r8.openSmartSnippetSuggestionInlineLink,e,{contentIDKey:t.documentId.contentIdKey,contentIDValue:t.documentId.contentIdValue},t)}logOpenSmartSnippetSuggestionInlineLink(e,t){return rK(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSuggestionInlineLink(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeRecentQueryClick(){return this.makeSearchEvent(r8.recentQueryClick)}logRecentQueryClick(){return rK(this,void 0,void 0,function*(){return(yield this.makeRecentQueryClick()).log({searchUID:this.provider.getSearchUID()})})}makeClearRecentQueries(){return this.makeCustomEvent(r8.clearRecentQueries)}logClearRecentQueries(){return rK(this,void 0,void 0,function*(){return(yield this.makeClearRecentQueries()).log({searchUID:this.provider.getSearchUID()})})}makeRecentResultClick(e,t){return this.makeCustomEvent(r8.recentResultClick,{info:e,identifier:t})}logRecentResultClick(e,t){return rK(this,void 0,void 0,function*(){return(yield this.makeRecentResultClick(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeClearRecentResults(){return this.makeCustomEvent(r8.clearRecentResults)}logClearRecentResults(){return rK(this,void 0,void 0,function*(){return(yield this.makeClearRecentResults()).log({searchUID:this.provider.getSearchUID()})})}makeNoResultsBack(){return this.makeSearchEvent(r8.noResultsBack)}logNoResultsBack(){return rK(this,void 0,void 0,function*(){return(yield this.makeNoResultsBack()).log({searchUID:this.provider.getSearchUID()})})}makeShowMoreFoldedResults(e,t){return this.makeClickEvent(r8.showMoreFoldedResults,e,t)}logShowMoreFoldedResults(e,t){return rK(this,void 0,void 0,function*(){return(yield this.makeShowMoreFoldedResults(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeShowLessFoldedResults(){return this.makeCustomEvent(r8.showLessFoldedResults)}logShowLessFoldedResults(){return rK(this,void 0,void 0,function*(){return(yield this.makeShowLessFoldedResults()).log({searchUID:this.provider.getSearchUID()})})}makeEventDescription(e,t){var r;return{actionCause:t,customData:null==(r=e.payload)?void 0:r.customData}}makeCustomEvent(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:am[e];return rK(this,void 0,void 0,function*(){this.coveoAnalyticsClient.getParameters;let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),t),a=Object.assign(Object.assign({},(yield this.getBaseEventRequest(n))),{eventType:r,eventValue:e}),i=yield this.coveoAnalyticsClient.makeCustomEvent(a);return{description:this.makeEventDescription(i,e),log:e=>{let{searchUID:t}=e;return i.log({lastSearchQueryUid:t})}}})}logCustomEvent(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:am[e];return rK(this,void 0,void 0,function*(){return(yield this.makeCustomEvent(e,t,r)).log({searchUID:this.provider.getSearchUID()})})}makeCustomEventWithType(e,t,r){return rK(this,void 0,void 0,function*(){let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),r),a=Object.assign(Object.assign({},(yield this.getBaseEventRequest(n))),{eventType:t,eventValue:e}),i=yield this.coveoAnalyticsClient.makeCustomEvent(a);return{description:this.makeEventDescription(i,e),log:e=>{let{searchUID:t}=e;return i.log({lastSearchQueryUid:t})}}})}logCustomEventWithType(e,t,r){return rK(this,void 0,void 0,function*(){return(yield this.makeCustomEventWithType(e,t,r)).log({searchUID:this.provider.getSearchUID()})})}logSearchEvent(e,t){return rK(this,void 0,void 0,function*(){return(yield this.makeSearchEvent(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeSearchEvent(e,t){return rK(this,void 0,void 0,function*(){let r=yield this.getBaseSearchEventRequest(e,t),n=yield this.coveoAnalyticsClient.makeSearchEvent(r);return{description:this.makeEventDescription(n,e),log:e=>{let{searchUID:t}=e;return n.log({searchQueryUid:t})}}})}makeClickEvent(e,t,r,n){return rK(this,void 0,void 0,function*(){let a=Object.assign(Object.assign(Object.assign({},t),(yield this.getBaseEventRequest(Object.assign(Object.assign({},r),n)))),{queryPipeline:this.provider.getPipeline(),actionCause:e}),i=yield this.coveoAnalyticsClient.makeClickEvent(a);return{description:this.makeEventDescription(i,e),log:e=>{let{searchUID:t}=e;return i.log({searchQueryUid:t})}}})}logClickEvent(e,t,r,n){return rK(this,void 0,void 0,function*(){return(yield this.makeClickEvent(e,t,r,n)).log({searchUID:this.provider.getSearchUID()})})}getBaseSearchEventRequest(e,t){var r,n;return rK(this,void 0,void 0,function*(){return Object.assign(Object.assign(Object.assign({},(yield this.getBaseEventRequest(Object.assign(Object.assign({},t),null==(n=(r=this.provider).getGeneratedAnswerMetadata)?void 0:n.call(r))))),this.provider.getSearchEventRequestPayload()),{queryPipeline:this.provider.getPipeline(),actionCause:e})})}getBaseEventRequest(e){return rK(this,void 0,void 0,function*(){let t=Object.assign(Object.assign({},this.provider.getBaseMetadata()),e);return Object.assign(Object.assign(Object.assign({},this.getOrigins()),this.getSplitTestRun()),{customData:t,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})})}getOrigins(){var e,t;return{originContext:null==(t=(e=this.provider).getOriginContext)?void 0:t.call(e),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof ay?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}getSplitTestRun(){let e=this.provider.getSplitTestRunName?this.provider.getSplitTestRunName():"",t=this.provider.getSplitTestRunVersion?this.provider.getSplitTestRunVersion():"";return Object.assign(Object.assign({},e&&{splitTestRunName:e}),t&&{splitTestRunVersion:t})}makeLikeGeneratedAnswer(e){return this.makeCustomEvent(r8.likeGeneratedAnswer,e)}logLikeGeneratedAnswer(e){return rK(this,void 0,void 0,function*(){return(yield this.makeLikeGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})})}makeDislikeGeneratedAnswer(e){return this.makeCustomEvent(r8.dislikeGeneratedAnswer,e)}logDislikeGeneratedAnswer(e){return rK(this,void 0,void 0,function*(){return(yield this.makeDislikeGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})})}makeOpenGeneratedAnswerSource(e){return this.makeCustomEvent(r8.openGeneratedAnswerSource,e)}logOpenGeneratedAnswerSource(e){return rK(this,void 0,void 0,function*(){return(yield this.makeOpenGeneratedAnswerSource(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerSourceHover(e){return this.makeCustomEvent(r8.generatedAnswerSourceHover,e)}logGeneratedAnswerSourceHover(e){return rK(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerSourceHover(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerCopyToClipboard(e){return this.makeCustomEvent(r8.generatedAnswerCopyToClipboard,e)}logGeneratedAnswerCopyToClipboard(e){return rK(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerCopyToClipboard(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerHideAnswers(e){return this.makeCustomEvent(r8.generatedAnswerHideAnswers,e)}logGeneratedAnswerHideAnswers(e){return rK(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerHideAnswers(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerShowAnswers(e){return this.makeCustomEvent(r8.generatedAnswerShowAnswers,e)}logGeneratedAnswerShowAnswers(e){return rK(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerShowAnswers(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerExpand(e){return this.makeCustomEvent(r8.generatedAnswerExpand,e)}logGeneratedAnswerExpand(e){return rK(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerExpand(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerCollapse(e){return this.makeCustomEvent(r8.generatedAnswerCollapse,e)}logGeneratedAnswerCollapse(e){return rK(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerCollapse(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerFeedbackSubmit(e){return this.makeCustomEvent(r8.generatedAnswerFeedbackSubmit,e)}logGeneratedAnswerFeedbackSubmit(e){return rK(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerFeedbackSubmit(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerFeedbackSubmitV2(e){return this.makeCustomEvent(r8.generatedAnswerFeedbackSubmitV2,e)}logGeneratedAnswerFeedbackSubmitV2(e){return rK(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerFeedbackSubmitV2(e)).log({searchUID:this.provider.getSearchUID()})})}makeRephraseGeneratedAnswer(e){return this.makeSearchEvent(r8.rephraseGeneratedAnswer,e)}logRephraseGeneratedAnswer(e){return rK(this,void 0,void 0,function*(){return(yield this.makeRephraseGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})})}makeRetryGeneratedAnswer(){return this.makeSearchEvent(r8.retryGeneratedAnswer)}logRetryGeneratedAnswer(){return rK(this,void 0,void 0,function*(){return(yield this.makeRetryGeneratedAnswer()).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerStreamEnd(e){return this.makeCustomEvent(r8.generatedAnswerStreamEnd,e)}logGeneratedAnswerStreamEnd(e){return rK(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerStreamEnd(e)).log({searchUID:this.provider.getSearchUID()})})}constructor(e,t){this.opts=e,this.provider=t;let r=!1===e.enableAnalytics||ap();this.coveoAnalyticsClient=r?new av:new ay(e)}},aC=Object.assign({},nC),aI=Object.keys(aC).map(e=>aC[e]),aq=class extends nq{getApi(e){let t=super.getApi(e);return null!==t?t:"setTicket"===e?this.setTicket:null}addHooks(){this.addHooksForEvent(),this.addHooksForPageView(),this.addHooksForSVCEvents()}setTicket(e){this.ticket=e}clearPluginData(){this.ticket={}}addHooksForSVCEvents(){var e=this;this.client.registerBeforeSendEventHook(function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];let[i]=n;return -1!==aI.indexOf(t)?e.addSVCDataToPayload(t,i):i}),this.client.registerAfterSendEventHook(function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];let[i]=n;return -1!==aI.indexOf(t)&&e.updateLocationInformation(t,i),i})}addHooksForPageView(){this.client.addEventTypeMapping(aC.pageview,{newEventType:nr.collect,variableLengthArgumentsNames:["page"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addHooksForEvent(){this.client.addEventTypeMapping(aC.event,{newEventType:nr.collect,variableLengthArgumentsNames:["eventCategory","eventAction","eventLabel","eventValue"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addSVCDataToPayload(e,t){var r;let n=Object.assign(Object.assign(Object.assign(Object.assign({},this.getLocationInformation(e,t)),this.getDefaultContextInformation(e)),this.action?{svcAction:this.action}:{}),Object.keys(null!=(r=this.actionData)?r:{}).length>0?{svcActionData:this.actionData}:{}),a=this.getTicketPayload();return this.clearData(),Object.assign(Object.assign(Object.assign({},a),n),t)}getTicketPayload(){return nF(this.ticket)}constructor({client:e,uuidGenerator:t=nm}){super({client:e,uuidGenerator:t}),this.ticket={}}};aq.Id="svc",function(e){e.click="click",e.flowStart="flowStart"}(r9||(r9={})),function(e){e.enterInterface="ticket_create_start",e.fieldUpdate="ticket_field_update",e.fieldSuggestionClick="ticket_classification_click",e.suggestionClick="suggestion_click",e.suggestionRate="suggestion_rate",e.nextCaseStep="ticket_next_stage",e.caseCancelled="ticket_cancel",e.caseSolved="ticket_cancel",e.caseCreated="ticket_create"}(r7||(r7={})),function(e){e.quit="Quit",e.solved="Solved"}(ne||(ne={}));var ak=class{disable(){this.coveoAnalyticsClient=new av,this.svc=new aq({client:this.coveoAnalyticsClient})}enable(){this.coveoAnalyticsClient=new ay(this.options),this.svc=new aq({client:this.coveoAnalyticsClient})}logEnterInterface(e){return this.svc.setAction(r7.enterInterface),this.svc.setTicket(e.ticket),this.sendFlowStartEvent()}logUpdateCaseField(e){return this.svc.setAction(r7.fieldUpdate,{fieldName:e.fieldName}),this.svc.setTicket(e.ticket),this.sendClickEvent()}logSelectFieldSuggestion(e){return this.svc.setAction(r7.fieldSuggestionClick,e.suggestion),this.svc.setTicket(e.ticket),this.sendClickEvent()}logSelectDocumentSuggestion(e){return this.svc.setAction(r7.suggestionClick,e.suggestion),this.svc.setTicket(e.ticket),this.sendClickEvent()}logRateDocumentSuggestion(e){return this.svc.setAction(r7.suggestionRate,Object.assign({rate:e.rating},e.suggestion)),this.svc.setTicket(e.ticket),this.sendClickEvent()}logMoveToNextCaseStep(e){return this.svc.setAction(r7.nextCaseStep,{stage:null==e?void 0:e.stage}),this.svc.setTicket(e.ticket),this.sendClickEvent()}logCaseCancelled(e){return this.svc.setAction(r7.caseCancelled,{reason:ne.quit}),this.svc.setTicket(e.ticket),this.sendClickEvent()}logCaseSolved(e){return this.svc.setAction(r7.caseSolved,{reason:ne.solved}),this.svc.setTicket(e.ticket),this.sendClickEvent()}logCaseCreated(e){return this.svc.setAction(r7.caseCreated),this.svc.setTicket(e.ticket),this.sendClickEvent()}sendFlowStartEvent(){return this.coveoAnalyticsClient.sendEvent("event","svc",r9.flowStart,this.provider?{searchHub:this.provider.getOriginLevel1()}:null)}sendClickEvent(){return this.coveoAnalyticsClient.sendEvent("event","svc",r9.click,this.provider?{searchHub:this.provider.getOriginLevel1()}:null)}constructor(e,t){var r;this.options=e,this.provider=t;let n=(null==(r=e.enableAnalytics)||r)&&!ap();this.coveoAnalyticsClient=n?new ay(e):new av,this.svc=new aq({client:this.coveoAnalyticsClient})}},aO=()=>"default",ax=e=>new ay(e).getCurrentVisitorId(),aA=new nl.HistoryStore,aR=(e,t)=>"function"==typeof t?function(){for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];let i=tk(n[0]);try{return t.apply(t,n)}catch(t){return e.error(t,"Error in analytics preprocessRequest. Returning original request."),i}}:void 0,aE=(e,t)=>function(){for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];let i=tk(n[1]);try{return t.apply(t,n)}catch(t){return e.error(t,"Error in analytics hook. Returning original request."),i}},aF=class{getSearchUID(){return null}getOriginLevel1(){return this.state.searchHub||aO()}constructor(e){this.state=e()}};function aT(){return{desiredCount:5,numberOfValues:8,set:{}}}var aD=(e,t)=>{let r=e=>e.facetId===t;return"productListing"in e&&e.productListing&&"facets"in e.productListing&&"results"in e.productListing.facets?e.productListing.facets.results.find(r):"search"in e&&e.search?e.search.response.facets.find(r):void 0},aj=(e,t)=>{let r=aD(e,t);if(function(e,t){return!!t&&t.facetId in e.facetSet}(e,r))return r},aM=e=>"productListing"in e?e.productListing.isLoading:e.search.isLoading;function aP(e){let{activeValue:t,ancestryMap:r}=function(e){let t=[...e],r=new Map;for(;t.length>0;){let e=t.shift();if("selected"===e.state)return{activeValue:e,ancestryMap:r};if(r)for(let t of e.children)r.set(t,e);t.unshift(...e.children)}return{}}(e);return t?function(e,t){let r=[];if(!e)return[];let n=e;do r.unshift(n),n=t.get(n);while(n);return r}(t,r):[]}var aU=(e,t)=>{let r=aD(e,t);if(function(e,t){return!!t&&t.facetId in e.categoryFacetSet}(e,r))return r},a_=(e,t)=>{var r;return null==(r=e.categoryFacetSet[t])?void 0:r.request},aV=(e,t)=>{var r;let n=a_(e,t);return aP(null!=(r=null==n?void 0:n.currentValues)?r:[])},aQ=(e,t)=>{let r=a2(t,e),n=r?r.field:"",a=a1(n,e);return{facetId:e,facetField:n,facetTitle:a}};function aL(e,t){let{facetId:r,facetValue:n}=e,a=aQ(r,t),i=a3(t,r);return{...a,facetValue:"hierarchical"===i?aJ(t,r):n}}function aN(e){var t,r,n,a,i;return{facetSet:null!=(t=e.facetSet)?t:{},categoryFacetSet:null!=(r=e.categoryFacetSet)?r:{},dateFacetSet:null!=(n=e.dateFacetSet)?n:{},numericFacetSet:null!=(a=e.numericFacetSet)?a:{},automaticFacetSet:null!=(i=e.automaticFacetSet)?i:aT()}}var az=e=>{let t=[];return aH(e).forEach((r,n)=>{let a=a3(e,r.facetId),i=a0(r,n+1);if(aB(r)){if(!aV(e,r.facetId).length)return;t.push({...i,...aZ(e,r.facetId),facetType:a,state:"selected"});return}r.currentValues.forEach((e,n)=>{if("idle"===e.state)return;let o=aW(e,n+1,a),s=a$(r)?aK(e):aG(e);t.push({...i,...o,...s})})}),aY(e).forEach((e,r)=>{let n=aX(e,r+1);e.values.forEach((e,r)=>{if("idle"===e.state)return;let a=aW(e,r+1,"specific"),i=aK(e);t.push({...n,...a,...i})})}),t},a$=e=>"specific"===e.type,aB=e=>"hierarchical"===e.type,aH=e=>[...Object.values(e.facetSet),...Object.values(e.categoryFacetSet),...Object.values(e.dateFacetSet),...Object.values(e.numericFacetSet)].map(e=>e.request),aY=e=>[...Object.values(e.automaticFacetSet.set)].map(e=>e.response),aW=(e,t,r)=>({state:e.state,valuePosition:t,facetType:r}),aG=e=>({displayValue:"".concat(e.start,"..").concat(e.end),value:"".concat(e.start,"..").concat(e.end),start:e.start,end:e.end,endInclusive:e.endInclusive}),aK=e=>({displayValue:e.value,value:e.value}),aJ=(e,t)=>aV(e,t).map(e=>e.value).join(";"),aZ=(e,t)=>{let r=aJ(e,t);return{value:r,valuePosition:1,displayValue:r}},aX=(e,t)=>({title:a1(e.field,e.field),field:e.field,id:e.field,facetPosition:t}),a0=(e,t)=>({title:a1(e.field,e.facetId),field:e.field,id:e.facetId,facetPosition:t}),a1=(e,t)=>"".concat(e,"_").concat(t),a2=(e,t)=>{var r,n,a,i,o;return(null==(r=e.facetSet[t])?void 0:r.request)||(null==(n=e.categoryFacetSet[t])?void 0:n.request)||(null==(a=e.dateFacetSet[t])?void 0:a.request)||(null==(i=e.numericFacetSet[t])?void 0:i.request)||(null==(o=e.automaticFacetSet.set[t])?void 0:o.response)},a3=(e,t)=>{let r=a2(e,t);return r?r.type:"specific"},a5=()=>({q:"",enableQuerySyntax:!1}),a6=e=>{let t=e.configuration.search.locale.split("-")[0];return t&&2===t.length?t:"en"},a4=class{getLanguage(){return a6(this.state)}getBaseMetadata(){let{context:e,configuration:t}=this.state,r=(null==e?void 0:e.contextValues)||{},n={};for(let[e,t]of Object.entries(r))n["context_".concat(e)]=t;return"legacy"===t.analytics.analyticsMode&&(n.coveoHeadlessVersion=rH),n}getOriginContext(){return this.state.configuration.analytics.originContext}getOriginLevel1(){return this.state.searchHub||aO()}getOriginLevel2(){return this.state.configuration.analytics.originLevel2}getOriginLevel3(){return this.state.configuration.analytics.originLevel3}getIsAnonymous(){return this.state.configuration.analytics.anonymous}constructor(e){this.getState=e,this.state=e()}},a8=()=>({url:"",clientId:"",additionalFields:[],advancedParameters:{debug:!1},products:[],facets:{results:[]},error:null,isLoading:!1,responseId:""}),a9=class extends a4{getPipeline(){return""}getSearchEventRequestPayload(){return{queryText:"",responseTime:0,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){var e;return(null==(e=this.getState().productListing)?void 0:e.responseId)||this.initialState.responseId}mapResultsToAnalyticsDocument(){var e;return null==(e=this.state.productListing)?void 0:e.products.map(e=>({documentUri:e.documentUri,documentUriHash:e.documentUriHash,permanentid:e.permanentid}))}get numberOfResults(){return this.state.productListing.products.length}constructor(){super(...arguments),this.initialState=a8()}},a7=(e=>(e.Ascending="ascending",e.Descending="descending",e))(a7||{}),ie=(e=>(e.Relevancy="relevancy",e.QRE="qre",e.Date="date",e.Field="field",e.NoSort="nosort",e))(ie||{}),it=e=>{if(t9(e))return e.map(e=>it(e)).join(",");switch(e.by){case"relevancy":case"qre":case"nosort":return e.by;case"date":return"date ".concat(e.order);case"field":return"@".concat(e.field," ").concat(e.order);default:return""}},ir=()=>({by:"relevancy"});function ia(){return it(ir())}new t6({values:{by:new t7({enum:ie,required:!0}),order:new t7({enum:a7}),field:new t3}});var ii=class e extends a4{getFacetState(){return az(aN(this.getState()))}getPipeline(){var t;return this.state.pipeline||(null==(t=this.state.search)?void 0:t.response.pipeline)||e.fallbackPipelineName}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.resultURIs,numberOfResults:this.numberOfResults}}getSearchUID(){var e,t;let r=this.getState();return(null==(e=r.search)?void 0:e.searchResponseId)||(null==(t=r.search)?void 0:t.response.searchUid)||rt().response.searchUid}getSplitTestRunName(){var e;return null==(e=this.state.search)?void 0:e.response.splitTestRun}getSplitTestRunVersion(){var t;let r=!!this.getSplitTestRunName(),n=(null==(t=this.state.search)?void 0:t.response.pipeline)||this.state.pipeline||e.fallbackPipelineName;return r?n:void 0}getBaseMetadata(){var e,t,r;let n=this.getState(),a=super.getBaseMetadata(),i=null==(r=n.search)||null==(t=r.response)||null==(e=t.extendedResults)?void 0:e.generativeQuestionAnsweringId;return i&&(a.generativeQuestionAnsweringId=i),a}getFacetMetadata(e,t){var r,n;let a=null!=(n=null==(r=this.getFacetRequest(e))?void 0:r.field)?n:"";return{...this.getBaseMetadata(),facetId:e,facetField:a,facetValue:t,facetTitle:"".concat(a,"_").concat(e)}}getFacetClearAllMetadata(e){var t,r;let n=null!=(r=null==(t=this.getFacetRequest(e))?void 0:t.field)?r:"";return{...this.getBaseMetadata(),facetId:e,facetField:n,facetTitle:"".concat(n,"_").concat(e)}}getFacetUpdateSortMetadata(e,t){var r,n;let a=null!=(n=null==(r=this.getFacetRequest(e))?void 0:r.field)?n:"";return{...this.getBaseMetadata(),facetId:e,facetField:a,criteria:t,facetTitle:"".concat(a,"_").concat(e)}}getRangeBreadcrumbFacetMetadata(e,t){var r,n;let a=null!=(n=null==(r=this.getFacetRequest(e))?void 0:r.field)?n:"";return{...this.getBaseMetadata(),facetId:e,facetField:a,facetRangeEnd:t.end,facetRangeEndInclusive:t.endInclusive,facetRangeStart:t.start,facetTitle:"".concat(a,"_").concat(e)}}getResultSortMetadata(){var e;return{...this.getBaseMetadata(),resultsSortBy:null!=(e=this.state.sortCriteria)?e:ia()}}getStaticFilterToggleMetadata(e,t){return{...this.getBaseMetadata(),staticFilterId:e,staticFilterValue:t}}getStaticFilterClearAllMetadata(e){return{...this.getBaseMetadata(),staticFilterId:e}}getUndoTriggerQueryMetadata(e){return{...this.getBaseMetadata(),undoneQuery:e}}getCategoryBreadcrumbFacetMetadata(e,t){var r,n;let a=null!=(n=null==(r=this.getFacetRequest(e))?void 0:r.field)?n:"";return{...this.getBaseMetadata(),categoryFacetId:e,categoryFacetField:a,categoryFacetPath:t,categoryFacetTitle:"".concat(a,"_").concat(e)}}getOmniboxAnalyticsMetadata(e,t){let r=this.state.querySuggest&&this.state.querySuggest[e],n=r.completions.map(e=>e.expression),a=r.partialQueries.length-1,i=r.partialQueries[a]||"",o=r.responseId;return{...this.getBaseMetadata(),suggestionRanking:n.indexOf(t),partialQuery:i,partialQueries:r.partialQueries.length>0?r.partialQueries:"",suggestions:n.length>0?n:"",querySuggestResponseId:o}}getInterfaceChangeMetadata(){return{...this.getBaseMetadata(),interfaceChangeTo:this.state.configuration.analytics.originLevel2}}getOmniboxFromLinkMetadata(e){return{...this.getBaseMetadata(),...e}}getGeneratedAnswerMetadata(){var e;let t=this.getState(),r={};return(null==(e=t.generatedAnswer)?void 0:e.isVisible)!==void 0&&(r.showGeneratedAnswer=t.generatedAnswer.isVisible),r}get resultURIs(){var e;return null==(e=this.results)?void 0:e.map(e=>({documentUri:e.uri,documentUriHash:e.raw.urihash}))}get results(){var e;return null==(e=this.state.search)?void 0:e.response.results}get queryText(){var e;return(null==(e=this.state.query)?void 0:e.q)||a5().q}get responseTime(){var e;return(null==(e=this.state.search)?void 0:e.duration)||rt().duration}get numberOfResults(){var e;return(null==(e=this.state.search)?void 0:e.response.totalCountFiltered)||rt().response.totalCountFiltered}constructor(){super(...arguments),this.getFacetRequest=e=>{var t,r,n,a,i,o,s,l,u,c;return(null==(r=this.state.facetSet)||null==(t=r[e])?void 0:t.request)||(null==(a=this.state.categoryFacetSet)||null==(n=a[e])?void 0:n.request)||(null==(o=this.state.dateFacetSet)||null==(i=o[e])?void 0:i.request)||(null==(l=this.state.numericFacetSet)||null==(s=l[e])?void 0:s.request)||(null==(c=this.state.automaticFacetSet)||null==(u=c.set[e])?void 0:u.response)}}};ii.fallbackPipelineName="default";var io=ii,is=()=>{let e=aA.getHistory().reverse().find(e=>"PageView"===e.name&&e.value);return e?e.value:""};function il(e){var t,r;let n=function e(t){return t.childResults?t.childResults.flatMap(t=>[t,...e(t)]):[]}(e),a=[e,...n].filter(e=>e.parentResult).map(e=>e.parentResult);return t=[e,...n,...a],r=e=>e.uniqueId,[...t.reduce((e,t)=>{let n=r(t);return e.has(n)||e.set(n,t),e},new Map).values()]}var iu=()=>"",ic=(e,t,r)=>function(){for(var n=arguments.length,a=Array(n),i=0;i<n;i++)a[i]=arguments[i];return ih(1===a.length?{...a[0],__legacy__getBuilder:t(a[0].__legacy__getBuilder),analyticsConfigurator:e,providerClass:r}:{prefix:a[0],__legacy__getBuilder:t(a[1]),__legacy__provider:a[2],analyticsConfigurator:e,providerClass:r})},id=e=>"legacy"===e.configuration.analytics.analyticsMode,ip=e=>"next"===e.configuration.analytics.analyticsMode,ih=e=>{let{prefix:t,__legacy__getBuilder:r,__legacy__provider:n,analyticsPayloadBuilder:a,analyticsType:i,analyticsConfigurator:o,providerClass:s}=e;return null!=n||(n=e=>new s(e)),function(e,t){let r=t=>Object.assign(tl(e,t),{instantlyCallable:!0}),n=r(async(e,r)=>{let{getState:n,extra:a}=r,{analyticsClientMiddleware:i,preprocessRequest:o,logger:s}=a;return await (await t({getState:n,analyticsClientMiddleware:i,preprocessRequest:o,logger:s})).log({state:n(),extra:a})});return Object.assign(n,{prepare:async e=>{let{getState:n,analyticsClientMiddleware:a,preprocessRequest:i,logger:o}=e,{description:s,log:l}=await t({getState:n,analyticsClientMiddleware:a,preprocessRequest:i,logger:o});return{description:s,action:r(async(e,t)=>{let{getState:r,extra:n}=t;return await l({state:r(),extra:n})})}}}),n}(t,async e=>{let{getState:t,analyticsClientMiddleware:s,preprocessRequest:l,logger:u}=e,c=[],d={log:async e=>{let{state:t}=e;for(let e of c)await e(t)}},f=t(),p=o({getState:t,logger:u,analyticsClientMiddleware:s,preprocessRequest:l,provider:n(t)}),h=await r(p,t());d.description=null==h?void 0:h.description,c.push(async e=>{id(e)&&await ig(h,n,e,u,p.coveoAnalyticsClient)});let{emit:g}=rW(f);return c.push(async e=>{if(ip(e)&&i&&a){let t=a(e);await iq(g,i,t)}}),d})};async function ig(e,t,r,n,a){t(()=>r);let i=await (null==e?void 0:e.log({searchUID:t(()=>r).getSearchUID()}));n.info({client:a,response:i},"Analytics response")}var iy=ic(e=>{let{logger:t,getState:r,analyticsClientMiddleware:n=(e,t)=>t,preprocessRequest:a,provider:i=new io(r)}=e,o=r(),s=o.configuration.accessToken,l=o.configuration.analytics.apiBaseUrl,u=o.configuration.analytics.runtimeEnvironment,c=o.configuration.analytics.enabled,d=new ab({token:s,endpoint:l,runtimeEnvironment:u,preprocessRequest:aR(t,a),beforeSendHooks:[aE(t,n),(e,r)=>(t.info({...r,type:e,endpoint:l,token:s},"Analytics request"),r)]},i);return c||d.disable(),d},e=>e,io);ic(e=>{let{logger:t,getState:r,analyticsClientMiddleware:n=(e,t)=>t,preprocessRequest:a,provider:i=new aF(r)}=e,o=r(),s=o.configuration.accessToken,l=o.configuration.analytics.apiBaseUrl,u=o.configuration.analytics.runtimeEnvironment,c=o.configuration.analytics.enabled,d=new ak({enableAnalytics:c,token:s,endpoint:l,runtimeEnvironment:u,preprocessRequest:aR(t,a),beforeSendHooks:[aE(t,n),(e,r)=>(t.info({...r,type:e,endpoint:l,token:s},"Analytics request"),r)]},i);return c||d.disable(),d},e=>(t,r)=>Promise.resolve({description:{actionCause:"caseAssist"},log:async n=>{e(t,r)}}),aF);var im=ic(e=>{let{logger:t,getState:r,analyticsClientMiddleware:n=(e,t)=>t,preprocessRequest:a,provider:i=new a9(r)}=e,o=r(),s=o.configuration.accessToken,l=o.configuration.analytics.apiBaseUrl,u=o.configuration.analytics.runtimeEnvironment,c=o.configuration.analytics.enabled,d=new ab({token:s,endpoint:l,runtimeEnvironment:u,preprocessRequest:aR(t,a),beforeSendHooks:[aE(t,n),(e,r)=>(t.info({...r,type:e,endpoint:l,token:s},"Analytics request"),r)]},i);return c||d.disable(),d},e=>e,a9),iv=(e,t)=>{var r;let n=-1,a=null==(r=t.search)?void 0:r.results;return(n=iI(e,a))<0&&(n=function(e,t){for(let[r,n]of t.entries())if(-1!==iI(e,il(n)))return r;return -1}(e,a)),n<0&&(n=0),function(e,t,r){let n,a,i=e.raw.collection;return{collectionName:"string"==typeof i?i:"default",documentAuthor:tK(n=e.raw.author)?"unknown":Array.isArray(n)?n.join(";"):"".concat(n),documentPosition:t+1,documentTitle:e.title,documentUri:e.uri,documentUriHash:e.raw.urihash,documentUrl:e.clickUri,rankingModifier:e.rankingModifier||"",sourceName:tK(a=e.raw.source)?"unknown":a,queryPipeline:r.pipeline||iu()}}(e,(e=>{var r,n;return e+(null!=(n=null==(r=t.pagination)?void 0:r.firstResult)?n:0)})(n),t)},iw=e=>(e.raw.permanentid||console.warn("Missing field permanentid on result. This might cause many issues with your Coveo deployment. See https://docs.coveo.com/en/1913 and https://docs.coveo.com/en/1640 for more information.",e),{contentIDKey:"permanentid",contentIDValue:e.raw.permanentid||""}),iS={urihash:new t3,sourcetype:new t3,permanentid:new t3},ib={uniqueId:rR,raw:new t6({values:iS}),title:rR,uri:rR,clickUri:rR,rankingModifier:new t3({required:!1,emptyAllowed:!0})},iC=e=>new tY(ib).validate(function(e){var t;return Object.assign({},...Object.keys(ib).map(t=>({[t]:e[t]})),{raw:(t=e.raw,Object.assign({},...Object.keys(iS).map(e=>({[e]:t[e]}))))})}(e));function iI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.findIndex(t=>{let{uniqueId:r}=t;return r===e.uniqueId})}async function iq(e,t,r){await e(t,r)}var ik=e=>rU(e,{evt:rR,type:rE}),iO=()=>iy("analytics/interface/load",e=>e.makeInterfaceLoad()),ix=()=>iy("analytics/interface/change",(e,t)=>e.makeInterfaceChange({interfaceChangeTo:t.configuration.analytics.originLevel2})),iA=()=>iy("analytics/interface/searchFromLink",e=>e.makeSearchFromLink()),iR=e=>iy("analytics/interface/omniboxFromLink",t=>t.makeOmniboxFromLink(e)),iE=()=>({actionCause:"interfaceLoad"}),iF=()=>({actionCause:"interfaceChange"}),iT=()=>({actionCause:"searchFromLink"}),iD=()=>({actionCause:"omniboxFromLink"}),ij=()=>rR,iM=e$("configuration/updateBasicConfiguration",e=>rU(e,{accessToken:rE,organizationId:rE,platformUrl:rE})),iP=e$("configuration/updateSearchConfiguration",e=>rU(e,{apiBaseUrl:rE,pipeline:new t3({required:!1,emptyAllowed:!0}),searchHub:rE,timezone:rE,locale:rE,authenticationProviders:new t8({required:!1,each:rR})})),iU={enabled:new tX({default:!0}),originContext:rE,originLevel2:rE,originLevel3:rE,apiBaseUrl:rE,nextApiBaseUrl:rE,runtimeEnvironment:new tW,anonymous:new tX({default:!1}),deviceId:rE,userDisplayName:rE,documentLocation:rE,trackingId:rE,analyticsMode:new t3({constrainTo:["legacy","next"],required:!1,default:"legacy"}),source:new t6({options:{required:!1},values:["@coveo/atomic","@coveo/quantic"].reduce((e,t)=>(e[t]=rj,e),{})})},i_=e$("configuration/updateAnalyticsConfiguration",e=>rU(e,iU)),iV=e$("configuration/analytics/disable"),iQ=e$("configuration/analytics/enable"),iL=e$("configuration/analytics/originlevel2",e=>rU(e,{originLevel2:ij()})),iN=e$("configuration/analytics/originlevel3",e=>rU(e,{originLevel3:ij()})),iz={q:new t3,enableQuerySyntax:new tX,aq:new t3,cq:new t3,firstResult:new tJ({min:0}),numberOfResults:new tJ({min:0}),sortCriteria:new t3,f:new t6,fExcluded:new t6,cf:new t6,nf:new t6,mnf:new t6,df:new t6,debug:new tX,sf:new t6,tab:new t3,af:new t6},i$=e$("searchParameters/restore",e=>rU(e,iz)),iB=e$("debug/enable"),iH=e$("debug/disable"),iY=()=>!1,iW=e2(iY(),e=>{e.addCase(iB,()=>!0).addCase(iH,()=>!1).addCase(i$,(e,t)=>{var r;return null!=(r=t.payload.debug)?r:e})}),iG=e$("history/undo"),iK=e$("history/redo"),iJ=e$("history/snapshot"),iZ=(tl("history/back",async(e,t)=>{let{dispatch:r}=t;r(iG()),await r(iZ())}),tl("history/forward",async(e,t)=>{let{dispatch:r}=t;r(iK()),await r(iZ())}),tl("history/change",async(e,t)=>{let{getState:r}=t;return r().history.present})),iX=e$("pipeline/set",e=>rU(e,new t3({required:!0,emptyAllowed:!0}))),i0=e2(iu(),e=>{e.addCase(iX,(e,t)=>t.payload).addCase(iZ.fulfilled,(e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.pipeline)?n:e}).addCase(iP,(e,t)=>t.payload.pipeline||e)}),i1=e$("searchHub/set",e=>rU(e,new t3({required:!0,emptyAllowed:!0}))),i2=e2(aO(),e=>{e.addCase(i1,(e,t)=>t.payload).addCase(iZ.fulfilled,(e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.searchHub)?n:e}).addCase(iP,(e,t)=>t.payload.searchHub||e)}),i3=e$("breadcrumb/deselectAll"),i5=e$("breadcrumb/deselectAllNonBreadcrumbs"),i6=e$("facet/updateFacetAutoSelection",e=>rU(e,{allow:new tX({required:!0})})),i4=class extends io{get activeInstantResultQuery(){let e=this.getState().instantResults;for(let t in e)for(let r in e[t].cache)if(e[t].cache[r].isActive)return e[t].q;return null}get activeInstantResultCache(){let e=this.getState().instantResults;for(let t in e)for(let r in e[t].cache)if(e[t].cache[r].isActive)return e[t].cache[r];return null}get results(){var e;return null==(e=this.activeInstantResultCache)?void 0:e.results}get queryText(){var e;return null!=(e=this.activeInstantResultQuery)?e:a5().q}get responseTime(){var e,t;return null!=(t=null==(e=this.activeInstantResultCache)?void 0:e.duration)?t:rt().duration}get numberOfResults(){var e,t;return null!=(t=null==(e=this.activeInstantResultCache)?void 0:e.totalCountFiltered)?t:rt().response.totalCountFiltered}getSearchUID(){var e;return(null==(e=this.activeInstantResultCache)?void 0:e.searchUid)||super.getSearchUID()}constructor(e){super(e),this.getState=e}},i8=()=>iy("analytics/instantResult/searchboxAsYouType",e=>e.makeSearchboxAsYouType(),e=>new i4(e)),i9=()=>({actionCause:"searchboxAsYouType"}),i7={id:rR},oe={...i7,q:rF},ot=e$("instantResults/register",e=>rU(e,i7)),or=e$("instantResults/updateQuery",e=>rU(e,oe)),on=e$("instantResults/clearExpired",e=>rU(e,i7)),oa=new tJ({required:!0,min:0}),oi=e$("pagination/registerNumberOfResults",e=>rU(e,oa)),oo=e$("pagination/updateNumberOfResults",e=>rU(e,oa)),os=e$("pagination/registerPage",e=>rU(e,oa)),ol=e$("pagination/updatePage",e=>rU(e,oa)),ou=e$("pagination/nextPage"),oc=e$("pagination/previousPage"),od=e$("query/updateQuery",e=>rU(e,{q:new t3,enableQuerySyntax:new tX})),of=(e,t,r)=>({analytics:{clientId:t.clientId,clientTimestamp:new Date().toISOString(),documentReferrer:t.referrer,documentLocation:t.location,originContext:e.originContext,...r&&{actionCause:r.actionCause},...r&&{customData:r.customData},...e.userDisplayName&&{userDisplayName:e.userDisplayName},...e.deviceId&&{deviceId:e.deviceId},...e.trackingId&&{trackingId:e.trackingId},capture:!0,source:rY(e)}}),op=(e,t,r)=>{var n,a,i,o;return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,debug:e.debug,tab:e.configuration.analytics.originLevel2,referrer:t.referrer,timezone:e.configuration.search.timezone,...e.configuration.analytics.enabled&&{visitorId:t.clientId},...(null==(n=e.advancedSearchQueries)?void 0:n.aq)&&{aq:e.advancedSearchQueries.aq},...(null==(a=e.advancedSearchQueries)?void 0:a.cq)&&{cq:e.advancedSearchQueries.cq},...(null==(i=e.advancedSearchQueries)?void 0:i.lq)&&{lq:e.advancedSearchQueries.lq},...(null==(o=e.advancedSearchQueries)?void 0:o.dq)&&{dq:e.advancedSearchQueries.dq},...e.context&&{context:e.context.contextValues},...e.fields&&!e.fields.fetchAllFields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.query&&{q:e.query.q,enableQuerySyntax:e.query.enableQuerySyntax},...e.searchHub&&{searchHub:e.searchHub},...e.sortCriteria&&{sortCriteria:e.sortCriteria},...e.configuration.analytics.enabled&&of(e.configuration.analytics,t,r),...e.excerptLength&&!tK(e.excerptLength.length)&&{excerptLength:e.excerptLength.length},...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}}},oh=async(e,t)=>{let r="next"===e.analyticsMode;return{analytics:{clientId:await ax(e),clientTimestamp:new Date().toISOString(),documentReferrer:e.originLevel3,originContext:e.originContext,...t&&{actionCause:t.actionCause,customData:t.customData},...t&&!r&&{customData:t.customData},...e.userDisplayName&&{userDisplayName:e.userDisplayName},...e.documentLocation&&{documentLocation:e.documentLocation},...e.deviceId&&{deviceId:e.deviceId},...is()&&{pageId:is()},...r&&e.trackingId&&{trackingId:e.trackingId},capture:r,...r&&{source:rY(e)}}}},og=async(e,t)=>{var r,n,a,i;return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,debug:e.debug,tab:e.configuration.analytics.originLevel2,referrer:e.configuration.analytics.originLevel3,timezone:e.configuration.search.timezone,...e.configuration.analytics.enabled&&{visitorId:await ax(e.configuration.analytics),actionsHistory:aA.getHistory()},...(null==(r=e.advancedSearchQueries)?void 0:r.aq)&&{aq:e.advancedSearchQueries.aq},...(null==(n=e.advancedSearchQueries)?void 0:n.cq)&&{cq:e.advancedSearchQueries.cq},...(null==(a=e.advancedSearchQueries)?void 0:a.lq)&&{lq:e.advancedSearchQueries.lq},...(null==(i=e.advancedSearchQueries)?void 0:i.dq)&&{dq:e.advancedSearchQueries.dq},...e.context&&{context:e.context.contextValues},...e.fields&&!e.fields.fetchAllFields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.query&&{q:e.query.q,enableQuerySyntax:e.query.enableQuerySyntax},...e.searchHub&&{searchHub:e.searchHub},...e.sortCriteria&&{sortCriteria:e.sortCriteria},...e.configuration.analytics.enabled&&await oh(e.configuration.analytics,t),...e.excerptLength&&!tK(e.excerptLength.length)&&{excerptLength:e.excerptLength.length},...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}}},oy=()=>({cq:"",cqWasSet:!1,aq:"",aqWasSet:!1,lq:"",lqWasSet:!1,dq:"",dqWasSet:!1,defaultFilters:{cq:"",aq:"",lq:"",dq:""}}),om=()=>iy("search/logFetchMoreResults",e=>e.makeFetchMoreResults()),ov=e=>iy("search/queryError",(t,r)=>{var n,a,i,o;return t.makeQueryError({query:(null==(n=r.query)?void 0:n.q)||a5().q,aq:(null==(a=r.advancedSearchQueries)?void 0:a.aq)||oy().aq,cq:(null==(i=r.advancedSearchQueries)?void 0:i.cq)||oy().cq,dq:(null==(o=r.advancedSearchQueries)?void 0:o.dq)||oy().dq,errorType:e.type,errorMessage:e.message})}),ow=p(R()),oS=p(E()),ob=p(R()),oC=p(F());ob.default.extend(oC.default);var oI="YYYY/MM/DD@HH:mm:ss";function oq(e,t){let r=(0,ob.default)(e,t);return r.isValid()||t?r:(0,ob.default)(e,oI)}function ok(e){return e.format(oI)}function oO(e,t){let r=oq(e,t);if(!r.isValid()){let r=' with the format "'.concat(t,'"');throw Error('Could not parse the provided date "'.concat(e,'"').concat(t?r:". Please provide a date format string in the configuration options. See https://day.js.org/docs/en/parse/string-format for more information."))}ox(r)}function ox(e){if(e.isBefore("1401-01-01"))throw Error("Date is before year 1401, which is unsupported by the API: ".concat(e))}ow.default.extend(oS.default);var oA=["past","now","next"],oR=["minute","hour","day","week","month","quarter","year"],oE=e=>{let t="now"===e;return{amount:new tJ({required:!t,min:1}),unit:new t3({required:!t,constrainTo:oR}),period:new t3({required:!0,constrainTo:oA})}};function oF(e){if("string"==typeof e&&!oM(e))throw Error('The value "'.concat(e,'" is not respecting the relative date format "period-amount-unit"'));let t="string"==typeof e?oP(e):e;new tY(oE(t.period)).validate(t);let r=oT(t),n=JSON.stringify(t);if(!r.isValid())throw Error("Date is invalid: ".concat(n));ox(r)}function oT(e){let{period:t,amount:r,unit:n}=e;switch(t){case"past":return(0,ow.default)().subtract(r,n);case"next":return(0,ow.default)().add(r,n);case"now":return(0,ow.default)()}}function oD(e){return ok(oT(oP(e)))}function oj(e){return e.toLocaleLowerCase().split("-")}function oM(e){let[t,r,n]=oj(e);if("now"===t)return!0;if(!oA.includes(t)||!oR.includes(n))return!1;let a=parseInt(r);return!(isNaN(a)||a<=0)}function oP(e){let[t,r,n]=oj(e);return"now"===t?{period:"now"}:{period:t,amount:r?parseInt(r):void 0,unit:n||void 0}}function oU(e){return"start".concat(e)}function o_(e){return"end".concat(e)}var oV=()=>({dateFacetValueMap:{}});function oQ(e){var t;let r=oV();return{request:{...e,facets:null==(t=e.facets)?void 0:t.map(e=>(function(e,t){if("dateRange"===e.type){let{facetId:r,currentValues:n}=e;return t.dateFacetValueMap[r]={},{...e,currentValues:n.map(e=>{let n,a;return n=e.start,a=e.end,oM(n)&&(n=oD(n),t.dateFacetValueMap[r][oU(n)]=e.start),oM(a)&&(a=oD(a),t.dateFacetValueMap[r][o_(a)]=e.end),{...e,start:n,end:a}})}}return e})(e,r))},mappings:r}}function oL(e,t){var r;return"success"in e?{success:{...e.success,facets:null==(r=e.success.facets)?void 0:r.map(e=>e.facetId in t.dateFacetValueMap?{...e,values:e.values.map(r=>{var n;return n=e.facetId,{...r,start:t.dateFacetValueMap[n][oU(r.start)]||r.start,end:t.dateFacetValueMap[n][o_(r.end)]||r.end}})}:e)}}:e}var oN=e$("didYouMean/enable"),oz=e$("didYouMean/disable"),o$=e$("didYouMean/automaticCorrections/disable"),oB=e$("didYouMean/automaticCorrections/enable"),oH=e$("didYouMean/correction",e=>rU(e,rR)),oY=e$("didYouMean/automaticCorrections/mode",e=>rU(e,new t3({constrainTo:["next","legacy"],emptyAllowed:!1,required:!0}))),oW=()=>iy("analytics/didyoumean/automatic",e=>e.makeDidYouMeanAutomatic()),oG=()=>({actionCause:"didYouMeanAutomatic"});function oK(){return{contextValues:{}}}function oJ(){return{contextValues:{}}}function oZ(){return{enabled:!0}}function oX(){return{freezeFacetOrder:!1,facets:{}}}function o0(){return{firstResult:0,defaultNumberOfResults:10,numberOfResults:10,totalCountFiltered:0}}function o1(e){var t,r,n;return{context:e.context||oK(),dictionaryFieldContext:e.dictionaryFieldContext||oJ(),facetSet:e.facetSet||{},numericFacetSet:e.numericFacetSet||{},dateFacetSet:e.dateFacetSet||{},categoryFacetSet:e.categoryFacetSet||{},automaticFacetSet:null!=(t=e.automaticFacetSet)?t:aT(),pagination:e.pagination||o0(),query:e.query||a5(),tabSet:e.tabSet||{},advancedSearchQueries:e.advancedSearchQueries||oy(),staticFilterSet:e.staticFilterSet||{},querySet:e.querySet||{},sortCriteria:e.sortCriteria||ia(),pipeline:e.pipeline||iu(),searchHub:e.searchHub||aO(),facetOptions:e.facetOptions||oX(),facetOrder:null!=(r=e.facetOrder)?r:[],debug:null!=(n=e.debug)?n:iY()}}var o2=new t6({values:{undoneQuery:rF},options:{required:!0}}),o3=()=>iy("analytics/trigger/query",(e,t)=>{var r;return(null==(r=t.triggers)?void 0:r.queryModification.newQuery)?e.makeTriggerQuery():null}),o5=e$("trigger/query/ignore",e=>rU(e,new t3({emptyAllowed:!0,required:!0}))),o6=e$("trigger/query/modification",e=>rU(e,new t6({values:{originalQuery:rE,modification:rE}})));function o4(e){return Object.values(e).map(e=>e.request)}function o8(e,t){let r={};e.forEach(e=>r[e.facetId]=e);let n=[];return t.forEach(e=>{e in r&&(n.push(r[e]),delete r[e])}),[...n,...Object.values(r)]}function o9(e){return o4(e).map(e=>{let t=e.currentValues.some(e=>{let{state:t}=e;return"idle"!==t});return e.generateAutomaticRanges&&!t?{...e,currentValues:[]}:e})}var o7=async(e,t)=>{var r;let n=function(e){var t,r;return[(null==(t=e.advancedSearchQueries)?void 0:t.cq.trim())||"",(null==(r=Object.values(e.tabSet||{}).find(e=>e.isActive))?void 0:r.expression.trim())||"",...Object.values(e.staticFilterSet||{}).map(e=>{let t=e.values.filter(e=>"selected"===e.state&&!!e.expression.trim()),r=t.map(e=>e.expression).join(" OR ");return t.length>1?"(".concat(r,")"):r})].filter(e=>!!e).join(" AND ")}(e),a=function(e){var t,r,n,a,i,o;return o8([...o4(null!=(n=(r=e).facetSet)?n:{}).map(e=>"alphanumericDescending"===e.sortCriteria?{...e,sortCriteria:{type:"alphanumeric",order:"descending"}}:e),...o9(null!=(a=r.numericFacetSet)?a:{}),...o9(null!=(i=r.dateFacetSet)?i:{}),...o4(null!=(o=r.categoryFacetSet)?o:{})].filter(t=>{var r,n,a;let{facetId:i}=t;return null==(a=null==(n=e.facetOptions)||null==(r=n.facets[i])?void 0:r.enabled)||a}),null!=(t=e.facetOrder)?t:[])}(e),i=function(e){var t;let r=null==(t=e.automaticFacetSet)?void 0:t.set;return r?Object.values(r).map(e=>e.response).map(se).filter(e=>e.currentValues.length>0):void 0}(e);return oQ({...await og(e,t),...e.didYouMean&&{queryCorrection:{enabled:e.didYouMean.enableDidYouMean&&"next"===e.didYouMean.queryCorrectionMode,options:{automaticallyCorrect:e.didYouMean.automaticallyCorrectQuery?"whenNoResults":"never"}},enableDidYouMean:e.didYouMean.enableDidYouMean&&"legacy"===e.didYouMean.queryCorrectionMode},...n&&{cq:n},...a.length&&{facets:a},...e.pagination&&{numberOfResults:e.pagination?e.pagination.firstResult+e.pagination.numberOfResults>5e3?5e3-e.pagination.firstResult:e.pagination.numberOfResults:void 0,firstResult:e.pagination.firstResult},...e.facetOptions&&{facetOptions:{freezeFacetOrder:e.facetOptions.freezeFacetOrder}},...(null==(r=e.folding)?void 0:r.enabled)&&{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange},...e.automaticFacetSet&&{generateAutomaticFacets:{desiredCount:e.automaticFacetSet.desiredCount,numberOfValues:e.automaticFacetSet.numberOfValues,currentFacets:i}},...e.generatedAnswer&&{pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:e.generatedAnswer.responseFormat,citationsFieldToInclude:e.generatedAnswer.fieldsToIncludeInCitations}}}})};function se(e){let{field:t,label:r,values:n}=e;return{field:t,label:r,currentValues:n.filter(e=>"selected"===e.state)}}var st=class{async fetchFromAPI(e,t){var r;let{mappings:n,request:a}=e,i=new Date().getTime();return{response:oL(await this.extra.apiClient.search(a,t),n),duration:new Date().getTime()-i,queryExecuted:(null==(r=this.getState().query)?void 0:r.q)||"",requestExecuted:a}}async process(e){var t,r,n;return null!=(n=null!=(r=null!=(t=this.processQueryErrorOrContinue(e))?t:await this.processQueryCorrectionsOrContinue(e))?r:await this.processQueryTriggersOrContinue(e))?n:this.processSuccessResponse(e)}processQueryErrorOrContinue(e){return rI(e.response)?(this.dispatch(ov(e.response.error)),this.rejectWithValue(e.response.error)):null}async processQueryCorrectionsOrContinue(e){let t=this.getState(),r=this.getSuccessResponse(e);if(!r||!t.didYouMean)return null;let{enableDidYouMean:n,automaticallyCorrectQuery:a}=t.didYouMean,{results:i,queryCorrections:o,queryCorrection:s}=r;if(!n||!a)return null;let l=0===i.length&&o&&0!==o.length,u=!tK(s)&&!tK(s.correctedQuery);if(!l&&!u)return null;let c=l?await this.processLegacyDidYouMeanAutoCorrection(e):this.processModernDidYouMeanAutoCorrection(e);return this.dispatch(iJ(o1(this.getState()))),c}async processLegacyDidYouMeanAutoCorrection(e){let t=this.getCurrentQuery(),r=this.getSuccessResponse(e);if(!r.queryCorrections)return null;let{correctedQuery:n}=r.queryCorrections[0],a=await this.automaticallyRetryQueryWithCorrection(n);return rI(a.response)?(this.dispatch(ov(a.response.error)),this.rejectWithValue(a.response.error)):(this.logOriginalAnalyticsQueryBeforeAutoCorrection(e),this.dispatch(iJ(o1(this.getState()))),{...a,response:{...a.response.success,queryCorrections:r.queryCorrections},automaticallyCorrected:!0,originalQuery:t,analyticsAction:oW()})}processModernDidYouMeanAutoCorrection(e){let t=this.getSuccessResponse(e),{correctedQuery:r,originalQuery:n}=t.queryCorrection;return this.onUpdateQueryForCorrection(r),{...e,response:{...t},queryExecuted:r,automaticallyCorrected:!0,originalQuery:n,analyticsAction:oW()}}logOriginalAnalyticsQueryBeforeAutoCorrection(e){let t=this.getState(),r=this.getSuccessResponse(e);this.analyticsAction&&this.analyticsAction()(this.dispatch,()=>this.getStateAfterResponse(e.queryExecuted,e.duration,t,r),this.extra)}async processQueryTriggersOrContinue(e){var t,r;let n=this.getSuccessResponse(e);if(!n)return null;let a=(null==(t=n.triggers.find(e=>"query"===e.type))?void 0:t.content)||"";if(!a)return null;if((null==(r=this.getState().triggers)?void 0:r.queryModification.queryToIgnore)===a)return this.dispatch(o5("")),null;this.analyticsAction&&await this.dispatch(this.analyticsAction);let i=this.getCurrentQuery(),o=await this.automaticallyRetryQueryWithTriggerModification(a);return rI(o.response)?(this.dispatch(ov(o.response.error)),this.rejectWithValue(o.response.error)):(this.dispatch(iJ(o1(this.getState()))),{...o,response:{...o.response.success},automaticallyCorrected:!1,originalQuery:i,analyticsAction:o3()})}getStateAfterResponse(e,t,r,n){var a,i;return{...r,query:{q:e,enableQuerySyntax:null!=(i=null==(a=r.query)?void 0:a.enableQuerySyntax)?i:a5().enableQuerySyntax},search:{...rt(),duration:t,response:n,results:n.results}}}processSuccessResponse(e){return this.dispatch(iJ(o1(this.getState()))),{...e,response:this.getSuccessResponse(e),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery(),analyticsAction:this.analyticsAction}}getSuccessResponse(e){return rC(e.response)?e.response.success:null}async automaticallyRetryQueryWithCorrection(e){this.onUpdateQueryForCorrection(e);let t=await this.fetchFromAPI(await o7(this.getState()),{origin:"mainSearch"});return this.dispatch(oH(e)),t}async automaticallyRetryQueryWithTriggerModification(e){return this.dispatch(o6({newQuery:e,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(e),await this.fetchFromAPI(await o7(this.getState()),{origin:"mainSearch"})}getCurrentQuery(){var e;let t=this.getState();return(null==(e=t.query)?void 0:e.q)!==void 0?t.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get analyticsAction(){return this.config.analyticsAction}get rejectWithValue(){return this.config.rejectWithValue}constructor(e,t=e=>{this.dispatch(od({q:e}))}){this.config=e,this.onUpdateQueryForCorrection=t}};tl("search/prepareForSearchWithQuery",(e,t)=>{let{dispatch:r}=t;rU(e,{q:new t3,enableQuerySyntax:new tX,clearFilters:new tX}),e.clearFilters&&(r(i3()),r(i5())),r(i6({allow:!0})),r(od({q:e.q,enableQuerySyntax:e.enableQuerySyntax})),r(ol(1))});var sr=tl("search/executeSearch",async(e,t)=>{let r=t.getState();return await sh(r,t,e)}),sn=tl("search/fetchPage",async(e,t)=>{let r=t.getState();return await sd(r,t,e)}),sa=tl("search/fetchMoreResults",async(e,t)=>{let r=t.getState();return await sf(t,r)}),si=tl("search/fetchFacetValues",async(e,t)=>{let r=t.getState();return await sp(t,e,r)}),so=(tl("search/fetchInstantResults",async(e,t)=>sc(e,t)),async(e,t)=>{var r,n,a,i;let o=await o7(e,t);return o.request={...o.request,firstResult:(null!=(a=null==(r=e.pagination)?void 0:r.firstResult)?a:0)+(null!=(i=null==(n=e.search)?void 0:n.results.length)?i:0)},o}),ss=async(e,t,r)=>oQ({...await og(e),...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},numberOfResults:r,q:t}),sl=async(e,t)=>{let r=await o7(e,t);return r.request.numberOfResults=0,r},su=e=>{var t;e.configuration.analytics.enabled&&aA.addElement({name:"Query",...(null==(t=e.query)?void 0:t.q)&&{value:e.query.q},time:JSON.stringify(new Date)})};async function sc(e,t){rU(e,{id:rR,q:rR,maxResultsPerQuery:new tJ({required:!0,min:1}),cacheTimeout:new tJ});let{q:r,maxResultsPerQuery:n}=e,a=t.getState(),i=new st({...t,analyticsAction:i8()},r=>{t.dispatch(or({q:r,id:e.id}))}),o=await ss(a,r,n),s=await i.fetchFromAPI(o,{origin:"instantResults",disableAbortWarning:!0}),l=await i.process(s);return"response"in l?{results:l.response.results,searchUid:l.response.searchUid,analyticsAction:l.analyticsAction,totalCountFiltered:l.response.totalCountFiltered,duration:l.duration}:l}async function sd(e,t,r){su(e);let{analyticsClientMiddleware:n,preprocessRequest:a,logger:i}=t.extra,{description:o}=await r.prepare({getState:()=>t.getState(),analyticsClientMiddleware:n,preprocessRequest:a,logger:i}),s=new st({...t,analyticsAction:r}),l=await o7(e,o),u=await s.fetchFromAPI(l,{origin:"mainSearch"});return await s.process(u)}async function sf(e,t){let{analyticsClientMiddleware:r,preprocessRequest:n,logger:a}=e.extra,{description:i}=await om().prepare({getState:()=>e.getState(),analyticsClientMiddleware:r,preprocessRequest:n,logger:a}),o=new st({...e,analyticsAction:om()}),s=await so(t,i),l=await o.fetchFromAPI(s,{origin:"mainSearch"});return await o.process(l)}async function sp(e,t,r){let{analyticsClientMiddleware:n,preprocessRequest:a,logger:i}=e.extra,{description:o}=await t.prepare({getState:()=>e.getState(),analyticsClientMiddleware:n,preprocessRequest:a,logger:i}),s=new st({...e,analyticsAction:t}),l=await sl(r,o),u=await s.fetchFromAPI(l,{origin:"facetValues"});return await s.process(u)}async function sh(e,t,r){su(e);let{analyticsClientMiddleware:n,preprocessRequest:a,logger:i}=t.extra,{description:o}=await r.prepare({getState:()=>t.getState(),analyticsClientMiddleware:n,preprocessRequest:a,logger:i}),s=await o7(e,o),l=new st({...t,analyticsAction:r}),u=await l.fetchFromAPI(s,{origin:"mainSearch"});return await l.process(u)}var sg=async(e,t,r)=>{var n;let a=function(e){var t,r;return[(null==(t=e.advancedSearchQueries)?void 0:t.cq.trim())||"",(null==(r=Object.values(e.tabSet||{}).find(e=>e.isActive))?void 0:r.expression.trim())||"",...Object.values(e.staticFilterSet||{}).map(e=>{let t=e.values.filter(e=>"selected"===e.state&&!!e.expression.trim()),r=t.map(e=>e.expression).join(" OR ");return t.length>1?"(".concat(r,")"):r})].filter(e=>!!e).join(" AND ")}(e),i=function(e){var t,r,n,a,i,o,s;return o8([...o4(null!=(a=(n=r=e).facetSet)?a:{}).map(e=>"alphanumericDescending"===e.sortCriteria?{...e,sortCriteria:{type:"alphanumeric",order:"descending"}}:e),...sm(null!=(i=n.numericFacetSet)?i:{}),...sm(null!=(o=n.dateFacetSet)?o:{}),...o4(null!=(s=n.categoryFacetSet)?s:{})].filter(e=>{var t,n,a;let{facetId:i}=e;return null==(a=null==(n=r.facetOptions)||null==(t=n.facets[i])?void 0:t.enabled)||a}),null!=(t=e.facetOrder)?t:[])}(e),o=function(e){var t;let r=null==(t=e.automaticFacetSet)?void 0:t.set;return r?Object.values(r).map(e=>e.response).map(sy).filter(e=>e.currentValues.length>0):void 0}(e);return oQ({..."legacy"===e.configuration.analytics.analyticsMode?await og(e,r):op(e,t,r),...e.didYouMean&&{queryCorrection:{enabled:e.didYouMean.enableDidYouMean&&"next"===e.didYouMean.queryCorrectionMode,options:{automaticallyCorrect:e.didYouMean.automaticallyCorrectQuery?"whenNoResults":"never"}},enableDidYouMean:e.didYouMean.enableDidYouMean&&"legacy"===e.didYouMean.queryCorrectionMode},...a&&{cq:a},...i.length&&{facets:i},...e.pagination&&{numberOfResults:e.pagination?e.pagination.firstResult+e.pagination.numberOfResults>5e3?5e3-e.pagination.firstResult:e.pagination.numberOfResults:void 0,firstResult:e.pagination.firstResult},...e.facetOptions&&{facetOptions:{freezeFacetOrder:e.facetOptions.freezeFacetOrder}},...(null==(n=e.folding)?void 0:n.enabled)&&{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange},...e.automaticFacetSet&&{generateAutomaticFacets:{desiredCount:e.automaticFacetSet.desiredCount,numberOfValues:e.automaticFacetSet.numberOfValues,currentFacets:o}},...e.generatedAnswer&&{pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:e.generatedAnswer.responseFormat,citationsFieldToInclude:e.generatedAnswer.fieldsToIncludeInCitations}}}})};function sy(e){let{field:t,label:r,values:n}=e;return{field:t,label:r,currentValues:n.filter(e=>"selected"===e.state)}}function sm(e){return o4(e).map(e=>{let t=e.currentValues.some(e=>{let{state:t}=e;return"idle"!==t});return e.generateAutomaticRanges&&!t?{...e,currentValues:[]}:e})}var sv=class{async fetchFromAPI(e,t){var r;let{mappings:n,request:a}=e,i=new Date().getTime();return{response:oL(await this.extra.apiClient.search(a,t),n),duration:new Date().getTime()-i,queryExecuted:(null==(r=this.getState().query)?void 0:r.q)||"",requestExecuted:a}}async process(e){var t,r,n;return null!=(n=null!=(r=null!=(t=this.processQueryErrorOrContinue(e))?t:await this.processQueryCorrectionsOrContinue(e))?r:await this.processQueryTriggersOrContinue(e))?n:this.processSuccessResponse(e)}processQueryErrorOrContinue(e){return rI(e.response)?(this.dispatch(ov(e.response.error)),this.rejectWithValue(e.response.error)):null}async processQueryCorrectionsOrContinue(e){let t=this.getState(),r=this.getSuccessResponse(e);if(!r||!t.didYouMean)return null;let{enableDidYouMean:n,automaticallyCorrectQuery:a}=t.didYouMean,{results:i,queryCorrections:o,queryCorrection:s}=r;if(!n||!a)return null;let l=0===i.length&&o&&0!==o.length,u=!tK(s)&&!tK(s.correctedQuery);if(!l&&!u)return null;let c=l?await this.processLegacyDidYouMeanAutoCorrection(e):this.processModernDidYouMeanAutoCorrection(e);return this.dispatch(iJ(o1(this.getState()))),c}async processLegacyDidYouMeanAutoCorrection(e){let t=this.getCurrentQuery(),r=this.getSuccessResponse(e);if(!r.queryCorrections)return null;let{correctedQuery:n}=r.queryCorrections[0],a=await this.automaticallyRetryQueryWithCorrection(n);return rI(a.response)?(this.dispatch(ov(a.response.error)),this.rejectWithValue(a.response.error)):(this.dispatch(iJ(o1(this.getState()))),{...a,response:{...a.response.success,queryCorrections:r.queryCorrections},automaticallyCorrected:!0,originalQuery:t})}processModernDidYouMeanAutoCorrection(e){let t=this.getSuccessResponse(e),{correctedQuery:r,originalQuery:n}=t.queryCorrection;return this.onUpdateQueryForCorrection(r),{...e,response:{...t},queryExecuted:r,automaticallyCorrected:!0,originalQuery:n}}async processQueryTriggersOrContinue(e){var t,r;let n=this.getSuccessResponse(e);if(!n)return null;let a=(null==(t=n.triggers.find(e=>"query"===e.type))?void 0:t.content)||"";if(!a)return null;if((null==(r=this.getState().triggers)?void 0:r.queryModification.queryToIgnore)===a)return this.dispatch(o5("")),null;let i=this.getCurrentQuery(),o=await this.automaticallyRetryQueryWithTriggerModification(a);return rI(o.response)?(this.dispatch(ov(o.response.error)),this.rejectWithValue(o.response.error)):(this.dispatch(iJ(o1(this.getState()))),{...o,response:{...o.response.success},automaticallyCorrected:!1,originalQuery:i})}processSuccessResponse(e){return this.dispatch(iJ(o1(this.getState()))),{...e,response:this.getSuccessResponse(e),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery()}}getSuccessResponse(e){return rC(e.response)?e.response.success:null}async automaticallyRetryQueryWithCorrection(e){this.onUpdateQueryForCorrection(e);let t=this.getState(),{actionCause:r}=oG(),n=await this.fetchFromAPI(await sg(t,this.extra.navigatorContext,{actionCause:r}),{origin:"mainSearch"});return this.dispatch(oH(e)),n}async automaticallyRetryQueryWithTriggerModification(e){return this.dispatch(o6({newQuery:e,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(e),await this.fetchFromAPI(await sg(this.getState(),this.extra.navigatorContext),{origin:"mainSearch"})}getCurrentQuery(){var e;let t=this.getState();return(null==(e=t.query)?void 0:e.q)!==void 0?t.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get rejectWithValue(){return this.config.rejectWithValue}constructor(e,t=e=>{this.dispatch(od({q:e}))}){this.config=e,this.onUpdateQueryForCorrection=t}},sw=tl("search/prepareForSearchWithQuery",(e,t)=>{let{dispatch:r}=t;rU(e,{q:new t3,enableQuerySyntax:new tX,clearFilters:new tX}),e.clearFilters&&(r(i3()),r(i5())),r(i6({allow:!0})),r(od({q:e.q,enableQuerySyntax:e.enableQuerySyntax})),r(ol(1))}),sS=tl("search/executeSearch",async(e,t)=>{let r=t.getState();if("legacy"===r.configuration.analytics.analyticsMode)return sh(r,t,e.legacy);sA(r);let n=e.next?sR(e.next):void 0,a=await sg(r,t.extra.navigatorContext,n),i=new sv({...t,analyticsAction:null!=n?n:{}}),o=await i.fetchFromAPI(a,{origin:"mainSearch"});return await i.process(o)}),sb=tl("search/fetchPage",async(e,t)=>{let r=t.getState();if(sA(r),"legacy"===r.configuration.analytics.analyticsMode||!e.next)return sd(r,t,e.legacy);let n=new sv({...t,analyticsAction:e.next}),a=await sg(r,t.extra.navigatorContext,e.next),i=await n.fetchFromAPI(a,{origin:"mainSearch"});return await n.process(i)}),sC=tl("search/fetchMoreResults",async(e,t)=>{let r=t.getState();if("legacy"===r.configuration.analytics.analyticsMode)return sf(t,r);let n=function(e,t){return{...new io(t).getBaseMetadata(),actionCause:e,type:e}}("browseResults",t.getState),a=new sv({...t,analyticsAction:n}),i=await sk(r,t.extra.navigatorContext,n),o=await a.fetchFromAPI(i,{origin:"mainSearch"});return await a.process(o)}),sI=tl("search/fetchFacetValues",async(e,t)=>{let r=t.getState();if("legacy"===r.configuration.analytics.analyticsMode)return sh(r,t,e.legacy);let n=new sv({...t,analyticsAction:{}}),a=await sx(r,t.extra.navigatorContext),i=await n.fetchFromAPI(a,{origin:"facetValues"});return await n.process(i)}),sq=tl("search/fetchInstantResults",async(e,t)=>{let r=t.getState();if("legacy"===r.configuration.analytics.analyticsMode)return sc(e,t);rU(e,{id:rR,q:rR,maxResultsPerQuery:new tJ({required:!0,min:1}),cacheTimeout:new tJ});let{q:n,maxResultsPerQuery:a}=e,i=sR(i9()),o=await sO(r,t.extra.navigatorContext,n,a,i),s=new sv({...t,analyticsAction:i},r=>{t.dispatch(or({q:r,id:e.id}))}),l=await s.fetchFromAPI(o,{origin:"instantResults",disableAbortWarning:!0}),u=await s.process(l);return"response"in u?{results:u.response.results,searchUid:u.response.searchUid,totalCountFiltered:u.response.totalCountFiltered,duration:u.duration}:u}),sk=async(e,t,r)=>{var n,a,i,o;let s=await sg(e,t,r);return s.request={...s.request,firstResult:(null!=(i=null==(n=e.pagination)?void 0:n.firstResult)?i:0)+(null!=(o=null==(a=e.search)?void 0:a.results.length)?o:0)},s},sO=async(e,t,r,n,a)=>oQ({...op(e,t,a),...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},numberOfResults:n,q:r}),sx=async(e,t,r)=>{let n=await sg(e,t,r);return n.request.numberOfResults=0,n},sA=e=>{var t;e.configuration.analytics.enabled&&aA.addElement({name:"Query",...(null==(t=e.query)?void 0:t.q)&&{value:e.query.q},time:JSON.stringify(new Date)})},sR=e=>({actionCause:e.actionCause,type:e.actionCause}),sE=(e,t)=>tK(e[t])?tK(e.raw[t])?null:e.raw[t]:e[t];function sF(e){return""!==e.search.response.searchUid}function sT(e,t){var r;let n=null!=(r=t.payload)?r:null;n&&(e.response=rt().response,e.results=[],e.questionAnswer=re()),e.error=n,e.isLoading=!1}function sD(e,t){e.error=null,e.response=t.payload.response,e.queryExecuted=t.payload.queryExecuted,e.duration=t.payload.duration,e.isLoading=!1}function sj(e,t){e.isLoading=!0,e.requestId=t.meta.requestId}var sM=e2(rt(),e=>{e.addCase(sr.rejected,(e,t)=>sT(e,t)),e.addCase(sa.rejected,(e,t)=>sT(e,t)),e.addCase(sn.rejected,(e,t)=>sT(e,t)),e.addCase(sr.fulfilled,(e,t)=>{!function(e,t){sD(e,t),e.results=t.payload.response.results,e.searchResponseId=t.payload.response.searchUid,e.questionAnswer=t.payload.response.questionAnswer,e.extendedResults=t.payload.response.extendedResults}(e,t)}),e.addCase(sa.fulfilled,(e,t)=>{sD(e,t),e.results=[...e.results,...t.payload.response.results]}),e.addCase(sn.fulfilled,(e,t)=>{sD(e,t),e.results=t.payload.response.results}),e.addCase(si.fulfilled,(e,t)=>{e.response.facets=t.payload.response.facets,e.response.searchUid=t.payload.response.searchUid}),e.addCase(sr.pending,sj),e.addCase(sa.pending,sj),e.addCase(sn.pending,sj)}),sP=e_(e=>e.query,e=>e),sU=e=>{var t,r,n;return null==(n=e.search)||null==(r=n.response)||null==(t=r.extendedResults)?void 0:t.generativeQuestionAnsweringId};function s_(e){let t=0;for(let r in e)t++;return t}e_(e=>{var t;return null==(t=e.generatedAnswer)?void 0:t.citations},(e,t)=>t,(e,t)=>null==e?void 0:e.find(e=>e.id===t)),e_(e=>{var t;return null==(t=sP(e))?void 0:t.q},e=>e.search.requestId,(e,t)=>({q:e,requestId:t})),e_(e=>e.pipeline,e=>e),e_(e=>e.searchHub,e=>e);var sV=e=>[].concat(...e);function sQ(e){return null!=e}var sL=e=>e.replace(/\/$/,""),sN=e=>e.replace(/^\//,""),sz=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return fetch(...t)},s$=e=>e.status>=200&&e.status<=299,sB=e=>/ion\/(vnd\.api\+)?json/.test(e.get("content-type")||"");function sH(e){if(!L(e))return e;let t={...e};for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return t}var sY=class{constructor(e,t){this.value=e,this.meta=t}};async function sW(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,r=~~((Math.random()+.4)*(300<<Math.min(e,t)));await new Promise(e=>setTimeout(t=>e(t),r))}var sG={},sK=Object.assign((e,t)=>async(r,n,a)=>{let[i]=[5,(t||sG).maxRetries,(a||sG).maxRetries].filter(e=>void 0!==e).slice(-1),o={maxRetries:i,backoff:sW,retryCondition:(e,t,r)=>{let{attempt:n}=r;return n<=i},...t,...a},s=0;for(;;)try{let t=await e(r,n,a);if(t.error)throw new sY(t);return t}catch(e){if(s++,e.throwImmediately){if(e instanceof sY)return e.value;throw e}if(e instanceof sY&&!o.retryCondition(e.value.error,r,{attempt:s,baseQueryApi:n,extraOptions:a}))return e.value;await o.backoff(s,o.maxRetries)}},{fail:function(e){throw Object.assign(new sY({error:e}),{throwImmediately:!0})}}),sJ=e$("__rtkq/focused"),sZ=e$("__rtkq/unfocused"),sX=e$("__rtkq/online"),s0=e$("__rtkq/offline");function s1(e){return"query"===e.type}function s2(e,t,r,n,a,i){return"function"==typeof e?e(t,r,n,a).map(s3).map(i):Array.isArray(e)?e.map(s3).map(i):[]}function s3(e){return"string"==typeof e?{type:e}:e}var s5=Symbol("forceQueryFn"),s6=e=>"function"==typeof e[s5];function s4(e){return e}function s8(e,t,r,n){return s2(r[e.meta.arg.endpointName][t],tt(e)?e.payload:void 0,te(e)?e.payload:void 0,e.meta.arg.originalArgs,"baseQueryMeta"in e.meta?e.meta.baseQueryMeta:void 0,n)}function s9(e,t,r){let n=e[t];n&&r(n)}function s7(e){var t;return null!=(t="arg"in e?e.arg.fixedCacheKey:e.fixedCacheKey)?t:e.requestId}function le(e,t,r){let n=e[s7(t)];n&&r(n)}var lt={},lr=Symbol.for("RTKQ/skipToken"),ln={status:"uninitialized"},la=eF(ln,()=>{}),li=eF(ln,()=>{}),lo=WeakMap?new WeakMap:void 0,ls=e=>{let{endpointName:t,queryArgs:r}=e,n="",a=null==lo?void 0:lo.get(r);if("string"==typeof a)n=a;else{let e=JSON.stringify(r,(e,t)=>t=L(t="bigint"==typeof t?{$bigint:t.toString()}:t)?Object.keys(t).sort().reduce((e,r)=>(e[r]=t[r],e),{}):t);L(r)&&(null==lo||lo.set(r,e)),n=e}return"".concat(t,"(").concat(n,")")};function ll(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return Object.assign(e,...r)}var lu=e=>{let{api:t,queryThunk:r,internalState:n}=e,a="".concat(t.reducerPath,"/subscriptions"),i=null,o=null,{updateSubscriptionOptions:s,unsubscribeQueryResult:l}=t.internalActions,u=(e,n)=>{var a,i,o,u,c,d,f,p,h;if(s.match(n)){let{queryCacheKey:t,requestId:r,options:a}=n.payload;return(null==e||null==(o=e[t])?void 0:o[r])&&(e[t][r]=a),!0}if(l.match(n)){let{queryCacheKey:t,requestId:r}=n.payload;return e[t]&&delete e[t][r],!0}if(t.internalActions.removeQueryResult.match(n))return delete e[n.payload.queryCacheKey],!0;if(r.pending.match(n)){let{meta:{arg:t,requestId:r}}=n,i=null!=(u=e[a=t.queryCacheKey])?u:e[a]={};return i["".concat(r,"_running")]={},t.subscribe&&(i[r]=null!=(d=null!=(c=t.subscriptionOptions)?c:i[r])?d:{}),!0}let g=!1;if(r.fulfilled.match(n)||r.rejected.match(n)){let t=e[n.meta.arg.queryCacheKey]||{},r="".concat(n.meta.requestId,"_running");g||(g=!!t[r]),delete t[r]}if(r.rejected.match(n)){let{meta:{condition:t,arg:r,requestId:a}}=n;if(t&&r.subscribe){let t=null!=(f=e[i=r.queryCacheKey])?f:e[i]={};t[a]=null!=(h=null!=(p=r.subscriptionOptions)?p:t[a])?h:{},g=!0}}return g},c=()=>n.currentSubscriptions,d={getSubscriptions:c,getSubscriptionCount:e=>{var t;return s_(null!=(t=c()[e])?t:{})},isRequestSubscribed:(e,t)=>{var r,n;return!!(null==(n=c())||null==(r=n[e])?void 0:r[t])}};return(e,s)=>{if(i||(i=JSON.parse(JSON.stringify(n.currentSubscriptions))),t.util.resetApiState.match(e))return i=n.currentSubscriptions={},o=null,[!0,!1];if(t.internalActions.internal_getRTKQSubscriptions.match(e))return[!1,d];let l=u(n.currentSubscriptions,e),c=!0;if(l){o||(o=setTimeout(()=>{let e=JSON.parse(JSON.stringify(n.currentSubscriptions)),[,r]=eT(i,()=>e);s.next(t.internalActions.subscriptionsUpdated(r)),i=e,o=null},500));let l="string"==typeof e.type&&!!e.type.startsWith(a),u=r.rejected.match(e)&&e.meta.condition&&!!e.meta.arg.subscribe;c=!l&&!u}return[c,!1]}},lc=e=>{let{reducerPath:t,api:r,queryThunk:n,context:a,internalState:i}=e,{removeQueryResult:o,unsubscribeQueryResult:s}=r.internalActions,l=e5(s.match,n.fulfilled,n.rejected);function u(e){let t=i.currentSubscriptions[e];return!!t&&!function(e){for(let t in e)return!1;return!0}(t)}let c={};function d(e,t,r,n){var i,s;let l=null!=(s=null==(i=a.endpointDefinitions[t])?void 0:i.keepUnusedDataFor)?s:n.keepUnusedDataFor;if(l===1/0)return;let d=Math.max(0,Math.min(l,2147482.647));if(!u(e)){let t=c[e];t&&clearTimeout(t),c[e]=setTimeout(()=>{u(e)||r.dispatch(o({queryCacheKey:e})),delete c[e]},1e3*d)}}return(e,n,i)=>{if(l(e)){var o;let r=n.getState()[t],{queryCacheKey:a}=s.match(e)?e.payload:e.meta.arg;d(a,null==(o=r.queries[a])?void 0:o.endpointName,n,r.config)}if(r.util.resetApiState.match(e))for(let[e,t]of Object.entries(c))t&&clearTimeout(t),delete c[e];if(a.hasRehydrationInfo(e)){let r=n.getState()[t],{queries:i}=a.extractRehydrationInfo(e);for(let[e,t]of Object.entries(i))d(e,null==t?void 0:t.endpointName,n,r.config)}}},ld=Error("Promise never resolved before cacheEntryRemoved."),lf=e=>{let{api:t,reducerPath:r,context:n,queryThunk:a,mutationThunk:i,internalState:o}=e,s=tr(a),l=tr(i),u=tt(a,i),c={};function d(e,r,a,i,o){let s=n.endpointDefinitions[e],l=null==s?void 0:s.onCacheEntryAdded;if(!l)return;let u={},d=new Promise(e=>{u.cacheEntryRemoved=e}),f=Promise.race([new Promise(e=>{u.valueResolved=e}),d.then(()=>{throw ld})]);f.catch(()=>{}),c[a]=u;let p=t.endpoints[e].select("query"===s.type?r:a),h=i.dispatch((e,t,r)=>r),g={...i,getCacheEntry:()=>p(i.getState()),requestId:o,extra:h,updateCachedData:"query"===s.type?n=>i.dispatch(t.util.updateQueryData(e,r,n)):void 0,cacheDataLoaded:f,cacheEntryRemoved:d};Promise.resolve(l(r,g)).catch(e=>{if(e!==ld)throw e})}return(e,n,o)=>{let f=function(e){var r;return s(e)?e.meta.arg.queryCacheKey:l(e)?null!=(r=e.meta.arg.fixedCacheKey)?r:e.meta.requestId:t.internalActions.removeQueryResult.match(e)?e.payload.queryCacheKey:t.internalActions.removeMutationResult.match(e)?s7(e.payload):""}(e);if(a.pending.match(e)){let t=o[r].queries[f],a=n.getState()[r].queries[f];!t&&a&&d(e.meta.arg.endpointName,e.meta.arg.originalArgs,f,n,e.meta.requestId)}else if(i.pending.match(e))n.getState()[r].mutations[f]&&d(e.meta.arg.endpointName,e.meta.arg.originalArgs,f,n,e.meta.requestId);else if(u(e)){let t=c[f];(null==t?void 0:t.valueResolved)&&(t.valueResolved({data:e.payload,meta:e.meta.baseQueryMeta}),delete t.valueResolved)}else if(t.internalActions.removeQueryResult.match(e)||t.internalActions.removeMutationResult.match(e)){let e=c[f];e&&(delete c[f],e.cacheEntryRemoved())}else if(t.util.resetApiState.match(e))for(let[e,t]of Object.entries(c))delete c[e],t.cacheEntryRemoved()}},lp=e=>{let{api:t,context:{apiUid:r},reducerPath:n}=e;return(e,n)=>{t.util.resetApiState.match(e)&&n.dispatch(t.internalActions.middlewareRegistered(r))}},lh=e=>{let{reducerPath:t,context:r,context:{endpointDefinitions:n},mutationThunk:a,queryThunk:i,api:o,assertTagType:s,refetchQuery:l,internalState:u}=e,{removeQueryResult:c}=o.internalActions,d=e5(tt(a),te(a)),f=e5(tt(a,i),e7(a,i)),p=[];function h(e,n){let a=n.getState(),i=a[t];if(p.push(...e),"delayed"===i.config.invalidationBehavior&&function(e){var t,r;for(let r in e.queries)if((null==(t=e.queries[r])?void 0:t.status)==="pending")return!0;for(let t in e.mutations)if((null==(r=e.mutations[t])?void 0:r.status)==="pending")return!0;return!1}(i))return;let s=p;if(p=[],0===s.length)return;let d=o.util.selectInvalidatedBy(a,s);r.batch(()=>{for(let{queryCacheKey:t}of Array.from(d.values())){var e;let r=i.queries[t],a=null!=(e=u.currentSubscriptions[t])?e:{};r&&(0===s_(a)?n.dispatch(c({queryCacheKey:t})):"uninitialized"!==r.status&&n.dispatch(l(r,t)))}})}return(e,t)=>{d(e)?h(s8(e,"invalidatesTags",n,s),t):f(e)?h([],t):o.util.invalidateTags.match(e)&&h(s2(e.payload,void 0,void 0,void 0,void 0,s),t)}},lg=e=>{let{reducerPath:t,queryThunk:r,api:n,refetchQuery:a,internalState:i}=e,o={};function s(e,r){let{queryCacheKey:n}=e,l=r.getState()[t],u=l.queries[n],d=i.currentSubscriptions[n];if(!u||"uninitialized"===u.status)return;let{lowestPollingInterval:f,skipPollingIfUnfocused:p}=c(d);if(!Number.isFinite(f))return;let h=o[n];(null==h?void 0:h.timeout)&&(clearTimeout(h.timeout),h.timeout=void 0);let g=Date.now()+f;o[n]={nextPollTimestamp:g,pollingInterval:f,timeout:setTimeout(()=>{(l.config.focused||!p)&&r.dispatch(a(u,n)),s({queryCacheKey:n},r)},f)}}function l(e,r){let{queryCacheKey:n}=e,a=r.getState()[t].queries[n],l=i.currentSubscriptions[n];if(!a||"uninitialized"===a.status)return;let{lowestPollingInterval:d}=c(l);if(!Number.isFinite(d))return void u(n);let f=o[n],p=Date.now()+d;(!f||p<f.nextPollTimestamp)&&s({queryCacheKey:n},r)}function u(e){let t=o[e];(null==t?void 0:t.timeout)&&clearTimeout(t.timeout),delete o[e]}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!1,r=Number.POSITIVE_INFINITY;for(let n in e)e[n].pollingInterval&&(r=Math.min(e[n].pollingInterval,r),t=e[n].skipPollingIfUnfocused||t);return{lowestPollingInterval:r,skipPollingIfUnfocused:t}}return(e,t)=>{(n.internalActions.updateSubscriptionOptions.match(e)||n.internalActions.unsubscribeQueryResult.match(e))&&l(e.payload,t),(r.pending.match(e)||r.rejected.match(e)&&e.meta.condition)&&l(e.meta.arg,t),(r.fulfilled.match(e)||r.rejected.match(e)&&!e.meta.condition)&&s(e.meta.arg,t),n.util.resetApiState.match(e)&&function(){for(let e of Object.keys(o))u(e)}()}},ly=e=>{let{api:t,context:r,queryThunk:n,mutationThunk:a}=e,i=e9(n,a),o=e7(n,a),s=tt(n,a),l={};return(e,n)=>{var a,u,c;if(i(e)){let{requestId:a,arg:{endpointName:i,originalArgs:o}}=e.meta,s=r.endpointDefinitions[i],u=null==s?void 0:s.onQueryStarted;if(u){let e={},r=new Promise((t,r)=>{e.resolve=t,e.reject=r});r.catch(()=>{}),l[a]=e;let c=t.endpoints[i].select("query"===s.type?o:a),d=n.dispatch((e,t,r)=>r),f={...n,getCacheEntry:()=>c(n.getState()),requestId:a,extra:d,updateCachedData:"query"===s.type?e=>n.dispatch(t.util.updateQueryData(i,o,e)):void 0,queryFulfilled:r};u(o,f)}}else if(s(e)){let{requestId:t,baseQueryMeta:r}=e.meta;null==(a=l[t])||a.resolve({data:e.payload,meta:r}),delete l[t]}else if(o(e)){let{requestId:t,rejectedWithValue:r,baseQueryMeta:n}=e.meta;null==(u=l[t])||u.reject({error:null!=(c=e.payload)?c:e.error,isUnhandledError:!r,meta:n}),delete l[t]}}},lm=e=>{let{reducerPath:t,context:r,api:n,refetchQuery:a,internalState:i}=e,{removeQueryResult:o}=n.internalActions;function s(e,n){let s=e.getState()[t],l=s.queries,u=i.currentSubscriptions;r.batch(()=>{for(let t of Object.keys(u)){let r=l[t],i=u[t];i&&r&&(Object.values(i).some(e=>!0===e[n])||Object.values(i).every(e=>void 0===e[n])&&s.config[n])&&(0===s_(i)?e.dispatch(o({queryCacheKey:t})):"uninitialized"!==r.status&&e.dispatch(a(r,t)))}})}return(e,t)=>{sJ.match(e)&&s(t,"refetchOnFocus"),sX.match(e)&&s(t,"refetchOnReconnect")}},lv=Symbol(),lw=(function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){let r=eU(t=>{var r,n;return null==(r=e.extractRehydrationInfo)?void 0:r.call(e,t,{reducerPath:null!=(n=e.reducerPath)?n:"api"})}),n={reducerPath:"api",keepUnusedDataFor:60,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1,invalidationBehavior:"delayed",...e,extractRehydrationInfo:r,serializeQueryArgs(t){let r=ls;if("serializeQueryArgs"in t.endpointDefinition){let e=t.endpointDefinition.serializeQueryArgs;r=t=>{let r=e(t);return"string"==typeof r?r:ls({...t,queryArgs:r})}}else e.serializeQueryArgs&&(r=e.serializeQueryArgs);return r(t)},tagTypes:[...e.tagTypes||[]]},a={endpointDefinitions:{},batch(e){e()},apiUid:tn(),extractRehydrationInfo:r,hasRehydrationInfo:eU(e=>null!=r(e))},i={injectEndpoints:function(e){for(let[t,r]of Object.entries(e.endpoints({query:e=>({...e,type:"query"}),mutation:e=>({...e,type:"mutation"})}))){if(!0!==e.overrideExisting&&t in a.endpointDefinitions){if("throw"===e.overrideExisting)throw Error(tv(39));continue}for(let e of(a.endpointDefinitions[t]=r,o))e.injectEndpoint(t,r)}return i},enhanceEndpoints(e){let{addTagTypes:t,endpoints:r}=e;if(t)for(let e of t)n.tagTypes.includes(e)||n.tagTypes.push(e);if(r)for(let[e,t]of Object.entries(r))"function"==typeof t?t(a.endpointDefinitions[e]):Object.assign(a.endpointDefinitions[e]||{},t);return i}},o=t.map(e=>e.init(i,n,a));return i.injectEndpoints({endpoints:e.endpoints})}})(function(){let{createSelector:e=e_}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{name:lv,init(t,r,n){let{baseQuery:a,tagTypes:i,reducerPath:o,serializeQueryArgs:s,keepUnusedDataFor:l,refetchOnMountOrArgChange:u,refetchOnFocus:c,refetchOnReconnect:d,invalidationBehavior:f}=r;!function(){var e;let t="replace",r="remove";function n(e){if(!J(e))return e;if(Array.isArray(e))return e.map(n);if(ei(e))return new Map(Array.from(e.entries()).map(e=>{let[t,r]=e;return[t,n(r)]}));if(eo(e))return new Set(Array.from(e).map(n));let t=Object.create(G(e));for(let r in e)t[r]=n(e[r]);return er(e,H)&&(t[H]=e[H]),t}function a(e){return K(e)?n(e):e}e="Patches",ef[e]||(ef[e]={applyPatches_:function(e,a){return a.forEach(a=>{let{path:i,op:o}=a,s=e;for(let e=0;e<i.length-1;e++){let t=et(s),r=i[e];"string"!=typeof r&&"number"!=typeof r&&(r=""+r),(0===t||1===t)&&("__proto__"===r||"constructor"===r)&&W(19),"function"==typeof s&&"prototype"===r&&W(19),"object"!=typeof(s=en(s,r))&&W(18,i.join("/"))}let l=et(s),u=n(a.value),c=i[i.length-1];switch(o){case t:switch(l){case 2:return s.set(c,u);case 3:W(16);default:return s[c]=u}case"add":switch(l){case 1:return"-"===c?s.push(u):s.splice(c,0,u);case 2:return s.set(c,u);case 3:return s.add(u);default:return s[c]=u}case r:switch(l){case 1:return s.splice(c,1);case 2:return s.delete(c);case 3:return s.delete(a.value);default:return delete s[c]}default:W(17,o)}}),e},generatePatches_:function(e,n,i,o){switch(e.type_){case 0:case 2:return function(e,n,i,o){let{base_:s,copy_:l}=e;ee(e.assigned_,(e,u)=>{let c=en(s,e),d=en(l,e),f=u?er(s,e)?t:"add":r;if(c===d&&f===t)return;let p=n.concat(e);i.push(f===r?{op:f,path:p}:{op:f,path:p,value:d}),o.push("add"===f?{op:r,path:p}:f===r?{op:"add",path:p,value:a(c)}:{op:t,path:p,value:a(c)})})}(e,n,i,o);case 1:return function(e,n,i,o){let{base_:s,assigned_:l}=e,u=e.copy_;u.length<s.length&&([s,u]=[u,s],[i,o]=[o,i]);for(let e=0;e<s.length;e++)if(l[e]&&u[e]!==s[e]){let r=n.concat([e]);i.push({op:t,path:r,value:a(u[e])}),o.push({op:t,path:r,value:a(s[e])})}for(let e=s.length;e<u.length;e++){let t=n.concat([e]);i.push({op:"add",path:t,value:a(u[e])})}for(let e=u.length-1;s.length<=e;--e){let t=n.concat([e]);o.push({op:r,path:t})}}(e,n,i,o);case 3:return function(e,t,n,a){let{base_:i,copy_:o}=e,s=0;i.forEach(e=>{if(!o.has(e)){let i=t.concat([s]);n.push({op:r,path:i,value:e}),a.unshift({op:"add",path:i,value:e})}s++}),s=0,o.forEach(e=>{if(!i.has(e)){let i=t.concat([s]);n.push({op:"add",path:i,value:e}),a.unshift({op:r,path:i,value:e})}s++})}(e,n,i,o)}},generateReplacementPatches_:function(e,r,n,a){n.push({op:t,path:[],value:r===B?void 0:r}),a.push({op:t,path:[],value:e})}})}();let p=e=>e;Object.assign(t,{reducerPath:o,endpoints:{},internalActions:{onOnline:sX,onOffline:s0,onFocus:sJ,onFocusLost:sZ},util:{}});let{queryThunk:h,mutationThunk:g,patchQueryData:y,updateQueryData:m,upsertQueryData:v,prefetch:w,buildMatchThunkActions:S}=function(e){let{reducerPath:t,baseQuery:r,context:{endpointDefinitions:n},serializeQueryArgs:a,api:i,assertTagType:o}=e,s=async(e,t)=>{let{signal:a,abort:i,rejectWithValue:o,fulfillWithValue:s,dispatch:u,getState:c,extra:d}=t,f=n[e.endpointName];try{let t=s4,n,o={signal:a,abort:i,dispatch:u,getState:c,extra:d,endpoint:e.endpointName,type:e.type,forced:"query"===e.type?l(e,c()):void 0},p="query"===e.type?e[s5]:void 0;if(p?n=p():f.query?(n=await r(f.query(e.originalArgs),o,f.extraOptions),f.transformResponse&&(t=f.transformResponse)):n=await f.queryFn(e.originalArgs,o,f.extraOptions,e=>r(e,o,f.extraOptions)),n.error)throw new sY(n.error,n.meta);return s(await t(n.data,n.meta,e.originalArgs),{fulfilledTimeStamp:Date.now(),baseQueryMeta:n.meta,[eG]:!0})}catch(r){let t=r;if(t instanceof sY){let r=s4;f.query&&f.transformErrorResponse&&(r=f.transformErrorResponse);try{return o(await r(t.value,t.meta,e.originalArgs),{baseQueryMeta:t.meta,[eG]:!0})}catch(e){t=e}}throw console.error(t),t}};function l(e,r){var n,a,i,o;let s=null==(a=r[t])||null==(n=a.queries)?void 0:n[e.queryCacheKey],l=null==(i=r[t])?void 0:i.config.refetchOnMountOrArgChange,u=null==s?void 0:s.fulfilledTimeStamp,c=null!=(o=e.forceRefetch)?o:e.subscribe&&l;return!!c&&(!0===c||(Number(new Date)-Number(u))/1e3>=c)}let u=tl("".concat(t,"/executeQuery"),s,{getPendingMeta:()=>({startedTimeStamp:Date.now(),[eG]:!0}),condition(e,r){var a,i,o;let{getState:s}=r,u=s(),c=null==(i=u[t])||null==(a=i.queries)?void 0:a[e.queryCacheKey],d=null==c?void 0:c.fulfilledTimeStamp,f=e.originalArgs,p=null==c?void 0:c.originalArgs,h=n[e.endpointName];return!!s6(e)||(null==c?void 0:c.status)!=="pending"&&(!!(l(e,u)||s1(h)&&(null==h||null==(o=h.forceRefetch)?void 0:o.call(h,{currentArg:f,previousArg:p,endpointState:c,state:u})))||!d)},dispatchConditionRejection:!0}),c=tl("".concat(t,"/executeMutation"),s,{getPendingMeta:()=>({startedTimeStamp:Date.now(),[eG]:!0})}),d=e=>"force"in e,f=e=>"ifOlderThan"in e;function p(e){return t=>{var r,n;return(null==t||null==(n=t.meta)||null==(r=n.arg)?void 0:r.endpointName)===e}}return{queryThunk:u,mutationThunk:c,prefetch:(e,t,r)=>(n,a)=>{let o=d(r)&&r.force,s=f(r)&&r.ifOlderThan,l=function(){let r=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return i.endpoints[e].initiate(t,{forceRefetch:r,isPrefetch:!0})},u=i.endpoints[e].select(t)(a());if(o)n(l());else if(s){let e=null==u?void 0:u.fulfilledTimeStamp;if(!e)return void n(l());(Number(new Date)-Number(new Date(e)))/1e3>=s&&n(l())}else n(l(!1))},updateQueryData:function(e,t,r){let n=!(arguments.length>3)||void 0===arguments[3]||arguments[3];return(a,o)=>{let s,l=i.endpoints[e].select(t)(o()),u={patches:[],inversePatches:[],undo:()=>a(i.util.patchQueryData(e,t,u.inversePatches,n))};if("uninitialized"===l.status)return u;if("data"in l)if(J(l.data)){let[e,t,n]=eT(l.data,r);u.patches.push(...t),u.inversePatches.push(...n),s=e}else s=r(l.data),u.patches.push({op:"replace",path:[],value:s}),u.inversePatches.push({op:"replace",path:[],value:l.data});return 0===u.patches.length||a(i.util.patchQueryData(e,t,u.patches,n)),u}},upsertQueryData:(e,t,r)=>n=>n(i.endpoints[e].initiate(t,{subscribe:!1,forceRefetch:!0,[s5]:()=>({data:r})})),patchQueryData:(e,t,r,s)=>(l,u)=>{let c=n[e],d=a({queryArgs:t,endpointDefinition:c,endpointName:e});if(l(i.internalActions.queryResultPatched({queryCacheKey:d,patches:r})),!s)return;let f=i.endpoints[e].select(t)(u()),p=s2(c.providesTags,f.data,void 0,t,{},o);l(i.internalActions.updateProvidedBy({queryCacheKey:d,providedTags:p}))},buildMatchThunkActions:function(e,t){return{matchPending:e6(e9(e),p(t)),matchFulfilled:e6(tt(e),p(t)),matchRejected:e6(e7(e),p(t))}}}}({baseQuery:a,reducerPath:o,context:n,api:t,serializeQueryArgs:s,assertTagType:p}),{reducer:b,actions:C}=function(e){let{reducerPath:t,queryThunk:r,mutationThunk:n,context:{endpointDefinitions:a,apiUid:i,extractRehydrationInfo:o,hasRehydrationInfo:s},assertTagType:l,config:u}=e,c=e$("".concat(t,"/resetApiState")),d=td({name:"".concat(t,"/queries"),initialState:lt,reducers:{removeQueryResult:{reducer(e,t){let{payload:{queryCacheKey:r}}=t;delete e[r]},prepare:eK()},queryResultPatched:{reducer(e,t){let{payload:{queryCacheKey:r,patches:n}}=t;s9(e,r,e=>{e.data=eD(e.data,n.concat())})},prepare:eK()}},extraReducers(e){e.addCase(r.pending,(e,t)=>{var r,n;let{meta:a,meta:{arg:i}}=t,o=s6(i);null!=e[r=i.queryCacheKey]||(e[r]={status:"uninitialized",endpointName:i.endpointName}),s9(e,i.queryCacheKey,e=>{e.status="pending",e.requestId=o&&e.requestId?e.requestId:a.requestId,void 0!==i.originalArgs&&(e.originalArgs=i.originalArgs),e.startedTimeStamp=a.startedTimeStamp})}).addCase(r.fulfilled,(e,t)=>{let{meta:r,payload:n}=t;s9(e,r.arg.queryCacheKey,e=>{var t,i;if(e.requestId!==r.requestId&&!s6(r.arg))return;let{merge:o}=a[r.arg.endpointName];if(e.status="fulfilled",o)if(void 0!==e.data){let{fulfilledTimeStamp:t,arg:a,baseQueryMeta:i,requestId:s}=r,l=eF(e.data,e=>o(e,n,{arg:a.originalArgs,baseQueryMeta:i,fulfilledTimeStamp:t,requestId:s}));e.data=l}else e.data=n;else e.data=null==(t=a[r.arg.endpointName].structuralSharing)||t?function e(t,r){if(t===r||!(L(t)&&L(r)||Array.isArray(t)&&Array.isArray(r)))return r;let n=Object.keys(r),a=Object.keys(t),i=n.length===a.length,o=Array.isArray(r)?[]:{};for(let a of n)o[a]=e(t[a],r[a]),i&&(i=t[a]===o[a]);return i?t:o}(K(e.data)?(K(i=e.data)||W(15,i),i[Y].base_):e.data,n):n;delete e.error,e.fulfilledTimeStamp=r.fulfilledTimeStamp})}).addCase(r.rejected,(e,t)=>{let{meta:{condition:r,arg:n,requestId:a},error:i,payload:o}=t;s9(e,n.queryCacheKey,e=>{r||e.requestId===a&&(e.status="rejected",e.error=null!=o?o:i)})}).addMatcher(s,(e,t)=>{let{queries:r}=o(t);for(let[t,n]of Object.entries(r))((null==n?void 0:n.status)==="fulfilled"||(null==n?void 0:n.status)==="rejected")&&(e[t]=n)})}}),f=td({name:"".concat(t,"/mutations"),initialState:lt,reducers:{removeMutationResult:{reducer(e,t){let{payload:r}=t,n=s7(r);n in e&&delete e[n]},prepare:eK()}},extraReducers(e){e.addCase(n.pending,(e,t)=>{let{meta:r,meta:{requestId:n,arg:a,startedTimeStamp:i}}=t;a.track&&(e[s7(r)]={requestId:n,status:"pending",endpointName:a.endpointName,startedTimeStamp:i})}).addCase(n.fulfilled,(e,t)=>{let{payload:r,meta:n}=t;n.arg.track&&le(e,n,e=>{e.requestId===n.requestId&&(e.status="fulfilled",e.data=r,e.fulfilledTimeStamp=n.fulfilledTimeStamp)})}).addCase(n.rejected,(e,t)=>{let{payload:r,error:n,meta:a}=t;a.arg.track&&le(e,a,e=>{e.requestId===a.requestId&&(e.status="rejected",e.error=null!=r?r:n)})}).addMatcher(s,(e,t)=>{let{mutations:r}=o(t);for(let[t,n]of Object.entries(r))((null==n?void 0:n.status)==="fulfilled"||(null==n?void 0:n.status)==="rejected")&&t!==(null==n?void 0:n.requestId)&&(e[t]=n)})}}),p=td({name:"".concat(t,"/invalidation"),initialState:lt,reducers:{updateProvidedBy:{reducer(e,t){var r,n,a,i;let{queryCacheKey:o,providedTags:s}=t.payload;for(let t of Object.values(e))for(let e of Object.values(t)){let t=e.indexOf(o);-1!==t&&e.splice(t,1)}for(let{type:t,id:l}of s){let s=null!=(i=(r=null!=(a=e[t])?a:e[t]={})[n=l||"__internal_without_id"])?i:r[n]=[];s.includes(o)||s.push(o)}},prepare:eK()}},extraReducers(e){e.addCase(d.actions.removeQueryResult,(e,t)=>{let{payload:{queryCacheKey:r}}=t;for(let t of Object.values(e))for(let e of Object.values(t)){let t=e.indexOf(r);-1!==t&&e.splice(t,1)}}).addMatcher(s,(e,t)=>{var r,n,a,i;let{provided:s}=o(t);for(let[t,o]of Object.entries(s))for(let[s,l]of Object.entries(o)){let o=null!=(i=(r=null!=(a=e[t])?a:e[t]={})[n=s||"__internal_without_id"])?i:r[n]=[];for(let e of l)o.includes(e)||o.push(e)}}).addMatcher(e5(tt(r),te(r)),(e,t)=>{let r=s8(t,"providesTags",a,l),{queryCacheKey:n}=t.meta.arg;p.caseReducers.updateProvidedBy(e,p.actions.updateProvidedBy({queryCacheKey:n,providedTags:r}))})}}),h=td({name:"".concat(t,"/subscriptions"),initialState:lt,reducers:{updateSubscriptionOptions(e,t){},unsubscribeQueryResult(e,t){},internal_getRTKQSubscriptions(){}}}),g=td({name:"".concat(t,"/internalSubscriptions"),initialState:lt,reducers:{subscriptionsUpdated:{reducer:(e,t)=>eD(e,t.payload),prepare:eK()}}}),y=td({name:"".concat(t,"/config"),initialState:{online:typeof navigator>"u"||void 0===navigator.onLine||navigator.onLine,focused:typeof document>"u"||"hidden"!==document.visibilityState,middlewareRegistered:!1,...u},reducers:{middlewareRegistered(e,t){let{payload:r}=t;e.middlewareRegistered="conflict"!==e.middlewareRegistered&&i===r||"conflict"}},extraReducers:e=>{e.addCase(sX,e=>{e.online=!0}).addCase(s0,e=>{e.online=!1}).addCase(sJ,e=>{e.focused=!0}).addCase(sZ,e=>{e.focused=!1}).addMatcher(s,e=>({...e}))}}),m=N({queries:d.reducer,mutations:f.reducer,provided:p.reducer,subscriptions:g.reducer,config:y.reducer});return{reducer:(e,t)=>m(c.match(t)?void 0:e,t),actions:{...y.actions,...d.actions,...h.actions,...g.actions,...f.actions,...p.actions,resetApiState:c}}}({context:n,queryThunk:h,mutationThunk:g,reducerPath:o,assertTagType:p,config:{refetchOnFocus:c,refetchOnReconnect:d,refetchOnMountOrArgChange:u,keepUnusedDataFor:l,reducerPath:o,invalidationBehavior:f}});ll(t.util,{patchQueryData:y,updateQueryData:m,upsertQueryData:v,prefetch:w,resetApiState:C.resetApiState}),ll(t.internalActions,C);let{middleware:I,actions:q}=function(e){let{reducerPath:t,queryThunk:r,api:n,context:a}=e,{apiUid:i}=a,o={invalidateTags:e$("".concat(t,"/invalidateTags"))},s=e=>e.type.startsWith("".concat(t,"/")),l=[lp,lc,lh,lg,lf,ly];return{middleware:r=>{let o=!1,c={...e,internalState:{currentSubscriptions:{}},refetchQuery:u,isThisApiSliceAction:s},d=l.map(e=>e(c)),f=lu(c),p=lm(c);return e=>l=>{if(!$(l))return e(l);o||(o=!0,r.dispatch(n.internalActions.middlewareRegistered(i)));let u={...r,next:e},c=r.getState(),[h,g]=f(l,u,c),y;if(y=h?e(l):g,r.getState()[t]&&(p(l,u,c),s(l)||a.hasRehydrationInfo(l)))for(let e of d)e(l,u,c);return y}},actions:o};function u(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r({type:"query",endpointName:e.endpointName,originalArgs:e.originalArgs,subscribe:!1,forceRefetch:!0,queryCacheKey:t,...n})}}({reducerPath:o,context:n,queryThunk:h,mutationThunk:g,api:t,assertTagType:p});ll(t.util,q),ll(t,{reducer:b,middleware:I});let{buildQuerySelector:k,buildMutationSelector:O,selectInvalidatedBy:x,selectCachedArgsForQuery:A}=function(e){let{serializeQueryArgs:t,reducerPath:r,createSelector:n}=e,a=e=>la,i=e=>li;return{buildQuerySelector:function(e,i){return s=>{let l=t({queryArgs:s,endpointDefinition:i,endpointName:e});return n(s===lr?a:e=>{var t,n,a;return null!=(a=null==(n=e[r])||null==(t=n.queries)?void 0:t[l])?a:la},o)}},buildMutationSelector:function(){return e=>{var t;let a;return n((a="object"==typeof e?null!=(t=s7(e))?t:lr:e)===lr?i:e=>{var t,n,i;return null!=(i=null==(n=e[r])||null==(t=n.mutations)?void 0:t[a])?i:li},o)}},selectInvalidatedBy:function(e,t){let n=e[r],a=new Set;for(let e of t.map(s3)){var i;let t=n.provided[e.type];if(t)for(let r of null!=(i=void 0!==e.id?t[e.id]:sV(Object.values(t)))?i:[])a.add(r)}return sV(Array.from(a.values()).map(e=>{let t=n.queries[e];return t?[{queryCacheKey:e,endpointName:t.endpointName,originalArgs:t.originalArgs}]:[]}))},selectCachedArgsForQuery:function(e,t){return Object.values(e[r].queries).filter(e=>(null==e?void 0:e.endpointName)===t&&"uninitialized"!==e.status).map(e=>e.originalArgs)}};function o(e){var t;return{...e,...{status:t=e.status,isUninitialized:"uninitialized"===t,isLoading:"pending"===t,isSuccess:"fulfilled"===t,isError:"rejected"===t}}}}({serializeQueryArgs:s,reducerPath:o,createSelector:e});ll(t.util,{selectInvalidatedBy:x,selectCachedArgsForQuery:A});let{buildInitiateQuery:R,buildInitiateMutation:E,getRunningMutationThunk:F,getRunningMutationsThunk:T,getRunningQueriesThunk:D,getRunningQueryThunk:j}=function(e){let{serializeQueryArgs:t,queryThunk:r,mutationThunk:n,api:a,context:i}=e,o=new Map,s=new Map,{unsubscribeQueryResult:l,removeMutationResult:u,updateSubscriptionOptions:c}=a.internalActions;return{buildInitiateQuery:function(e,n){let i=function(s){let{subscribe:u=!0,forceRefetch:d,subscriptionOptions:f,[s5]:p,...h}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(g,y)=>{var m;let v=t({queryArgs:s,endpointDefinition:n,endpointName:e}),w=r({...h,type:"query",subscribe:u,forceRefetch:d,subscriptionOptions:f,endpointName:e,originalArgs:s,queryCacheKey:v,[s5]:p}),S=a.endpoints[e].select(s),b=g(w),C=S(y()),{requestId:I,abort:q}=b,k=C.requestId!==I,O=null==(m=o.get(g))?void 0:m[v],x=()=>S(y()),A=Object.assign(p?b.then(x):k&&!O?Promise.resolve(C):Promise.all([O,b]).then(x),{arg:s,requestId:I,subscriptionOptions:f,queryCacheKey:v,abort:q,async unwrap(){let e=await A;if(e.isError)throw e.error;return e.data},refetch:()=>g(i(s,{subscribe:!1,forceRefetch:!0})),unsubscribe(){u&&g(l({queryCacheKey:v,requestId:I}))},updateSubscriptionOptions(t){A.subscriptionOptions=t,g(c({endpointName:e,requestId:I,queryCacheKey:v,options:t}))}});if(!O&&!k&&!p){let e=o.get(g)||{};e[v]=A,o.set(g,e),A.then(()=>{delete e[v],s_(e)||o.delete(g)})}return A}};return i},buildInitiateMutation:function(e){return function(t){let{track:r=!0,fixedCacheKey:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(i,o)=>{var l,c;let d=i(n({type:"mutation",endpointName:e,originalArgs:t,track:r,fixedCacheKey:a})),{requestId:f,abort:p,unwrap:h}=d,g=Object.assign((l=d.unwrap().then(e=>({data:e})),c=e=>({error:e}),l.catch(c)),{arg:d.arg,requestId:f,abort:p,unwrap:h,reset:()=>{i(u({requestId:f,fixedCacheKey:a}))}}),y=s.get(i)||{};return s.set(i,y),y[f]=g,g.then(()=>{delete y[f],s_(y)||s.delete(i)}),a&&(y[a]=g,g.then(()=>{y[a]===g&&(delete y[a],s_(y)||s.delete(i))})),g}}},getRunningQueryThunk:function(e,r){return n=>{var a;let s=t({queryArgs:r,endpointDefinition:i.endpointDefinitions[e],endpointName:e});return null==(a=o.get(n))?void 0:a[s]}},getRunningMutationThunk:function(e,t){return e=>{var r;return null==(r=s.get(e))?void 0:r[t]}},getRunningQueriesThunk:function(){return e=>Object.values(o.get(e)||{}).filter(sQ)},getRunningMutationsThunk:function(){return e=>Object.values(s.get(e)||{}).filter(sQ)}}}({queryThunk:h,mutationThunk:g,api:t,serializeQueryArgs:s,context:n});return ll(t.util,{getRunningMutationThunk:F,getRunningMutationsThunk:T,getRunningQueryThunk:j,getRunningQueriesThunk:D}),{name:lv,injectEndpoint(e,r){var n,a;null!=(n=t.endpoints)[e]||(n[e]={}),s1(r)?ll(t.endpoints[e],{name:e,select:k(e,r),initiate:R(e,r)},S(h,e)):"mutation"===r.type&&ll(t.endpoints[e],{name:e,select:O(),initiate:E(e)},S(g,e))}}}}}())({reducerPath:"answer",baseQuery:sK(async(e,t,r)=>{let n=t.getState(),{accessToken:a,organizationId:i,platformUrl:o}=n.configuration,s=n.generatedAnswer.answerConfigurationId,l={...e,headers:{...(null==e?void 0:e.headers)||{},Authorization:"Bearer ".concat(a)}};try{return{data:(function(){let{baseUrl:e,prepareHeaders:t=e=>e,fetchFn:r=sz,paramsSerializer:n,isJsonContentType:a=sB,jsonContentType:i="application/json",jsonReplacer:o,timeout:s,responseHandler:l,validateStatus:u,...c}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return typeof fetch>"u"&&r===sz&&console.warn("Warning: `fetch` is not available. Please supply a custom `fetchFn` property to use `fetchBaseQuery` on SSR environments."),async(f,p)=>{let{signal:h,getState:g,extra:y,endpoint:m,forced:v,type:w}=p,S,{url:b,headers:C=new Headers(c.headers),params:I,responseHandler:q=null!=l?l:"json",validateStatus:k=null!=u?u:s$,timeout:O=s,...x}="string"==typeof f?{url:f}:f,A={...c,signal:h,...x};C=new Headers(sH(C)),A.headers=await t(C,{getState:g,extra:y,endpoint:m,forced:v,type:w})||C;let R=e=>"object"==typeof e&&(L(e)||Array.isArray(e)||"function"==typeof e.toJSON);if(!A.headers.has("content-type")&&R(A.body)&&A.headers.set("content-type",i),R(A.body)&&a(A.headers)&&(A.body=JSON.stringify(A.body,o)),I){let e=~b.indexOf("?")?"&":"?";b+=e+(n?n(I):new URLSearchParams(sH(I)))}let E=new Request(b=function(e,t){var r;if(!e)return t;if(!t)return e;if(r=t,RegExp("(^|:)//").test(r))return t;let n=e.endsWith("/")||!t.startsWith("?")?"/":"";return e=sL(e),t=sN(t),"".concat(e).concat(n).concat(t)}(e,b),A);S={request:new Request(b,A)};let F,T=!1,D=O&&setTimeout(()=>{T=!0,p.abort()},O);try{F=await r(E)}catch(e){return{error:{status:T?"TIMEOUT_ERROR":"FETCH_ERROR",error:String(e)},meta:S}}finally{D&&clearTimeout(D)}let j=F.clone();S.response=j;let M,P="";try{let e;if(await Promise.all([d(F,q).then(e=>M=e,t=>e=t),j.text().then(e=>P=e,()=>{})]),e)throw e}catch(e){return{error:{status:"PARSING_ERROR",originalStatus:F.status,data:P,error:String(e)},meta:S}}return k(F,M)?{data:M,meta:S}:{error:{status:F.status,data:M},meta:S}};async function d(e,t){if("function"==typeof t)return t(e);if("content-type"===t&&(t=a(e.headers)?"json":"text"),"json"===t){let t=await e.text();return t.length?JSON.parse(t):null}return e.text()}})({baseUrl:"".concat(o,"/rest/organizations/").concat(i,"/answer/v1/configs/").concat(s)})(l,t,r)}}catch(e){return{error:e}}},{maxRetries:3}),endpoints:()=>({})}),lS=(e,t)=>{let{answerStyle:r,contentFormat:n}=t;e.answerStyle=r,e.contentFormat=n,e.isStreaming=!0,e.isLoading=!1},lb=(e,t)=>{void 0===e.answer?e.answer=t.textDelta:"string"==typeof t.textDelta&&(e.answer=e.answer.concat(t.textDelta))},lC=(e,t)=>{e.citations=t.citations},lI=(e,t)=>{e.generated=t.answerGenerated,e.isStreaming=!1},lq=(e,t)=>{e.error={message:t.errorMessage,code:t.code},e.isStreaming=!1,e.isLoading=!1,console.error("".concat(t.errorMessage," - code ").concat(t.code))},lk=(e,t)=>{let r=JSON.parse(e.data);"ERROR"===r.finishReason&&r.errorMessage&&lq(t,r);let n=r.payload.length?JSON.parse(r.payload):{};switch(r.payloadType){case"genqa.headerMessageType":n.answerStyle&&n.contentFormat&&lS(t,n);break;case"genqa.messageType":n.textDelta&&lb(t,n);break;case"genqa.citationsType":n.citations&&lC(t,n);break;case"genqa.endOfStreamType":var a;((null==(a=t.answer)?void 0:a.length)||n.answerGenerated)&&lI(t,n)}},lO=lw.injectEndpoints({overrideExisting:!0,endpoints:e=>({getAnswer:e.query({queryFn:()=>({data:{answerStyle:void 0,contentFormat:void 0,answer:void 0,citations:void 0,error:void 0,generated:!1,isStreaming:!0,isLoading:!0}}),async onCacheEntryAdded(e,t){let{getState:r,cacheDataLoaded:n,updateCachedData:a}=t;await n;let{configuration:i,generatedAnswer:o}=r(),{platformUrl:s,organizationId:l,accessToken:u}=i;await tD("".concat(s,"/rest/organizations/").concat(l,"/answer/v1/configs/").concat(o.answerConfigurationId,"/generate"),{method:"POST",body:JSON.stringify(e),headers:{Authorization:"Bearer ".concat(u),Accept:"application/json","Content-Type":"application/json","Accept-Encoding":"*"},fetch,onopen:async e=>{let t=e.headers.get("x-answer-id");t&&a(e=>{e.answerId=t})},onmessage:e=>{a(t=>{lk(e,t)})},onerror:e=>{throw e}})}})})});e_(e=>{var t;return null==(t=sP(e))?void 0:t.q},e=>e.search.requestId,(e,t)=>({q:e,requestId:t}));var lx=e2(rH,e=>e);function lA(){return"u">typeof window&&"u">typeof document}var lR=e=>t=>r=>{let n;(function(e){var t;let r=null==(t=e.payload)?void 0:t.analyticsAction;return"type"in e&&!tK(r)})(r)&&(n=r.payload.analyticsAction,delete r.payload.analyticsAction);let a=t(r);return"type"in r&&("search/executeSearch/fullfilled"===r.type&&void 0===n&&console.error("No analytics action associated with search:",r),"recommendation/get/fullfilled"===r.type&&void 0===n&&console.error("No analytics action associated with recommendation:",r),"productRecommendations/get/fullfilled"===r.type&&void 0===n&&console.error("No analytics action associated with product recommendation:",r)),void 0!==n&&e.dispatch(n),a},lE=p(T()),lF=e$("commerce/configuration/updateBasicConfiguration",e=>rU(e,{accessToken:rE,organizationId:rE,platformUrl:rE})),lT=e$("commerce/configuration/updateAnalyticsConfiguration",e=>rU(e,{enabled:iU.enabled,source:iU.source,trackingId:iU.trackingId})),lD=e$("commerce/configuration/analytics/disable"),lj=e$("commerce/configuration/analytics/enable"),lM=e$("tab/register",e=>rU(e,new t6({values:{id:rR,expression:rF}}))),lP=e$("tab/updateActiveTab",e=>rU(e,rR)),lU=p(R()),l_=p(D()),lV=p(j());lU.default.extend(lV.default),lU.default.extend(l_.default);var lQ="/rest/search/v2",lL="/rest/ua",lN=()=>({organizationId:"",accessToken:"",platformUrl:rg(),search:{apiBaseUrl:"".concat(rg()).concat(lQ),locale:"en-US",timezone:lU.default.tz.guess(),authenticationProviders:[]},analytics:{enabled:!0,apiBaseUrl:"".concat(rh("analytics",void 0)).concat(lL),nextApiBaseUrl:"",originContext:"Search",originLevel2:"default",originLevel3:"default",anonymous:!1,deviceId:"",userDisplayName:"",documentLocation:"",trackingId:"",analyticsMode:"legacy",source:{}},knowledge:{answerConfigurationId:""}}),lz=e2(lN(),e=>e.addCase(iM,(e,t)=>{l$(e,t.payload)}).addCase(lF,(e,t)=>{l$(e,t.payload)}).addCase(iP,(e,t)=>{t.payload.apiBaseUrl&&(e.search.apiBaseUrl=t.payload.apiBaseUrl),t.payload.locale&&(e.search.locale=t.payload.locale),t.payload.timezone&&(e.search.timezone=t.payload.timezone),t.payload.authenticationProviders&&(e.search.authenticationProviders=t.payload.authenticationProviders)}).addCase(i_,(e,t)=>{tK(t.payload.enabled)||(e.analytics.enabled=t.payload.enabled),tK(t.payload.originContext)||(e.analytics.originContext=t.payload.originContext),tK(t.payload.originLevel2)||(e.analytics.originLevel2=t.payload.originLevel2),tK(t.payload.originLevel3)||(e.analytics.originLevel3=t.payload.originLevel3),tK(t.payload.apiBaseUrl)||(e.analytics.apiBaseUrl=t.payload.apiBaseUrl),tK(t.payload.nextApiBaseUrl)||(e.analytics.nextApiBaseUrl=t.payload.nextApiBaseUrl),tK(t.payload.trackingId)||(e.analytics.trackingId=t.payload.trackingId),tK(t.payload.analyticsMode)||(e.analytics.analyticsMode=t.payload.analyticsMode),tK(t.payload.source)||(e.analytics.source=t.payload.source);let r=(0,lE.default)();r&&(e.analytics.analyticsMode="next",e.analytics.trackingId=r),tK(t.payload.runtimeEnvironment)||(e.analytics.runtimeEnvironment=t.payload.runtimeEnvironment),tK(t.payload.anonymous)||(e.analytics.anonymous=t.payload.anonymous),tK(t.payload.deviceId)||(e.analytics.deviceId=t.payload.deviceId),tK(t.payload.userDisplayName)||(e.analytics.userDisplayName=t.payload.userDisplayName),tK(t.payload.documentLocation)||(e.analytics.documentLocation=t.payload.documentLocation)}).addCase(lT,(e,t)=>{tK(t.payload.enabled)||(e.analytics.enabled=t.payload.enabled),tK(t.payload.trackingId)||(e.analytics.trackingId=t.payload.trackingId),tK(t.payload.source)||(e.analytics.source=t.payload.source)}).addCase(iV,e=>{e.analytics.enabled=!1}).addCase(lD,e=>{e.analytics.enabled=!1}).addCase(iQ,e=>{e.analytics.enabled=!0}).addCase(lj,e=>{e.analytics.enabled=!0}).addCase(iL,(e,t)=>{e.analytics.originLevel2=t.payload.originLevel2}).addCase(iN,(e,t)=>{e.analytics.originLevel3=t.payload.originLevel3}).addCase(lP,(e,t)=>{e.analytics.originLevel2=t.payload}).addCase(i$,(e,t)=>{e.analytics.originLevel2=t.payload.tab||e.analytics.originLevel2}));function l$(e,t){t.accessToken&&(e.accessToken=t.accessToken),t.organizationId&&(e.organizationId=t.organizationId),t.platformUrl&&(e.platformUrl=t.platformUrl,e.search.apiBaseUrl="".concat(t.platformUrl).concat(lQ),e.analytics.apiBaseUrl=function(e,t){if(tU(e))return e.replace(/^(https:\/\/)platform/,"$1analytics")+lL;let r=t_(e,t);return r?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"prod",r="prod"===t?"":t,n="https://".concat(e,".org").concat(r,".coveo.com"),a="https://".concat(e,".analytics.org").concat(r,".coveo.com"),i="https://".concat(e,".admin.org").concat(r,".coveo.com");return{platform:n,analytics:a,search:"".concat(n,"/rest/search/v2"),admin:i}}(t,r.environment).analytics:e}(t.platformUrl,e.organizationId))}var lB=()=>e=>t=>e(t.instantlyCallable?t():t),lH=e=>()=>t=>r=>{var n;if(!r.error)return t(r);let a=r.error;if((null==(n=r.payload)?void 0:n.ignored)||e.error(a.stack||a.message||a.name||"Error","Action dispatch error ".concat(r.type),r),"SchemaValidationError"!==r.error.name)return t(r)},lY=e=>t=>r=>n=>(e.debug({action:n,nextState:t.getState()},"Action dispatched: ".concat(n.type)),r(n)),lW=e=>({referrer:document.referrer,userAgent:navigator.userAgent,location:window.location.href,clientId:e}),lG=()=>({referrer:null,userAgent:null,location:null,clientId:""});function lK(e,t,r){void 0===t&&(t=50),void 0===r&&(r={});var n,a,i,o=null!=(n=r.isImmediate)&&n,s=null!=(a=r.callback)&&a,l=r.maxWait,u=Date.now(),c=[],d=function(){var r=[].slice.call(arguments),n=this;return new Promise(function(a,d){var f=o&&void 0===i;if(void 0!==i&&clearTimeout(i),i=setTimeout(function(){if(i=void 0,u=Date.now(),!o){var t=e.apply(n,r);s&&s(t),c.forEach(function(e){return(0,e.resolve)(t)}),c=[]}},function(){if(void 0!==l){var e=Date.now()-u;if(e+t>=l)return l-e}return t}()),f){var p=e.apply(n,r);return s&&s(p),a(p)}c.push({resolve:a,reject:d})})};return d.cancel=function(e){void 0!==i&&clearTimeout(i),c.forEach(function(t){return(0,t.reject)(e)}),c=[]},d}async function lJ(e){try{return await e()}catch(e){return""}}var lZ={configuration:lz,version:lx},lX=class extends Error{constructor(e){super(e),this.name="InvalidEngineConfiguration"}},l0=p(P()),l1=p(m()),l2=(e,t,r,n,a,i)=>{let o=e[t];tK(o)||tK(a)||a!==o&&a!==n&&(i.warn("Mismatch on access token (JWT Token) ".concat(t," and engine configuration.")),i.warn("To remove this warning, make sure that access token value [".concat(o,"] matches engine configuration value [").concat(r,"]")))},l3=(e,t)=>!(tK(e)||t===e),l5=e=>{try{let t="u">typeof atob?atob:l1.atob,r=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=t(r);if(!n)return!1;let a=decodeURIComponent(n.split("").map(e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(a)}catch(e){return!1}},l6=(e,t)=>(l3(e.searchHub,t.searchHub)&&(t.searchHub=e.searchHub),t),l4=(e,t,r,n)=>(l2(e,"searchHub",t.searchHub,aO(),r,n),l6(e,t)),l8=(e,t)=>(l3(e.pipeline,t.pipeline)&&(t.pipeline=e.pipeline),t),l9=(e,t,r,n)=>(l2(e,"pipeline",t.pipeline,iu(),r,n),l8(e,t)),l7=(e,t)=>(l3(e.userDisplayName,t.configuration.analytics.userDisplayName)&&(t.configuration.analytics.userDisplayName=e.userDisplayName),t),ue=(e,t,r,n)=>(l2(e,"userDisplayName",t.configuration.analytics.userDisplayName,lN().analytics.userDisplayName,r,n),l7(e,t)),ut=e=>e2({},t=>{t.addCase(i1,(t,r)=>{let n=l5(t.configuration.accessToken);return n?l4(n,t,r.payload,e):t}).addCase(iX,(t,r)=>{let n=l5(t.configuration.accessToken);return n?l9(n,t,r.payload,e):t}).addCase(iM,(e,t)=>{if(e.configuration.accessToken!==t.payload.accessToken)return e;let{accessToken:r}=t.payload;if(!r)return e;let n=l5(r);return n?[l8,l6,l7].reduce((e,t)=>t(n,e),e):e}).addCase(iP,(t,r)=>{var n;let a=l5(t.configuration.accessToken);if(!a)return t;let i=l4(a,t,r.payload.searchHub,e);return l9(a,i,null==(n=r.payload)?void 0:n.pipeline,e)}).addCase(i_,(t,r)=>{let n=l5(t.configuration.accessToken);return n?ue(n,t,r.payload.userDisplayName,e):t})}),ur=new tY({...{organizationId:rR,accessToken:rR,platformUrl:new t3({required:!1,emptyAllowed:!1}),name:new t3({required:!1,emptyAllowed:!1}),analytics:new t6({options:{required:!1},values:{enabled:new tX({required:!1}),originContext:new t3({required:!1}),originLevel2:new t3({required:!1}),originLevel3:new t3({required:!1}),analyticsMode:new t3({constrainTo:["legacy","next"],required:!1})}})},search:new t6({options:{required:!1},values:{pipeline:new t3({required:!1,emptyAllowed:!0}),searchHub:rE,locale:rE,timezone:rE,authenticationProviders:new t8({required:!1,each:rR})}})}),un={debug:iW,pipeline:i0,searchHub:i2,search:sM};function ua(e){return/^search\/executeSearch\/(fulfilled|rejected)$/.test(e.type)}function ui(e){let{controllers:t,...r}=e,n=()=>r,a=async function(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];let[i]=r,o=function(e){var t,r,n,a,i;let o,s,l,u,c,d,f,p,{middleware:h,promise:g}=function(e){let t,r,{promise:n,resolve:a}=(t=null,r=null,{promise:new Promise((e,n)=>{t=e,r=n}),resolve:t,reject:r});return{promise:n,middleware:()=>t=>r=>{t(r),e(r)&&a(r)}}}(ua),y=(n=(r={...e,middlewares:[...null!=(t=e.middlewares)?t:[],h]}).loggerOptions,o=(0,l0.default)({name:"@coveo/headless",level:(null==n?void 0:n.level)||"warn",formatters:{log:null==n?void 0:n.logFormatter}}),function(e,t){try{ur.validate(e)}catch(e){throw t.error(e,"Search engine configuration error"),e}}(r.configuration,o),u=function(e,t){let{search:r}=e;return new rb({logger:t,preprocessRequest:e.preprocessRequest||tB,postprocessSearchResponseMiddleware:(null==r?void 0:r.preprocessSearchResponseMiddleware)||rO,postprocessFacetSearchResponseMiddleware:(null==r?void 0:r.preprocessFacetSearchResponseMiddleware)||rx,postprocessQuerySuggestResponseMiddleware:(null==r?void 0:r.preprocessQuerySuggestResponseMiddleware)||rA})}(r.configuration,o),c=new t$({logger:o}),d={...(a=r.configuration,{analyticsClientMiddleware:function(e){let{analytics:t}=e;return(null==t?void 0:t.analyticsClientMiddleware)||((e,t)=>t)}(a),validatePayload:rP,preprocessRequest:a.preprocessRequest||tB,logger:o}),apiClient:u,streamingClient:c},f=function(e,t){var r,n,a;let i=function(e,t){var r,n,a;let i,o,s,{reducers:l}=e,u=(n={...lZ,...l},a=null!=(r=e.preloadedState)?r:{},i={...n},s=e=>(t,r)=>{let n=e(t,r);return o?o(n,r):n},{get combinedReducer(){return s(N({...function(e){let t={};for(let[r,n]of e)t[r]=n;return t}(Object.entries(a).filter(e=>{let[t]=e;return!(t in i)}).map(e=>{let[t,r]=e;return[t,()=>r]})),...i}))},containsAll:e=>Object.keys(e).every(e=>e in i),add(e){Object.keys(e).filter(e=>!(e in i)).forEach(t=>i[t]=e[t])},addCrossReducer(e){o=e}});e.crossReducer&&u.addCrossReducer(e.crossReducer);let c=t.logger,d=()=>{let e="";try{e=rW(h.state).getMeta("").clientId}catch(e){c.warn("Error while obtaining clientID from relay",e)}return e},f={...t,get relay(){return rW(h.state)},get navigatorContext(){return e.navigatorContextProvider?e.navigatorContextProvider():lA()?lW(d()):lG()}},p=function(e,t,r){let{preloadedState:n,configuration:a}=e,i=a.name||"coveo-headless",o=function(e,t){let r,n,{renewAccessToken:a}=e.configuration;return[lB,(r=0,n=lK(()=>r=0,500),e=>i=>async o=>{var s,l;if("function"!=typeof o)return i(o);let u=await i(o);if((null==(s=u)||null==(l=s.error)?void 0:l.name)!==new rc().name)return u;if("function"!=typeof a)return t.warn("Unable to renew the expired token because a renew function was not provided. Please specify the #renewAccessToken option when initializing the engine."),u;if(r>=5)return t.warn("Attempted to renew the token but was not successful. Please check the #renewAccessToken function."),u;r++,n();let c=await lJ(a);e.dispatch(iM({accessToken:c})),e.dispatch(o)}),lH(t),lR].concat(lO.middleware,e.middlewares||[])}(e,t.logger);return function(e){let{reducer:t,preloadedState:r,middlewares:n=[],thunkExtraArguments:a,name:i}=e;return function(e){let t,r=eW(),{reducer:n,middleware:a,devTools:i=!0,preloadedState:o,enhancers:s}=e||{},l;if("function"==typeof n)l=n;else if(L(n))l=N(n);else throw Error(tv(1));t="function"==typeof a?a(r):r();let u=z;i&&(u=eN({trace:!1,..."object"==typeof i&&i}));let c=e0(function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>(r,n)=>{let a=e(r,n),i=()=>{throw Error(U(15))},o={getState:a.getState,dispatch:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return i(e,...r)}};return i=z(...t.map(e=>e(o)))(a.dispatch),{...a,dispatch:i}}}(...t));return function e(t,r,n){if("function"!=typeof t)throw Error(U(2));if("function"==typeof r&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw Error(U(0));if("function"==typeof r&&typeof n>"u"&&(n=r,r=void 0),"u">typeof n){if("function"!=typeof n)throw Error(U(1));return n(e)(t,r)}let a=t,i=r,o=new Map,s=o,l=0,u=!1;function c(){s===o&&(s=new Map,o.forEach((e,t)=>{s.set(t,e)}))}function d(){if(u)throw Error(U(3));return i}function f(e){if("function"!=typeof e)throw Error(U(4));if(u)throw Error(U(5));let t=!0;c();let r=l++;return s.set(r,e),function(){if(t){if(u)throw Error(U(6));t=!1,c(),s.delete(r),o=null}}}function p(e){if(!L(e))throw Error(U(7));if(typeof e.type>"u")throw Error(U(8));if("string"!=typeof e.type)throw Error(U(17));if(u)throw Error(U(9));try{u=!0,i=a(i,e)}finally{u=!1}return(o=s).forEach(e=>{e()}),e}return p({type:Q.INIT}),{dispatch:p,subscribe:f,getState:d,replaceReducer:function(e){if("function"!=typeof e)throw Error(U(10));a=e,p({type:Q.REPLACE})},[_]:function(){return{subscribe(e){if("object"!=typeof e||null===e)throw Error(U(11));function t(){e.next&&e.next(d())}return t(),{unsubscribe:f(t)}},[_](){return this}}}}}(l,o,u(..."function"==typeof s?s(c):c()))}({reducer:t,preloadedState:r,devTools:{stateSanitizer:e=>e.history?{...e,history:"<<OMIT>>"}:e,name:i,shouldHotReload:!1},middleware:e=>e({thunk:{extraArgument:a}}).prepend(...n).concat(lY(a.logger))})}({preloadedState:n,reducer:r.combinedReducer,middlewares:o,thunkExtraArguments:t,name:i})}(e,f,u),h={addReducers(e){u.containsAll(e)||(u.add(e),p.replaceReducer(u.combinedReducer))},dispatch:p.dispatch,subscribe:p.subscribe,enableAnalytics(){p.dispatch(iQ())},disableAnalytics(){p.dispatch(iV())},get state(){return p.getState()},get relay(){return rW(this.state)},get navigatorContext(){return e.navigatorContextProvider?e.navigatorContextProvider():lA()?lW(d()):lG()},logger:c,store:p};return h}(e,t),{accessToken:o,organizationId:s}=e.configuration,{organizationEndpoints:l}=e.configuration,u=(null==l?void 0:l.platform)||e.configuration.platformUrl;(!tK((n=e.configuration).platformUrl)||tK(null==(a=n.organizationEndpoints)?void 0:a.platform))&&i.logger.warn("The `platformUrl` (".concat(e.configuration.platformUrl,") option will be deprecated in the next major version. Consider using the `organizationEndpoints` option instead. See [Organization endpoints](https://docs.coveo.com/en/mcc80216).")),tG(e.configuration.organizationEndpoints)?i.logger.warn("The `organizationEndpoints` options was not explicitly set in the Headless engine configuration. Coveo recommends setting this option, as it has resiliency benefits and simplifies the overall configuration for multi-region deployments. See [Organization endpoints](https://docs.coveo.com/en/mcc80216)."):function(e){let{platform:t}=e.organizationEndpoints;if(tG(t))return!1;let r=tV(t);return r&&r.organizationId!==e.organizationId}(e.configuration)&&i.logger.warn("There is a mismatch between the `organizationId` option (".concat(e.configuration.organizationId,") and the organization configured in the `organizationEndpoints` option (").concat(null==(r=e.configuration.organizationEndpoints)?void 0:r.platform,"). This could lead to issues that are complex to troubleshoot. Please make sure both values match.")),i.dispatch(iM({accessToken:o,organizationId:s,platformUrl:u}));let c=function(e,t){var r,n;let a=(null==(r=e.organizationEndpoints)?void 0:r.analytics)||void 0,{analyticsClientMiddleware:i,...o}=null!=(n=e.analytics)?n:{},s={...o,nextApiBaseUrl:"".concat(a,"/rest/organizations/").concat(e.organizationId,"/events/v1"),apiBaseUrl:a};if("next"!==s.analyticsMode&&function(){if(typeof navigator>"u"||typeof window>"u")return!1;let e=navigator,t=window;return[e.globalPrivacyControl,e.doNotTrack,e.msDoNotTrack,t.doNotTrack].some(e=>tI.has(e))}())return t.info("Analytics disabled since doNotTrack is active."),{...s,enabled:!1};if("next"===s.analyticsMode&&!o.trackingId)throw new lX('analytics.trackingId is required when analytics.analyticsMode="next"');return s}(e.configuration,i.logger);return c&&i.dispatch(i_(c)),i}({...r,reducers:un,crossReducer:ut(o)},d),s=r.configuration.search,l=(null==(i=r.configuration.organizationEndpoints)?void 0:i.search)||void 0,p={...s,apiBaseUrl:l},f.dispatch(iP(p)),{...f,get state(){return f.state},executeFirstSearch(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:iO();if(sF(f.state))return;let t=sS({legacy:e,next:iE()});f.dispatch(t)},executeFirstSearchAfterStandaloneSearchBoxRedirect(e){let{cause:t,metadata:r}=e;if(sF(f.state))return;let n=r&&"omniboxFromLink"===t,a=sS({legacy:n?iR(r):iA(),next:n?iD():iT()});f.dispatch(a)}});return{...y,get state(){return y.state},waitForSearchCompletedAction:()=>g}}((null==i?void 0:i.extend)?await i.extend(n()):n()),s=function(e){let{definitionsMap:t,engine:r,propsMap:n}=e;return tq(t,(e,t)=>(function(e){let{definition:t,engine:r,props:n}=e;return"build"in t?t.build(r):t.buildWithProps(r,n)})({definition:e,engine:r,props:null==n?void 0:n[t]}))}({definitionsMap:null!=t?t:{},engine:o,propsMap:i&&"controllers"in i?i.controllers:{}});return{engine:o,controllers:s}},i=tO(async function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];n().navigatorContextProvider||console.warn("[WARNING] Missing navigator context in server-side code. Make sure to set it with `setNavigatorContextProvider` before calling fetchStaticState()");let o=await a(...t);return await i.fromBuildResult({buildResult:o})},{fromBuildResult:async function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let[{buildResult:{engine:n,controllers:a}}]=t;return n.executeFirstSearch(),function(e){let{searchAction:t,controllers:r}=e;return{controllers:tq(r,e=>({state:tk(e.state)})),searchAction:tk(t)}}({searchAction:await n.waitForSearchCompletedAction(),controllers:a})}}),o=tO(async function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];n().navigatorContextProvider||console.warn("[WARNING] Missing navigator context in client-side code. Make sure to set it with `setNavigatorContextProvider` before calling hydrateStaticState()");let i=await a(...t);return await o.fromBuildResult({buildResult:i,searchAction:t[0].searchAction})},{fromBuildResult:async function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let[{buildResult:{engine:n,controllers:a},searchAction:i}]=t;return n.dispatch(i),await n.waitForSearchCompletedAction(),{engine:n,controllers:a}}});return{build:a,fetchStaticState:i,hydrateStaticState:o,setNavigatorContextProvider:e=>{r.navigatorContextProvider=e}}}var uo=e=>{let t=/^(\w+(?:\s\w+)*): ([-0-9]+)$/;if(!e)return null;let r=e.match(/(\w+(?:\s\w+)*): ([-0-9]+)/g);if(!r)return null;let n={};for(let e of r){let r=e.match(t);if(r){let e=r[1],t=r[2];n[e]=Number(t)}}return n},us=(e,t)=>{let r=[],n;for(;null!==(n=t.exec(e));)r.push(n);return r},ul=e=>{let t=/([^:]+): ([0-9]+), ([0-9]+); /g;if(!e||!e[1])return null;let r=us(e[1],/((?:[^:]+: [0-9]+, [0-9]+; )+)\n((?:\w+: [0-9]+; )+)/g);if(!r)return null;let n={};for(let e of r){let r=us(e[1],t),a={};for(let e of r)a[e[1]]={Correlation:Number(e[2]),"TF-IDF":Number(e[3])};let i=uo(e[2]);n[Object.keys(a).join(", ")]={terms:a,Weights:i}}return n},uu=e=>{let t=/(Expression:\s".*")\sScore:\s(?!0)([-0-9]+)\n+/g,r=t.exec(e),n=[];for(;r;)n.push({expression:r[1],score:parseInt(r[2],10)}),r=t.exec(e);return n},uc=e$("fields/registerFieldsToInclude",e=>rU(e,rD)),ud=e$("fields/fetchall/enable"),uf=e$("fields/fetchall/disable"),up=tl("fields/fetchDescription",async(e,t)=>{let{extra:r,getState:n,rejectWithValue:a}=t,i=n(),{accessToken:o,organizationId:s}=i.configuration,{apiBaseUrl:l}=i.configuration.search,u=await r.apiClient.fieldDescriptions({accessToken:o,organizationId:s,url:l});return rI(u)?a(u.error):u.success.fields}),uh={collectionField:new t3({emptyAllowed:!1,required:!1}),parentField:new t3({emptyAllowed:!1,required:!1}),childField:new t3({emptyAllowed:!1,required:!1}),numberOfFoldedResults:new tJ({min:0,required:!1})},ug=e$("folding/register",e=>rU(e,uh)),uy=tl("folding/loadCollection",async(e,t)=>{let{getState:r,rejectWithValue:n,extra:{apiClient:a,navigatorContext:i}}=t,o=r(),s="legacy"===o.configuration.analytics.analyticsMode?await og(o):op(o,i),l=await a.search({...s,q:function(e){return""===e.query.q?"":e.query.enableQuerySyntax?"".concat(e.query.q," OR @uri"):"( <@- ".concat(e.query.q," -@> ) OR @uri")}(o),enableQuerySyntax:!0,cq:"@".concat(o.folding.fields.collection,'="').concat(e,'"'),filterField:o.folding.fields.collection,childField:o.folding.fields.parent,parentField:o.folding.fields.child,filterFieldRange:100},{origin:"foldingCollection"});return rI(l)?n(l.error):{collectionId:e,results:l.success.results,rootResult:o.folding.collections[e].result}}),um=()=>({enabled:!1,fields:{collection:"foldingcollection",parent:"foldingparent",child:"foldingchild"},filterFieldRange:2,collections:{}}),uv=["author","language","urihash","objecttype","collection","source","permanentid"];[...uv];var uw=e2({fieldsToInclude:uv,fetchAllFields:!1,fieldsDescription:[]},e=>e.addCase(uc,(e,t)=>{e.fieldsToInclude=[...new Set(e.fieldsToInclude.concat(t.payload))]}).addCase(ud,e=>{e.fetchAllFields=!0}).addCase(uf,e=>{e.fetchAllFields=!1}).addCase(up.fulfilled,(e,t)=>{let{payload:r}=t;e.fieldsDescription=r}).addCase(ug,(e,t)=>{var r,n,a;let{payload:i}=t,o=um().fields;e.fieldsToInclude.push(null!=(r=i.collectionField)?r:o.collection,null!=(n=i.parentField)?n:o.parent,null!=(a=i.childField)?a:o.child)}));function uS(e){let t,r=new Map,n=()=>0===r.size,a=e=>{try{let r=JSON.stringify(e),n=t!==r;return t=r,n}catch(e){return console.warn('Could not detect if state has changed, check the controller "get state method"',e),!0}};return{subscribe(i){i();let o=Symbol(),s;return n()&&(t=JSON.stringify(this.state),s=e.subscribe(()=>{a(this.state)&&r.forEach(e=>e())})),r.set(o,i),()=>{r.delete(o),n()&&s&&s()}},get state(){return{}}}}new tY({enabled:new tX({default:!1})});var ub=new t8({each:rR,required:!0}),uC=(e,t)=>(rU(e,rR),t5(t)?rU(t,rR):rU(t,ub),{payload:{contextKey:e,contextValue:t}}),uI=e$("context/set",e=>{for(let[t,r]of Object.entries(e))uC(t,r);return{payload:e}}),uq=e$("context/add",e=>uC(e.contextKey,e.contextValue)),uk=e$("context/remove",e=>rU(e,rR)),uO=(e2(oK(),e=>{e.addCase(uI,(e,t)=>{e.contextValues=t.payload}).addCase(uq,(e,t)=>{e.contextValues[t.payload.contextKey]=t.payload.contextValue}).addCase(uk,(e,t)=>{delete e.contextValues[t.payload]}).addCase(iZ.fulfilled,(e,t)=>{t.payload&&(e.contextValues=t.payload.context.contextValues)})}),{caseId:"caseContext",caseNumber:"caseContext"}),ux=class extends Error{constructor(e){super('The key "'.concat(e,'" is reserved for internal use. Use ').concat(uO[e]," to set this value.}"))}};function uA(e){return null.includes(e)}new tY({values:new t6({options:{required:!1}})});var uR=e$("dictionaryFieldContext/set",e=>{let t=rU(e,new t6({options:{required:!0}})).error;if(t)return{payload:e,error:t};let r=rU(Object.values(e),new t8({each:rF})).error;return r?{payload:e,error:r}:{payload:e}}),uE=e$("dictionaryFieldContext/add",e=>rU(e,new t6({options:{required:!0},values:{field:rF,key:rF}}))),uF=e$("dictionaryFieldContext/remove",e=>rU(e,rF)),uT=(e2(oJ(),e=>{e.addCase(uR,(e,t)=>{e.contextValues=t.payload}).addCase(uE,(e,t)=>{let{field:r,key:n}=t.payload;e.contextValues[r]=n}).addCase(uF,(e,t)=>{delete e.contextValues[t.payload]}).addCase(iZ.fulfilled,(e,t)=>{t.payload&&(e.contextValues=t.payload.dictionaryFieldContext.contextValues)})}),e_(e=>""!==e.queryCorrection.correctedQuery||""!==e.wasCorrectedTo,e=>e),()=>({correctedQuery:"",wordCorrections:[],originalQuery:""})),uD=()=>({correctedQuery:"",corrections:[],originalQuery:""}),uj=(e,t)=>{var r;let n={...uD(),...t,correctedQuery:(null==t?void 0:t.correctedQuery)||(null==t||null==(r=t.corrections[0])?void 0:r.correctedQuery)||""};e.queryCorrection=n,e.wasCorrectedTo=n.correctedQuery},uM=(e2({enableDidYouMean:!1,wasCorrectedTo:"",wasAutomaticallyCorrected:!1,queryCorrection:uT(),originalQuery:"",automaticallyCorrectQuery:!0,queryCorrectionMode:"legacy"},e=>{e.addCase(oN,e=>{e.enableDidYouMean=!0}).addCase(oz,e=>{e.enableDidYouMean=!1}).addCase(oB,e=>{e.automaticallyCorrectQuery=!0}).addCase(o$,e=>{e.automaticallyCorrectQuery=!1}).addCase(sS.pending,e=>{e.queryCorrection=uT(),e.wasAutomaticallyCorrected=!1,e.wasCorrectedTo=""}).addCase(sS.fulfilled,(e,t)=>{let{queryCorrection:r,queryCorrections:n}=t.payload.response;"legacy"===e.queryCorrectionMode&&(e.queryCorrection=n&&n[0]?n[0]:uT()),"next"===e.queryCorrectionMode&&uj(e,r),e.wasAutomaticallyCorrected=t.payload.automaticallyCorrected,e.originalQuery=t.payload.originalQuery}).addCase(oH,(e,t)=>{e.wasCorrectedTo=t.payload}).addCase(oY,(e,t)=>{e.queryCorrectionMode=t.payload})}),e$("facetOptions/update",function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{freezeFacetOrder:!0};return rU(e,{freezeFacetOrder:new tX({required:!1})})})),uP=e$("facetOptions/facet/enable",e=>rU(e,rR)),uU=e$("facetOptions/facet/disable",e=>rU(e,rR)),u_={facetId:rR,captions:new t6({options:{required:!1}}),numberOfValues:new tJ({required:!1,min:1}),query:new t3({required:!1,emptyAllowed:!0})},uV={path:new t8({required:!0,each:rR}),displayValue:rF,rawValue:rF,count:new tJ({required:!0,min:0})},uQ=e$("categoryFacet/selectSearchResult",e=>rU(e,{facetId:rR,value:new t6({values:uV})})),uL=e$("categoryFacetSearch/register",e=>rU(e,u_));function uN(e,t){var r;let{facetId:n,criterion:a}=t,i=null==(r=e[n])?void 0:r.request;i&&(i.sortCriteria=a)}function uz(e){e&&(e.currentValues=e.currentValues.map(e=>({...e,state:"idle"})),e.preventAutoSelect=!0)}function u$(e,t){e&&(e.numberOfValues=t)}function uB(e,t){let r=e[t];r&&(r.request.numberOfValues=r.initialNumberOfValues,r.request.currentValues=[],r.request.preventAutoSelect=!0)}function uH(e,t,r){e.currentValues=function(e,t){if(!e.length)return[];let r=uY(e[0],t),n=r;for(let r of e.splice(1)){let e=uY(r,t);n.children.push(e),n=e}return n.state="selected",n.retrieveChildren=!0,[r]}(t,r),e.numberOfValues=t.length?1:r,e.preventAutoSelect=!0}function uY(e,t){return{value:e,retrieveCount:t,children:[],state:"idle",retrieveChildren:!1}}var uW={state:new tW({required:!0}),numberOfResults:new tJ({required:!0,min:0}),value:new t3({required:!0,emptyAllowed:!0}),path:new t8({required:!0,each:rR}),moreValuesAvailable:new tX({required:!1})},uG={facetId:rR,field:rR,delimitingCharacter:new t3({required:!1,emptyAllowed:!0}),filterFacetCount:new tX({required:!1}),injectionDepth:new tJ({required:!1,min:0}),numberOfValues:new tJ({required:!1,min:1}),sortCriteria:new tW({required:!1}),basePath:new t8({required:!1,each:rR}),filterByBasePath:new tX({required:!1})},uK=e$("categoryFacet/register",e=>rU(e,uG)),uJ=e$("categoryFacet/toggleSelectValue",e=>{try{return rP(e.facetId,rR),function e(t){t.children.forEach(t=>{e(t)}),rP({state:t.state,numberOfResults:t.numberOfResults,value:t.value,path:t.path,moreValuesAvailable:t.moreValuesAvailable},uW)}(e.selection),{payload:e,error:null}}catch(t){return{payload:e,error:rM(t)}}}),uZ=e$("categoryFacet/deselectAll",e=>rU(e,uG.facetId)),uX=e$("categoryFacet/updateNumberOfValues",e=>rU(e,{facetId:uG.facetId,numberOfValues:uG.numberOfValues})),u0=e$("categoryFacet/updateSortCriterion",e=>rU(e,{facetId:uG.facetId,criterion:new tW})),u1=e$("categoryFacet/updateBasePath",e=>rU(e,{facetId:uG.facetId,basePath:new t8({each:rR})})),u2=(e2({},e=>{e.addCase(uK,(e,t)=>{var r;let n=t.payload,{facetId:a}=n;if(a in e)return;let i=(r=n,{...u2,currentValues:[],preventAutoSelect:!1,type:"hierarchical",...r}),o=i.numberOfValues;e[a]={request:i,initialNumberOfValues:o}}).addCase(iZ.fulfilled,(e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.categoryFacetSet)?n:e}).addCase(i$,(e,t)=>{let r=t.payload.cf||{};Object.keys(e).forEach(t=>{let n=e[t].request,a=r[t]||[];(a.length||n.currentValues.length)&&uH(n,a,e[t].initialNumberOfValues)})}).addCase(u0,(e,t)=>{var r;let{facetId:n,criterion:a}=t.payload,i=null==(r=e[n])?void 0:r.request;i&&(i.sortCriteria=a)}).addCase(u1,(e,t)=>{var r;let{facetId:n,basePath:a}=t.payload,i=null==(r=e[n])?void 0:r.request;i&&(i.basePath=[...a])}).addCase(uJ,(e,t)=>{var r;let{facetId:n,selection:a,retrieveCount:i}=t.payload,o=null==(r=e[n])?void 0:r.request;if(!o)return;let{path:s}=a,l=function(e,t,r){let n=e.currentValues;for(let e of t){let t=n[0];t&&e===t.value||(t=u3(e,r),n.length=0,n.push(t)),t.retrieveChildren=!1,t.state="idle",n=t.children}return n}(o,s.slice(0,s.length-1),i);if(l.length){let e=l[0];e.retrieveChildren=!0,e.state="selected",e.children=[];return}let u=u3(a.value,i);u.state="selected",l.push(u),o.numberOfValues=1}).addCase(uZ,(e,t)=>{uB(e,t.payload)}).addCase(i3,e=>{Object.keys(e).forEach(t=>uB(e,t))}).addCase(i6,(e,t)=>Object.keys(e).forEach(r=>{e[r].request.preventAutoSelect=!t.payload.allow})).addCase(uX,(e,t)=>{var r;let{facetId:n,numberOfValues:a}=t.payload,i=null==(r=e[n])?void 0:r.request;if(i){if(!i.currentValues.length)return u$(i,a);!function(e,t){var r;let{facetId:n,numberOfValues:a}=t,i=null==(r=e[n])?void 0:r.request.currentValues[0];if(i){for(;i.children.length&&(null==i?void 0:i.state)!=="selected";)i=i.children[0];i.retrieveCount=a}}(e,t.payload)}}).addCase(uQ,(e,t)=>{let{facetId:r,value:n}=t.payload,a=e[r];if(!a)return;let i=[...n.path,n.rawValue];uH(a.request,i,a.initialNumberOfValues)}).addCase(sI.fulfilled,(e,t)=>{u5(e,t.payload.response.facets)}).addCase(sS.fulfilled,(e,t)=>{u5(e,t.payload.response.facets)}).addCase(uU,(e,t)=>{uB(e,t.payload)})}),{delimitingCharacter:";",filterFacetCount:!0,injectionDepth:1e3,numberOfValues:5,sortCriteria:"occurrences",basePath:[],filterByBasePath:!0,resultsMustMatch:"atLeastOneValue"});function u3(e,t){return{value:e,state:"idle",children:[],retrieveChildren:!0,retrieveCount:t}}function u5(e,t){t.forEach(t=>{var r,n,a,i;let o,s;if(n=e,!(t.facetId in n))return;let l=null==(r=e[t.facetId])?void 0:r.request;if(!l)return;let u=(a=l,i=t,o=aP(a.currentValues),s=aP(i.values),o.length!==s.length);l.currentValues=u?[]:l.currentValues,l.preventAutoSelect=!1})}var u6=e=>{var t,r;return t=e.cartItems,r=e.cart,[...Object.values(t.reduce((e,t)=>{let{productId:n,quantity:a}=r[t];return n in e||(e[n]={productId:n,quantity:0}),e[n].quantity+=a,e},{}))]},u4=(e=>(e.Relevance="relevance",e.Fields="fields",e))(u4||{}),u8=(e=>(e.Ascending="asc",e.Descending="desc",e))(u8||{});new t6({options:{required:!1},values:{by:new t7({enum:u4,required:!0}),fields:new t8({each:new t6({values:{name:new t3,direction:new t7({enum:u8})}})})}}),new t6({options:{required:!1},values:{by:new t7({enum:u4,required:!0}),fields:new t8({each:new t6({values:{field:new t3({required:!0}),direction:new t7({enum:u8}),displayName:new t3}})})}});var u9=(e,t)=>({...u7(e,t),facets:[...function(e){return e.facetOrder&&e.commerceFacetSet?e.facetOrder.filter(t=>{var r;return null==(r=e.commerceFacetSet)?void 0:r[t]}).map(t=>e.commerceFacetSet[t].request).filter(e=>e&&e.values.length>0):[]}(e),...function(e){return e.manualNumericFacetSet?Object.entries(e.manualNumericFacetSet).filter(e=>{let[t,r]=e;return void 0!==r.manualRange}).map(e=>{let[t,r]=e;return{facetId:t,field:t,numberOfValues:1,isFieldExpanded:!1,preventAutoSelect:!0,type:"numericalRange",values:[r.manualRange],initialNumberOfValues:1}}):[]}(e)],...e.commerceSort&&{sort:function(e){return"relevance"===e.by?{sortCriteria:"relevance"}:{sortCriteria:"fields",fields:e.fields.map(e=>{let{name:t,direction:r}=e;return{field:t,direction:r}})}}(e.commerceSort.appliedSort)}}),u7=(e,t,r)=>{let{view:n,...a}=e.commerceContext;return{accessToken:e.configuration.accessToken,url:e.configuration.platformUrl,organizationId:e.configuration.organizationId,trackingId:e.configuration.analytics.trackingId,...a,...e.configuration.analytics.enabled?{clientId:t.clientId}:{},context:{...t.userAgent?{user:{userAgent:t.userAgent}}:{},view:{...n,...t.referrer?{referrer:t.referrer}:{}},capture:e.configuration.analytics.enabled,cart:u6(e.cart),source:rY(e.configuration.analytics)},...ce(e,r)}},ce=(e,t)=>{var r,n;let a=t?null==(r=e.commercePagination)?void 0:r.recommendations[t]:null==(n=e.commercePagination)?void 0:n.principal;return a&&{page:a.page,...a.perPage&&{perPage:a.perPage}}},ct=(e,t,r,n)=>{var a,i;let o="*".concat(t.categoryFacetSearchSet[e].options.query,"*"),s=null==(a=t.commerceFacetSet[cc(e)])?void 0:a.request,l=s&&"hierarchical"===s.type?s&&cr(s):[],u=l.length?[l]:[],c=null==(i=t.commerceQuery)?void 0:i.query,{url:d,accessToken:f,organizationId:p,trackingId:h,language:g,country:y,currency:m,clientId:v,context:w,...S}=u9(t,n);return{url:d,accessToken:f,organizationId:p,facetId:cc(e),facetQuery:o,ignorePaths:u,trackingId:h,language:g,country:y,currency:m,clientId:v,context:w,query:c,...!r&&{...S,query:""}}},cr=e=>{let t=[],r=e.values[0];for(;r;)t.push(r.value),r=r.children[0];return t},cn=(e,t,r,n)=>{var a;let i="*".concat(t.facetSearchSet[e].options.query,"*"),o=null==(a=t.commerceQuery)?void 0:a.query,{url:s,accessToken:l,organizationId:u,trackingId:c,language:d,country:f,currency:p,clientId:h,context:g,...y}=u9(t,n);return{url:s,accessToken:l,organizationId:u,facetId:cc(e),facetQuery:i,trackingId:c,language:d,country:f,currency:p,clientId:h,context:g,query:o,...!r&&{...y,query:""}}},ca=e=>async(t,r)=>{let{facetId:n,facetSearchType:a}=t,{getState:i,extra:{validatePayload:o,navigatorContext:s,apiClient:l}}=r,u=i();o(n,rR);let c=cs(u,n)||cl(u,n)?cn(n,u,e,s):ct(n,u,e,s);return{facetId:n,response:await l.facetSearch(c,a)}},ci=tl("commerce/facetSearch/executeSearch",ca(!1)),co=tl("commerce/facetSearch/facetFieldSuggest",ca(!0)),cs=(e,t)=>"facetSearchSet"in e&&void 0!==e.facetSearchSet[t]&&void 0!==e.commerceFacetSet[t],cl=(e,t)=>"fieldSuggestionsOrder"in e&&e.fieldSuggestionsOrder.some(e=>e.facetId===t&&"regular"===e.type),cu="field_suggestion:";function cc(e){return e.startsWith(cu)?e.slice(cu.length):e}function cd(e){return e.startsWith(cu)?e:"".concat(cu).concat(e)}var cf=e=>void 0!==e.error,cp=e_(e=>{var t;return(null==(t=e.commercePagination)?void 0:t.principal.perPage)||0},e=>e),ch=(e_((e,t)=>{var r,n;return(null==(n=e.commercePagination)||null==(r=n.recommendations[t])?void 0:r.perPage)||0},e=>e),e_(e=>{var t;return(null==(t=e.commercePagination)?void 0:t.principal.totalEntries)||0},e=>e));e_((e,t)=>{var r,n;return(null==(n=e.commercePagination)||null==(r=n.recommendations[t])?void 0:r.totalEntries)||0},e=>e),e_(e=>{var t;return(null==(t=e.commercePagination)?void 0:t.principal.page)||0},e=>e),e_((e,t)=>{var r,n;return(null==(n=e.commercePagination)||null==(r=n.recommendations[t])?void 0:r.page)||0},e=>e);var cg=Symbol.for("coveo-headless-internal-state");e_(e=>e[cg].productListing.responseId,e=>e),e_(e=>e.productListing.responseId,e=>e),e_(e=>e.productListing.requestId,e=>e);var cy=e_(e=>{var t;return(null==(t=e.productListing)?void 0:t.products.length)||0},e=>e),cm=e_(e=>({total:ch(e),current:cy(e)}),e=>{let{current:t,total:r}=e;return t<r});e_(e=>{var t;return null==(t=e.productListing)?void 0:t.isLoading},e=>!tK(e)&&e),e_(e=>{var t;return null==(t=e.productListing)?void 0:t.error},e=>null!=e?e:null);var cv=tl("commerce/productListing/fetch",async(e,t)=>{let{getState:r,rejectWithValue:n,extra:{apiClient:a,navigatorContext:i}}=t,o=r(),s=await a.getProductListing(u9(o,i));return cf(s)?n(s.error):{response:s.success}}),cw=(tl("commerce/productListing/fetchMoreProducts",async(e,t)=>{let{getState:r,rejectWithValue:n,extra:{apiClient:a,navigatorContext:i}}=t,o=r();if(!cm(o))return null;let s=cp(o),l=cy(o)/s,u=await a.getProductListing({...u9(o,i),page:l});return cf(u)?n(u.error):{response:u.success}}),{child:new t6({options:{required:!0},values:{permanentid:new t3({required:!0})}})});e$("commerce/productListing/promoteChildToParent",e=>rU(e,cw));var cS=e$("commerce/querySuggest/clear",e=>rU(e,{id:rR})),cb=tl("commerce/querySuggest/fetch",async(e,t)=>{let{getState:r,rejectWithValue:n,extra:{apiClient:a,validatePayload:i,navigatorContext:o}}=t;i(e,{id:rR});let s=r(),l=cq(e.id,s,o),u=await a.querySuggest(l);return cf(u)?n(u.error):{id:e.id,query:l.query,...u.success}}),cC=e$("commerce/querySuggest/register",e=>rU(e,{id:rR,count:new tJ({min:0})})),cI=e$("commerce/querySuggest/selectSuggestion",e=>rU(e,{id:rR,expression:rF})),cq=(e,t,r)=>{let{view:n,...a}=t.commerceContext;return{accessToken:t.configuration.accessToken,url:t.configuration.platformUrl,organizationId:t.configuration.organizationId,trackingId:t.configuration.analytics.trackingId,query:t.querySet[e],...a,...t.configuration.analytics.enabled?{clientId:r.clientId}:{},context:{...r.userAgent?{user:{userAgent:r.userAgent}}:{},view:{...n,...r.referrer?{referrer:r.referrer}:{}},capture:t.configuration.analytics.enabled,cart:u6(t.cart),source:rY(t.configuration.analytics)}}};e$("commerce/facets/core/updateNumberOfValues",e=>rU(e,{facetId:rR,numberOfValues:new tJ({required:!0,min:1})})),e$("commerce/facets/core/updateIsFieldExpanded",e=>rU(e,{facetId:rR,isFieldExpanded:new tX({required:!0})}));var ck=e$("commerce/facets/core/clearAll"),cO=(e$("commerce/facets/core/deselectAllValues",e=>rU(e,{facetId:rR})),e$("commerce/facets/core/updateFreezeCurrentValues",e=>rU(e,{facetId:rR,freezeCurrentValues:new tX({required:!0})})),e$("commerce/facets/core/updateAutoSelectionForAll",e=>rU(e,{allow:new tX({required:!0})}))),cx={slotId:rT},cA={...cx,pageSize:new tJ({required:!0,min:0})},cR=(e$("commerce/pagination/setPageSize",e=>rU(e,cA)),{...cx,page:new tJ({required:!0,min:0})}),cE=e$("commerce/pagination/selectPage",e=>rU(e,cR));e$("commerce/pagination/nextPage",e=>rU(e,cx)),e$("commerce/pagination/previousPage",e=>rU(e,cx)),e$("commerce/pagination/registerRecommendationsSlot",e=>rU(e,{slotId:rR}));var cF=e$("commerce/query/update",e=>rU(e,{query:new t3})),cT=e$("commerce/triggers/query/updateIgnore",e=>rU(e,{q:new t3({emptyAllowed:!0,required:!0})})),cD=e$("commerce/triggers/query/applyModification",e=>rU(e,new t6({values:{originalQuery:rE,modification:rE}})));function cj(e,t,r,n){if(void 0===e)return{};let a=Object.entries(e).filter(e=>{let[r]=e;return t(r)}).map(e=>{let[t,{request:n}]=e,a=r(n);return a.length?{[t]:a}:{}}).reduce((e,t)=>({...e,...t}),{});return Object.keys(a).length?{[n]:a}:{}}e_(e=>e[cg].commerceSearch.responseId,e=>e),e_(e=>e.commerceSearch.responseId,e=>e),e_(e=>e.commerceSearch.requestId,e=>e);var cM=e_(e=>{var t;return(null==(t=e.commerceSearch)?void 0:t.products.length)||0},e=>e),cP=e_(e=>({total:ch(e),current:cM(e)}),e=>{let{current:t,total:r}=e;return t<r}),cU=(e_(e=>{var t;return null==(t=e.commerceSearch)?void 0:t.isLoading},e=>!tK(e)&&e),e_(e=>{var t;return null==(t=e.commerceSearch)?void 0:t.error},e=>null!=e?e:null),e_(e=>{var t;return null==(t=e.commerceQuery)?void 0:t.query},e=>null!=e?e:"")),c_=(e_(e=>{var t;return null==(t=e.commerceSearch)?void 0:t.queryExecuted},e=>e),(e,t)=>{var r;return tK(null==(r=t.queryCorrection)?void 0:r.correctedQuery)?cU(e):t.queryCorrection.correctedQuery}),cV=class{async process(e){var t,r,n;return null!=(n=null!=(r=null!=(t=this.processQueryErrorOrContinue(e))?t:await this.processQueryCorrectionsOrContinue(e))?r:await this.processQueryTriggersOrContinue(e))?n:this.processSuccessResponse(e)}async fetchFromAPI(e){let t=new Date().getTime();return{response:await this.extra.apiClient.search(e),duration:new Date().getTime()-t,queryExecuted:this.getState().commerceQuery.query||"",requestExecuted:e}}processSuccessResponse(e){return{...e,response:this.getSuccessResponse(e),originalQuery:this.getCurrentQuery()}}processQueryErrorOrContinue(e){return cf(e.response)?this.rejectWithValue(e.response.error):null}async processQueryCorrectionsOrContinue(e){let t=this.getState(),r=this.getSuccessResponse(e);if(!r||!t.didYouMean)return null;let{queryCorrection:n}=r;if(!(!tK(n)&&!tK(n.correctedQuery)))return null;let{correctedQuery:a,originalQuery:i}=r.queryCorrection;return this.onUpdateQueryForCorrection(a),{...e,response:{...r},queryExecuted:c_(t,r),originalQuery:i}}async processQueryTriggersOrContinue(e){var t,r;let n=this.getSuccessResponse(e);if(!n)return null;let a=(null==(t=n.triggers.find(e=>"query"===e.type))?void 0:t.content)||"";if(!a)return null;if((null==(r=this.getState().triggers)?void 0:r.queryModification.queryToIgnore)===a)return this.dispatch(cT({q:""})),null;let i=this.getCurrentQuery(),o=await this.automaticallyRetryQueryWithTriggerModification(a);return cf(o.response)?this.rejectWithValue(o.response.error):{...o,response:{...o.response.success},originalQuery:i}}async automaticallyRetryQueryWithTriggerModification(e){return this.dispatch(cD({newQuery:e,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(e),await this.fetchFromAPI({...u9(this.getState(),this.navigatorContext),query:e})}get dispatch(){return this.config.dispatch}get rejectWithValue(){return this.config.rejectWithValue}getState(){return this.config.getState()}get navigatorContext(){return this.config.extra.navigatorContext}getCurrentQuery(){let e=this.getState();return void 0!==e.commerceQuery.query?e.commerceQuery.query:""}getSuccessResponse(e){return cf(e.response)?null:e.response.success}get extra(){return this.config.extra}onUpdateQueryForCorrection(e){this.dispatch(cF({query:e}))}constructor(e){this.config=e}},cQ=tl("commerce/search/executeSearch",async(e,t)=>{let{getState:r}=t,n=r(),{navigatorContext:a}=t.extra,i=u9(n,a),o=cU(n),s=new cV(t),l=await s.fetchFromAPI({...i,query:o});return s.process(l)}),cL=(tl("commerce/search/fetchMoreProducts",async(e,t)=>{let{getState:r}=t,n=r(),{navigatorContext:a}=t.extra;if(!cP(n))return null;let i=cp(n),o=cM(n)/i,s=cU(n),l=u9(n,a),u=new cV(t),c=await u.fetchFromAPI({...l,query:s,page:o});return u.process(c)}),tl("commerce/search/prepareForSearchWithQuery",(e,t)=>{let{dispatch:r}=t;rU(e,{query:new t3,clearFilters:new tX}),e.clearFilters&&(r(ck()),r(i5())),r(cO({allow:!0})),r(cF({query:e.query})),r(cE({page:0}))}),tl("commerce/search/fetchInstantProducts",async(e,t)=>{let{getState:r,rejectWithValue:n,extra:a}=t,i=r(),{apiClient:o,navigatorContext:s}=a,{q:l}=e,u=await o.productSuggestions({...u9(i,s),query:l});if(cf(u))return n(u.error);let c=u.success.products.slice(0,5);return{response:{...u.success,products:c}}}),{child:new t6({options:{required:!0},values:{permanentid:new t3({required:!0})}})});function cN(e,t,r){let{facetId:n}=t;if(e[n])return;let a={...cJ,...t},i=r();e[n]={options:a,isLoading:!1,response:i,initialNumberOfValues:a.numberOfValues,requestId:""}}function cz(e,t){let{facetId:r,...n}=t,a=e[r];a&&(a.options={...a.options,...n})}function c$(e,t,r){let n=e[t];n&&(n.requestId=r,n.isLoading=!0)}function cB(e,t){let r=e[t];r&&(r.isLoading=!1)}function cH(e,t,r){let{facetId:n,response:a}=t,i=e[n];i&&i.requestId===r&&(i.isLoading=!1,i.response=a)}function cY(e,t,r){let{facetId:n,response:a}=t,i=e[n];i&&i.requestId===r&&(i.isLoading=!1,"success"in a&&(i.response=a.success))}function cW(e,t,r,n){let{facetId:a,response:i}=t,o=cd(a),s=e[o];if(s){if(s.requestId!==r)return}else cN(e,{facetId:o},n),s=e[o];s.isLoading=!1,"success"in i&&(s.response=i.success)}function cG(e,t,r){let{facetId:n}=t,a=e[n];a&&(a.requestId="",a.isLoading=!1,a.response=r(),a.options.numberOfValues=a.initialNumberOfValues,a.options.query=cJ.query)}function cK(e,t){Object.keys(e).forEach(r=>cG(e,{facetId:r},t))}e$("commerce/search/promoteChildToParent",e=>rU(e,cL));var cJ={captions:{},numberOfValues:10,query:""},cZ=async(e,t,r,n)=>{let a=t.categoryFacetSearchSet[e].options,i=t.categoryFacetSet[e].request,{captions:o,query:s,numberOfValues:l}=a,{field:u,delimitingCharacter:c,basePath:d,filterFacetCount:f}=i,p=cX(i),h=p.length?[p]:[];return{url:t.configuration.search.apiBaseUrl,accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")},basePath:d,captions:o,numberOfValues:l,query:"*".concat(s,"*"),field:u,delimitingCharacter:c,ignorePaths:h,filterFacetCount:f,type:"hierarchical",...n?{}:{searchContext:(await sg(t,r)).request}}},cX=e=>{let t=[],r=e.currentValues[0];for(;r;)t.push(r.value),r=r.children[0];return t},c0=async(e,t,r,n)=>{let{captions:a,query:i,numberOfValues:o}=t.facetSearchSet[e].options,{field:s,currentValues:l,filterFacetCount:u}=t.facetSet[e].request,c=l.filter(e=>"idle"!==e.state).map(e=>e.value);return{url:t.configuration.search.apiBaseUrl,accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,...t.configuration.search.authenticationProviders&&{authentication:t.configuration.search.authenticationProviders.join(",")},captions:a,numberOfValues:o,query:"*".concat(i,"*"),field:s,ignoreValues:c,filterFacetCount:u,type:"specific",...n?{}:{searchContext:(await sg(t,r)).request}}},c1=e=>async(t,r)=>{let{getState:n,extra:{apiClient:a,validatePayload:i,navigatorContext:o}}=r,s=n(),l;return i(t,rR),l=c6(s,t)?await c0(t,s,o,e):await cZ(t,s,o,e),{facetId:t,response:await a.facetSearch(l)}},c2=tl("facetSearch/executeSearch",c1(!1)),c3=tl("facetSearch/executeSearch",c1(!0)),c5=e$("facetSearch/clearResults",e=>rU(e,{facetId:rR})),c6=(e,t)=>void 0!==e.facetSearchSet&&void 0!==e.facetSet&&void 0!==e.facetSet[t],c4={facetId:rR,value:new t6({values:{displayValue:rF,rawValue:rF,count:new tJ({required:!0,min:0})}})},c8=e$("facetSearch/register",e=>rU(e,u_)),c9=e$("facetSearch/update",e=>rU(e,u_)),c7=e$("facetSearch/toggleSelectValue",e=>rU(e,c4)),de=e$("facetSearch/toggleExcludeValue",e=>rU(e,c4));function dt(){return{moreValuesAvailable:!1,values:[]}}e2({},e=>{e.addCase(uL,(e,t)=>{cN(e,t.payload,dt)}).addCase(c9,(e,t)=>{cz(e,t.payload)}).addCase(ci.pending,(e,t)=>{let{facetId:r}=t.meta.arg;c$(e,r,t.meta.requestId)}).addCase(co.pending,(e,t)=>{let{facetId:r}=t.meta.arg;c$(e,r,t.meta.requestId)}).addCase(c2.pending,(e,t)=>{c$(e,t.meta.arg,t.meta.requestId)}).addCase(ci.rejected,(e,t)=>{let{facetId:r}=t.meta.arg;cB(e,r)}).addCase(co.rejected,(e,t)=>{let{facetId:r}=t.meta.arg;cB(e,cd(r))}).addCase(c2.rejected,(e,t)=>{cB(e,t.meta.arg)}).addCase(ci.fulfilled,(e,t)=>{cY(e,t.payload,t.meta.requestId)}).addCase(co.fulfilled,(e,t)=>{cW(e,t.payload,t.meta.requestId,dt)}).addCase(cb.fulfilled,(e,t)=>{!function(e,t,r,n){if(t.fieldSuggestionsFacets)for(let i of t.fieldSuggestionsFacets){var a;let o=cd(i.facetId);o in e||"hierarchical"!==i.type||(e[o]={options:{...cJ,query:null!=(a=t.query)?a:""},isLoading:!1,response:n(),initialNumberOfValues:cJ.numberOfValues,requestId:r})}}(e,t.payload,t.meta.requestId,dt)}).addCase(c2.fulfilled,(e,t)=>{cH(e,t.payload,t.meta.requestId)}).addCase(c5,(e,t)=>{let{payload:{facetId:r}}=t;cG(e,{facetId:r},dt)}).addCase(cv.fulfilled,e=>cK(e,dt)).addCase(cQ.fulfilled,e=>cK(e,dt)).addCase(sS.fulfilled,e=>{cK(e,dt)})});var dr=e=>iy("analytics/facet/reset",(t,r)=>{rU(e,rR);let n=aQ(e,aN(r));return t.makeFacetClearAll(n)}),dn=e=>iy("analytics/facet/select",(t,r)=>{rU(e,{facetId:rR,facetValue:rR});let n=aL(e,aN(r));return t.makeFacetSelect(n)}),da=e=>iy("analytics/facet/exclude",(t,r)=>{rU(e,{facetId:rR,facetValue:rR});let n=aL(e,aN(r));return t.makeFacetExclude(n)}),di=e=>iy("analytics/facet/deselect",(t,r)=>{rU(e,{facetId:rR,facetValue:rR});let n=aL(e,aN(r));return t.makeFacetDeselect(n)}),ds=e=>iy("analytics/facet/unexclude",(t,r)=>{rU(e,{facetId:rR,facetValue:rR});let n=aL(e,aN(r));return t.makeFacetUnexclude(n)}),dl=()=>({actionCause:"facetClearAll"}),du=()=>({actionCause:"facetSelect"}),dc=()=>({actionCause:"facetExclude"}),dd=()=>({actionCause:"facetDeselect"}),df=()=>({actionCause:"facetUnexclude"}),dp=(e,t)=>{var r,n;return null==(n=null==(r=e.facetOptions.facets[t])?void 0:r.enabled)||n},dh=new t3({regex:/^[a-zA-Z0-9-_]+$/}),dg=new t3({required:!0}),dy=new t8({each:new t3}),dm=new t3,dv=new tX,dw=new tX,dS=new tJ({min:0}),db=new tJ({min:1}),dC=new tX({required:!0}),dI=new t6,dq=new t6({values:{captions:dI,numberOfValues:db,query:new t3}}),dk=new t6({options:{required:!1},values:{type:new t3({constrainTo:["simple"],emptyAllowed:!1,required:!0}),values:new t8({required:!0,max:25,each:new t3({emptyAllowed:!1,required:!0})})}}),dO=new tX,dx=new t8({min:1,max:25,required:!1,each:new t3({emptyAllowed:!1,required:!0})}),dA={value:rR,numberOfResults:new tJ({min:0}),state:rR},dR={facetId:rR,field:new t3({required:!0,emptyAllowed:!0}),filterFacetCount:new tX({required:!1}),injectionDepth:new tJ({required:!1,min:0}),numberOfValues:new tJ({required:!1,min:1}),sortCriteria:new tW({required:!1}),resultsMustMatch:new tW({required:!1}),allowedValues:dk,customSort:dx},dE=e$("facet/register",e=>rU(e,dR)),dF=e$("facet/toggleSelectValue",e=>rU(e,{facetId:rR,selection:new t6({values:dA})})),dT=e$("facet/toggleExcludeValue",e=>rU(e,{facetId:rR,selection:new t6({values:dA})})),dD=e$("facet/deselectAll",e=>rU(e,rR)),dj=e$("facet/updateSortCriterion",e=>rU(e,{facetId:rR,criterion:new tW({required:!0})})),dM=e$("facet/updateNumberOfValues",e=>rU(e,{facetId:rR,numberOfValues:new tJ({required:!0,min:1})})),dP=e$("facet/updateIsFieldExpanded",e=>rU(e,{facetId:rR,isFieldExpanded:new tX({required:!0})})),dU=e$("facet/updateFreezeCurrentValues",e=>rU(e,{facetId:rR,freezeCurrentValues:new tX({required:!0})}));function d_(e){var t,r;return{start:dV(e.start,e),end:dV(e.end,e),endInclusive:null!=(t=e.endInclusive)&&t,state:null!=(r=e.state)?r:"idle"}}function dV(e,t){let{dateFormat:r}=t;return e&&"object"==typeof e&&"period"in e?(oF(e),function(e){let{period:t,amount:r,unit:n}=e;switch(t){case"past":case"next":return"".concat(t,"-").concat(r,"-").concat(n);case"now":return t}}(e)):"string"==typeof e&&oM(e)?(oF(e),e):(oO(e,r),ok(oq(e,r)))}var dQ=e$("rangeFacet/updateSortCriterion",e=>rU(e,{facetId:rR,criterion:new tW({required:!0})})),dL={state:rR,start:new tJ({required:!0}),end:new tJ({required:!0}),endInclusive:new tX({required:!0}),numberOfResults:new tJ({required:!0,min:0})},dN={start:rR,end:rR,endInclusive:new tX({required:!0}),state:rR,numberOfResults:new tJ({required:!0,min:0})},dz=e=>({facetId:rR,selection:new t6("string"==typeof e.start?{values:dN}:{values:dL})}),d$={start:rR,end:rR,endInclusive:new tX({required:!0}),state:rR},dB={facetId:rR,field:rR,currentValues:new t8({required:!1,each:new t6({values:d$})}),generateAutomaticRanges:new tX({required:!0}),filterFacetCount:new tX({required:!1}),injectionDepth:new tJ({required:!1,min:0}),numberOfValues:new tJ({required:!1,min:1}),sortCriteria:new tW({required:!1}),rangeAlgorithm:new tW({required:!1})};function dH(e){e.currentValues&&e.currentValues.forEach(e=>{let{start:t,end:r}=d_(e);if(oq(oM(t)?oD(t):t).isAfter(oq(oM(r)?oD(r):r)))throw Error("The start value is greater than the end value for the date range ".concat(e.start," to ").concat(e.end))})}var dY=e$("dateFacet/register",e=>{try{return rP(e,dB),dH(e),{payload:e,error:null}}catch(t){return{payload:e,error:rM(t)}}}),dW=e$("dateFacet/toggleSelectValue",e=>rU(e,{facetId:rR,selection:new t6({values:dN})})),dG=e$("dateFacet/toggleExcludeValue",e=>rU(e,{facetId:rR,selection:new t6({values:dN})})),dK=e$("dateFacet/updateFacetValues",e=>{try{return rP(e,{facetId:rR,values:new t8({each:new t6({values:dN})})}),dH({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:rM(t)}}}),dJ={state:rR,start:new tJ({required:!0}),end:new tJ({required:!0}),endInclusive:new tX({required:!0})},dZ={facetId:rR,field:rR,currentValues:new t8({required:!1,each:new t6({values:dJ})}),generateAutomaticRanges:new tX({required:!0}),filterFacetCount:new tX({required:!1}),injectionDepth:new tJ({required:!1,min:0}),numberOfValues:new tJ({required:!1,min:1}),sortCriteria:new tW({required:!1}),rangeAlgorithm:new tW({required:!1})};function dX(e){e.currentValues&&e.currentValues.forEach(e=>{let{start:t,end:r}=e;if(t>r)throw Error("The start value is greater than the end value for the numeric range ".concat(t," to ").concat(r))})}var d0=e$("numericFacet/register",e=>{try{return rU(e,dZ),dX(e),{payload:e,error:null}}catch(t){return{payload:e,error:rM(t)}}}),d1=e$("numericFacet/toggleSelectValue",e=>rU(e,{facetId:rR,selection:new t6({values:dL})})),d2=e$("numericFacet/toggleExcludeValue",e=>rU(e,{facetId:rR,selection:new t6({values:dL})})),d3=e$("numericFacet/updateFacetValues",e=>{try{return rP(e,{facetId:rR,values:new t8({each:new t6({values:dL})})}),dX({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:rM(t)}}});function d5(e){let{facetSet:t,numericFacetSet:r,dateFacetSet:n,categoryFacetSet:a}=e;return[t,r,n,a]}e2(oX(),e=>{e.addCase(uM,(e,t)=>({...e,...t.payload})).addCase(sS.fulfilled,e=>{e.freezeFacetOrder=!1}).addCase(sS.rejected,e=>{e.freezeFacetOrder=!1}).addCase(iZ.fulfilled,(e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.facetOptions)?n:e}).addCase(uK,(e,t)=>{e.facets[t.payload.facetId]=oZ()}).addCase(dE,(e,t)=>{e.facets[t.payload.facetId]=oZ()}).addCase(dY,(e,t)=>{e.facets[t.payload.facetId]=oZ()}).addCase(d0,(e,t)=>{e.facets[t.payload.facetId]=oZ()}).addCase(uP,(e,t)=>{e.facets[t.payload].enabled=!0}).addCase(uU,(e,t)=>{e.facets[t.payload].enabled=!1}).addCase(i$,(e,t)=>{var r,n,a,i,o;[...Object.keys(null!=(r=t.payload.f)?r:{}),...Object.keys(null!=(n=t.payload.fExcluded)?n:{}),...Object.keys(null!=(a=t.payload.cf)?a:{}),...Object.keys(null!=(i=t.payload.nf)?i:{}),...Object.keys(null!=(o=t.payload.df)?o:{})].forEach(t=>{t in e||(e.facets[t]=oZ()),e.facets[t].enabled=!0})})});function d6(e,t){let r=e.dispatch,{options:n,getFacetSearch:a,executeFacetSearchActionCreator:i,executeFieldSuggestActionCreator:o}=t,{facetId:s}=n;return{updateText(e){r(c9({facetId:s,query:e,numberOfValues:a().initialNumberOfValues}))},showMoreResults(){let{initialNumberOfValues:e,options:n}=a();r(c9({facetId:s,numberOfValues:n.numberOfValues+e})),r(t.isForFieldSuggestions?o(s):i(s))},search(){r(t.isForFieldSuggestions?o(s):i(s))},clear(){r(c5({facetId:s}))},updateCaptions(e){r(c9({facetId:s,captions:e}))},get state(){let{response:e,isLoading:t,options:r}=a(),{query:n}=r,i=e.values;return{...e,values:i,isLoading:t,query:n}}}}new tY({field:dg,basePath:dy,delimitingCharacter:dm,facetId:dh,facetSearch:dq,filterByBasePath:dv,filterFacetCount:dw,injectionDepth:dS,numberOfValues:db,sortCriteria:new t3({constrainTo:["alphanumeric","occurrences"]})});var d4=new t3({required:!0,emptyAllowed:!1,constrainTo:Intl.supportedValuesOf("currency")}),d8={url:rR},d9={language:rR,country:rR,currency:d4,view:new t6({options:{required:!0},values:d8})};new tY(d9),e$("commerce/context/set",e=>rU(e,d9));var d7=e$("commerce/context/setView",e=>rU(e,d8));function fe(){return{moreValuesAvailable:!1,values:[]}}e2({},e=>{e.addCase(c8,(e,t)=>{cN(e,t.payload,fe)}).addCase(c9,(e,t)=>{cz(e,t.payload)}).addCase(ci.pending,(e,t)=>{let{facetId:r}=t.meta.arg;c$(e,r,t.meta.requestId)}).addCase(co.pending,(e,t)=>{let{facetId:r}=t.meta.arg;c$(e,cd(r),t.meta.requestId)}).addCase(c2.pending,(e,t)=>{c$(e,t.meta.arg,t.meta.requestId)}).addCase(ci.rejected,(e,t)=>{let{facetId:r}=t.meta.arg;cB(e,r)}).addCase(co.rejected,(e,t)=>{let{facetId:r}=t.meta.arg;cB(e,cd(r))}).addCase(c2.rejected,(e,t)=>{cB(e,t.meta.arg)}).addCase(ci.fulfilled,(e,t)=>{cY(e,t.payload,t.meta.requestId)}).addCase(co.fulfilled,(e,t)=>{cW(e,t.payload,t.meta.requestId,fe)}).addCase(cb.fulfilled,(e,t)=>{!function(e,t,r,n){var a;if(t.fieldSuggestionsFacets)for(let i of t.fieldSuggestionsFacets)i.facetId in e||"regular"!==i.type||(e[i.facetId]={options:{...cJ,query:null!=(a=t.query)?a:""},isLoading:!1,response:n(),initialNumberOfValues:cJ.numberOfValues,requestId:r})}(e,t.payload,t.meta.requestId,fe)}).addCase(c2.fulfilled,(e,t)=>{cH(e,t.payload,t.meta.requestId)}).addCase(c5,(e,t)=>{let{payload:r}=t;cG(e,r,fe)}).addCase(sS.fulfilled,e=>{cK(e,fe)}).addCase(cv.fulfilled,e=>cK(e,fe)).addCase(cQ.fulfilled,e=>cK(e,fe)).addCase(d7,e=>cK(e,fe))});var ft=()=>im("analytics/productListing/load",e=>e.makeInterfaceLoad(),e=>new a9(e));e$("productlisting/setUrl",e=>rU(e,{url:new t3({required:!0,url:!0})})),e$("productlisting/setAdditionalFields",e=>rU(e,{additionalFields:new t8({required:!0,each:new t3({required:!0,emptyAllowed:!1})})}));var fr=tl("productlisting/fetch",async(e,t)=>{let{getState:r,dispatch:n,rejectWithValue:a,extra:i}=t,o=r(),{apiClient:s}=i,l=await s.getProducts(await fn(o));return cf(l)?(n(ov(l.error)),a(l.error)):{response:l.success,analyticsAction:ft()}}),fn=async e=>{var t,r,n;let a=function(e){var t,r,n,a,i,o;return o8([...o4(null!=(n=(r=e).facetSet)?n:{}),...o4(null!=(a=r.numericFacetSet)?a:{}),...o4(null!=(i=r.dateFacetSet)?i:{}),...o4(null!=(o=r.categoryFacetSet)?o:{})],null!=(t=e.facetOrder)?t:[])}(e),i=await ax(e.configuration.analytics);return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,platformUrl:e.configuration.platformUrl,url:null==(t=e.productListing)?void 0:t.url,...e.configuration.analytics.enabled&&i?{clientId:i}:{},...(null==(r=e.productListing.additionalFields)?void 0:r.length)?{additionalFields:e.productListing.additionalFields}:{},...e.productListing.advancedParameters&&e.productListing.advancedParameters.debug?{advancedParameters:e.productListing.advancedParameters||{}}:{},...a.length&&{facets:{requests:a}},...e.pagination&&{pagination:{numberOfValues:e.pagination.numberOfResults,page:Math.ceil(e.pagination.firstResult/(e.pagination.numberOfResults||1))+1}},..."relevance"!==((null==(n=e.sort)?void 0:n.by)||"relevance")&&{sort:e.sort},...e.context&&{userContext:e.context.contextValues}}};function fa(e,t){let{currentValues:r}=e,n=r.findIndex(e=>"idle"===e.state),a=-1===n?r.length:n;e.currentValues=[...r.slice(0,a),t,...r.slice(a+1)],e.numberOfValues=e.currentValues.length}function fi(e,t){e&&(e.currentValues=t.values.map(fs),e.freezeCurrentValues=!1,e.preventAutoSelect=!1)}e2({},e=>{e.addCase(dE,(e,t)=>{var r;let{facetId:n}=t.payload;n in e||(e[n]={request:(r=t.payload,{...fo,type:"specific",currentValues:[],freezeCurrentValues:!1,isFieldExpanded:!1,preventAutoSelect:!1,...r}),hasBreadcrumbs:!0})}).addCase(iZ.fulfilled,(e,t)=>{if(t.payload&&0!==Object.keys(t.payload.facetSet).length)return t.payload.facetSet}).addCase(i$,(e,t)=>{let r=t.payload.f||{},n=t.payload.fExcluded||{};Object.keys(e).forEach(t=>{let{request:a}=e[t],i=r[t]||[],o=n[t]||[],s=i.length+o.length,l=a.currentValues.filter(e=>!i.includes(e.value)&&!o.includes(e.value));a.currentValues=[...i.map(fl),...o.map(fu),...l.map(fc)],a.preventAutoSelect=s>0,a.numberOfValues=Math.max(s,a.numberOfValues)})}).addCase(dF,(e,t)=>{var r;let{facetId:n,selection:a}=t.payload,i=null==(r=e[n])?void 0:r.request;if(!i)return;i.preventAutoSelect=!0;let o=i.currentValues.find(e=>e.value===a.value);if(!o)return void fa(i,a);let s="selected"===o.state;o.state=s?"idle":"selected",i.freezeCurrentValues=!0}).addCase(dT,(e,t)=>{var r;let{facetId:n,selection:a}=t.payload,i=null==(r=e[n])?void 0:r.request;if(!i)return;i.preventAutoSelect=!0;let o=i.currentValues.find(e=>e.value===a.value);if(!o)return void fa(i,a);let s="excluded"===o.state;o.state=s?"idle":"excluded",i.freezeCurrentValues=!0}).addCase(dU,(e,t)=>{var r;let{facetId:n,freezeCurrentValues:a}=t.payload,i=null==(r=e[n])?void 0:r.request;i&&(i.freezeCurrentValues=a)}).addCase(dD,(e,t)=>{var r;uz(null==(r=e[t.payload])?void 0:r.request)}).addCase(i3,e=>{Object.values(e).filter(e=>e.hasBreadcrumbs).forEach(e=>{let{request:t}=e;return uz(t)})}).addCase(i5,e=>{Object.values(e).filter(e=>!e.hasBreadcrumbs).forEach(e=>{let{request:t}=e;return uz(t)})}).addCase(i6,(e,t)=>Object.values(e).forEach(e=>{e.request.preventAutoSelect=!t.payload.allow})).addCase(dj,(e,t)=>{uN(e,t.payload)}).addCase(dM,(e,t)=>{var r;let{facetId:n,numberOfValues:a}=t.payload;u$(null==(r=e[n])?void 0:r.request,a)}).addCase(dP,(e,t)=>{var r;let{facetId:n,isFieldExpanded:a}=t.payload,i=null==(r=e[n])?void 0:r.request;i&&(i.isFieldExpanded=a)}).addCase(sS.fulfilled,(e,t)=>{t.payload.response.facets.forEach(t=>{var r;return fi(null==(r=e[t.facetId])?void 0:r.request,t)})}).addCase(fr.fulfilled,(e,t)=>{var r,n;((null==(n=t.payload.response)||null==(r=n.facets)?void 0:r.results)||[]).forEach(t=>{var r;return fi(null==(r=e[t.facetId])?void 0:r.request,t)})}).addCase(sI.fulfilled,(e,t)=>{t.payload.response.facets.forEach(t=>{var r;return fi(null==(r=e[t.facetId])?void 0:r.request,t)})}).addCase(c7,(e,t)=>{var r;let{facetId:n,value:a}=t.payload,i=null==(r=e[n])?void 0:r.request;if(!i)return;let{rawValue:o}=a,{currentValues:s}=i,l=s.find(e=>e.value===o);if(l){l.state="selected";return}fa(i,fl(o)),i.freezeCurrentValues=!0,i.preventAutoSelect=!0}).addCase(de,(e,t)=>{var r;let{facetId:n,value:a}=t.payload,i=null==(r=e[n])?void 0:r.request;if(!i)return;let{rawValue:o}=a,{currentValues:s}=i,l=s.find(e=>e.value===o);if(l){l.state="excluded";return}fa(i,fu(o)),i.freezeCurrentValues=!0,i.preventAutoSelect=!0}).addCase(uU,(e,t)=>{if(!(t.payload in e))return;let{request:r}=e[t.payload];uz(r)})});var fo={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"automatic",resultsMustMatch:"atLeastOneValue"};function fs(e){let{value:t,state:r}=e;return{value:t,state:r}}function fl(e){return{value:e,state:"selected"}}function fu(e){return{value:e,state:"excluded"}}function fc(e){return{...e,state:"idle"}}var fd=e=>"selected"===e.state,ff=e=>"excluded"===e.state,fp={facetId:rR,selection:new t6({values:dA})},fh=(tl("facet/executeToggleSelect",(e,t)=>{let{facetId:r,selection:n}=e,{dispatch:a,extra:{validatePayload:i}}=t;i({facetId:r,selection:n},fp),a(dF({facetId:r,selection:n})),a(uM())}),tl("facet/executeToggleExclude",(e,t)=>{let{facetId:r,selection:n}=e,{dispatch:a,extra:{validatePayload:i}}=t;i({facetId:r,selection:n},fp),a(dT({facetId:r,selection:n})),a(uM())}),["allValues","atLeastOneValue"]),fg=["score","alphanumeric","alphanumericDescending","occurrences","automatic"],fy=(new tY({facetId:dh,field:dg,filterFacetCount:dw,injectionDepth:dS,numberOfValues:db,sortCriteria:new t3({constrainTo:fg}),resultsMustMatch:new t3({constrainTo:fh}),facetSearch:dq}),new tY({facetId:dh,field:dg,filterFacetCount:dw,injectionDepth:dS,numberOfValues:db,sortCriteria:new t3({constrainTo:fg}),resultsMustMatch:new t3({constrainTo:fh}),facetSearch:dq,allowedValues:dk,hasBreadcrumbs:dO,customSort:dx}),e=>"selected"===e.state),fm=e=>"excluded"===e.state,fv=e$("rangeFacet/executeToggleSelect",e=>rU(e,dz(e.selection))),fw=e$("rangeFacet/executeToggleExclude",e=>rU(e,dz(e.selection))),fS={facetId:rR,selection:new t6({values:dN})},fb=(tl("dateFacet/executeToggleSelect",(e,t)=>{let{dispatch:r,extra:{validatePayload:n}}=t;n(e,fS),r(dW(e)),r(fv(e)),r(uM())}),tl("dateFacet/executeToggleExclude",(e,t)=>{let{dispatch:r,extra:{validatePayload:n}}=t;n(e,fS),r(dG(e)),r(fw(e)),r(uM())}),{filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"ascending",rangeAlgorithm:"even",resultsMustMatch:"atLeastOneValue"});function fC(e,t){let{request:r}=t,{facetId:n}=r;if(n in e)return;let a=fE(r);r.numberOfValues=a,e[n]=t}function fI(e,t,r){var n;let a=null==(n=e[t])?void 0:n.request;a&&(a.currentValues=r,a.numberOfValues=fE(a))}function fq(e,t,r){var n;let a=null==(n=e[t])?void 0:n.request;if(!a)return;let i=fR(a.currentValues,r);if(!i)return;let o="selected"===i.state;i.state=o?"idle":"selected",a.preventAutoSelect=!0}function fk(e,t,r){var n;let a=null==(n=e[t])?void 0:n.request;if(!a)return;let i=fR(a.currentValues,r);if(!i)return;let o="excluded"===i.state;i.state=o?"idle":"excluded",a.preventAutoSelect=!0}function fO(e,t){var r;let n=null==(r=e[t])?void 0:r.request;n&&n.currentValues.forEach(e=>e.state="idle")}function fx(e,t){Object.entries(e).forEach(e=>{let[r,{request:n}]=e,a=t[r]||[];n.currentValues.forEach(e=>{let t=!!fR(a,e);return e.state=t?"selected":"idle",e});let i=a.filter(e=>!fR(n.currentValues,e)),o=n.currentValues;o.push(...i),n.numberOfValues=Math.max(n.numberOfValues,o.length)})}function fA(e,t,r){t.forEach(t=>{var n;let a=null==(n=e[t.facetId])?void 0:n.request;a&&(a.currentValues=r(t.values),a.preventAutoSelect=!1)})}function fR(e,t){let{start:r,end:n}=t;return e.find(e=>e.start===r&&e.end===n)}function fE(e){let{generateAutomaticRanges:t,currentValues:r,numberOfValues:n}=e;return t?Math.max(n,r.length):r.length}function fF(e){return e.map(e=>{let{numberOfResults:t,...r}=e;return r})}e2({},e=>{e.addCase(dY,(e,t)=>{var r;let{payload:n}=t;fC(e,{request:(r=n,{...fb,currentValues:[],preventAutoSelect:!1,type:"dateRange",...r})})}).addCase(iZ.fulfilled,(e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.dateFacetSet)?n:e}).addCase(i$,(e,t)=>{fx(e,t.payload.df||{})}).addCase(dW,(e,t)=>{let{facetId:r,selection:n}=t.payload;fq(e,r,n)}).addCase(dG,(e,t)=>{let{facetId:r,selection:n}=t.payload;fk(e,r,n)}).addCase(dK,(e,t)=>{let{facetId:r,values:n}=t.payload;fI(e,r,n)}).addCase(dD,(e,t)=>{fO(e,t.payload)}).addCase(i3,e=>{Object.keys(e).forEach(t=>{fO(e,t)})}).addCase(dQ,(e,t)=>{uN(e,t.payload)}).addCase(sS.fulfilled,(e,t)=>{fA(e,t.payload.response.facets,fF)}).addCase(fr.fulfilled,(e,t)=>{var r,n;fA(e,(null==(n=t.payload.response)||null==(r=n.facets)?void 0:r.results)||[],fF)}).addCase(uU,(e,t)=>{fO(e,t.payload)})});var fT=["idle","selected","excluded"],fD=["ascending","descending"],fj=["even","equiprobable"],fM=new tY({facetId:dh,field:dg,generateAutomaticRanges:dC,filterFacetCount:dw,injectionDepth:dS,numberOfValues:db,currentValues:new t8({each:new t6({values:{start:new t3,end:new t3,endInclusive:new tX,state:new t3({constrainTo:fT})}})}),sortCriteria:new t3({constrainTo:fD}),rangeAlgorithm:new t3({constrainTo:fj})});function fP(e){return e.map(e=>{let{numberOfResults:t,...r}=e;return r})}e2({},e=>{e.addCase(d0,(e,t)=>{var r;let{payload:n}=t;fC(e,{request:(r=n,{...fb,currentValues:[],preventAutoSelect:!1,type:"numericalRange",...r})})}).addCase(iZ.fulfilled,(e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.numericFacetSet)?n:e}).addCase(i$,(e,t)=>{fx(e,t.payload.nf||{})}).addCase(d1,(e,t)=>{let{facetId:r,selection:n}=t.payload;fq(e,r,n)}).addCase(d2,(e,t)=>{let{facetId:r,selection:n}=t.payload;fk(e,r,n)}).addCase(d3,(e,t)=>{let{facetId:r,values:n}=t.payload;fI(e,r,n)}).addCase(dD,(e,t)=>{fO(e,t.payload)}).addCase(i3,e=>{Object.keys(e).forEach(t=>{fO(e,t)})}).addCase(dQ,(e,t)=>{uN(e,t.payload)}).addCase(sS.fulfilled,(e,t)=>{fA(e,t.payload.response.facets,fP)}).addCase(fr.fulfilled,(e,t)=>{var r,n;fA(e,(null==(n=t.payload.response)||null==(r=n.facets)?void 0:r.results)||[],fP)}).addCase(uU,(e,t)=>{fO(e,t.payload)})});var fU={facetId:rR,selection:new t6({values:dL})};tl("numericFacet/executeToggleSelect",(e,t)=>{let{dispatch:r,extra:{validatePayload:n}}=t;n(e,fU),r(d1(e)),r(fv(e)),r(uM())}),tl("numericFacet/executeToggleExclude",(e,t)=>{let{dispatch:r,extra:{validatePayload:n}}=t;n(e,fU),r(d2(e)),r(fw(e)),r(uM())});var f_=new tY({facetId:dh,field:dg,generateAutomaticRanges:dC,filterFacetCount:dw,injectionDepth:dS,numberOfValues:db,currentValues:new t8({each:new t6({values:{start:new tJ,end:new tJ,endInclusive:new tX,state:new t3({constrainTo:fT})}})}),sortCriteria:new t3({constrainTo:fD}),resultsMustMatch:new t3({constrainTo:fh}),rangeAlgorithm:new t3({constrainTo:fj})}),fV=(e,t)=>{let r=aD(e,t);if(function(e,t){return!!t&&t.facetId in e.numericFacetSet}(e,r))return r},fQ=(e,t)=>{let r=aD(e,t);if(function(e,t){return!!t&&t.facetId in e.dateFacetSet}(e,r))return r},fL={f:new t6,cf:new t6,nf:new t6,mnf:new t6,df:new t6,sortCriteria:new t6,page:new tJ({min:0}),perPage:new tJ({min:1})},fN=e$("commerce/productListingParameters/restore",e=>rU(e,fL)),fz={q:new t3,...fL},f$=e$("commerce/searchParameters/restore",e=>rU(e,fz));function fB(e,t){return t.payload.response.facets.map(e=>e.facetId)}function fH(e,t){var r,n,a,i,o;return[...Object.keys(null!=(r=t.payload.f)?r:{}),...Object.keys(null!=(n=t.payload.nf)?n:{}),...Object.keys(null!=(a=t.payload.df)?a:{}),...Object.keys(null!=(i=t.payload.cf)?i:{}),...Object.keys(null!=(o=t.payload.mnf)?o:{})]}e2([],e=>{e.addCase(sS.fulfilled,fB).addCase(cv.fulfilled,fB).addCase(cQ.fulfilled,fB).addCase(f$,fH).addCase(fN,fH).addCase(iZ.fulfilled,(e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.facetOrder)?n:e})});var fY=e=>({past:[],present:e,future:[]}),fW=e=>{let{past:t,present:r,future:n}=e;if(!r||0===t.length)return e;let a=t[t.length-1];return{past:t.slice(0,t.length-1),present:a,future:[r,...n]}},fG=e=>{let{past:t,present:r,future:n}=e;return r&&0!==n.length?{past:[...t,r],present:n[0],future:n.slice(1)}:e},fK=e=>{let{action:t,state:r,reducer:n}=e,{past:a,present:i}=r,o=n(i,t);return i?i===o?r:{past:[...a,i].slice(-10),present:o,future:[]}:fY(o)},fJ=Object.getOwnPropertyNames,fZ=Object.getOwnPropertySymbols,fX=Object.prototype.hasOwnProperty;function f0(e,t){return function(r,n,a){return e(r,n,a)&&t(r,n,a)}}function f1(e){return function(t,r,n){if(!t||!r||"object"!=typeof t||"object"!=typeof r)return e(t,r,n);var a=n.cache,i=a.get(t),o=a.get(r);if(i&&o)return i===r&&o===t;a.set(t,r),a.set(r,t);var s=e(t,r,n);return a.delete(t),a.delete(r),s}}function f2(e){return fJ(e).concat(fZ(e))}var f3=Object.hasOwn||function(e,t){return fX.call(e,t)};function f5(e,t){return e||t?e===t:e===t||e!=e&&t!=t}var f6="_owner",f4=Object.getOwnPropertyDescriptor,f8=Object.keys;function f9(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function f7(e,t){return f5(e.getTime(),t.getTime())}function pe(e,t,r){if(e.size!==t.size)return!1;for(var n,a,i={},o=e.entries(),s=0;(n=o.next())&&!n.done;){for(var l=t.entries(),u=!1,c=0;(a=l.next())&&!a.done;){var d=n.value,f=d[0],p=d[1],h=a.value,g=h[0],y=h[1];!u&&!i[c]&&(u=r.equals(f,g,s,c,e,t,r)&&r.equals(p,y,f,g,e,t,r))&&(i[c]=!0),c++}if(!u)return!1;s++}return!0}function pt(e,t,r){var n,a=f8(e),i=a.length;if(f8(t).length!==i)return!1;for(;i-- >0;)if((n=a[i])===f6&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!f3(t,n)||!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function pr(e,t,r){var n,a,i,o=f2(e),s=o.length;if(f2(t).length!==s)return!1;for(;s-- >0;)if((n=o[s])===f6&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!f3(t,n)||!r.equals(e[n],t[n],n,n,e,t,r)||(a=f4(e,n),i=f4(t,n),(a||i)&&(!a||!i||a.configurable!==i.configurable||a.enumerable!==i.enumerable||a.writable!==i.writable)))return!1;return!0}function pn(e,t){return f5(e.valueOf(),t.valueOf())}function pa(e,t){return e.source===t.source&&e.flags===t.flags}function pi(e,t,r){if(e.size!==t.size)return!1;for(var n,a,i={},o=e.values();(n=o.next())&&!n.done;){for(var s=t.values(),l=!1,u=0;(a=s.next())&&!a.done;)!l&&!i[u]&&(l=r.equals(n.value,a.value,n.value,a.value,e,t,r))&&(i[u]=!0),u++;if(!l)return!1}return!0}function po(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}var ps=Array.isArray,pl="function"==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView:null,pu=Object.assign,pc=Object.prototype.toString.call.bind(Object.prototype.toString);function pd(e){void 0===e&&(e={});var t,r,n,a,i,o,s,l,u,c=e.circular,d=e.createInternalComparator,f=e.createState,p=e.strict,h=(r=(t=function(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,a={areArraysEqual:n?pr:f9,areDatesEqual:f7,areMapsEqual:n?f0(pe,pr):pe,areObjectsEqual:n?pr:pt,arePrimitiveWrappersEqual:pn,areRegExpsEqual:pa,areSetsEqual:n?f0(pi,pr):pi,areTypedArraysEqual:n?pr:po};if(r&&(a=pu({},a,r(a))),t){var i=f1(a.areArraysEqual),o=f1(a.areMapsEqual),s=f1(a.areObjectsEqual),l=f1(a.areSetsEqual);a=pu({},a,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:s,areSetsEqual:l})}return a}(e)).areArraysEqual,n=t.areDatesEqual,a=t.areMapsEqual,i=t.areObjectsEqual,o=t.arePrimitiveWrappersEqual,s=t.areRegExpsEqual,l=t.areSetsEqual,u=t.areTypedArraysEqual,function(e,t,c){if(e===t)return!0;if(null==e||null==t||"object"!=typeof e||"object"!=typeof t)return e!=e&&t!=t;var d=e.constructor;if(d!==t.constructor)return!1;if(d===Object)return i(e,t,c);if(ps(e))return r(e,t,c);if(null!=pl&&pl(e))return u(e,t,c);if(d===Date)return n(e,t,c);if(d===RegExp)return s(e,t,c);if(d===Map)return a(e,t,c);if(d===Set)return l(e,t,c);var f=pc(e);return"[object Date]"===f?n(e,t,c):"[object RegExp]"===f?s(e,t,c):"[object Map]"===f?a(e,t,c):"[object Set]"===f?l(e,t,c):"[object Object]"===f?"function"!=typeof e.then&&"function"!=typeof t.then&&i(e,t,c):"[object Arguments]"===f?i(e,t,c):("[object Boolean]"===f||"[object Number]"===f||"[object String]"===f)&&o(e,t,c)}),g=d?d(h):function(e,t,r,n,a,i,o){return h(e,t,o)};return function(e){var t=e.circular,r=e.comparator,n=e.createState,a=e.equals,i=e.strict;if(n)return function(e,o){var s=n(),l=s.cache;return r(e,o,{cache:void 0===l?t?new WeakMap:void 0:l,equals:a,meta:s.meta,strict:i})};if(t)return function(e,t){return r(e,t,{cache:new WeakMap,equals:a,meta:void 0,strict:i})};var o={cache:void 0,equals:a,meta:void 0,strict:i};return function(e,t){return r(e,t,o)}}({circular:void 0!==c&&c,comparator:h,createState:f,equals:g,strict:void 0!==p&&p})}function pf(e,t){return e.length===t.length&&e.every(e=>-1!==t.findIndex(t=>ph(e,t)))}pd(),pd({strict:!0}),pd({circular:!0}),pd({circular:!0,strict:!0}),pd({createInternalComparator:function(){return f5}}),pd({strict:!0,createInternalComparator:function(){return f5}}),pd({circular:!0,createInternalComparator:function(){return f5}}),pd({circular:!0,createInternalComparator:function(){return f5},strict:!0});var pp=(e,t)=>{let r=new Set(e),n=new Set(t);if(r.size!==n.size)return!1;if(1===r.size)return e[0]===t[0];if(function(e,t){let r=new Set([...e,...t]);return r.size===e.size&&r.size===t.size}(r,n)){let e=[...n];return![...r].every((t,r)=>e[r]===t)}return!1},ph=pd({createCustomConfig:e=>({...e,areArraysEqual:pf})}),pg=e2(o1({}),e=>{e.addCase(iJ,(e,t)=>py(e,t.payload)?void 0:t.payload)}),py=(e,t)=>pm(e.context,t.context)&&pv(e.dictionaryFieldContext,t.dictionaryFieldContext)&&pA(e.advancedSearchQueries,t.advancedSearchQueries)&&pw(e.tabSet,t.tabSet)&&pb(e.staticFilterSet,t.staticFilterSet)&&pI(e.facetSet,t.facetSet)&&pI(e.dateFacetSet,t.dateFacetSet)&&pI(e.numericFacetSet,t.numericFacetSet)&&pk(e.automaticFacetSet,t.automaticFacetSet)&&pq(e.categoryFacetSet,t.categoryFacetSet)&&pO(e.pagination,t.pagination)&&px(e.query,t.query)&&pR(e,t)&&pE(e.pipeline,t.pipeline)&&pF(e.searchHub,t.searchHub)&&pT(e.facetOrder,t.facetOrder)&&pD(e.debug,t.debug),pm=(e,t)=>JSON.stringify(e.contextValues)===JSON.stringify(t.contextValues),pv=(e,t)=>JSON.stringify(e.contextValues)===JSON.stringify(t.contextValues),pw=(e,t)=>{let r=pS(e),n=pS(t);return(null==r?void 0:r.id)===(null==n?void 0:n.id)},pS=e=>Object.values(e).find(e=>e.isActive),pb=(e,t)=>{for(let[r,n]of Object.entries(t)){if(!e[r])return!1;let t=pC(e[r]),a=pC(n);if(JSON.stringify(t)!==JSON.stringify(a))return!1}return!0},pC=e=>e.values.filter(e=>"idle"!==e.state),pI=(e,t)=>{for(let[r,n]of Object.entries(t)){if(!e[r])return!1;let t=e[r].request.currentValues.filter(e=>"idle"!==e.state),a=n.request.currentValues.filter(e=>"idle"!==e.state);if(JSON.stringify(t)!==JSON.stringify(a))return!1}return!0},pq=(e,t)=>{for(let[n,a]of Object.entries(t)){var r;if(!e[n])return!1;let t=aP(null==(r=e[n])?void 0:r.request.currentValues).map(e=>{let{value:t}=e;return t}),i=aP(null==a?void 0:a.request.currentValues).map(e=>{let{value:t}=e;return t});if(JSON.stringify(t)!==JSON.stringify(i))return!1}return!0},pk=(e,t)=>{for(let[r,n]of Object.entries(t.set)){if(!e.set[r])return!1;let t=e.set[r].response.values.filter(e=>"idle"!==e.state),a=n.response.values.filter(e=>"idle"!==e.state);if(JSON.stringify(t)!==JSON.stringify(a))return!1}return!0},pO=(e,t)=>e.firstResult===t.firstResult&&e.numberOfResults===t.numberOfResults,px=(e,t)=>JSON.stringify(e)===JSON.stringify(t),pA=(e,t)=>JSON.stringify(e)===JSON.stringify(t),pR=(e,t)=>e.sortCriteria===t.sortCriteria,pE=(e,t)=>e===t,pF=(e,t)=>e===t,pT=(e,t)=>(function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(e,t)=>e===t;return e.length===t.length&&-1===e.findIndex((e,n)=>!r(t[n],e))})(e,t),pD=(e,t)=>e===t,pj=((e=>{let{actionTypes:t,reducer:r}=e,n=fY();return})({actionTypes:{redo:iK.type,undo:iG.type,snapshot:iJ.type},reducer:pg}),new tJ({min:1,default:8,required:!1})),pM={desiredCount:new tJ({min:1,max:20,default:5,required:!1}),numberOfValues:pj},pP=e$("automaticFacet/setOptions",e=>rU(e,pM)),pU=e$("automaticFacet/deselectAll",e=>rU(e,rR)),p_=e$("automaticFacet/toggleSelectValue",e=>rU(e,{field:rR,selection:new t6({values:dA})})),pV=e2(o0(),e=>{e.addCase(oi,(e,t)=>{let r=pL(e),n=t.payload;e.defaultNumberOfResults=e.numberOfResults=n,e.firstResult=(r-1)*n}).addCase(oo,(e,t)=>{e.numberOfResults=t.payload,e.firstResult=0}).addCase(lP,e=>{e.firstResult=0}).addCase(os,(e,t)=>{var r;r=t.payload,e.firstResult=(r-1)*e.numberOfResults}).addCase(ol,(e,t)=>{var r;r=t.payload,e.firstResult=(r-1)*e.numberOfResults}).addCase(oc,e=>{let t=Math.max(pL(e)-1,1);e.firstResult=(t-1)*e.numberOfResults}).addCase(ou,e=>{let t=Math.min(pL(e)+1,function(e){let{totalCountFiltered:t,numberOfResults:r}=e;return pz(t,r)}(e));e.firstResult=(t-1)*e.numberOfResults}).addCase(iZ.fulfilled,(e,t)=>{t.payload&&(e.numberOfResults=t.payload.pagination.numberOfResults,e.firstResult=t.payload.pagination.firstResult)}).addCase(i$,(e,t)=>{var r,n;e.firstResult=null!=(r=t.payload.firstResult)?r:e.firstResult,e.numberOfResults=null!=(n=t.payload.numberOfResults)?n:e.defaultNumberOfResults}).addCase(sS.fulfilled,(e,t)=>{let{response:r}=t.payload;e.totalCountFiltered=r.totalCountFiltered}).addCase(fr.fulfilled,(e,t)=>{let{response:r}=t.payload;e.totalCountFiltered=r.pagination.totalCount}).addCase(dD,e=>{pQ(e)}).addCase(dG,e=>{pQ(e)}).addCase(dT,e=>{pQ(e)}).addCase(d2,e=>{pQ(e)}).addCase(de,e=>{pQ(e)}).addCase(dF,e=>{pQ(e)}).addCase(uZ,e=>{pQ(e)}).addCase(uJ,e=>{pQ(e)}).addCase(uQ,e=>{pQ(e)}).addCase(dW,e=>{pQ(e)}).addCase(d1,e=>{pQ(e)}).addCase(i3,e=>{pQ(e)}).addCase(dK,e=>{pQ(e)}).addCase(d3,e=>{pQ(e)}).addCase(c7,e=>{pQ(e)}).addCase(p_,e=>{pQ(e)})});function pQ(e){e.firstResult=o0().firstResult}function pL(e){let{firstResult:t,numberOfResults:r}=e;return pN(t,r)}function pN(e,t){return Math.round(e/t)+1}function pz(e,t){return Math.ceil(Math.min(e,5e3)/t)}function p$(e){return e.pagination.numberOfResults}var pB=e=>pN(e.pagination.firstResult,p$(e)),pH=e=>pz(e.pagination.totalCountFiltered,p$(e)),pY=(e,t)=>{let r=pB(e),n=pH(e),a=function(e,t){let r=Math.floor(t/2);return{start:e-r,end:e+(t%2==0?r-1:r)}}(r,t);return function(e){let t=[];for(let r=e.start;r<=e.end;++r)t.push(r);return t}(a=function(e,t){let r=Math.max(e.end-t,0);return{start:Math.max(e.start-r,1),end:e.end-r}}(a=function(e){let t=Math.max(1-e.start,0);return{start:e.start+t,end:e.end+t}}(a),n))},pW=()=>iy("analytics/pager/resize",(e,t)=>{var r;return e.makePagerResize({currentResultsPerPage:(null==(r=t.pagination)?void 0:r.numberOfResults)||o0().numberOfResults})}),pG=()=>iy("analytics/pager/number",(e,t)=>e.makePagerNumber({pagerNumber:pB(t)})),pK=()=>iy("analytics/pager/next",(e,t)=>e.makePagerNext({pagerNumber:pB(t)})),pJ=()=>iy("analytics/pager/previous",(e,t)=>e.makePagerPrevious({pagerNumber:pB(t)})),pZ=()=>({actionCause:"browseResults"}),pX=new tY({numberOfPages:new tJ({default:5,min:0})}),p0=new tY({page:new tJ({min:1})});function p1(e){return{build:t=>(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{dispatch:r}=e,n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.addReducers({configuration:lz,pagination:pV}),!1;let r=uS(e),{dispatch:n}=e,a=rV(e,pX,t.options,"buildPager"),i=r_(e,p0,t.initialState,"buildPager").page;i&&n(os(i));let o=()=>pB(e.state),s=()=>{let{numberOfPages:t}=a;return pY(e.state,t)},l=()=>pH(e.state);return{...r,get state(){let e=o(),t=l();return{currentPage:e,currentPages:s(),maxPage:t,hasPreviousPage:e>1&&t>0,hasNextPage:e<t}},selectPage(e){n(ol(e))},nextPage(){n(ou())},previousPage(){n(oc())},isCurrentPage(e){return e===this.state.currentPage}}}(e,t);return{...n,get state(){return n.state},selectPage(e){n.selectPage(e),r(sb({legacy:pG(),next:pZ()}))},nextPage(){n.nextPage(),r(sb({legacy:pK(),next:pZ()}))},previousPage(){n.previousPage(),r(sb({legacy:pJ(),next:pZ()}))}}})(t,e)}}function p2(e){e.addReducers({search:sM}),!1;let t=uS(e),r=()=>e.state;return{...t,get state(){let e=r();return{hasError:null!==e.search.error,isLoading:e.search.isLoading,hasResults:!!e.search.results.length,firstSearchExecuted:sF(e)}}}}function p3(){return{build:e=>(function(e){e.addReducers({search:sM,pagination:pV}),!1;let t=uS(e),r=p2(e),n=()=>e.state,a=()=>Math.round((n().search.duration/1e3+Number.EPSILON)*100)/100;return{...t,get state(){return{...r.state,durationInMilliseconds:n().search.duration,durationInSeconds:a(),firstResult:n().pagination.firstResult+1,hasDuration:0!==n().search.duration,hasQuery:""!==n().search.queryExecuted,lastResult:n().pagination.firstResult+n().search.results.length,query:n().search.queryExecuted,total:n().pagination.totalCountFiltered}}}})(e)}}var p5=new tY({fieldsToInclude:new t8({required:!1,each:new t3({required:!0,emptyAllowed:!1})})});function p6(e){return{build:t=>(function(e,t){e.addReducers({search:sM,configuration:lz,fields:uw}),!1;let r=uS(e),n=p2(e),{dispatch:a}=e,i=()=>e.state,o=rV(e,p5,null==t?void 0:t.options,"buildCoreResultList");o.fieldsToInclude&&a(uc(o.fieldsToInclude));let s=()=>e.state.search.results.length<e.state.search.response.totalCountFiltered,l=0,u=0,c=!1;return{...r,get state(){let e=i();return{...n.state,results:e.search.results,moreResultsAvailable:s(),searchResponseId:e.search.searchResponseId}},fetchMoreResults:async()=>{if(!e.state.search.isLoading){if(!s())return void e.logger.info("No more results are available for the result list to fetch.");if(Date.now()-l<200){if(++u>=5){l=Date.now(),c||e.logger.error('The result list method "fetchMoreResults" execution prevented because it has been triggered consecutively '.concat(5," times, with little delay. Please verify the conditions under which the function is called.")),c=!0;return}}else u=0;c=!1,(null==t?void 0:t.fetchMoreResultsActionCreator)&&(await a(null==t?void 0:t.fetchMoreResultsActionCreator()),l=Date.now())}}}})(t,{...e,fetchMoreResultsActionCreator:sC})}}new tY({numberOfResults:new tJ({min:0})});var p4={id:rR},p8=e$("querySuggest/register",e=>rU(e,{...p4,count:new tJ({min:0})})),p9=e$("querySuggest/unregister",e=>rU(e,p4)),p7=e$("querySuggest/selectSuggestion",e=>rU(e,{...p4,expression:rF})),he=e$("querySuggest/clear",e=>rU(e,p4)),ht=tl("querySuggest/fetch",async(e,t)=>{let{getState:r,rejectWithValue:n,extra:{apiClient:a,validatePayload:i,navigatorContext:o}}=t;i(e,p4);let s=e.id,l=await hr(s,r(),o),u=await a.querySuggest(l);return rI(u)?n(u.error):{id:s,q:l.q,...u.success}}),hr=async(e,t,r)=>({accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,url:t.configuration.search.apiBaseUrl,count:t.querySuggest[e].count,q:t.querySet[e],locale:t.configuration.search.locale,timezone:t.configuration.search.timezone,actionsHistory:t.configuration.analytics.enabled?aA.getHistory():[],...t.context&&{context:t.context.contextValues},...t.pipeline&&{pipeline:t.pipeline},...t.searchHub&&{searchHub:t.searchHub},tab:t.configuration.analytics.originLevel2,...t.configuration.analytics.enabled&&{visitorId:await ax(t.configuration.analytics),...t.configuration.analytics.enabled&&"legacy"===t.configuration.analytics.analyticsMode?await oh(t.configuration.analytics):of(t.configuration.analytics,r)},...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")}}),hn=()=>iy("analytics/searchbox/submit",e=>e.makeSearchboxSubmit()),ha=()=>({actionCause:"searchboxSubmit"}),hi={id:rR,query:rF},ho=e$("querySet/register",e=>rU(e,hi)),hs=e$("querySet/update",e=>rU(e,hi)),hl=e$("commerce/querySet/register",e=>rU(e,hi)),hu=e$("commerce/querySet/update",e=>rU(e,hi)),hc=e2({},e=>{e.addCase(ho,(e,t)=>hh(e,t.payload)).addCase(hl,(e,t)=>hh(e,t.payload)).addCase(hs,(e,t)=>{let{id:r,query:n}=t.payload;hp(e,r,n)}).addCase(hu,(e,t)=>{let{id:r,query:n}=t.payload;hp(e,r,n)}).addCase(p7,(e,t)=>{let{id:r,expression:n}=t.payload;hp(e,r,n)}).addCase(cI,(e,t)=>{let{id:r,expression:n}=t.payload;hp(e,r,n)}).addCase(cQ.fulfilled,(e,t)=>{let{queryExecuted:r}=t.payload;hf(e,r)}).addCase(sS.fulfilled,(e,t)=>{let{queryExecuted:r}=t.payload;hf(e,r)}).addCase(i$,hd).addCase(f$,hd).addCase(iZ.fulfilled,(e,t)=>{if(t.payload)for(let[r,n]of Object.entries(t.payload.querySet))hp(e,r,n)})});function hd(e,t){tK(t.payload.q)||hf(e,t.payload.q)}function hf(e,t){Object.keys(e).forEach(r=>e[r]=t)}var hp=(e,t,r)=>{t in e&&(e[t]=r)},hh=(e,t)=>{let{id:r,query:n}=t;r in e||(e[r]=n)},hg=e=>iy("analytics/querySuggest",(t,r)=>{let n=function(e,t){let{id:r,suggestion:n}=t,a=e.querySuggest&&e.querySuggest[r];if(!a)throw Error('Unable to determine the query suggest analytics metadata to send because no query suggest with id "'.concat(r,'" was found. Please check the sent #id.'));let i=a.completions.map(e=>e.expression),o=a.partialQueries.length-1,s=a.partialQueries[o]||"",l=a.responseId;return{suggestionRanking:i.indexOf(n),partialQuery:s,partialQueries:a.partialQueries,suggestions:i,querySuggestResponseId:l}}(r,e);return t.makeOmniboxAnalytics(n)}),hy=()=>({actionCause:"omniboxAnalytics"}),hm=e2({},e=>e.addCase(p8,(e,t)=>{hv(e,t.payload)}).addCase(cC,(e,t)=>{hv(e,t.payload)}).addCase(p9,(e,t)=>{delete e[t.payload.id]}).addCase(ht.pending,hw).addCase(ht.fulfilled,(e,t)=>{let r=e[t.meta.arg.id];if(!r||t.meta.requestId!==r.currentRequestId)return;let{q:n}=t.payload;n&&r.partialQueries.push(n.replace(/;/,encodeURIComponent(";"))),r.responseId=t.payload.responseId,r.completions=t.payload.completions,r.isLoading=!1,r.error=null}).addCase(ht.rejected,hS).addCase(cb.pending,hw).addCase(cb.fulfilled,(e,t)=>{let r=e[t.meta.arg.id];if(!r||t.meta.requestId!==r.currentRequestId)return;let{query:n}=t.payload;n&&r.partialQueries.push(n.replace(/;/,encodeURIComponent(";"))),r.responseId=t.payload.responseId,r.completions=t.payload.completions.map(e=>({expression:e.expression,highlighted:e.highlighted,score:0,executableConfidence:0})),r.isLoading=!1,r.error=null}).addCase(cb.rejected,hS).addCase(he,(e,t)=>{hb(e,t.payload)}).addCase(cS,(e,t)=>{hb(e,t.payload)}));function hv(e,t){let r=t.id;r in e||(e[r]={id:"",completions:[],responseId:"",count:5,currentRequestId:"",error:null,partialQueries:[],isLoading:!1,...t})}function hw(e,t){let r=e[t.meta.arg.id];r&&(r.currentRequestId=t.meta.requestId,r.isLoading=!0)}function hS(e,t){let r=e[t.meta.arg.id];r&&(r.error=t.payload||null,r.isLoading=!1)}function hb(e,t){let r=e[t.id];r&&(r.responseId="",r.completions=[],r.partialQueries=[])}var hC=e2(a5(),e=>e.addCase(od,(e,t)=>({...e,...t.payload})).addCase(oH,(e,t)=>{e.q=t.payload}).addCase(p7,(e,t)=>{e.q=t.payload.expression}).addCase(iZ.fulfilled,(e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.query)?n:e}).addCase(i$,(e,t)=>{var r,n;e.q=null!=(r=t.payload.q)?r:e.q,e.enableQuerySyntax=null!=(n=t.payload.enableQuerySyntax)?n:e.enableQuerySyntax}));function hI(e,t){return t?t.open+e+t.close:e}var hq={enableQuerySyntax:!1,numberOfSuggestions:5,clearFilters:!0},hk={open:new t3,close:new t3},hO={id:rR,numberOfSuggestions:new tJ({min:0}),enableQuerySyntax:new tX,highlightOptions:new t6({values:{notMatchDelimiters:new t6({values:hk}),exactMatchDelimiters:new t6({values:hk}),correctionDelimiters:new t6({values:hk})}}),clearFilters:new tX},hx=new tY(hO);function hA(e){return{build:t=>(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=function(e,t){var r,n;e.addReducers({query:hC,querySuggest:hm,configuration:lz,querySet:hc,search:sM}),!1;let a=uS(e),{dispatch:i}=e,o=()=>e.state,s=(null==(r=t.options)?void 0:r.id)||tS("search_box"),l={id:s,highlightOptions:{...null==(n=t.options)?void 0:n.highlightOptions},...hq,...t.options};rV(e,hx,l,"buildSearchBox"),i(ho({id:s,query:e.state.query.q})),l.numberOfSuggestions&&i(p8({id:s,count:l.numberOfSuggestions}));let u=()=>e.state.querySet[l.id],c=async e=>{let{enableQuerySyntax:r,clearFilters:n}=l;i(sw({q:u(),enableQuerySyntax:r,clearFilters:n})),t.isNextAnalyticsReady?i(t.executeSearchActionCreator(e)):i(t.executeSearchActionCreator(e.legacy))};return{...a,updateText(e){i(hs({id:s,query:e})),this.showSuggestions()},clear(){i(hs({id:s,query:""})),i(he({id:s}))},showSuggestions(){l.numberOfSuggestions&&i(t.fetchQuerySuggestionsActionCreator({id:s}))},selectSuggestion(e){i(p7({id:s,expression:e})),c({legacy:hg({id:s,suggestion:e}),next:hy()}).then(()=>{i(he({id:s}))})},submit(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hn(),t=arguments.length>1?arguments[1]:void 0;c({legacy:e,next:t}),i(he({id:s}))},get state(){var d,f;let e=o(),t=e.querySuggest[l.id],r=(d=t,f=l.highlightOptions,d?d.completions.map(e=>{var t,r;let n,a,i,o;return{highlightedValue:(t=e.highlighted,(r=t,i=RegExp(a="(?:"+Object.keys(n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"}).join("|")+")"),o=RegExp(a,"g"),t=i.test(r)?r.replace(o,e=>n[e]):r).replace(/\[(.*?)\]|\{(.*?)\}|\((.*?)\)/g,(e,t,r,n)=>t?hI(t,f.notMatchDelimiters):r?hI(r,f.exactMatchDelimiters):n?hI(n,f.correctionDelimiters):e)),rawValue:e.expression}}):[]),n=!!t&&t.isLoading;return{value:u(),suggestions:r,isLoading:e.search.isLoading,isLoadingSuggestions:n}}}}(e,{...t,executeSearchActionCreator:sS,fetchQuerySuggestionsActionCreator:ht,isNextAnalyticsReady:!0});return{...r,submit(){r.submit(hn(),ha())},get state(){return r.state}}})(t,e)}}var hR=(e,t)=>{let{id:r}=e;if(!t[r])return t[r]={q:"",cache:{}},t},hE=(e,t)=>{let{q:r,id:n}=e;r&&(t[n].q=r)},hF=(e,t)=>{let{id:r}=e;Object.entries(t[r].cache).forEach(e=>{let[n,a]=e;(function(e){return!!e&&e.expiresAt&&Date.now()>=e.expiresAt})(a)&&delete t[r].cache[n]})},hT=(e,t,r)=>{for(let e in t)for(let r in t[e].cache)t[e].cache[r].isActive=!1;if(!hM(e,t))return void hP(e,t,r);let n=hM(e,t);n.isLoading=!0,n.isActive=!0,n.error=null},hD=(e,t,r)=>{let{id:n,q:a,searchUid:i,cacheTimeout:o,totalCountFiltered:s,duration:l}=e;t[n].cache[a]={...hM(e,t),...r,isActive:!0,searchUid:i,isLoading:!1,error:null,expiresAt:o?o+Date.now():0,totalCountFiltered:s,duration:l}},hj=(e,t)=>{let{id:r,q:n,error:a}=e;t[r].cache[n].error=a||null,t[r].cache[n].isLoading=!1,t[r].cache[n].isActive=!1},hM=(e,t)=>{let{q:r,id:n}=e;return t[n].cache[r]||null},hP=(e,t,r)=>{let{q:n,id:a}=e;t[a].cache[n]={isLoading:!0,error:null,expiresAt:0,isActive:!0,searchUid:"",totalCountFiltered:0,duration:0,...r}},hU=(e2({},e=>{e.addCase(ot,(e,t)=>{hR(t.payload,e)}),e.addCase(or,(e,t)=>{hE(t.payload,e)}),e.addCase(on,(e,t)=>{hF(t.payload,e)}),e.addCase(sq.pending,(e,t)=>{hT(t.meta.arg,e,{results:[]})}),e.addCase(sq.fulfilled,(e,t)=>{let{results:r}=t.payload;hD({...t.payload,...t.meta.arg},e,{results:r})}),e.addCase(sq.rejected,(e,t)=>{hj(t.meta.arg,e)})}),new tY({searchBoxId:rE,maxResultsPerQuery:new tJ({required:!0,min:1}),cacheTimeout:new tJ}),()=>iy("analytics/sort/results",(e,t)=>e.makeResultsSort({resultsSortBy:t.sortCriteria||ia()}))),h_=()=>({actionCause:"resultsSort"}),hV={by:new t7({enum:ie,required:!0})},hQ=e$("sortCriteria/register",e=>hN(e)),hL=e$("sortCriteria/update",e=>hN(e)),hN=e=>t9(e)?(e.forEach(e=>rU(e,hV)),{payload:e}):rU(e,hV),hz=(e2(ia(),e=>{e.addCase(hQ,(e,t)=>it(t.payload)).addCase(hL,(e,t)=>it(t.payload)).addCase(iZ.fulfilled,(e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.sortCriteria)?n:e}).addCase(i$,(e,t)=>{var r;return null!=(r=t.payload.sortCriteria)?r:e})}),new t6({options:{required:!0},values:{caption:rF,expression:rF,state:new t3({constrainTo:["idle","selected","excluded"]})}})),h$=new t8({required:!0,each:hz}),hB=e$("staticFilter/register",e=>rU(e,{id:rR,values:h$})),hH=e$("staticFilter/toggleSelect",e=>rU(e,{id:rR,value:hz})),hY=e$("staticFilter/toggleExclude",e=>rU(e,{id:rR,value:hz})),hW=e$("staticFilter/deselectAllFilterValues",e=>rU(e,rR)),hG=e=>iy("analytics/staticFilter/select",t=>t.makeStaticFilterSelect(e)),hK=e=>iy("analytics/staticFilter/deselect",t=>t.makeStaticFilterDeselect(e)),hJ=e=>iy("analytics/staticFilter/clearAll",t=>t.makeStaticFilterClearAll(e)),hZ=()=>({actionCause:"staticFilterSelect"}),hX=()=>({actionCause:"staticFilterDeselect"}),h0=()=>({actionCause:"staticFilterClearAll"}),h1=e2({},e=>e.addCase(hB,(e,t)=>{let r=t.payload,{id:n}=r;n in e||(e[n]=r)}).addCase(hH,(e,t)=>{let{id:r,value:n}=t.payload,a=e[r];if(!a)return;let i=a.values.find(e=>e.caption===n.caption);if(!i)return;let o="selected"===i.state;i.state=o?"idle":"selected"}).addCase(hY,(e,t)=>{let{id:r,value:n}=t.payload,a=e[r];if(!a)return;let i=a.values.find(e=>e.caption===n.caption);if(!i)return;let o="excluded"===i.state;i.state=o?"idle":"excluded"}).addCase(hW,(e,t)=>{let r=e[t.payload];r&&r.values.forEach(e=>e.state="idle")}).addCase(i3,e=>{Object.values(e).forEach(e=>{e.values.forEach(e=>e.state="idle")})}).addCase(i$,(e,t)=>{let r=t.payload.sf||{};Object.entries(e).forEach(e=>{let[t,n]=e,a=r[t]||[];n.values.forEach(e=>{e.state=a.includes(e.caption)?"selected":"idle"})})}));function h2(e){return{state:"idle",...e}}var h3=new tY({id:rR,values:h$});function h5(e,t){let{caption:r,expression:n,state:a}=t;return("idle"===a?hG:hK)({staticFilterId:e,staticFilterValue:{caption:r,expression:n}})}function h6(e){return"selected"===e.state?hZ():hX()}function h4(e){return{build:t=>(function(e,t){e.addReducers({staticFilterSet:h1}),!1;rV(e,h3,t.options,"buildStaticFilter");let r=uS(e),{dispatch:n}=e,a=()=>e.state,{id:i}=t.options;return n(hB(t.options)),{...r,toggleSelect(e){n(hH({id:i,value:e})),n(sS({legacy:h5(i,e),next:h6(e)}))},toggleSingleSelect(e){"idle"===e.state&&n(hW(i)),n(hH({id:i,value:e})),n(sS({legacy:h5(i,e),next:h6(e)}))},toggleExclude(e){n(hY({id:i,value:e})),n(sS({legacy:h5(i,e),next:h6(e)}))},toggleSingleExclude(e){"idle"===e.state&&n(hW(i)),n(hY({id:i,value:e})),n(sS({legacy:h5(i,e),next:h6(e)}))},deselectAll(){n(hW(i)),n(sS({legacy:hJ({staticFilterId:i}),next:h0()}))},isValueSelected:e=>"selected"===e.state,isValueExcluded:e=>"excluded"===e.state,get state(){var o;let e=(null==(o=a().staticFilterSet[i])?void 0:o.values)||[],t=e.some(e=>"idle"!==e.state);return{id:i,values:e,hasActiveValues:t}}}})(t,e)}}function h8(e,t){t in e&&Object.keys(e).forEach(r=>{e[r].isActive=r===t})}e2({},e=>{e.addCase(lM,(e,t)=>{let r=t.payload,{id:n}=r;n in e||(e[n]={...r,isActive:!1})}).addCase(lP,(e,t)=>{h8(e,t.payload)}).addCase(i$,(e,t)=>{h8(e,t.payload.tab||"")}).addCase(iZ.fulfilled,(e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.tabSet)?n:e})}),new tY({expression:rF,id:rR,clearFiltersOnTabChange:new tX}),new tY({isActive:new tX});var h9={categoryFacetId:rR,categoryFacetPath:new t8({required:!0,each:rR})},h7=(e,t)=>{var r;let{categoryFacetId:n,categoryFacetPath:a}=t,i=null==(r=e.categoryFacetSet[n])?void 0:r.request.field,o="".concat(i,"_").concat(n);return{categoryFacetId:n,categoryFacetPath:a,categoryFacetField:i,categoryFacetTitle:o}},ge=(e,t)=>{let{facetId:r,selection:n}=t,a=(e.dateFacetSet[r]||e.numericFacetSet[r]).request.field,i="".concat(a,"_").concat(r);return{facetId:r,facetField:a,facetTitle:i,facetRangeEndInclusive:n.endInclusive,facetRangeEnd:"".concat(n.end),facetRangeStart:"".concat(n.start)}};function gt(e){return"redirect"===e.type}var gr=class{get basicExpression(){return this.response.parsedInput.basicExpression}get largeExpression(){return this.response.parsedInput.largeExpression}get redirectionUrl(){let e=this.response.preprocessingOutput.triggers.filter(gt);return e.length?e[0].content:null}constructor(e){this.response=e}},gn=e$("standaloneSearchBox/register",e=>rU(e,{id:rR,redirectionUrl:rR,overwrite:new tX({required:!1})})),ga=e$("standaloneSearchBox/updateRedirectionUrl",e=>rU(e,{id:rR,redirectionUrl:rR})),gi=e$("standaloneSearchBox/reset",e=>rU(e,{id:rR})),go=e$("standaloneSearchBox/updateAnalyticsToSearchFromLink",e=>rU(e,{id:rR})),gs=e$("standaloneSearchBox/updateAnalyticsToOmniboxFromLink"),gl=tl("standaloneSearchBox/fetchRedirect",async(e,t)=>{let{dispatch:r,getState:n,rejectWithValue:a,extra:{apiClient:i,validatePayload:o,navigatorContext:s}}=t;o(e,{id:new t3({emptyAllowed:!1})});let l=await gc(n(),s),u=await i.plan(l);if(rI(u))return a(u.error);let{redirectionUrl:c}=new gr(u.success);return c&&r(gu(c)),c||""}),gu=e=>iy("analytics/standaloneSearchBox/redirect",t=>t.makeTriggerRedirect({redirectedTo:e})),gc=async(e,t)=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,timezone:e.configuration.search.timezone,q:e.query.q,...e.context&&{context:e.context.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.searchHub&&{searchHub:e.searchHub},...e.configuration.analytics.enabled&&{visitorId:await ax(e.configuration.analytics)},...e.configuration.analytics.enabled&&"legacy"===e.configuration.analytics.analyticsMode?await oh(e.configuration.analytics):of(e.configuration.analytics,t),...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}});function gd(e){return{defaultRedirectionUrl:e,redirectTo:"",isLoading:!1,analytics:{cause:"",metadata:null}}}function gf(e){return{value:e,state:"selected",numberOfResults:0}}e2({},e=>e.addCase(gn,(e,t)=>{let{id:r,redirectionUrl:n,overwrite:a}=t.payload;!a&&r in e||(e[r]=gd(n))}).addCase(gi,(e,t)=>{let{id:r}=t.payload,n=e[r];if(n){e[r]=gd(n.defaultRedirectionUrl);return}}).addCase(ga,(e,t)=>{let{id:r,redirectionUrl:n}=t.payload;r in e&&(e[r]=gd(n))}).addCase(gl.pending,(e,t)=>{let r=e[t.meta.arg.id];r&&(r.isLoading=!0)}).addCase(gl.fulfilled,(e,t)=>{let r=t.payload,n=e[t.meta.arg.id];n&&(n.redirectTo=r||n.defaultRedirectionUrl,n.isLoading=!1)}).addCase(gl.rejected,(e,t)=>{let r=e[t.meta.arg.id];r&&(r.isLoading=!1)}).addCase(go,(e,t)=>{let r=e[t.payload.id];r&&(r.analytics.cause="searchFromLink")}).addCase(gs,(e,t)=>{let r=e[t.payload.id];r&&(r.analytics.cause="omniboxFromLink",r.analytics.metadata=t.payload.metadata)})),new tY({...hO,redirectionUrl:new t3({required:!0,emptyAllowed:!1}),overwrite:new tX({required:!1})}),e2(aT(),e=>{e.addCase(sS.fulfilled,(e,t)=>{var r,n;e.set={},null==(n=t.payload.response.generateAutomaticFacets)||null==(r=n.facets)||r.forEach(t=>{e.set[t.field]={response:t}})}).addCase(pP,(e,t)=>{t.payload.desiredCount&&(e.desiredCount=t.payload.desiredCount),t.payload.numberOfValues&&(e.numberOfValues=t.payload.numberOfValues)}).addCase(p_,(e,t)=>{var r;let{field:n,selection:a}=t.payload,i=null==(r=e.set[n])?void 0:r.response;if(!i)return;let o=i.values.find(e=>e.value===a.value);if(!o)return;let s="selected"===o.state;o.state=s?"idle":"selected"}).addCase(pU,(e,t)=>{var r;let n=t.payload,a=null==(r=e.set[n])?void 0:r.response;if(a)for(let e of a.values)e.state="idle"}).addCase(i$,(e,t)=>{var r,n,a;let i=null!=(r=t.payload.af)?r:{},o=Object.keys(e.set);for(let t in i)if(!e.set[t]){let r={field:t,values:[],moreValuesAvailable:!1,label:"",indexScore:0},n=i[t].map(e=>gf(e));r.values.push(...n),e.set[t]={response:r}}for(let t of o)if(!(t in i))for(let r of(null==(n=e.set[t])?void 0:n.response).values)r.state="idle";for(let t in i){let r=null==(a=e.set[t])?void 0:a.response;if(r){let e=r.values,n=new Set(i[t]);for(let t of e)n.has(t.value)?(t.state="selected",n.delete(t.value)):t.state="idle";for(let e of n)r.values.push(gf(e))}}}).addCase(iZ.fulfilled,(e,t)=>{if(t.payload&&0!==Object.keys(t.payload.automaticFacetSet.set).length)return t.payload.automaticFacetSet}).addCase(i3,e=>{Object.values(e.set).forEach(e=>{let{response:t}=e;t.values.forEach(e=>e.state="idle")})})});var gp=()=>new t3({required:!1,emptyAllowed:!0}),gh=e$("advancedSearchQueries/update",e=>rU(e,{aq:gp(),cq:gp(),lq:gp(),dq:gp()})),gg=e$("advancedSearchQueries/register",e=>rU(e,{aq:gp(),cq:gp(),lq:gp(),dq:gp()}));function gy(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=Object.keys(e),a=Object.keys(t),i=n.filter(e=>!a.includes(e));if(i.length){let t=i[0];switch(!0){case e[t].length>1:return dr(t);case r:return ds({facetId:t,facetValue:e[t][0]});default:return di({facetId:t,facetValue:e[t][0]})}}let o=a.filter(e=>!n.includes(e));if(o.length){let e=o[0];return r?da({facetId:e,facetValue:t[e][0]}):dn({facetId:e,facetValue:t[e][0]})}let s=a.find(r=>t[r].filter(t=>e[r].includes(t)));if(!s)return ix();let l=e[s],u=t[s],c=u.filter(e=>!l.includes(e));if(c.length)return r?da({facetId:s,facetValue:c[0]}):dn({facetId:s,facetValue:c[0]});let d=l.filter(e=>!u.includes(e));return d.length?r?ds({facetId:s,facetValue:d[0]}):di({facetId:s,facetValue:d[0]}):ix()}function gm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return gy(gS(e),gS(t))}function gv(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return JSON.stringify(e)!==JSON.stringify(t)}function gw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=Object.keys(e),a=Object.keys(t),i=n.filter(e=>!a.includes(e));if(i.length)return e[i[0]].length>1?dl():dd();if(a.filter(e=>!n.includes(e)).length)return r?dc():du();let o=a.find(r=>t[r].filter(t=>e[r].includes(t)));if(!o)return iF();let s=e[o],l=t[o];return l.filter(e=>!s.includes(e)).length?r?dc():du():s.filter(e=>!l.includes(e)).length?dd():iF()}function gS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};return Object.keys(e).forEach(r=>t[r]=e[r].map(e=>"".concat(e.start,"..").concat(e.end))),t}e2(oy(),e=>{e.addCase(gh,(e,t)=>{let{aq:r,cq:n,lq:a,dq:i}=t.payload;tG(r)||(e.aq=r,e.aqWasSet=!0),tG(n)||(e.cq=n,e.cqWasSet=!0),tG(a)||(e.lq=a,e.lqWasSet=!0),tG(i)||(e.dq=i,e.dqWasSet=!0)}).addCase(gg,(e,t)=>{let{aq:r,cq:n,lq:a,dq:i}=t.payload;tG(r)||(e.defaultFilters.aq=r,e.aqWasSet||(e.aq=r)),tG(n)||(e.defaultFilters.cq=n,e.cqWasSet||(e.cq=n)),tG(a)||(e.defaultFilters.lq=a,e.lqWasSet||(e.lq=a)),tG(i)||(e.defaultFilters.dq=i,e.dqWasSet||(e.dq=i))}).addCase(iZ.fulfilled,(e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.advancedSearchQueries)?n:e}).addCase(i$,(e,t)=>{let{aq:r,cq:n}=t.payload;tG(r)||(e.aq=r,e.aqWasSet=!0),tG(n)||(e.cq=n,e.cqWasSet=!0)})});var gb=new tY({parameters:new t6({options:{required:!0},values:iz})});function gC(e,t){var r,n,a,i,o,s,l;return{...(r=e.state,{q:a5().q,enableQuerySyntax:a5().enableQuerySyntax,aq:null!=(o=null==(n=r.advancedSearchQueries)?void 0:n.defaultFilters.aq)?o:oy().defaultFilters.aq,cq:null!=(s=null==(a=r.advancedSearchQueries)?void 0:a.defaultFilters.cq)?s:oy().defaultFilters.cq,firstResult:o0().firstResult,numberOfResults:null!=(l=null==(i=r.pagination)?void 0:i.defaultNumberOfResults)?l:o0().defaultNumberOfResults,sortCriteria:ia(),f:{},fExcluded:{},cf:{},nf:{},df:{},debug:iY(),sf:{},tab:"",af:{},mnf:{}}),...t}}function gI(e){var t,r,n,a;let i,o=e.state;return{...function(e,t,r){if(void 0===e)return{};let n=t(e);return n!==r?{q:n}:{}}(o.query,e=>e.q,a5().q),...(i=Object.values(null!=(t=o.tabSet)?t:{}).find(e=>e.isActive))?{tab:i.id}:{},...function(e,t,r){if(void 0===e)return{};let n=t(e);return n!==r?{sortCriteria:n}:{}}(o.sortCriteria,e=>e,ia()),...cj(o.facetSet,gq(o),gk,"f"),...cj(o.facetSet,gq(o),gx,"fExcluded"),...cj((r=o).categoryFacetSet,gq(r),e=>aP(e.currentValues).map(e=>e.value),"cf"),...cj((n=o).numericFacetSet,gq(n),gO,"nf"),...cj((a=o).dateFacetSet,gq(a),gO,"df"),...function(e){var t;let r=null==(t=e.automaticFacetSet)?void 0:t.set;if(void 0===r)return{};let n=Object.entries(r).map(e=>{let[t,{response:r}]=e,n=r.values.filter(e=>"selected"===e.state).map(e=>e.value);return n.length?{[t]:n}:{}}).reduce((e,t)=>({...e,...t}),{});return Object.keys(n).length?{af:n}:{}}(o)}}function gq(e){return t=>{var r,n,a;return null==(a=null==(n=e.facetOptions)||null==(r=n.facets[t])?void 0:r.enabled)||a}}function gk(e){return e.currentValues.filter(e=>"selected"===e.state).map(e=>e.value)}function gO(e){return e.currentValues.filter(e=>"selected"===e.state)}function gx(e){return e.currentValues.filter(e=>"excluded"===e.state).map(e=>e.value)}function gA(e){let t=e.state;return{...gI(e),...function(e){if(void 0===e.query)return{};let t=e.query.enableQuerySyntax;return void 0!==t&&t!==a5().enableQuerySyntax?{enableQuerySyntax:t}:{}}(t),...function(e){if(void 0===e.advancedSearchQueries)return{};let{aq:t,defaultFilters:r}=e.advancedSearchQueries;return t!==r.aq?{aq:t}:{}}(t),...function(e){if(void 0===e.advancedSearchQueries)return{};let{cq:t,defaultFilters:r}=e.advancedSearchQueries;return t!==r.cq?{cq:t}:{}}(t),...function(e){if(void 0===e.pagination)return{};let t=e.pagination.firstResult;return t!==o0().firstResult?{firstResult:t}:{}}(t),...function(e){if(void 0===e.pagination)return{};let{numberOfResults:t,defaultNumberOfResults:r}=e.pagination;return t!==r?{numberOfResults:t}:{}}(t),...function(e){if(void 0===e.debug)return{};let t=e.debug;return t!==iY()?{debug:t}:{}}(t),...function(e){if(void 0===e.staticFilterSet)return{};let t=Object.entries(e.staticFilterSet).map(e=>{let[t,r]=e,n=r.values.filter(e=>"selected"===e.state).map(e=>e.caption);return n.length?{[t]:n}:{}}).reduce((e,t)=>({...e,...t}),{});return Object.keys(t).length?{sf:t}:{}}(t)}}var gR=/^(f|fExcluded|cf|nf|df|sf|af|mnf)-(.+)$/,gE={f:!0,fExcluded:!0,cf:!0,sf:!0,af:!0,nf:!0,df:!0,mnf:!0};function gF(e){return e in{q:!0,aq:!0,cq:!0,enableQuerySyntax:!0,firstResult:!0,numberOfResults:!0,sortCriteria:!0,debug:!0,tab:!0}}function gT(e){return gF(e)||e in gE}var gD=e=>t=>Object.entries(t).map(e).filter(e=>e).join("&");function gj(e){var t,r,n,a,i;let[o,s]=e;return gT(o)?o in gE&&!((t=o)in gE&&t in{nf:!0,df:!0,mnf:!0})?gM(s)?(r=o,Object.entries(s).map(e=>{let[t,n]=e;return"".concat(r,"-").concat(t).concat("=").concat(n.map(e=>encodeURIComponent(e)).join(","))}).join("&")):"":"nf"===o||"df"===o?gP(s)?(n=o,Object.entries(s).map(e=>{let[t,r]=e,a=r.map(e=>{let{start:t,end:r,endInclusive:n}=e;return"".concat(t).concat(n?"...":"..").concat(r)}).join(",");return"".concat(n,"-").concat(t).concat("=").concat(a)}).join("&")):"":(a=o,i=s,"".concat(a).concat("=").concat(encodeURIComponent(i))):""}function gM(e){return!!gU(e)&&g_(e,e=>"string"==typeof e)}function gP(e){return!!gU(e)&&g_(e,e=>gU(e)&&"start"in e&&"end"in e)}function gU(e){return!!(e&&"object"==typeof e)}function g_(e,t){return 0===Object.entries(e).filter(e=>{let r=e[1];return!Array.isArray(r)||!r.every(t)}).length}function gV(e){return e.split("&").map(e=>(function(e){let[t,...r]=e.split("=");return[t,r.join("=")]})(e)).map(gQ).filter(g$).map(e=>gB(e)).reduce((e,t)=>{let[r,n]=t;if(r in gE){let t={...e[r],...n};return{...e,[r]:t}}return{...e,[r]:n}},{})}function gQ(e){var t,r;let[n,a]=e,i=gR.exec(n);if(!i)return e;let o=i[1],s=i[2],l=(t=o,r=a.split(","),"nf"===t||"mnf"===t?gL(r):"df"===t?gz(r):r);return[o,JSON.stringify({[s]:l})]}function gL(e){return e.map(e=>{let{startAsString:t,endAsString:r,isEndInclusive:n}=gH(e);return{start:parseFloat(t),end:parseFloat(r),endInclusive:n}}).filter(e=>{let{start:t,end:r}=e;return Number.isFinite(t)&&Number.isFinite(r)}).map(e=>{let{start:t,end:r,endInclusive:n}=e;return{endInclusive:!1,state:"idle",start:t,end:r,state:"selected",endInclusive:n}})}function gN(e){try{return ok(oq(e))===e?(oO(e,oI),!0):!!oM(e)&&(oF(e),!0)}catch(e){return!1}}function gz(e){return e.map(e=>{let{isEndInclusive:t,startAsString:r,endAsString:n}=gH(e);return{start:r,end:n,endInclusive:t}}).filter(e=>{let{start:t,end:r}=e;return gN(t)&&gN(r)}).map(e=>{let{start:t,end:r,endInclusive:n}=e;return d_({start:t,end:r,state:"selected",endInclusive:n})})}function g$(e){let t=gT(e[0]),r=2===e.length;return t&&r}function gB(e){let t,r,n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],[a,i]=e;return"enableQuerySyntax"===a||"debug"===a?[a,"true"===i]:"firstResult"===a||"numberOfResults"===a?[a,parseInt(i)]:a in gE?[a,(t=JSON.parse(i),r={},Object.entries(t).forEach(e=>{let[t,n]=e;r[t]=n.map(e=>t5(e)?decodeURIComponent(e):e)}),r)]:[a,n?decodeURIComponent(i):i]}function gH(e){let t=-1!==e.indexOf("..."),[r,n]=e.split(t?"...":"..");return{isEndInclusive:t,startAsString:r,endAsString:n}}new tY({fragment:new t3});async function gY(e,t){var r;let{search:n,accessToken:a,organizationId:i,analytics:o}=e.configuration,s=(null==(r=e.query)?void 0:r.q)||"";return{url:n.apiBaseUrl,accessToken:a,organizationId:i,enableNavigation:!1,...o.enabled&&{visitorId:await ax(e.configuration.analytics)},q:s,...t,requestedOutputSize:t.requestedOutputSize||0,...n.authenticationProviders.length&&{authentication:n.authenticationProviders.join(",")}}}var gW=tl("resultPreview/fetchResultContent",async(e,t)=>{let{extra:r,getState:n,rejectWithValue:a}=t,i=n(),o=await gY(i,e),s=await r.apiClient.html(o);return rI(s)?a(s.error):{content:s.success,uniqueId:e.uniqueId}}),gG=e$("resultPreview/next"),gK=e$("resultPreview/previous"),gJ=e$("resultPreview/prepare",e=>rU(e,{results:new t8({required:!0})})),gZ=tl("resultPreview/updateContentURL",async(e,t)=>{let{getState:r,extra:n}=t,a=r(),i=rv(await e.buildResultPreviewRequest(a,{uniqueId:e.uniqueId,requestedOutputSize:e.requestedOutputSize}),e.path);return(null==i?void 0:i.length)>2048&&n.logger.error("The content URL was truncated as it exceeds the maximum allowed length of ".concat(2048," characters.")),{contentURL:i}});function gX(){return{uniqueId:"",content:"",isLoading:!1,position:-1,resultsWithPreview:[]}}var g0=e=>{let{content:t,isLoading:r,uniqueId:n,contentURL:a}=gX();e.content=t,e.isLoading=r,e.uniqueId=n,e.contentURL=a},g1=e=>e.filter(e=>e.hasHtmlVersion).map(e=>e.uniqueId);function g2(e,t){return e.raw[t.parent]}function g3(e,t){let r=e.raw[t.child];return tb(r)?r[0]:r}function g5(e,t,r){let n={};return e.forEach(e=>{var a;let i,o,s=e.raw[t.collection];s&&(g3(e,t)||e.parentResult)&&(n[s]=(i=il(e),{result:o=null!=(a=null!=r?r:i.find(e=>{var r,n;let a=void 0===g2(e,t),i=(r=g2(e,t),n=g3(e,t),(r||n)!==void 0&&r===n);return a||i}))?a:function e(t){return t.parentResult?e(t.parentResult):t}(e),children:function e(t,r,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=g3(t,n);return i?-1!==a.indexOf(i)?[]:r.filter(e=>{let r=g3(e,n)===g3(t,n);return g2(e,n)===i&&!r}).map(t=>({result:t,children:e(t,r,n,[...a,i])})):[]}(o,i,t),moreResultsAvailable:!0,isLoadingMoreResults:!1}))}),n}function g6(e,t){if(!e.collections[t])throw Error("Missing collection ".concat(t," from ").concat(Object.keys(e.collections),": Folding most probably in an invalid state..."));return e.collections[t]}e2(gX(),e=>{e.addCase(gW.pending,e=>{e.isLoading=!0}).addCase(gW.fulfilled,(e,t)=>{let{content:r,uniqueId:n}=t.payload;e.position=e.resultsWithPreview.indexOf(n),e.content=r,e.uniqueId=n,e.isLoading=!1}).addCase(sS.fulfilled,(e,t)=>{g0(e),e.resultsWithPreview=g1(t.payload.response.results)}).addCase(sC.fulfilled,(e,t)=>{g0(e),e.resultsWithPreview=e.resultsWithPreview.concat(g1(t.payload.response.results))}).addCase(sb.fulfilled,g0).addCase(gJ,(e,t)=>{e.resultsWithPreview=g1(t.payload.results)}).addCase(gG,e=>{if(e.isLoading)return;let t=e.position+1;t>e.resultsWithPreview.length-1&&(t=0),e.position=t}).addCase(gK,e=>{if(e.isLoading)return;let t=e.position-1;t<0&&(t=e.resultsWithPreview.length-1),e.position=t}).addCase(gZ.fulfilled,(e,t)=>{e.contentURL=t.payload.contentURL})}),e2(um(),e=>e.addCase(sS.fulfilled,(e,t)=>{let{payload:r}=t;e.collections=e.enabled?g5(r.response.results,e.fields):{}}).addCase(sb.fulfilled,(e,t)=>{let{payload:r}=t;e.collections=e.enabled?g5(r.response.results,e.fields):{}}).addCase(sC.fulfilled,(e,t)=>{let{payload:r}=t;e.collections=e.enabled?{...e.collections,...g5(r.response.results,e.fields)}:{}}).addCase(ug,(e,t)=>{var r,n,a,i;let{payload:o}=t;return e.enabled?e:{enabled:!0,collections:{},fields:{collection:null!=(r=o.collectionField)?r:e.fields.collection,parent:null!=(n=o.parentField)?n:e.fields.parent,child:null!=(a=o.childField)?a:e.fields.child},filterFieldRange:null!=(i=o.numberOfFoldedResults)?i:e.filterFieldRange}}).addCase(uy.pending,(e,t)=>{let{meta:r}=t;g6(e,r.arg).isLoadingMoreResults=!0}).addCase(uy.rejected,(e,t)=>{let{meta:r}=t;g6(e,r.arg).isLoadingMoreResults=!1}).addCase(uy.fulfilled,(e,t)=>{let{payload:{collectionId:r,results:n,rootResult:a}}=t,i=g5(n,e.fields,a);if(!i||!i[r])throw Error("Unable to create collection ".concat(r," from received results: ").concat(JSON.stringify(n),". Folding most probably in an invalid state... "));e.collections[r]=i[r],e.collections[r].moreResultsAvailable=!1})),new tY(uh);function g4(e){return e.query="",e.queryModification={originalQuery:"",newQuery:"",queryToIgnore:e.queryModification.queryToIgnore},e}e2({redirectTo:"",query:"",executions:[],notifications:[],queryModification:{originalQuery:"",newQuery:"",queryToIgnore:""}},e=>e.addCase(sS.pending,g4).addCase(sS.fulfilled,(e,t)=>(function(e,t){var r;let n=[],a=[],i=[],o=[];return t.forEach(e=>{switch(e.type){case"redirect":n.push(e.content);break;case"query":a.push(e.content);break;case"execute":i.push({functionName:e.content.name,params:e.content.params});break;case"notify":o.push(e.content)}}),e.redirectTo=null!=(r=n[0])?r:"",e.query=e.queryModification.newQuery,e.executions=i,e.notifications=o,e})(e,t.payload.response.triggers)).addCase(o6,(e,t)=>(function(e,t){return e.queryModification={...t,queryToIgnore:""},e})(e,t.payload)).addCase(o5,(e,t)=>(function(e,t){return e.queryModification.queryToIgnore=t,e})(e,t.payload)));var g8=()=>new t6({values:{questionAnswerId:rR},options:{required:!0}}),g9=()=>new t6({values:{linkText:rF,linkURL:rF},options:{required:!0}});function g7(e){return rU(e,g8())}function ye(e,t){var r,n,a,i;let o=null!=t?t:null==(n=e.search)||null==(r=n.questionAnswer)?void 0:r.documentId;return o&&e.search&&(a=o.contentIdKey,i=o.contentIdValue,e.search.results.find(e=>sE(e,a)===i))}function yt(e,t){var r,n,a,i,o,s;let l=null!=(o=null==(r=e.questionAnswering)?void 0:r.relatedQuestions.findIndex(e=>e.questionAnswerId===t))?o:-1;return -1===l?null:null!=(s=null==(i=e.search)||null==(a=i.questionAnswer)||null==(n=a.relatedQuestions)?void 0:n[l])?s:null}var yr=e=>iy({prefix:"analytics/smartSnippet/source/open",__legacy__getBuilder:(t,r)=>{rU(e,g9());let n=ye(r);return n?t.makeOpenSmartSnippetInlineLink(iv(n,r),{...iw(n),...e}):null},analyticsType:"Qna.CitationClick",analyticsPayloadBuilder:e=>{var t;let r=iw(ye(e));return{answer:{responseId:(null==(t=e.search)?void 0:t.response.searchUid)||"",type:"SmartSnippet"},citation:{id:r.contentIDValue,type:"InlineLink"}}}}),yn=(e,t)=>iy({prefix:"analytics/smartSnippetSuggestion/source/open",__legacy__getBuilder:(r,n)=>{rU(e,g8()),rU(t,g9());let a=yt(n,e.questionAnswerId);if(!a)return null;let i=ye(n,a.documentId);return i?r.makeOpenSmartSnippetSuggestionInlineLink(iv(i,n),{question:a.question,answerSnippet:a.answerSnippet,documentId:a.documentId,linkText:t.linkText,linkURL:t.linkURL}):null},analyticsType:"Qna.CitationClick",analyticsPayloadBuilder:t=>{var r;let n=yt(t,e.questionAnswerId);return{answer:{responseId:(null==(r=t.search)?void 0:r.response.searchUid)||"",type:"SmartSnippetSuggestion"},citation:{id:(null==n?void 0:n.documentId.contentIdValue)||"",type:"InlineLink"}}}}),ya=e$("smartSnippet/expand"),yi=e$("smartSnippet/collapse"),yo=e$("smartSnippet/like"),ys=e$("smartSnippet/dislike"),yl=e$("smartSnippet/feedbackModal/open"),yu=e$("smartSnippet/feedbackModal/close"),yc=e$("smartSnippet/related/expand",e=>g7(e)),yd=e$("smartSnippet/related/collapse",e=>g7(e)),yf=()=>({liked:!1,disliked:!1,expanded:!1,feedbackModalOpen:!1,relatedQuestions:[]}),yp=(e,t)=>e.findIndex(e=>e.questionAnswerId===t.questionAnswerId);function yh(e){let{question:t,answerSnippet:r,documentId:{contentIdKey:n,contentIdValue:a}}=e;return tC({question:t,answerSnippet:r,contentIdKey:n,contentIdValue:a})}var yg=e2(yf(),e=>e.addCase(ya,e=>{e.expanded=!0}).addCase(yi,e=>{e.expanded=!1}).addCase(yo,e=>{e.liked=!0,e.disliked=!1,e.feedbackModalOpen=!1}).addCase(ys,e=>{e.liked=!1,e.disliked=!0}).addCase(yl,e=>{e.feedbackModalOpen=!0}).addCase(yu,e=>{e.feedbackModalOpen=!1}).addCase(sS.fulfilled,(e,t)=>{let r=t.payload.response.questionAnswer.relatedQuestions.map((t,r)=>(function(e,t){let r=yh(e);return t&&r===t.questionAnswerId?t:{contentIdKey:e.documentId.contentIdKey,contentIdValue:e.documentId.contentIdValue,expanded:!1,questionAnswerId:r}})(t,e.relatedQuestions[r])),n=yh(t.payload.response.questionAnswer);return e.questionAnswerId===n?{...e,relatedQuestions:r}:{...yf(),relatedQuestions:r,questionAnswerId:n}}).addCase(yc,(e,t)=>{let r=yp(e.relatedQuestions,t.payload);-1!==r&&(e.relatedQuestions[r].expanded=!0)}).addCase(yd,(e,t)=>{let r=yp(e.relatedQuestions,t.payload);-1!==r&&(e.relatedQuestions[r].expanded=!1)})),yy={results:new t8({required:!0,each:new t6({values:ib})}),maxLength:new tJ({required:!0,min:1,default:10})},ym=e$("recentResults/registerRecentResults",e=>rU(e,yy)),yv=e$("recentResults/pushRecentResult",e=>(iC(e),{payload:e})),yw=e$("recentResults/clearRecentResults"),yS={queries:new t8({required:!0,each:new t3({emptyAllowed:!1})}),maxLength:new tJ({required:!0,min:1,default:10})},yb=e$("recentQueries/registerRecentQueries",e=>rU(e,yS)),yC=e$("recentQueries/clearRecentQueries");function yI(e,t){e.queries=t.payload.queries.slice(0,t.payload.maxLength),e.maxLength=t.payload.maxLength}function yq(e){e.queries=[]}function yk(e){return e.addReducers({configuration:lz,pipeline:i0,searchHub:i2}),{updateSearchConfiguration:iP}}e2({queries:[],maxLength:10},e=>{e.addCase(yb,yI).addCase(yC,yq).addCase(sS.fulfilled,(e,t)=>{let r=t.payload.queryExecuted.trim(),n=t.payload.response.results;r.length&&n.length&&function(e,t){t.queries=t.queries.filter(t=>t!==e);let r=t.queries.slice(0,t.maxLength-1);t.queries=[e,...r]}(r,e)})}),new tY({queries:new t8({required:!0})}),new tY({maxLength:new tJ({required:!0,min:1}),clearFilters:new tX}),e2({results:[],maxLength:10},e=>{e.addCase(ym,(e,t)=>{e.results=t.payload.results.slice(0,t.payload.maxLength),e.maxLength=t.payload.maxLength}).addCase(yw,e=>{e.results=[]}).addCase(yv,(e,t)=>{let r=t.payload;e.results=e.results.filter(e=>e.uniqueId!==r.uniqueId);let n=e.results.slice(0,e.maxLength-1);e.results=[r,...n]})}),new tY({results:new t8({required:!0})}),new tY({maxLength:new tJ({required:!0,min:1})});var yO=e$("excerptLength/set",e=>rU(e,new tJ({min:0,required:!0}))),yx=(e2({length:void 0},e=>{e.addCase(yO,(e,t)=>{e.length=t.payload})}),e=>iy("analytics/generatedAnswer/streamEnd",(t,r)=>{var n,a;let i=sU(r),o=e?!(null==(n=r.generatedAnswer)?void 0:n.answer)||!(null==(a=r.generatedAnswer)?void 0:a.answer.length):void 0;return i?t.makeGeneratedAnswerStreamEnd({generativeQuestionAnsweringId:i,answerGenerated:e,answerTextIsEmpty:o}):null})),yA=async e=>{var t;return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.platformUrl,streamId:null==(t=e.search.extendedResults)?void 0:t.generativeQuestionAnsweringId}},yR=["default","bullet","step","concise"],yE=new t3({required:!0}),yF=new t3,yT=new tX({required:!0}),yD={id:yE,title:yE,uri:yE,permanentid:yE,clickUri:yF},yj=new t3({required:!0,constrainTo:["text/plain","text/markdown"]}),yM=e$("generatedAnswer/setIsVisible",e=>rU(e,yT)),yP=e$("generatedAnswer/updateMessage",e=>rU(e,{textDelta:yE})),yU=e$("generatedAnswer/updateCitations",e=>rU(e,{citations:new t8({required:!0,each:new t6({values:yD})})})),y_=e$("generatedAnswer/updateError",e=>rU(e,{message:yF,code:new tJ({min:0})})),yV=e$("generatedAnswer/resetAnswer"),yQ=e$("generatedAnswer/like"),yL=e$("generatedAnswer/dislike"),yN=e$("generatedAnswer/feedbackModal/open"),yz=e$("generatedAnswer/expand"),y$=e$("generatedAnswer/collapse"),yB=e$("generatedAnswer/setId",e=>rU(e,{id:new t3({required:!0})})),yH=e$("generatedAnswer/feedbackModal/close"),yY=e$("generatedAnswer/sendFeedback"),yW=e$("generatedAnswer/setIsLoading",e=>rU(e,yT)),yG=e$("generatedAnswer/setIsStreaming",e=>rU(e,yT)),yK=e$("generatedAnswer/setAnswerContentFormat",e=>rU(e,yj)),yJ=e$("generatedAnswer/updateResponseFormat",e=>rU(e,{answerStyle:new t3({required:!0,constrainTo:yR}),contentFormat:new t8({each:yj,default:["text/plain"]})})),yZ=e$("knowledge/updateAnswerConfigurationId",e=>rU(e,yE)),yX=e$("generatedAnswer/registerFieldsToIncludeInCitations",e=>rU(e,rD)),y0=e$("generatedAnswer/setIsAnswerGenerated",e=>rU(e,yT));function y1(){return{id:"",isVisible:!0,isLoading:!1,isStreaming:!1,citations:[],liked:!1,disliked:!1,responseFormat:{answerStyle:"default",contentFormat:["text/plain"]},feedbackModalOpen:!1,feedbackSubmitted:!1,fieldsToIncludeInCitations:[],isAnswerGenerated:!1,expanded:!1}}function y2(e){return Array.isArray(e)?e:[e]}tl("generatedAnswer/streamAnswer",async(e,t)=>{var r;let n=t.getState(),{dispatch:a,extra:i}=t,{setAbortControllerRef:o}=e,s=await yA(n),l=(e,t)=>{switch(e){case"genqa.headerMessageType":a(yK(JSON.parse(t).contentFormat));break;case"genqa.messageType":a(yP(JSON.parse(t)));break;case"genqa.citationsType":a(yU(JSON.parse(t)));break;case"genqa.endOfStreamType":{let e=JSON.parse(t).answerGenerated;a(yG(!1)),a(y0(e)),a(yx(e));break}default:n.debug&&i.logger.warn('Unknown payloadType: "'.concat(e,'"'))}};a(yW(!0));let u=e=>e.streamId===t.getState().search.extendedResults.generativeQuestionAnsweringId,c=null==(r=i.streamingClient)?void 0:r.streamGeneratedAnswer(s,{write:e=>{u(s)&&(a(yW(!1)),e.payload&&e.payloadType&&l(e.payloadType,e.payload))},abort:e=>{u(s)&&a(y_(e))},close:()=>{u(s)&&a(yG(!1))},resetAnswer:()=>{u(s)&&a(yV())}});c?o(c):a(yW(!1))}),e2(y1(),e=>e.addCase(yM,(e,t)=>{let{payload:r}=t;e.isVisible=r}).addCase(yB,(e,t)=>{let{payload:r}=t;e.id=r.id}).addCase(yP,(e,t)=>{let{payload:r}=t;e.isLoading=!1,e.isStreaming=!0,e.answer||(e.answer=""),e.answer+=r.textDelta,delete e.error}).addCase(yU,(e,t)=>{let{payload:r}=t;e.isLoading=!1,e.isStreaming=!0;let n=new Map;for(let t of[e.citations,r.citations])for(let e of t)n.set(e.uri,e);e.citations=Array.from(n.values()),delete e.error}).addCase(y_,(e,t)=>{let{payload:r}=t;e.isLoading=!1,e.isStreaming=!1,e.error={...r,isRetryable:1===r.code},e.citations=[],delete e.answer}).addCase(yQ,e=>{e.liked=!0,e.disliked=!1}).addCase(yL,e=>{e.liked=!1,e.disliked=!0}).addCase(yN,e=>{e.feedbackModalOpen=!0}).addCase(yH,e=>{e.feedbackModalOpen=!1}).addCase(yY,e=>{e.feedbackSubmitted=!0}).addCase(yV,e=>({...y1(),...e.answerConfigurationId?{answerConfigurationId:e.answerConfigurationId}:{},responseFormat:e.responseFormat,fieldsToIncludeInCitations:e.fieldsToIncludeInCitations,isVisible:e.isVisible,id:e.id})).addCase(yW,(e,t)=>{let{payload:r}=t;e.isLoading=r}).addCase(yG,(e,t)=>{let{payload:r}=t;e.isStreaming=r}).addCase(yK,(e,t)=>{let{payload:r}=t;e.answerContentFormat=r}).addCase(yJ,(e,t)=>{let{payload:r}=t;e.responseFormat=r}).addCase(yX,(e,t)=>{e.fieldsToIncludeInCitations=[...new Set(e.fieldsToIncludeInCitations.concat(t.payload))]}).addCase(y0,(e,t)=>{let{payload:r}=t;e.isAnswerGenerated=r}).addCase(yz,e=>{e.expanded=!0}).addCase(y$,e=>{e.expanded=!1}).addCase(yZ,(e,t)=>{let{payload:r}=t;e.answerConfigurationId=r})),new tY({content:new tW({required:!0}),conditions:new tW({required:!0}),priority:new tJ({required:!1,default:0,min:0}),fields:new t8({required:!1,each:rR})});function y3(e){return e.negate?"NOT ":""}function y5(e){return({contains:"=",differentThan:"<>",fuzzyMatch:"~=",greaterThan:">",greaterThanOrEqual:">=",isExactly:"==",lowerThan:"<",lowerThanOrEqual:"<=",phoneticMatch:"%=",regexMatch:"/=",wildcardMatch:"*="})[e]}function y6(){let e=[],t="and";return{addExpression(t){return e.push(t),this},addKeyword(t){return e.push({toQuerySyntax(){let{expression:e,negate:r}=t;return r?"NOT (".concat(e,")"):e}}),this},addNear(t){return e.push({toQuerySyntax(){let e=y3(t),{startTerm:r,otherTerms:n}=t,a=n.map(e=>{let{endTerm:t,maxKeywordsBetween:r}=e;return"near:".concat(r," ").concat(t)}).join(" "),i="".concat(r," ").concat(a);return t.negate?"".concat(e,"(").concat(i,")"):i}}),this},addExactMatch(t){return e.push({toQuerySyntax(){let e=y3(t),{expression:r}=t;return"".concat(e,'"').concat(r,'"')}}),this},addFieldExists(t){return e.push({toQuerySyntax(){let e=y3(t),{field:r}=t;return"".concat(e,"@").concat(r)}}),this},addStringField(t){return e.push({toQuerySyntax(){let{field:e}=t,r=y3(t),n=y5(t.operator),a=t.values.map(e=>'"'.concat(e,'"')),i=1===a.length?a[0]:"(".concat(a.join(","),")");return"".concat(r,"@").concat(e).concat(n).concat(i)}}),this},addStringFacetField(t){return e.push({toQuerySyntax(){let e=y3(t),{field:r,operator:n,value:a}=t,i=y5(n),o="fuzzyMatch"===n?" $quoteVar(value: ".concat(a,")"):'("'.concat(a,'")');return"".concat(e,"@").concat(r).concat(i).concat(o)}}),this},addNumericField(t){return e.push({toQuerySyntax(){let{field:e,value:r}=t,n=y3(t),a=y5(t.operator);return"".concat(n,"@").concat(e).concat(a).concat(r)}}),this},addNumericRangeField(t){return e.push({toQuerySyntax(){let e=y3(t),{field:r,from:n,to:a}=t,i=y5("isExactly");return"".concat(e,"@").concat(r).concat(i).concat(n,"..").concat(a)}}),this},addDateField(t){return e.push({toQuerySyntax(){let{field:e,value:r}=t,n=y5(t.operator);return"".concat(y3(t),"@").concat(e).concat(n).concat(r)}}),this},addDateRangeField(t){return e.push({toQuerySyntax(){let e=y3(t),{field:r,from:n,to:a}=t,i=y5("isExactly");return"".concat(e,"@").concat(r).concat(i).concat(n,"..").concat(a)}}),this},addQueryExtension(t){return e.push({toQuerySyntax(){let{name:e,parameters:r}=t,n=Object.entries(r).map(e=>{let[t,r]=e,n="string"==typeof r?r:r.toQuerySyntax();return"".concat(t,": ").concat(n)}).join(", ");return"$".concat(e,"(").concat(n,")")}}),this},joinUsing(e){return t=e,this},toQuerySyntax(){let r="and"===t?"AND":"OR",n=e.map(e=>e.toQuerySyntax()).join(") ".concat(r," ("));return e.length<=1?n:"(".concat(n,")")}}}"u">typeof window||(r.g.crypto||(r.g.crypto=c("crypto")),!r.g.crypto.getRandomValues&&r.g.crypto.webcrypto&&(r.g.crypto.getRandomValues=r.g.crypto.webcrypto.getRandomValues.bind(r.g.crypto.webcrypto)))}}]);