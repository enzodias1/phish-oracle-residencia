try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="e0d6bc7a-dc56-44b7-af2e-1c8b869df222",e._sentryDebugIdIdentifier="sentry-dbid-e0d6bc7a-dc56-44b7-af2e-1c8b869df222")}()}catch(e){}!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[(new e.Error).stack]=function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];if(null!=r)for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])}return e}({},e._sentryModuleMetadata[(new e.Error).stack],{"_sentryBundlerPluginAppKey:nu-website-br":!0})}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4850],{29695:(e,t,r)=>{r.d(t,{w:()=>rW});var n,i,a=r(71983),s=r(45849),o=r(22043),l=r(80971),d=r(49636),c=r(2332),u=r(73314),h=r(60567),p=r(87624),m=r(81611),f=r(43275),v=(r(12398),r(27122)),y=r(28385),g=r(2257),S=r(51290),_=r(89135),b=r(10160),w=r(35868),k=r(54058),E=r(31209),I=r(31271),C=r(42106),M=r(88722),x=r(97684),T=r(40364),R=r(7755),A=r(75784),D=r(97309),O=r(62234),N=r(7916),L=r(79152),P=d.O,F="sentryReplaySession",B="Unable to send Replay",U=Object.defineProperty,z=(e,t,r)=>((e,t,r)=>t in e?U(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r),W=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(W||{});function j(e){var t=null==e?void 0:e.host;return(null==t?void 0:t.shadowRoot)===e}function H(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function q(e){try{var t,r=e.rules||e.cssRules;return r?((t=Array.from(r,K).join("")).includes(" background-clip: text;")&&!t.includes(" -webkit-background-clip: text;")&&(t=t.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),t):null}catch(e){return null}}function K(e){var t;if("styleSheet"in e)try{t=q(e.styleSheet)||function(e){var t=e.cssText;if(t.split('"').length<3)return t;var r=["@import","url(".concat(JSON.stringify(e.href),")")];return""===e.layerName?r.push("layer"):e.layerName&&r.push("layer(".concat(e.layerName,")")),e.supportsText&&r.push("supports(".concat(e.supportsText,")")),e.media.length&&r.push(e.media.mediaText),r.join(" ")+";"}(e)}catch(e){}else if("selectorText"in e){var r=e.cssText,n=e.selectorText.includes(":"),i="string"==typeof e.style.all&&e.style.all;if(i&&(r=function(e){for(var t="",r=0;r<e.style.length;r++){var n=e.style,i=n[r],a=n.getPropertyPriority(i);t+="".concat(i,":").concat(n.getPropertyValue(i)).concat(a?" !important":"",";")}return"".concat(e.selectorText," { ").concat(t," }")}(e)),n&&(r=r.replace(/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm,"$1\\$2")),n||i)return r}return t||e.cssText}class V{getId(e){if(!e)return -1;var t,r=null==(t=this.getMeta(e))?void 0:t.id;return null!=r?r:-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){var t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach(e=>this.removeNodeFromMap(e))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){var r=t.id;this.idNodeMap.set(r,e),this.nodeMetaMap.set(e,t)}replace(e,t){var r=this.getNode(e);if(r){var n=this.nodeMetaMap.get(r);n&&this.nodeMetaMap.set(t,n)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}constructor(){z(this,"idNodeMap",new Map),z(this,"nodeMetaMap",new WeakMap)}}function J(e){var t=e.maskInputOptions,r=e.tagName,n=e.type;return"OPTION"===r&&(r="SELECT"),!!(t[r.toLowerCase()]||n&&t[n]||"password"===n||"INPUT"===r&&!n&&t.text)}function G(e){var t=e.isMasked,r=e.element,n=e.value,i=e.maskInputFn,a=n||"";return t?(i&&(a=i(a,r)),"*".repeat(a.length)):a}function Y(e){return e.toLowerCase()}function X(e){return e.toUpperCase()}var $="__rrweb_original__";function Q(e){var t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?Y(t):null}function Z(e,t,r){return"INPUT"===t&&("radio"===r||"checkbox"===r)?e.getAttribute("value")||"":e.value}function ee(e,t){try{r=new URL(e,null!=t?t:window.location.href)}catch(e){return null}var r,n,i=r.pathname.match(/\.([0-9a-z]+)(?:$)/i);return null!=(n=null==i?void 0:i[1])?n:null}var et={};function er(e){var t=et[e];if(t)return t;var r=window.document,n=window[e];if(r&&"function"==typeof r.createElement)try{var i=r.createElement("iframe");i.hidden=!0,r.head.appendChild(i);var a=i.contentWindow;a&&a[e]&&(n=a[e]),r.head.removeChild(i)}catch(e){}return et[e]=n.bind(window)}function en(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return er("setTimeout")(...t)}function ei(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return er("clearTimeout")(...t)}function ea(e){try{return e.contentDocument}catch(e){}}var es=1,eo=RegExp("[^a-z0-9-_:]");function el(){return es++}var ed=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,ec=/^(?:[a-z+]+:)?\/\//i,eu=/^www\..*/i,eh=/^(data:)([^,]*),(.*)/i;function ep(e,t){return(e||"").replace(ed,(e,r,n,i,a,s)=>{var o=n||a||s,l=r||i||"";if(!o)return e;if(ec.test(o)||eu.test(o)||eh.test(o))return"url(".concat(l).concat(o).concat(l,")");if("/"===o[0])return"url(".concat(l).concat((t.indexOf("//")>-1?t.split("/").slice(0,3).join("/"):t.split("/")[0]).split("?")[0]+o).concat(l,")");var d=t.split("/"),c=o.split("/");d.pop();var u=!0,h=!1,p=void 0;try{for(var m,f,v=c[Symbol.iterator]();!(u=(f=v.next()).done);u=!0){var y=f.value;"."!==y&&(".."===y?d.pop():d.push(y))}}catch(e){h=!0,p=e}finally{try{u||null==v.return||v.return()}finally{if(h)throw p}}return"url(".concat(l).concat(d.join("/")).concat(l,")")})}var em=/^[^ \t\n\r\u000c]+/,ef=/^[, \t\n\r\u000c]+/,ev=new WeakMap;function ey(e,t){return t&&""!==t.trim()?eg(e,t):t}function eg(e,t){var r=ev.get(e);if(r||(r=e.createElement("a"),ev.set(e,r)),t){if(t.startsWith("blob:")||t.startsWith("data:"))return t}else t="";return r.setAttribute("href",t),r.href}function eS(e,t,r,n,i,a){if(!n)return n;if("src"===r||"href"===r&&("use"!==t||"#"!==n[0])||"xlink:href"===r&&"#"!==n[0])return ey(e,n);if("background"===r&&("table"===t||"td"===t||"th"===t))return ey(e,n);if("srcset"===r)return function(e,t){if(""===t.trim())return t;var r=0;function n(e){var n,i=e.exec(t.substring(r));return i?(n=i[0],r+=n.length,n):""}for(var i=[];n(ef),!(r>=t.length);){var a=n(em);if(","===a.slice(-1))a=ey(e,a.substring(0,a.length-1)),i.push(a);else{var s="";a=ey(e,a);for(var o=!1;;){var l=t.charAt(r);if(""===l){i.push((a+s).trim());break}if(o)")"===l&&(o=!1);else if(","===l){r+=1,i.push((a+s).trim());break}else"("===l&&(o=!0);s+=l,r+=1}}}return i.join(", ")}(e,n);if("style"===r)return ep(n,eg(e));else if("object"===t&&"data"===r)return ey(e,n);return"function"==typeof a?a(r,n,i):n}function e_(e,t,r){return("video"===e||"audio"===e)&&"autoplay"===t}function eb(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return!e||e.nodeType!==e.ELEMENT_NODE||n>r?-1:t(e)?n:eb(e.parentNode,t,r,n+1)}function ew(e,t){return r=>{if(null===r)return!1;try{if(e){if("string"==typeof e){if(r.matches(".".concat(e)))return!0}else if(function(e,t){for(var r=e.classList.length;r--;){var n=e.classList[r];if(t.test(n))return!0}return!1}(r,e))return!0}if(t&&r.matches(t))return!0;return!1}catch(e){return!1}}}function ek(e,t,r,n,i,a){try{var s=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(null===s)return!1;if("INPUT"===s.tagName){var o=s.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(o))return!0}var l=-1,d=-1;if(a){if((d=eb(s,ew(n,i)))<0)return!0;l=eb(s,ew(t,r),d>=0?d:1/0)}else{if((l=eb(s,ew(t,r)))<0)return!1;d=eb(s,ew(n,i),l>=0?l:1/0)}return l>=0?!(d>=0)||l<=d:!(d>=0)&&!!a}catch(e){}return!!a}function eE(e){return null==e?"":e.toLowerCase()}function eI(e,t){var r=t.doc,n=t.mirror,i=t.blockClass,a=t.blockSelector,s=t.unblockSelector,o=t.maskAllText,l=t.maskTextClass,d=t.unmaskTextClass,c=t.maskTextSelector,u=t.unmaskTextSelector,h=t.skipChild,p=void 0!==h&&h,m=t.inlineStylesheet,f=void 0===m||m,v=t.maskInputOptions,y=void 0===v?{}:v,g=t.maskAttributeFn,S=t.maskTextFn,_=t.maskInputFn,b=t.slimDOMOptions,w=t.dataURLOptions,k=void 0===w?{}:w,E=t.inlineImages,I=void 0!==E&&E,C=t.recordCanvas,M=void 0!==C&&C,x=t.onSerialize,T=t.onIframeLoad,R=t.iframeLoadTimeout,A=void 0===R?5e3:R,D=t.onBlockedImageLoad,O=t.onStylesheetLoad,N=t.stylesheetLoadTimeout,L=void 0===N?5e3:N,P=t.keepIframeSrcFn,F=void 0===P?()=>!1:P,B=t.newlyAddedElement,U=t.preserveWhiteSpace,z=void 0===U||U,K=function(e,t){var r=t.doc,n=t.mirror,i=t.blockClass,a=t.blockSelector,s=t.unblockSelector,o=t.maskAllText,l=t.maskAttributeFn,d=t.maskTextClass,c=t.unmaskTextClass,u=t.maskTextSelector,h=t.unmaskTextSelector,p=t.inlineStylesheet,m=t.maskInputOptions,f=void 0===m?{}:m,v=t.maskTextFn,y=t.maskInputFn,g=t.dataURLOptions,S=t.inlineImages,_=t.recordCanvas,b=t.keepIframeSrcFn,w=t.newlyAddedElement,k=function(e,t){if(t.hasNode(e)){var r=t.getId(e);return 1===r?void 0:r}}(r,n);switch(e.nodeType){case e.DOCUMENT_NODE:if("CSS1Compat"!==e.compatMode)return{type:W.Document,childNodes:[],compatMode:e.compatMode};return{type:W.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:W.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:k};case e.ELEMENT_NODE:return function(e,t){for(var r,n=t.doc,i=t.blockClass,a=t.blockSelector,s=t.unblockSelector,o=t.inlineStylesheet,l=t.maskInputOptions,d=void 0===l?{}:l,c=t.maskAttributeFn,u=t.maskInputFn,h=t.dataURLOptions,p=void 0===h?{}:h,m=t.inlineImages,f=t.recordCanvas,v=t.keepIframeSrcFn,y=t.newlyAddedElement,g=t.rootId,S=t.maskTextClass,_=t.unmaskTextClass,b=t.maskTextSelector,w=t.unmaskTextSelector,k=function(e,t,r,n){try{if(n&&e.matches(n))return!1;if("string"==typeof t){if(e.classList.contains(t))return!0}else for(var i=e.classList.length;i--;){var a=e.classList[i];if(t.test(a))return!0}if(r)return e.matches(r)}catch(e){}return!1}(e,i,a,s),E=function(e){if(e instanceof HTMLFormElement)return"form";var t=Y(e.tagName);return eo.test(t)?"div":t}(e),I={},C=e.attributes.length,M=0;M<C;M++){var x=e.attributes[M];x.name&&!e_(E,x.name,x.value)&&(I[x.name]=eS(n,E,Y(x.name),x.value,e,c))}if("link"===E&&o){var T=Array.from(n.styleSheets).find(t=>t.href===e.href),R=null;T&&(R=q(T)),R&&(I.rel=null,I.href=null,I.crossorigin=null,I._cssText=ep(R,T.href))}if("style"===E&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){var A=q(e.sheet);A&&(I._cssText=ep(A,eg(n)))}if("input"===E||"textarea"===E||"select"===E||"option"===E){var D=Q(e),O=Z(e,X(E),D),N=e.checked;if("submit"!==D&&"button"!==D&&O){var L=ek(e,S,b,_,w,J({type:D,tagName:X(E),maskInputOptions:d}));I.value=G({isMasked:L,element:e,value:O,maskInputFn:u})}N&&(I.checked=N)}if("option"===E&&(e.selected&&!d.select?I.selected=!0:delete I.selected),"canvas"===E&&f){if("2d"===e.__context)!function(e){var t=e.getContext("2d");if(!t)return!0;for(var r=0;r<e.width;r+=50)for(var n=0;n<e.height;n+=50){var i=t.getImageData;if(new Uint32Array(($ in i?i[$]:i).call(t,r,n,Math.min(50,e.width-r),Math.min(50,e.height-n)).data.buffer).some(e=>0!==e))return!1}return!0}(e)&&(I.rr_dataURL=e.toDataURL(p.type,p.quality));else if(!("__context"in e)){var P=e.toDataURL(p.type,p.quality),F=n.createElement("canvas");F.width=e.width,F.height=e.height,P!==F.toDataURL(p.type,p.quality)&&(I.rr_dataURL=P)}}if("img"===E&&m){t_||(tb=(t_=n.createElement("canvas")).getContext("2d"));var B=e.currentSrc||e.getAttribute("src")||"<unknown-src>",U=e.crossOrigin,z=()=>{e.removeEventListener("load",z);try{t_.width=e.naturalWidth,t_.height=e.naturalHeight,tb.drawImage(e,0,0),I.rr_dataURL=t_.toDataURL(p.type,p.quality)}catch(t){if("anonymous"!==e.crossOrigin){e.crossOrigin="anonymous",e.complete&&0!==e.naturalWidth?z():e.addEventListener("load",z);return}console.warn("Cannot inline img src=".concat(B,"! Error: ").concat(t))}"anonymous"===e.crossOrigin&&(U?I.crossOrigin=U:e.removeAttribute("crossorigin"))};e.complete&&0!==e.naturalWidth?z():e.addEventListener("load",z)}if(("audio"===E||"video"===E)&&(I.rr_mediaState=e.paused?"paused":"played",I.rr_mediaCurrentTime=e.currentTime),!(void 0!==y&&y)&&(e.scrollLeft&&(I.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(I.rr_scrollTop=e.scrollTop)),k){var j=e.getBoundingClientRect(),H=j.width,K=j.height;I={class:I.class,rr_width:"".concat(H,"px"),rr_height:"".concat(K,"px")}}"iframe"!==E||v(I.src)||(k||ea(e)||(I.rr_src=I.src),delete I.src);try{customElements.get(E)&&(r=!0)}catch(e){}return{type:W.Element,tagName:E,attributes:I,childNodes:[],isSVG:!!("svg"===e.tagName||e.ownerSVGElement)||void 0,needBlock:k,rootId:g,isCustom:r}}(e,{doc:r,blockClass:i,blockSelector:a,unblockSelector:s,inlineStylesheet:p,maskAttributeFn:l,maskInputOptions:f,maskInputFn:y,dataURLOptions:void 0===g?{}:g,inlineImages:S,recordCanvas:_,keepIframeSrcFn:b,newlyAddedElement:void 0!==w&&w,rootId:k,maskTextClass:d,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:h});case e.TEXT_NODE:return function(e,t){var r,n=t.maskAllText,i=t.maskTextClass,a=t.unmaskTextClass,s=t.maskTextSelector,o=t.unmaskTextSelector,l=t.maskTextFn,d=t.maskInputOptions,c=t.maskInputFn,u=t.rootId,h=e.parentNode&&e.parentNode.tagName,p=e.textContent,m="STYLE"===h||void 0,f="SCRIPT"===h||void 0,v="TEXTAREA"===h||void 0;if(m&&p){try{e.nextSibling||e.previousSibling||(null==(r=e.parentNode.sheet)?void 0:r.cssRules)&&(p=q(e.parentNode.sheet))}catch(t){console.warn("Cannot get CSS styles from text's parentNode. Error: ".concat(t),e)}p=ep(p,eg(t.doc))}f&&(p="SCRIPT_PLACEHOLDER");var y=ek(e,i,s,a,o,n);return m||f||v||!p||!y||(p=l?l(p,e.parentElement):p.replace(/[\S]/g,"*")),v&&p&&(d.textarea||y)&&(p=c?c(p,e.parentNode):p.replace(/[\S]/g,"*")),"OPTION"===h&&p&&(p=G({isMasked:ek(e,i,s,a,o,J({type:null,tagName:h,maskInputOptions:d})),element:e,value:p,maskInputFn:c})),{type:W.Text,textContent:p||"",isStyle:m,rootId:u}}(e,{doc:r,maskAllText:o,maskTextClass:d,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:h,maskTextFn:v,maskInputOptions:f,maskInputFn:y,rootId:k});case e.CDATA_SECTION_NODE:return{type:W.CDATA,textContent:"",rootId:k};case e.COMMENT_NODE:return{type:W.Comment,textContent:e.textContent||"",rootId:k};default:return!1}}(e,{doc:r,mirror:n,blockClass:i,blockSelector:a,maskAllText:o,unblockSelector:s,maskTextClass:l,unmaskTextClass:d,maskTextSelector:c,unmaskTextSelector:u,inlineStylesheet:f,maskInputOptions:y,maskAttributeFn:g,maskTextFn:S,maskInputFn:_,dataURLOptions:k,inlineImages:I,recordCanvas:M,keepIframeSrcFn:F,newlyAddedElement:void 0!==B&&B});if(!K)return console.warn(e,"not serialized"),null;em=n.hasNode(e)?n.getId(e):!function(e,t){if(t.comment&&e.type===W.Comment)return!0;if(e.type===W.Element){if(t.script&&("script"===e.tagName||"link"===e.tagName&&("preload"===e.attributes.rel||"modulepreload"===e.attributes.rel)||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&"js"===ee(e.attributes.href)))return!0;else if(t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(eE(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===eE(e.attributes.name)||"icon"===eE(e.attributes.rel)||"apple-touch-icon"===eE(e.attributes.rel)||"shortcut icon"===eE(e.attributes.rel))))return!0;else if("meta"===e.tagName){if(t.headMetaDescKeywords&&eE(e.attributes.name).match(/^description|keywords$/))return!0;else if(t.headMetaSocial&&(eE(e.attributes.property).match(/^(og|twitter|fb):/)||eE(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===eE(e.attributes.name)))return!0;else if(t.headMetaRobots&&("robots"===eE(e.attributes.name)||"googlebot"===eE(e.attributes.name)||"bingbot"===eE(e.attributes.name)))return!0;else if(t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;else if(t.headMetaAuthorship&&("author"===eE(e.attributes.name)||"generator"===eE(e.attributes.name)||"framework"===eE(e.attributes.name)||"publisher"===eE(e.attributes.name)||"progid"===eE(e.attributes.name)||eE(e.attributes.property).match(/^article:/)||eE(e.attributes.property).match(/^product:/)))return!0;else if(t.headMetaVerification&&("google-site-verification"===eE(e.attributes.name)||"yandex-verification"===eE(e.attributes.name)||"csrf-token"===eE(e.attributes.name)||"p:domain_verify"===eE(e.attributes.name)||"verify-v1"===eE(e.attributes.name)||"verification"===eE(e.attributes.name)||"shopify-checkout-api-token"===eE(e.attributes.name)))return!0}}return!1}(K,b)&&(z||K.type!==W.Text||K.isStyle||K.textContent.replace(/^\s+|\s+$/gm,"").length)?el():-2;var V=Object.assign(K,{id:em});if(n.add(e,V),-2===em)return null;x&&x(e);var et=!p;if(V.type===W.Element){et=et&&!V.needBlock;var er=e.shadowRoot;er&&H(er)&&(V.isShadowHost=!0)}if((V.type===W.Document||V.type===W.Element)&&et){b.headWhitespace&&V.type===W.Element&&"head"===V.tagName&&(z=!1);var es={doc:r,mirror:n,blockClass:i,blockSelector:a,maskAllText:o,unblockSelector:s,maskTextClass:l,unmaskTextClass:d,maskTextSelector:c,unmaskTextSelector:u,skipChild:p,inlineStylesheet:f,maskInputOptions:y,maskAttributeFn:g,maskTextFn:S,maskInputFn:_,slimDOMOptions:b,dataURLOptions:k,inlineImages:I,recordCanvas:M,preserveWhiteSpace:z,onSerialize:x,onIframeLoad:T,iframeLoadTimeout:A,onBlockedImageLoad:D,onStylesheetLoad:O,stylesheetLoadTimeout:L,keepIframeSrcFn:F},ed=e.childNodes?Array.from(e.childNodes):[],ec=!0,eu=!1,eh=void 0;try{for(var em,ef,ev=ed[Symbol.iterator]();!(ec=(ef=ev.next()).done);ec=!0){var ey=ef.value,eb=eI(ey,es);eb&&V.childNodes.push(eb)}}catch(e){eu=!0,eh=e}finally{try{ec||null==ev.return||ev.return()}finally{if(eu)throw eh}}if(e.nodeType===e.ELEMENT_NODE&&e.shadowRoot){var ew=!0,eC=!1,eM=void 0;try{for(var ex,eT=Array.from(e.shadowRoot.childNodes)[Symbol.iterator]();!(ew=(ex=eT.next()).done);ew=!0){var eR=ex.value,eA=eI(eR,es);eA&&(H(e.shadowRoot)&&(eA.isShadow=!0),V.childNodes.push(eA))}}catch(e){eC=!0,eM=e}finally{try{ew||null==eT.return||eT.return()}finally{if(eC)throw eM}}}}if(e.parentNode&&j(e.parentNode)&&H(e.parentNode)&&(V.isShadow=!0),V.type!==W.Element||"iframe"!==V.tagName||V.needBlock||function(e,t,r){var n,i=e.contentWindow;if(i){var a=!1;try{n=i.document.readyState}catch(e){return}if("complete"!==n){var s=en(()=>{a||(t(),a=!0)},r);e.addEventListener("load",()=>{ei(s),a=!0,t()});return}var o="about:blank";if(i.location.href!==o||e.src===o||""===e.src)return en(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}}(e,()=>{var t=ea(e);if(t&&T){var r=eI(t,{doc:t,mirror:n,blockClass:i,blockSelector:a,unblockSelector:s,maskAllText:o,maskTextClass:l,unmaskTextClass:d,maskTextSelector:c,unmaskTextSelector:u,skipChild:!1,inlineStylesheet:f,maskInputOptions:y,maskAttributeFn:g,maskTextFn:S,maskInputFn:_,slimDOMOptions:b,dataURLOptions:k,inlineImages:I,recordCanvas:M,preserveWhiteSpace:z,onSerialize:x,onIframeLoad:T,iframeLoadTimeout:A,onStylesheetLoad:O,stylesheetLoadTimeout:L,keepIframeSrcFn:F});r&&T(e,r)}},A),V.type===W.Element&&"img"===V.tagName&&!e.complete&&V.needBlock){var eD=()=>{if(e.isConnected&&!e.complete&&D)try{var t=e.getBoundingClientRect();t.width>0&&t.height>0&&D(e,V,t)}catch(e){}e.removeEventListener("load",eD)};e.isConnected&&e.addEventListener("load",eD)}return V.type===W.Element&&"link"===V.tagName&&"string"==typeof V.attributes.rel&&("stylesheet"===V.attributes.rel||"preload"===V.attributes.rel&&"string"==typeof V.attributes.href&&"css"===ee(V.attributes.href))&&function(e,t,r){var n,i=!1;try{n=e.sheet}catch(e){return}if(!n){var a=en(()=>{i||(t(),i=!0)},r);e.addEventListener("load",()=>{ei(a),i=!0,t()})}}(e,()=>{if(O){var t=eI(e,{doc:r,mirror:n,blockClass:i,blockSelector:a,unblockSelector:s,maskAllText:o,maskTextClass:l,unmaskTextClass:d,maskTextSelector:c,unmaskTextSelector:u,skipChild:!1,inlineStylesheet:f,maskInputOptions:y,maskAttributeFn:g,maskTextFn:S,maskInputFn:_,slimDOMOptions:b,dataURLOptions:k,inlineImages:I,recordCanvas:M,preserveWhiteSpace:z,onSerialize:x,onIframeLoad:T,iframeLoadTimeout:A,onStylesheetLoad:O,stylesheetLoadTimeout:L,keepIframeSrcFn:F});t&&O(e,t)}},L),V.type===W.Element&&delete V.needBlock,V}function eC(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document,n={capture:!0,passive:!0};return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t,n)}var eM="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.",ex={map:{},getId:()=>(console.error(eM),-1),getNode:()=>(console.error(eM),null),removeNodeFromMap(){console.error(eM)},has:()=>(console.error(eM),!1),reset(){console.error(eM)}};function eT(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=null,i=0;return function(){for(var a=arguments.length,s=Array(a),o=0;o<a;o++)s[o]=arguments[o];var l=Date.now();i||!1!==r.leading||(i=l);var d=t-(l-i),c=this;d<=0||d>t?(n&&(function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];eV("clearTimeout")(...t)}(n),n=null),i=l,e.apply(c,s)):n||!1===r.trailing||(n=eJ(()=>{i=!1===r.leading?0:Date.now(),n=null,e.apply(c,s)},d))}}function eR(e,t,r){try{if(!(t in e))return()=>{};var n=e[t],i=r(n);return"function"==typeof i&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__rrweb_original__:{enumerable:!1,value:n}})),e[t]=i,()=>{e[t]=n}}catch(e){return()=>{}}}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(ex=new Proxy(ex,{get:(e,t,r)=>("map"===t&&console.error(eM),Reflect.get(e,t,r))}));var eA=Date.now;function eD(e){var t,r,n,i,a,s,o=e.document;return{left:o.scrollingElement?o.scrollingElement.scrollLeft:void 0!==e.pageXOffset?e.pageXOffset:(null==o?void 0:o.documentElement.scrollLeft)||(null==o||null==(r=o.body)||null==(t=r.parentElement)?void 0:t.scrollLeft)||(null==o||null==(n=o.body)?void 0:n.scrollLeft)||0,top:o.scrollingElement?o.scrollingElement.scrollTop:void 0!==e.pageYOffset?e.pageYOffset:(null==o?void 0:o.documentElement.scrollTop)||(null==o||null==(a=o.body)||null==(i=a.parentElement)?void 0:i.scrollTop)||(null==o||null==(s=o.body)?void 0:s.scrollTop)||0}}function eO(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function eN(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function eL(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch(e){return null}}function eP(e,t,r,n,i){if(!e)return!1;var a=eL(e);if(!a)return!1;var s=ew(t,r);if(!i){var o=n&&a.matches(n);return s(a)&&!o}var l=eb(a,s),d=-1;return!(l<0)&&(n&&(d=eb(a,ew(null,n))),l>-1&&d<0||l<d)}function eF(e,t){return -2===t.getId(e)}function eB(e){return!!e.changedTouches}function eU(e,t){return!!("IFRAME"===e.nodeName&&t.getMeta(e))}function ez(e,t){return!!("LINK"===e.nodeName&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&"stylesheet"===e.getAttribute("rel")&&t.getMeta(e))}function eW(e){return!!(null==e?void 0:e.shadowRoot)}/[1-9][0-9]{12}/.test(Date.now().toString())||(eA=()=>new Date().getTime());class ej{getId(e){var t;return null!=(t=this.styleIDMap.get(e))?t:-1}has(e){return this.styleIDMap.has(e)}add(e,t){var r;return this.has(e)?this.getId(e):(r=void 0===t?this.id++:t,this.styleIDMap.set(e,r),this.idStyleMap.set(r,e),r)}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}}function eH(e){var t,r,n=null;return(null==(r=e.getRootNode)||null==(t=r.call(e))?void 0:t.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(n=e.getRootNode().host),n}function eq(e){var t=e.ownerDocument;return!!t&&(t.contains(e)||function(e){var t=e.ownerDocument;if(!t)return!1;var r=function(e){for(var t,r=e;t=eH(r);)r=t;return r}(e);return t.contains(r)}(e))}var eK={};function eV(e){var t=eK[e];if(t)return t;var r=window.document,n=window[e];if(r&&"function"==typeof r.createElement)try{var i=r.createElement("iframe");i.hidden=!0,r.head.appendChild(i);var a=i.contentWindow;a&&a[e]&&(n=a[e]),r.head.removeChild(i)}catch(e){}return eK[e]=n.bind(window)}function eJ(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return eV("setTimeout")(...t)}var eG=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(eG||{}),eY=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(eY||{}),eX=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(eX||{}),e$=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(e$||{}),eQ=(e=>(e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange",e[e.RateChange=4]="RateChange",e))(eQ||{});function eZ(e){try{return e.contentDocument}catch(e){}}class e0{get(e){if(e>=this.length)throw Error("Position outside of list range");for(var t=this.head,r=0;r<e;r++)t=(null==t?void 0:t.next)||null;return t}addNode(e){var t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&"__ln"in e.previousSibling){var r=e.previousSibling.__ln.next;t.next=r,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,r&&(r.previous=t)}else if(e.nextSibling&&"__ln"in e.nextSibling&&e.nextSibling.__ln.previous){var n=e.nextSibling.__ln.previous;t.previous=n,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,n&&(n.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;null===t.next&&(this.tail=t),this.length++}removeNode(e){var t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next?t.next.previous=t.previous:this.tail=t.previous):(this.head=t.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}constructor(){this.length=0,this.head=null,this.tail=null}}var e1=(e,t)=>"".concat(e,"@").concat(t);class e2{init(e){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(t=>{this[t]=e[t]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=e=>{e.forEach(this.processMutation),this.emit()},this.emit=()=>{if(!this.frozen&&!this.locked){for(var e=[],t=new Set,r=new e0,n=e=>{for(var t=e,r=-2;-2===r;)r=(t=t&&t.nextSibling)&&this.mirror.getId(t);return r},i=i=>{if(i.parentNode&&eq(i)){var a=j(i.parentNode)?this.mirror.getId(eH(i)):this.mirror.getId(i.parentNode),s=n(i);if(-1===a||-1===s)return r.addNode(i);var o=eI(i,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:e=>{eU(e,this.mirror)&&!eP(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&this.iframeManager.addIframe(e),ez(e,this.mirror)&&this.stylesheetManager.trackLinkElement(e),eW(i)&&this.shadowDomManager.addShadowRoot(i.shadowRoot,this.doc)},onIframeLoad:(e,t)=>{eP(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(this.iframeManager.attachIframe(e,t),e.contentWindow&&this.canvasManager.addWindow(e.contentWindow),this.shadowDomManager.observeAttachShadow(e))},onStylesheetLoad:(e,t)=>{this.stylesheetManager.attachLinkElement(e,t)},onBlockedImageLoad:(e,t,r)=>{var n=r.width,i=r.height;this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:{style:{width:"".concat(n,"px"),height:"".concat(i,"px")}}}]})}});o&&(e.push({parentId:a,nextId:s,node:o}),t.add(o.id))}};this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());var a=!0,s=!1,o=void 0;try{for(var l,d=this.movedSet[Symbol.iterator]();!(a=(l=d.next()).done);a=!0){var c=l.value;(!e5(this.removes,c,this.mirror)||this.movedSet.has(c.parentNode))&&i(c)}}catch(e){s=!0,o=e}finally{try{a||null==d.return||d.return()}finally{if(s)throw o}}var u=!0,h=!1,p=void 0;try{for(var m,f=this.addedSet[Symbol.iterator]();!(u=(m=f.next()).done);u=!0){var v=m.value;e8(this.droppedSet,v)||e5(this.removes,v,this.mirror)?e8(this.movedSet,v)?i(v):this.droppedSet.add(v):i(v)}}catch(e){h=!0,p=e}finally{try{u||null==f.return||f.return()}finally{if(h)throw p}}for(var y=null;r.length;){var g=null;if(y){var S=this.mirror.getId(y.value.parentNode),_=n(y.value);-1!==S&&-1!==_&&(g=y)}if(!g)for(var b=r.tail;b;){var w=b;if(b=b.previous,w){var k=this.mirror.getId(w.value.parentNode);if(-1===n(w.value))continue;if(-1!==k){g=w;break}var E=w.value;if(E.parentNode&&E.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){var I=E.parentNode.host;if(-1!==this.mirror.getId(I)){g=w;break}}}}if(!g){for(;r.head;)r.removeNode(r.head.value);break}y=g.previous,r.removeNode(g.value),i(g.value)}var C={texts:this.texts.map(e=>({id:this.mirror.getId(e.node),value:e.value})).filter(e=>!t.has(e.id)).filter(e=>this.mirror.has(e.id)),attributes:this.attributes.map(e=>{var t=e.attributes;if("string"==typeof t.style){var r=JSON.stringify(e.styleDiff),n=JSON.stringify(e._unchangedStyles);r.length<t.style.length&&(r+n).split("var(").length===t.style.split("var(").length&&(t.style=e.styleDiff)}return{id:this.mirror.getId(e.node),attributes:t}}).filter(e=>!t.has(e.id)).filter(e=>this.mirror.has(e.id)),removes:this.removes,adds:e};(C.texts.length||C.attributes.length||C.removes.length||C.adds.length)&&(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(C))}},this.processMutation=e=>{if(!eF(e.target,this.mirror))switch(e.type){case"characterData":var t=e.target.textContent;eP(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||t===e.oldValue||this.texts.push({value:ek(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&t?this.maskTextFn?this.maskTextFn(t,eL(e.target)):t.replace(/[\S]/g,"*"):t,node:e.target});break;case"attributes":var r=e.target,n=e.attributeName,i=e.target.getAttribute(n);if("value"===n){var a=Q(r),s=r.tagName;i=Z(r,s,a);var o=J({maskInputOptions:this.maskInputOptions,tagName:s,type:a});i=G({isMasked:ek(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,o),element:r,value:i,maskInputFn:this.maskInputFn})}if(eP(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||i===e.oldValue)return;var l=this.attributeMap.get(e.target);if("IFRAME"===r.tagName&&"src"===n&&!this.keepIframeSrcFn(i)){if(eZ(r))return;n="rr_src"}if(l||(l={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(l),this.attributeMap.set(e.target,l)),"type"===n&&"INPUT"===r.tagName&&"password"===(e.oldValue||"").toLowerCase()&&r.setAttribute("data-rr-is-password","true"),!e_(r.tagName,n)&&(l.attributes[n]=eS(this.doc,Y(r.tagName),Y(n),i,r,this.maskAttributeFn),"style"===n)){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch(e){this.unattachedDoc=this.doc}var d=this.unattachedDoc.createElement("span");e.oldValue&&d.setAttribute("style",e.oldValue);var c=!0,u=!1,h=void 0;try{for(var p,m=Array.from(r.style)[Symbol.iterator]();!(c=(p=m.next()).done);c=!0){var f=p.value,v=r.style.getPropertyValue(f),y=r.style.getPropertyPriority(f);v!==d.style.getPropertyValue(f)||y!==d.style.getPropertyPriority(f)?""===y?l.styleDiff[f]=v:l.styleDiff[f]=[v,y]:l._unchangedStyles[f]=[v,y]}}catch(e){u=!0,h=e}finally{try{c||null==m.return||m.return()}finally{if(u)throw h}}var g=!0,S=!1,_=void 0;try{for(var b,w=Array.from(d.style)[Symbol.iterator]();!(g=(b=w.next()).done);g=!0){var k=b.value;""===r.style.getPropertyValue(k)&&(l.styleDiff[k]=!1)}}catch(e){S=!0,_=e}finally{try{g||null==w.return||w.return()}finally{if(S)throw _}}}break;case"childList":if(eP(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;e.addedNodes.forEach(t=>this.genAdds(t,e.target)),e.removedNodes.forEach(t=>{var r=this.mirror.getId(t),n=j(e.target)?this.mirror.getId(e.target.host):this.mirror.getId(e.target);eP(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||eF(t,this.mirror)||-1===this.mirror.getId(t)||(this.addedSet.has(t)?(e3(this.addedSet,t),this.droppedSet.add(t)):this.addedSet.has(e.target)&&-1===r||function e(t,r){if(j(t))return!1;var n=r.getId(t);return!r.has(n)||(!t.parentNode||t.parentNode.nodeType!==t.DOCUMENT_NODE)&&(!t.parentNode||e(t.parentNode,r))}(e.target,this.mirror)||(this.movedSet.has(t)&&this.movedMap[e1(r,n)]?e3(this.movedSet,t):this.removes.push({parentId:n,id:r,isShadow:!!(j(e.target)&&H(e.target))||void 0})),this.mapRemoves.push(t))})}},this.genAdds=(e,t)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!(this.addedSet.has(e)||this.movedSet.has(e))){if(this.mirror.hasNode(e)){if(eF(e,this.mirror))return;this.movedSet.add(e);var r=null;t&&this.mirror.hasNode(t)&&(r=this.mirror.getId(t)),r&&-1!==r&&(this.movedMap[e1(this.mirror.getId(e),r)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);!eP(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&(e.childNodes&&e.childNodes.forEach(e=>this.genAdds(e)),eW(e)&&e.shadowRoot.childNodes.forEach(t=>{this.processedNodeManager.add(t,this),this.genAdds(t,e)}))}}}}function e3(e,t){var r;e.delete(t),null==(r=t.childNodes)||r.forEach(t=>e3(e,t))}function e5(e,t,r){return 0!==e.length&&function(e,t,r){for(var n=t.parentNode;n;){var i=function(){var t=r.getId(n);if(e.some(e=>e.id===t))return{v:!0};n=n.parentNode}();if("object"===(0,l._)(i))return i.v}return!1}(e,t,r)}function e8(e,t){return 0!==e.size&&function e(t,r){var n=r.parentNode;return!!n&&(!!t.has(n)||e(t,n))}(e,t)}var e6=e=>tw?function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];try{return e(...r)}catch(e){if(tw&&!0===tw(e))return()=>{};throw e}}:e,e4=[];function e7(e){try{if("composedPath"in e){var t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch(e){}return e&&e.target}function e9(e,t){var r,n,i,a=new e2;e4.push(a),a.init(e);var s=window.MutationObserver||window.__rrMutationObserver,o=null==(i=window)||null==(n=i.Zone)||null==(r=n.__symbol__)?void 0:r.call(n,"MutationObserver");o&&window[o]&&(s=window[o]);var l=new s(e6(t=>{e.onMutation&&!1===e.onMutation(t)||a.processMutations.bind(a)(t)}));return l.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),l}function te(e){var t=e.scrollCb,r=e.doc,n=e.mirror,i=e.blockClass,a=e.blockSelector,s=e.unblockSelector,o=e.sampling;return eC("scroll",e6(eT(e6(e=>{var o=e7(e);if(!(!o||eP(o,i,a,s,!0))){var l=n.getId(o);if(o===r&&r.defaultView){var d=eD(r.defaultView);t({id:l,x:d.left,y:d.top})}else t({id:l,x:o.scrollLeft,y:o.scrollTop})}}),o.scroll||100)),r)}var tt=["INPUT","TEXTAREA","SELECT"],tr=new WeakMap;function tn(e){var t=[];if(to("CSSGroupingRule")&&e.parentRule instanceof CSSGroupingRule||to("CSSMediaRule")&&e.parentRule instanceof CSSMediaRule||to("CSSSupportsRule")&&e.parentRule instanceof CSSSupportsRule||to("CSSConditionRule")&&e.parentRule instanceof CSSConditionRule){var r=Array.from(e.parentRule.cssRules).indexOf(e);t.unshift(r)}else if(e.parentStyleSheet){var n=Array.from(e.parentStyleSheet.cssRules).indexOf(e);t.unshift(n)}return t}function ti(e,t,r){var n,i;return e?(e.ownerNode?n=t.getId(e.ownerNode):i=r.getId(e),{styleId:i,id:n}):{}}function ta(e,t){var r,n,i,a=e.mirror,s=e.stylesheetManager,o=null;o="#document"===t.nodeName?a.getId(t):a.getId(t.host);var l="#document"===t.nodeName?null==(r=t.defaultView)?void 0:r.Document:null==(i=t.ownerDocument)||null==(n=i.defaultView)?void 0:n.ShadowRoot,d=(null==l?void 0:l.prototype)?Object.getOwnPropertyDescriptor(null==l?void 0:l.prototype,"adoptedStyleSheets"):void 0;return null!==o&&-1!==o&&l&&d?(Object.defineProperty(t,"adoptedStyleSheets",{configurable:d.configurable,enumerable:d.enumerable,get(){var e;return null==(e=d.get)?void 0:e.call(this)},set(e){var t,r=null==(t=d.set)?void 0:t.call(this,e);if(null!==o&&-1!==o)try{s.adoptStyleSheets(e,o)}catch(e){}return r}}),e6(()=>{Object.defineProperty(t,"adoptedStyleSheets",{configurable:d.configurable,enumerable:d.enumerable,get:d.get,set:d.set})})):()=>{}}function ts(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=e.doc.defaultView;if(!t)return()=>{};e.recordDOM&&(ea=e9(e,e.doc));var r=function(e){var t,r=e.mousemoveCb,n=e.sampling,i=e.doc,a=e.mirror;if(!1===n.mousemove)return()=>{};var s="number"==typeof n.mousemove?n.mousemove:50,o="number"==typeof n.mousemoveCallback?n.mousemoveCallback:500,l=[],d=eT(e6(e=>{var n=Date.now()-t;r(l.map(e=>(e.timeOffset-=n,e)),e),l=[],t=null}),o),c=e6(eT(e6(e=>{var r=e7(e),n=eB(e)?e.changedTouches[0]:e,i=n.clientX,s=n.clientY;t||(t=eA()),l.push({x:i,y:s,id:a.getId(r),timeOffset:eA()-t}),d("undefined"!=typeof DragEvent&&e instanceof DragEvent?eY.Drag:e instanceof MouseEvent?eY.MouseMove:eY.TouchMove)}),s,{trailing:!1})),u=[eC("mousemove",c,i),eC("touchmove",c,i),eC("drag",c,i)];return e6(()=>{u.forEach(e=>e())})}(e),n=function(e){var t=e.mouseInteractionCb,r=e.doc,n=e.mirror,i=e.blockClass,s=e.blockSelector,o=e.unblockSelector,l=e.sampling;if(!1===l.mouseInteraction)return()=>{};var d=!0===l.mouseInteraction||void 0===l.mouseInteraction?{}:l.mouseInteraction,c=[],u=null;return Object.keys(eX).filter(e=>Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==d[e]).forEach(e=>{var l=Y(e),d=r=>{var l=e7(r);if(!eP(l,i,s,o,!0)){var d=null,c=e;if("pointerType"in r){switch(r.pointerType){case"mouse":d=e$.Mouse;break;case"touch":d=e$.Touch;break;case"pen":d=e$.Pen}d===e$.Touch?eX[e]===eX.MouseDown?c="TouchStart":eX[e]===eX.MouseUp&&(c="TouchEnd"):e$.Pen}else eB(r)&&(d=e$.Touch);null!==d?(u=d,(c.startsWith("Touch")&&d===e$.Touch||c.startsWith("Mouse")&&d===e$.Mouse)&&(d=null)):eX[e]===eX.Click&&(d=u,u=null);var h=eB(r)?r.changedTouches[0]:r;if(h){var p=n.getId(l),m=h.clientX,f=h.clientY;e6(t)((0,a._)({type:eX[c],id:p,x:m,y:f},null!==d&&{pointerType:d}))}}};if(window.PointerEvent)switch(eX[e]){case eX.MouseDown:case eX.MouseUp:l=l.replace("mouse","pointer");break;case eX.TouchStart:case eX.TouchEnd:return}c.push(eC(l,d,r))}),e6(()=>{c.forEach(e=>e())})}(e),i=te(e),l=(b={win:t},w=e.viewportResizeCb,k=b.win,E=-1,I=-1,eC("resize",e6(eT(e6(()=>{var e=eO(),t=eN();(E!==e||I!==t)&&(w({width:Number(t),height:Number(e)}),E=e,I=t)}),200)),k)),d=function(e){var t=e.inputCb,r=e.doc,n=e.mirror,i=e.blockClass,o=e.blockSelector,l=e.unblockSelector,d=e.ignoreClass,c=e.ignoreSelector,u=e.maskInputOptions,h=e.maskInputFn,p=e.sampling,m=e.userTriggeredOnInput,f=e.maskTextClass,v=e.unmaskTextClass,y=e.maskTextSelector,g=e.unmaskTextSelector;function S(e){var t=e7(e),n=e.isTrusted,a=t&&X(t.tagName);if("OPTION"===a&&(t=t.parentElement),!(!t||!a||0>tt.indexOf(a)||eP(t,i,o,l,!0))){var s=t;if(!(s.classList.contains(d)||c&&s.matches(c))){var p=Q(t),S=Z(s,a,p),b=!1,w=J({maskInputOptions:u,tagName:a,type:p}),k=ek(t,f,y,v,g,w);("radio"===p||"checkbox"===p)&&(b=t.checked),S=G({isMasked:k,element:t,value:S,maskInputFn:h}),_(t,m?{text:S,isChecked:b,userTriggered:n}:{text:S,isChecked:b});var E=t.name;"radio"===p&&E&&b&&r.querySelectorAll('input[type="radio"][name="'.concat(E,'"]')).forEach(e=>{if(e!==t){var r=G({isMasked:k,element:e,value:Z(e,a,p),maskInputFn:h});_(e,m?{text:r,isChecked:!b,userTriggered:!1}:{text:r,isChecked:!b})}})}}}function _(e,r){var i=tr.get(e);if(!i||i.text!==r.text||i.isChecked!==r.isChecked){tr.set(e,r);var o=n.getId(e);e6(t)((0,s._)((0,a._)({},r),{id:o}))}}var b=("last"===p.input?["change"]:["input","change"]).map(e=>eC(e,e6(S),r)),w=r.defaultView;if(!w)return()=>{b.forEach(e=>e())};var k=w.Object.getOwnPropertyDescriptor(w.HTMLInputElement.prototype,"value"),E=[[w.HTMLInputElement.prototype,"value"],[w.HTMLInputElement.prototype,"checked"],[w.HTMLSelectElement.prototype,"value"],[w.HTMLTextAreaElement.prototype,"value"],[w.HTMLSelectElement.prototype,"selectedIndex"],[w.HTMLOptionElement.prototype,"selected"]];return k&&k.set&&b.push(...E.map(e=>(function e(t,r,n,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:window,s=a.Object.getOwnPropertyDescriptor(t,r);return a.Object.defineProperty(t,r,i?n:{set(e){eJ(()=>{n.set.call(this,e)},0),s&&s.set&&s.set.call(this,e)}}),()=>e(t,r,s||{},!0)})(e[0],e[1],{set(){e6(S)({target:this,isTrusted:!1})}},!1,w))),e6(()=>{b.forEach(e=>e())})}(e),c=(C=e.mediaInteractionCb,M=e.blockClass,x=e.blockSelector,T=e.unblockSelector,R=e.mirror,A=e.sampling,D=e.doc,N=[eC("play",(O=e6(e=>eT(e6(t=>{var r=e7(t);if(!(!r||eP(r,M,x,T,!0))){var n=r.currentTime,i=r.volume,a=r.muted,s=r.playbackRate;C({type:e,id:R.getId(r),currentTime:n,volume:i,muted:a,playbackRate:s})}}),A.media||500)))(eQ.Play),D),eC("pause",O(eQ.Pause),D),eC("seeked",O(eQ.Seeked),D),eC("volumechange",O(eQ.VolumeChange),D),eC("ratechange",O(eQ.RateChange),D)],e6(()=>{N.forEach(e=>e())})),u=()=>{},h=()=>{},p=()=>{},m=()=>{};e.recordDOM&&(u=function(e,t){var r,n,i=e.styleSheetRuleCb,a=e.mirror,s=e.stylesheetManager,l=t.win;if(!l.CSSStyleSheet||!l.CSSStyleSheet.prototype)return()=>{};var d=l.CSSStyleSheet.prototype.insertRule;l.CSSStyleSheet.prototype.insertRule=new Proxy(d,{apply:e6((e,t,r)=>{var n=(0,o._)(r,2),l=n[0],d=n[1],c=ti(t,a,s.styleMirror),u=c.id,h=c.styleId;return(u&&-1!==u||h&&-1!==h)&&i({id:u,styleId:h,adds:[{rule:l,index:d}]}),e.apply(t,r)})});var c=l.CSSStyleSheet.prototype.deleteRule;l.CSSStyleSheet.prototype.deleteRule=new Proxy(c,{apply:e6((e,t,r)=>{var n=(0,o._)(r,1)[0],l=ti(t,a,s.styleMirror),d=l.id,c=l.styleId;return(d&&-1!==d||c&&-1!==c)&&i({id:d,styleId:c,removes:[{index:n}]}),e.apply(t,r)})}),l.CSSStyleSheet.prototype.replace&&(r=l.CSSStyleSheet.prototype.replace,l.CSSStyleSheet.prototype.replace=new Proxy(r,{apply:e6((e,t,r)=>{var n=(0,o._)(r,1)[0],l=ti(t,a,s.styleMirror),d=l.id,c=l.styleId;return(d&&-1!==d||c&&-1!==c)&&i({id:d,styleId:c,replace:n}),e.apply(t,r)})})),l.CSSStyleSheet.prototype.replaceSync&&(n=l.CSSStyleSheet.prototype.replaceSync,l.CSSStyleSheet.prototype.replaceSync=new Proxy(n,{apply:e6((e,t,r)=>{var n=(0,o._)(r,1)[0],l=ti(t,a,s.styleMirror),d=l.id,c=l.styleId;return(d&&-1!==d||c&&-1!==c)&&i({id:d,styleId:c,replaceSync:n}),e.apply(t,r)})}));var u={};tl("CSSGroupingRule")?u.CSSGroupingRule=l.CSSGroupingRule:(tl("CSSMediaRule")&&(u.CSSMediaRule=l.CSSMediaRule),tl("CSSConditionRule")&&(u.CSSConditionRule=l.CSSConditionRule),tl("CSSSupportsRule")&&(u.CSSSupportsRule=l.CSSSupportsRule));var h={};return Object.entries(u).forEach(e=>{var t=(0,o._)(e,2),r=t[0],n=t[1];h[r]={insertRule:n.prototype.insertRule,deleteRule:n.prototype.deleteRule},n.prototype.insertRule=new Proxy(h[r].insertRule,{apply:e6((e,t,r)=>{var n=(0,o._)(r,2),l=n[0],d=n[1],c=ti(t.parentStyleSheet,a,s.styleMirror),u=c.id,h=c.styleId;return(u&&-1!==u||h&&-1!==h)&&i({id:u,styleId:h,adds:[{rule:l,index:[...tn(t),d||0]}]}),e.apply(t,r)})}),n.prototype.deleteRule=new Proxy(h[r].deleteRule,{apply:e6((e,t,r)=>{var n=(0,o._)(r,1)[0],l=ti(t.parentStyleSheet,a,s.styleMirror),d=l.id,c=l.styleId;return(d&&-1!==d||c&&-1!==c)&&i({id:d,styleId:c,removes:[{index:[...tn(t),n]}]}),e.apply(t,r)})})}),e6(()=>{l.CSSStyleSheet.prototype.insertRule=d,l.CSSStyleSheet.prototype.deleteRule=c,r&&(l.CSSStyleSheet.prototype.replace=r),n&&(l.CSSStyleSheet.prototype.replaceSync=n),Object.entries(u).forEach(e=>{var t=(0,o._)(e,2),r=t[0],n=t[1];n.prototype.insertRule=h[r].insertRule,n.prototype.deleteRule=h[r].deleteRule})})}(e,{win:t}),h=ta(e,e.doc),L=e.styleDeclarationCb,P=e.mirror,F=e.ignoreCSSAttributes,B=e.stylesheetManager,z=(U=({win:t}).win).CSSStyleDeclaration.prototype.setProperty,U.CSSStyleDeclaration.prototype.setProperty=new Proxy(z,{apply:e6((e,t,r)=>{var n,i=(0,o._)(r,3),a=i[0],s=i[1],l=i[2];if(F.has(a))return z.apply(t,[a,s,l]);var d=ti(null==(n=t.parentRule)?void 0:n.parentStyleSheet,P,B.styleMirror),c=d.id,u=d.styleId;return(c&&-1!==c||u&&-1!==u)&&L({id:c,styleId:u,set:{property:a,value:s,priority:l},index:tn(t.parentRule)}),e.apply(t,r)})}),W=U.CSSStyleDeclaration.prototype.removeProperty,U.CSSStyleDeclaration.prototype.removeProperty=new Proxy(W,{apply:e6((e,t,r)=>{var n,i=(0,o._)(r,1)[0];if(F.has(i))return W.apply(t,[i]);var a=ti(null==(n=t.parentRule)?void 0:n.parentStyleSheet,P,B.styleMirror),s=a.id,l=a.styleId;return(s&&-1!==s||l&&-1!==l)&&L({id:s,styleId:l,remove:{property:i},index:tn(t.parentRule)}),e.apply(t,r)})}),p=e6(()=>{U.CSSStyleDeclaration.prototype.setProperty=z,U.CSSStyleDeclaration.prototype.removeProperty=W}),e.collectFonts&&(m=function(e){var t=e.fontCb,r=e.doc,n=r.defaultView;if(!n)return()=>{};var i=[],a=new WeakMap,s=n.FontFace;n.FontFace=function(e,t,r){var n=new s(e,t,r);return a.set(n,{family:e,buffer:"string"!=typeof t,descriptors:r,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),n};var o=eR(r.fonts,"add",function(e){return function(r){return eJ(e6(()=>{var e=a.get(r);e&&(t(e),a.delete(r))}),0),e.apply(this,[r])}});return i.push(()=>{n.FontFace=s}),i.push(o),e6(()=>{i.forEach(e=>e())})}(e)));var f=(j=e.doc,H=e.mirror,q=e.blockClass,K=e.blockSelector,V=e.unblockSelector,$=e.selectionCb,ee=!0,(et=e6(()=>{var e=j.getSelection();if(e&&(!ee||null==e||!e.isCollapsed)){ee=e.isCollapsed||!1;for(var t=[],r=e.rangeCount||0,n=0;n<r;n++){var i=e.getRangeAt(n),a=i.startContainer,s=i.startOffset,o=i.endContainer,l=i.endOffset;eP(a,q,K,V,!0)||eP(o,q,K,V,!0)||t.push({start:H.getId(a),startOffset:s,end:H.getId(o),endOffset:l})}$({ranges:t})}}))(),eC("selectionchange",et)),v=(er=e.doc,en=e.customElementCb,(ei=er.defaultView)&&ei.customElements?eR(ei.customElements,"define",function(e){return function(t,r,n){try{en({define:{name:t}})}catch(e){}return e.apply(this,[t,r,n])}}):()=>{}),y=[],g=!0,S=!1,_=void 0;try{for(var b,w,k,E,I,C,M,x,T,R,A,D,O,N,L,P,F,B,U,z,W,j,H,q,K,V,$,ee,et,er,en,ei,ea,es,eo=e.plugins[Symbol.iterator]();!(g=(es=eo.next()).done);g=!0){var el=es.value;y.push(el.observer(el.callback,t,el.options))}}catch(e){S=!0,_=e}finally{try{g||null==eo.return||eo.return()}finally{if(S)throw _}}return e6(()=>{e4.forEach(e=>e.reset()),null==ea||ea.disconnect(),r(),n(),i(),l(),d(),c(),u(),h(),p(),m(),f(),v(),y.forEach(e=>e())})}function to(e){return void 0!==window[e]}function tl(e){return!!(void 0!==window[e]&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class td{getId(e,t,r,n){var i=r||this.getIdToRemoteIdMap(e),a=n||this.getRemoteIdToIdMap(e),s=i.get(t);return s||(s=this.generateIdFn(),i.set(t,s),a.set(s,t)),s}getIds(e,t){var r=this.getIdToRemoteIdMap(e),n=this.getRemoteIdToIdMap(e);return t.map(t=>this.getId(e,t,r,n))}getRemoteId(e,t,r){var n=r||this.getRemoteIdToIdMap(e);if("number"!=typeof t)return t;var i=n.get(t);return i||-1}getRemoteIds(e,t){var r=this.getRemoteIdToIdMap(e);return t.map(t=>this.getRemoteId(e,t,r))}reset(e){if(!e){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){var t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}getRemoteIdToIdMap(e){var t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}constructor(e){this.generateIdFn=e,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}}class tc{addIframe(){}addLoadListener(){}attachIframe(){}constructor(){this.crossOriginIframeMirror=new td(el),this.crossOriginIframeRootIdMap=new WeakMap}}class tu{addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,t){this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&(null==(r=e.contentWindow)||r.addEventListener("message",this.handleMessage.bind(this))),null==(n=this.loadListener)||n.call(this,e);var r,n,i=eZ(e);i&&i.adoptedStyleSheets&&i.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(i.adoptedStyleSheets,this.mirror.getId(i))}handleMessage(e){if("rrweb"===e.data.type&&e.origin===e.data.origin&&e.source){var t=this.crossOriginIframeMap.get(e.source);if(t){var r=this.transformCrossOriginEvent(t,e.data.event);r&&this.wrappedEmit(r,e.data.isCheckout)}}}transformCrossOriginEvent(e,t){switch(t.type){case eG.FullSnapshot:this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e);var r,n=t.data.node.id;return this.crossOriginIframeRootIdMap.set(e,n),this.patchRootIdOnNode(t.data.node,n),{timestamp:t.timestamp,type:eG.IncrementalSnapshot,data:{source:eY.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}};case eG.Meta:case eG.Load:case eG.DomContentLoaded:break;case eG.Plugin:return t;case eG.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case eG.IncrementalSnapshot:switch(t.data.source){case eY.Mutation:return t.data.adds.forEach(t=>{this.replaceIds(t,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(t.node,e);var r=this.crossOriginIframeRootIdMap.get(e);r&&this.patchRootIdOnNode(t.node,r)}),t.data.removes.forEach(t=>{this.replaceIds(t,e,["parentId","id"])}),t.data.attributes.forEach(t=>{this.replaceIds(t,e,["id"])}),t.data.texts.forEach(t=>{this.replaceIds(t,e,["id"])}),t;case eY.Drag:case eY.TouchMove:case eY.MouseMove:return t.data.positions.forEach(t=>{this.replaceIds(t,e,["id"])}),t;case eY.ViewportResize:return!1;case eY.MediaInteraction:case eY.MouseInteraction:case eY.Scroll:case eY.CanvasMutation:case eY.Input:return this.replaceIds(t.data,e,["id"]),t;case eY.StyleSheetRule:case eY.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case eY.Font:return t;case eY.Selection:return t.data.ranges.forEach(t=>{this.replaceIds(t,e,["start","end"])}),t;case eY.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),null==(r=t.data.styles)||r.forEach(t=>{this.replaceStyleIds(t,e,["styleId"])}),t}}return!1}replace(e,t,r,n){var i=!0,a=!1,s=void 0;try{for(var o,l=n[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var d=o.value;(Array.isArray(t[d])||"number"==typeof t[d])&&(Array.isArray(t[d])?t[d]=e.getIds(r,t[d]):t[d]=e.getId(r,t[d]))}}catch(e){a=!0,s=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw s}}return t}replaceIds(e,t,r){return this.replace(this.crossOriginIframeMirror,e,t,r)}replaceStyleIds(e,t,r){return this.replace(this.crossOriginIframeStyleMirror,e,t,r)}replaceIdOnNode(e,t){this.replaceIds(e,t,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach(e=>{this.replaceIdOnNode(e,t)})}patchRootIdOnNode(e,t){e.type===W.Document||e.rootId||(e.rootId=t),"childNodes"in e&&e.childNodes.forEach(e=>{this.patchRootIdOnNode(e,t)})}constructor(e){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new td(el),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new td(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}}class th{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class tp{init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,t){if(H(e)&&!this.shadowDoms.has(e)){this.shadowDoms.add(e),this.bypassOptions.canvasManager.addShadowRoot(e);var r=e9((0,s._)((0,a._)({},this.bypassOptions),{doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),e);this.restoreHandlers.push(()=>r.disconnect()),this.restoreHandlers.push(te((0,s._)((0,a._)({},this.bypassOptions),{scrollCb:this.scrollCb,doc:e,mirror:this.mirror}))),eJ(()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host)),this.restoreHandlers.push(ta({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))},0)}}observeAttachShadow(e){var t=eZ(e),r=function(e){try{return e.contentWindow}catch(e){}}(e);t&&r&&this.patchAttachShadow(r.Element,t)}patchAttachShadow(e,t){var r=this;this.restoreHandlers.push(eR(e.prototype,"attachShadow",function(e){return function(n){var i=e.call(this,n);return this.shadowRoot&&eq(this)&&r.addShadowRoot(this.shadowRoot,t),i}}))}reset(){this.restoreHandlers.forEach(e=>{try{e()}catch(e){}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet,this.bypassOptions.canvasManager.resetShadowRoots()}constructor(e){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}}for(var tm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",tf="undefined"==typeof Uint8Array?[]:new Uint8Array(256),tv=0;tv<tm.length;tv++)tf[tm.charCodeAt(tv)]=tv;class ty{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}addWindow(){}addShadowRoot(){}resetShadowRoots(){}}class tg{attachLinkElement(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,t){if(0!==e.length){var r={id:t,styleIds:[]},n=[],i=!0,a=!1,s=void 0;try{for(var o,l=e[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var d=o.value,c=void 0;this.styleMirror.has(d)?c=this.styleMirror.getId(d):(c=this.styleMirror.add(d),n.push({styleId:c,rules:Array.from(d.rules||CSSRule,(e,t)=>({rule:K(e),index:t}))})),r.styleIds.push(c)}}catch(e){a=!0,s=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw s}}n.length>0&&(r.styles=n),this.adoptedStyleSheetCb(r)}}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}constructor(e){this.trackedLinkElements=new WeakSet,this.styleMirror=new ej,this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}}class tS{inOtherBuffer(e,t){var r=this.nodeMap.get(e);return r&&Array.from(r).some(e=>e!==t)}add(e,t){this.active||(this.active=!0,function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];eV("requestAnimationFrame")(...t)}(()=>{this.nodeMap=new WeakMap,this.active=!1})),this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))}destroy(){}constructor(){this.nodeMap=new WeakMap,this.active=!1}}try{if(2!==Array.from([1],e=>2*e)[0]){var t_,tb,tw,tk,tE,tI,tC=document.createElement("iframe");document.body.appendChild(tC),Array.from=(null==(tI=tC.contentWindow)?void 0:tI.Array.from)||Array.from,document.body.removeChild(tC)}}catch(e){console.debug("Unable to override Array.from",e)}var tM=new V;function tx(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.emit,r=e.checkoutEveryNms,n=e.checkoutEveryNth,i=e.blockClass,s=void 0===i?"rr-block":i,o=e.blockSelector,l=void 0===o?null:o,d=e.unblockSelector,c=void 0===d?null:d,u=e.ignoreClass,h=void 0===u?"rr-ignore":u,p=e.ignoreSelector,m=void 0===p?null:p,f=e.maskAllText,v=void 0!==f&&f,y=e.maskTextClass,g=void 0===y?"rr-mask":y,S=e.unmaskTextClass,_=void 0===S?null:S,b=e.maskTextSelector,w=void 0===b?null:b,k=e.unmaskTextSelector,E=void 0===k?null:k,I=e.inlineStylesheet,C=void 0===I||I,M=e.maskAllInputs,x=e.maskInputOptions,T=e.slimDOMOptions,R=e.maskAttributeFn,A=e.maskInputFn,D=e.maskTextFn,O=e.maxCanvasSize,N=e.packFn,L=e.sampling,P=void 0===L?{}:L,F=e.dataURLOptions,B=void 0===F?{}:F,U=e.mousemoveWait,z=e.recordDOM,W=void 0===z||z,j=e.recordCanvas,H=void 0!==j&&j,q=e.recordCrossOriginIframes,K=void 0!==q&&q,J=e.recordAfter,G=void 0===J?"DOMContentLoaded"===e.recordAfter?e.recordAfter:"load":J,Y=e.userTriggeredOnInput,X=void 0!==Y&&Y,$=e.collectFonts,Q=void 0!==$&&$,Z=e.inlineImages,ee=void 0!==Z&&Z,et=e.plugins,er=e.keepIframeSrcFn,en=void 0===er?()=>!1:er,ei=e.ignoreCSSAttributes,ea=void 0===ei?new Set([]):ei,es=e.errorHandler,eo=e.onMutation,el=e.getCanvasManager;tw=es;var ed=!K||window.parent===window,ec=!1;if(!ed)try{window.parent.document&&(ec=!1)}catch(e){ec=!0}if(ed&&!t)throw Error("emit function is required");if(!ed&&!ec)return()=>{};void 0!==U&&void 0===P.mousemove&&(P.mousemove=U),tM.reset();var eu=!0===M?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:void 0!==x?x:{},eh=!0===T||"all"===T?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===T,headMetaDescKeywords:"all"===T}:T||{};!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;if("NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),!Node.prototype.contains){var t=this;Node.prototype.contains=function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r[0];if(!(0 in r))throw TypeError("1 argument is required");do if(t===i)return!0;while(i=i&&i.parentNode);return!1}}}();var ep=0,em=e=>{var t=!0,r=!1,n=void 0;try{for(var i,a=(et||[])[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value;s.eventProcessor&&(e=s.eventProcessor(e))}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}return N&&!ec&&(e=N(e)),e};tk=(e,i)=>{var a;if(e.timestamp=eA(),(null==(a=e4[0])?void 0:a.isFrozen())&&e.type!==eG.FullSnapshot&&(e.type!==eG.IncrementalSnapshot||e.data.source!==eY.Mutation)&&e4.forEach(e=>e.unfreeze()),ed)null==t||t(em(e),i);else if(ec){var s={type:"rrweb",event:em(e),origin:window.location.origin,isCheckout:i};window.parent.postMessage(s,"*")}if(e.type===eG.FullSnapshot)ek=e,ep=0;else if(e.type===eG.IncrementalSnapshot){if(e.data.source===eY.Mutation&&e.data.isAttachIframe)return;ep++;var o=n&&ep>=n,l=r&&ek&&e.timestamp-ek.timestamp>r;(o||l)&&eP(!0)}};var ef=e=>{tk({type:eG.IncrementalSnapshot,data:(0,a._)({source:eY.Mutation},e)})},ev=e=>tk({type:eG.IncrementalSnapshot,data:(0,a._)({source:eY.Scroll},e)}),ey=e=>tk({type:eG.IncrementalSnapshot,data:(0,a._)({source:eY.CanvasMutation},e)}),eg=new tg({mutationCb:ef,adoptedStyleSheetCb:e=>tk({type:eG.IncrementalSnapshot,data:(0,a._)({source:eY.AdoptedStyleSheet},e)})}),eS="boolean"==typeof __RRWEB_EXCLUDE_IFRAME__&&__RRWEB_EXCLUDE_IFRAME__?new tc:new tu({mirror:tM,mutationCb:ef,stylesheetManager:eg,recordCrossOriginIframes:K,wrappedEmit:tk}),e_=!0,eb=!1,ew=void 0;try{for(var ek,eE,eM=(et||[])[Symbol.iterator]();!(e_=(eE=eM.next()).done);e_=!0){var ex=eE.value;ex.getMirror&&ex.getMirror({nodeMirror:tM,crossOriginIframeMirror:eS.crossOriginIframeMirror,crossOriginIframeStyleMirror:eS.crossOriginIframeStyleMirror})}}catch(e){eb=!0,ew=e}finally{try{e_||null==eM.return||eM.return()}finally{if(eb)throw ew}}var eT=new tS,eR=function(e,t){try{return e?e(t):new ty}catch(e){return console.warn("Unable to initialize CanvasManager"),new ty}}(el,{mirror:tM,win:window,mutationCb:e=>tk({type:eG.IncrementalSnapshot,data:(0,a._)({source:eY.CanvasMutation},e)}),recordCanvas:H,blockClass:s,blockSelector:l,unblockSelector:c,maxCanvasSize:void 0===O?null:O,sampling:P.canvas,dataURLOptions:B,errorHandler:es}),eL="boolean"==typeof __RRWEB_EXCLUDE_SHADOW_DOM__&&__RRWEB_EXCLUDE_SHADOW_DOM__?new th:new tp({mutationCb:ef,scrollCb:ev,bypassOptions:{onMutation:eo,blockClass:s,blockSelector:l,unblockSelector:c,maskAllText:v,maskTextClass:g,unmaskTextClass:_,maskTextSelector:w,unmaskTextSelector:E,inlineStylesheet:C,maskInputOptions:eu,dataURLOptions:B,maskAttributeFn:R,maskTextFn:D,maskInputFn:A,recordCanvas:H,inlineImages:ee,sampling:P,slimDOMOptions:eh,iframeManager:eS,stylesheetManager:eg,canvasManager:eR,keepIframeSrcFn:en,processedNodeManager:eT},mirror:tM}),eP=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(W){tk({type:eG.Meta,data:{href:window.location.href,width:eN(),height:eO()}},e),eg.reset(),eL.init(),e4.forEach(e=>e.lock());var t,r,n,i,a,o,d,u,h,p,m,f,y,S,b,k,I,M,x,T,O,N,L,P,F,U,z,j,q,K,J=(t=document,i=void 0===(n=(r={mirror:tM,blockClass:s,blockSelector:l,unblockSelector:c,maskAllText:v,maskTextClass:g,unmaskTextClass:_,maskTextSelector:w,unmaskTextSelector:E,inlineStylesheet:C,maskAllInputs:eu,maskAttributeFn:R,maskInputFn:A,maskTextFn:D,slimDOM:eh,dataURLOptions:B,recordCanvas:H,inlineImages:ee,onSerialize:e=>{eU(e,tM)&&eS.addIframe(e),ez(e,tM)&&eg.trackLinkElement(e),eW(e)&&eL.addShadowRoot(e.shadowRoot,document)},onIframeLoad:(e,t)=>{eS.attachIframe(e,t),e.contentWindow&&eR.addWindow(e.contentWindow),eL.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{eg.attachLinkElement(e,t)},onBlockedImageLoad:(e,t,r)=>{var n=r.width,i=r.height;ef({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:{style:{width:"".concat(n,"px"),height:"".concat(i,"px")}}}]})},keepIframeSrcFn:en}).mirror)?new V:n,a=r.blockClass,o=r.blockSelector,d=r.unblockSelector,u=r.maskAllText,h=r.maskTextClass,p=r.unmaskTextClass,m=r.maskTextSelector,f=r.unmaskTextSelector,y=r.inlineStylesheet,S=r.inlineImages,b=r.recordCanvas,I=void 0!==(k=r.maskAllInputs)&&k,M=r.maskAttributeFn,x=r.maskTextFn,T=r.maskInputFn,N=void 0!==(O=r.slimDOM)&&O,L=r.dataURLOptions,P=r.preserveWhiteSpace,F=r.onSerialize,U=r.onIframeLoad,z=r.iframeLoadTimeout,j=r.onBlockedImageLoad,q=r.onStylesheetLoad,eI(t,{doc:t,mirror:i,blockClass:void 0===a?"rr-block":a,blockSelector:void 0===o?null:o,unblockSelector:void 0===d?null:d,maskAllText:void 0!==u&&u,maskTextClass:void 0===h?"rr-mask":h,unmaskTextClass:void 0===p?null:p,maskTextSelector:void 0===m?null:m,unmaskTextSelector:void 0===f?null:f,skipChild:!1,inlineStylesheet:void 0===y||y,maskInputOptions:!0===I?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:!1===I?{}:I,maskAttributeFn:M,maskTextFn:x,maskInputFn:T,slimDOMOptions:!0===N||"all"===N?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===N,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===N?{}:N,dataURLOptions:L,inlineImages:void 0!==S&&S,recordCanvas:void 0!==b&&b,preserveWhiteSpace:P,onSerialize:F,onIframeLoad:U,iframeLoadTimeout:z,onBlockedImageLoad:j,onStylesheetLoad:q,stylesheetLoadTimeout:r.stylesheetLoadTimeout,keepIframeSrcFn:void 0===(K=r.keepIframeSrcFn)?()=>!1:K,newlyAddedElement:!1}));if(!J)return console.warn("Failed to snapshot the document");tk({type:eG.FullSnapshot,data:{node:J,initialOffset:eD(window)}}),e4.forEach(e=>e.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&eg.adoptStyleSheets(document.adoptedStyleSheets,tM.getId(document))}};tE=eP;try{var eF=[],eB=e=>{var t;return e6(ts)({onMutation:eo,mutationCb:ef,mousemoveCb:(e,t)=>tk({type:eG.IncrementalSnapshot,data:{source:t,positions:e}}),mouseInteractionCb:e=>tk({type:eG.IncrementalSnapshot,data:(0,a._)({source:eY.MouseInteraction},e)}),scrollCb:ev,viewportResizeCb:e=>tk({type:eG.IncrementalSnapshot,data:(0,a._)({source:eY.ViewportResize},e)}),inputCb:e=>tk({type:eG.IncrementalSnapshot,data:(0,a._)({source:eY.Input},e)}),mediaInteractionCb:e=>tk({type:eG.IncrementalSnapshot,data:(0,a._)({source:eY.MediaInteraction},e)}),styleSheetRuleCb:e=>tk({type:eG.IncrementalSnapshot,data:(0,a._)({source:eY.StyleSheetRule},e)}),styleDeclarationCb:e=>tk({type:eG.IncrementalSnapshot,data:(0,a._)({source:eY.StyleDeclaration},e)}),canvasMutationCb:ey,fontCb:e=>tk({type:eG.IncrementalSnapshot,data:(0,a._)({source:eY.Font},e)}),selectionCb:e=>{tk({type:eG.IncrementalSnapshot,data:(0,a._)({source:eY.Selection},e)})},customElementCb:e=>{tk({type:eG.IncrementalSnapshot,data:(0,a._)({source:eY.CustomElement},e)})},blockClass:s,ignoreClass:h,ignoreSelector:m,maskAllText:v,maskTextClass:g,unmaskTextClass:_,maskTextSelector:w,unmaskTextSelector:E,maskInputOptions:eu,inlineStylesheet:C,sampling:P,recordDOM:W,recordCanvas:H,inlineImages:ee,userTriggeredOnInput:X,collectFonts:Q,doc:e,maskAttributeFn:R,maskInputFn:A,maskTextFn:D,keepIframeSrcFn:en,blockSelector:l,unblockSelector:c,slimDOMOptions:eh,dataURLOptions:B,mirror:tM,iframeManager:eS,stylesheetManager:eg,shadowDomManager:eL,processedNodeManager:eT,canvasManager:eR,ignoreCSSAttributes:ea,plugins:(null==et||null==(t=et.filter(e=>e.observer))?void 0:t.map(e=>({observer:e.observer,options:e.options,callback:t=>tk({type:eG.Plugin,data:{plugin:e.name,payload:t}})})))||[]},{})};eS.addLoadListener(e=>{try{eF.push(eB(e.contentDocument))}catch(e){console.warn(e)}});var ej=()=>{eP(),eF.push(eB(document))};return"interactive"===document.readyState||"complete"===document.readyState?ej():(eF.push(eC("DOMContentLoaded",()=>{tk({type:eG.DomContentLoaded,data:{}}),"DOMContentLoaded"===G&&ej()})),eF.push(eC("load",()=>{tk({type:eG.Load,data:{}}),"load"===G&&ej()},window))),()=>{eF.forEach(e=>e()),eT.destroy(),tE=void 0,tw=void 0}}catch(e){console.warn(e)}}function tT(e){return e>0x2540be3ff?e:1e3*e}function tR(e){return e>0x2540be3ff?e/1e3:e}function tA(e,t){"sentry.transaction"!==t.category&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate(()=>(e.throttledAddEvent({type:eG.Custom,timestamp:1e3*(t.timestamp||0),data:{tag:"breadcrumb",payload:(0,c.S8)(t,10,1e3)}}),"console"===t.category)))}function tD(e){return e.closest("button,a")||e}function tO(e){var t=tN(e);return t&&t instanceof Element?tD(t):t}function tN(e){var t;return"object"==typeof(t=e)&&t&&"target"in t?e.target:e}tx.mirror=tM,tx.takeFullSnapshot=function(e){if(!tE)throw Error("please take full snapshot after start recording");tE(e)},!function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"}(n||(n={}));var tL=new Set([eY.Mutation,eY.StyleSheetRule,eY.StyleDeclaration,eY.AdoptedStyleSheet,eY.CanvasMutation,eY.Selection,eY.MediaInteraction]);class tP{addListeners(){var e,t=(e=()=>{this._lastMutation=tB()},i||(i=[],(0,u.GS)(P,"open",function(e){return function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];if(i)try{i.forEach(e=>e())}catch(e){}return e.apply(P,r)}})),i.push(e),()=>{var t=i?i.indexOf(e):-1;t>-1&&i.splice(t,1)});this._teardown=()=>{t(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(e,t){if(r=t,n=this._ignoreSelector,!(!tF.includes(r.tagName)||"INPUT"===r.tagName&&!["submit","button"].includes(r.getAttribute("type")||"")||"A"===r.tagName&&(r.hasAttribute("download")||r.hasAttribute("target")&&"_self"!==r.getAttribute("target"))||n&&r.matches(n))&&(i=e).data&&"number"==typeof i.data.nodeId&&i.timestamp){var r,n,i,a={timestamp:tR(e.timestamp),clickBreadcrumb:e,clickCount:0,node:t};this._clicks.some(e=>e.node===a.node&&1>Math.abs(e.timestamp-a.timestamp))||(this._clicks.push(a),1===this._clicks.length&&this._scheduleCheckClicks())}}registerMutation(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();this._lastMutation=tR(e)}registerScroll(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();this._lastScroll=tR(e)}registerClick(e){var t=tD(e);this._handleMultiClick(t)}_handleMultiClick(e){this._getClicks(e).forEach(e=>{e.clickCount++})}_getClicks(e){return this._clicks.filter(t=>t.node===e)}_checkClicks(){var e=[],t=tB();this._clicks.forEach(r=>{!r.mutationAfter&&this._lastMutation&&(r.mutationAfter=r.timestamp<=this._lastMutation?this._lastMutation-r.timestamp:void 0),!r.scrollAfter&&this._lastScroll&&(r.scrollAfter=r.timestamp<=this._lastScroll?this._lastScroll-r.timestamp:void 0),r.timestamp+this._timeout<=t&&e.push(r)});var r=!0,n=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var o=a.value,l=this._clicks.indexOf(o);l>-1&&(this._generateBreadcrumbs(o),this._clicks.splice(l,1))}}catch(e){n=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(n)throw i}}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(e){var t=this._replay,r=e.scrollAfter&&e.scrollAfter<=this._scrollTimeout,n=e.mutationAfter&&e.mutationAfter<=this._threshold,i=e.clickCount,o=e.clickBreadcrumb;if(!r&&!n){var l=1e3*Math.min(e.mutationAfter||this._timeout,this._timeout),d=l<1e3*this._timeout?"mutation":"timeout",c={type:"default",message:o.message,timestamp:o.timestamp,category:"ui.slowClickDetected",data:(0,s._)((0,a._)({},o.data),{url:P.location.href,route:t.getCurrentRoute(),timeAfterClickMs:l,endReason:d,clickCount:i||1})};this._addBreadcrumbEvent(t,c);return}if(i>1){var u={type:"default",message:o.message,timestamp:o.timestamp,category:"ui.multiClick",data:(0,s._)((0,a._)({},o.data),{url:P.location.href,route:t.getCurrentRoute(),clickCount:i,metric:!0})};this._addBreadcrumbEvent(t,u)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=(0,R.wg)(()=>this._checkClicks(),1e3)}constructor(e,t,r){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=t.timeout/1e3,this._threshold=t.threshold/1e3,this._scrollTimeout=t.scrollTimeout/1e3,this._replay=e,this._ignoreSelector=t.ignoreSelector,this._addBreadcrumbEvent=void 0===r?tA:r}}var tF=["A","BUTTON","INPUT"];function tB(){return Date.now()/1e3}function tU(e){return(0,a._)({timestamp:Date.now()/1e3,type:"default"},e)}var tz=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(tz||{}),tW=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function tj(e,t){var r=tx.mirror.getId(e),n=r&&tx.mirror.getNode(r),i=n&&tx.mirror.getMeta(n),a=i&&i.type===tz.Element?i:null;return{message:t,data:a?{nodeId:r,node:{id:r,tagName:a.tagName,textContent:Array.from(a.childNodes).map(e=>e.type===tz.Text&&e.textContent).filter(Boolean).map(e=>e.trim()).join(""),attributes:function(e){var t={};for(var r in!e["data-sentry-component"]&&e["data-sentry-element"]&&(e["data-sentry-component"]=e["data-sentry-element"]),e)if(tW.has(r)){var n=r;("data-testid"===r||"data-test-id"===r)&&(n="testId"),t[n]=e[r]}return t}(a.attributes)}}:{}}}var tH={resource:function(e){var t=e.entryType,r=e.initiatorType,n=e.name,i=e.responseEnd,a=e.startTime,s=e.decodedBodySize,o=e.encodedBodySize,l=e.responseStatus,d=e.transferSize;return["fetch","xmlhttprequest"].includes(r)?null:{type:"".concat(t,".").concat(r),start:tV(a),end:tV(i),name:n,data:{size:d,statusCode:l,decodedBodySize:s,encodedBodySize:o}}},paint:function(e){var t=e.duration,r=e.entryType,n=e.name,i=tV(e.startTime);return{type:r,name:n,start:i,end:i+t,data:void 0}},navigation:function(e){var t=e.entryType,r=e.name,n=e.decodedBodySize,i=e.duration,a=e.domComplete,s=e.encodedBodySize,o=e.domContentLoadedEventStart,l=e.domContentLoadedEventEnd,d=e.domInteractive,c=e.loadEventStart,u=e.loadEventEnd,h=e.redirectCount,p=e.startTime,m=e.transferSize,f=e.type;return 0===i?null:{type:"".concat(t,".").concat(f),start:tV(p),end:tV(a),name:r,data:{size:m,decodedBodySize:n,encodedBodySize:s,duration:i,domInteractive:d,domContentLoadedEventStart:o,domContentLoadedEventEnd:l,loadEventStart:c,loadEventEnd:u,domComplete:a,redirectCount:h}}}};function tq(e,t){return r=>{var n=r.metric;t.replayPerformanceEntries.push(e(n))}}function tK(e){var t=tH[e.entryType];return t?t(e):null}function tV(e){return(((0,p.k3)()||P.performance.timeOrigin)+e)/1e3}function tJ(e){var t=e.entries[e.entries.length-1];return tX(e,"largest-contentful-paint",(null==t?void 0:t.element)?[t.element]:void 0)}function tG(e){var t=[],r=[],n=!0,i=!1,a=void 0;try{for(var s,o=e.entries[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var l=s.value;if(void 0!==l.sources){var d=[],c=!0,u=!1,h=void 0;try{for(var p,m=l.sources[Symbol.iterator]();!(c=(p=m.next()).done);c=!0){var f=p.value;if(f.node){r.push(f.node);var v=tx.mirror.getId(f.node);v&&d.push(v)}}}catch(e){u=!0,h=e}finally{try{c||null==m.return||m.return()}finally{if(u)throw h}}t.push({value:l.value,nodeIds:d.length?d:void 0})}}}catch(e){i=!0,a=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw a}}return tX(e,"cumulative-layout-shift",r,t)}function tY(e){var t=e.entries[e.entries.length-1];return tX(e,"interaction-to-next-paint",(null==t?void 0:t.target)?[t.target]:void 0)}function tX(e,t,r,n){var i=e.value,a=e.rating,s=tV(i);return{type:"web-vital",name:t,start:s,end:s,data:{value:i,size:i,rating:a,nodeIds:r?r.map(e=>tx.mirror.getId(e)):void 0,attributions:n}}}var t$=["log","warn","error"],tQ=function(){var e={exception:()=>void 0,infoTick:()=>void 0,setConfig:e=>{e.captureExceptions,e.traceInternals}};return t$.forEach(t=>{e[t]=()=>void 0}),e}();class tZ extends Error{constructor(){super("Event buffer exceeded maximum size of ".concat(2e7,"."))}}class t0{get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(e){var t=JSON.stringify(e).length;if(this._totalSize+=t,this._totalSize>2e7)throw new tZ;this.events.push(e)}finish(){return new Promise(e=>{var t=this.events;this.clear(),e(JSON.stringify(t))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){var e=this.events.map(e=>e.timestamp).sort()[0];return e?tT(e):null}constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}}class t1{ensureReady(){return this._ensureReadyPromise||(this._ensureReadyPromise=new Promise((e,t)=>{this._worker.addEventListener("message",r=>{r.data.success?e():t()},{once:!0}),this._worker.addEventListener("error",e=>{t(e)},{once:!0})})),this._ensureReadyPromise}destroy(){this._worker.terminate()}postMessage(e,t){var r=this._getAndIncrementId();return new Promise((n,i)=>{var a=t=>{var s=t.data;if(s.method===e&&s.id===r){if(this._worker.removeEventListener("message",a),!s.success)return void i(Error("Error in compression worker"));n(s.response)}};this._worker.addEventListener("message",a),this._worker.postMessage({id:r,method:e,arg:t})})}_getAndIncrementId(){return this._id++}constructor(e){this._worker=e,this._id=0}}class t2{get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(e){var t=tT(e.timestamp);(!this._earliestTimestamp||t<this._earliestTimestamp)&&(this._earliestTimestamp=t);var r=JSON.stringify(e);return(this._totalSize+=r.length,this._totalSize>2e7)?Promise.reject(new tZ):this._sendEventToWorker(r)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,e=>{})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(e){return this._worker.postMessage("addEvent",e)}async _finishRequest(){var e=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,e}constructor(e){this._worker=new t1(e),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}}class t3{get waitForCheckout(){return this._used.waitForCheckout}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(e){this._used.hasCheckout=e}set waitForCheckout(e){this._used.waitForCheckout=e}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(e){return this._used.addEvent(e)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(e){return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){var e=this._fallback,t=e.events,r=e.hasCheckout,n=e.waitForCheckout,i=[],a=!0,s=!1,o=void 0;try{for(var l,d=t[Symbol.iterator]();!(a=(l=d.next()).done);a=!0){var c=l.value;i.push(this._compression.addEvent(c))}}catch(e){s=!0,o=e}finally{try{a||null==d.return||d.return()}finally{if(s)throw o}}this._compression.hasCheckout=r,this._compression.waitForCheckout=n,this._used=this._compression;try{await Promise.all(i),this._fallback.clear()}catch(e){}}constructor(e){this._fallback=new t0,this._compression=new t2(e),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}}function t5(){try{return"sessionStorage"in P&&!!P.sessionStorage}catch(e){return!1}}function t8(e){return void 0!==e&&Math.random()<e}function t6(e){if(t5())try{P.sessionStorage.setItem(F,JSON.stringify(e))}catch(e){}}function t4(e){var t=Date.now(),r=e.id||(0,y.eJ)(),n=e.started||t,i=e.lastActivity||t,a=e.segmentId||0;return{id:r,started:n,lastActivity:i,segmentId:a,sampled:e.sampled,previousSessionId:e.previousSessionId}}function t7(e){var t=e.sessionSampleRate,r=e.allowBuffering,n=e.stickySession,i=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).previousSessionId,a=t4({sampled:t8(t)?"session":!!r&&"buffer",previousSessionId:i});return void 0!==n&&n&&t6(a),a}function t9(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:+new Date;return null===e||void 0===t||t<0||0!==t&&e+t<=r}function re(e,t){var r=t.maxReplayDuration,n=t.sessionIdleExpire,i=t.targetTime,a=void 0===i?Date.now():i;return t9(e.started,r,a)||t9(e.lastActivity,n,a)}function rt(e,t){return!!re(e,{sessionIdleExpire:t.sessionIdleExpire,maxReplayDuration:t.maxReplayDuration})&&("buffer"!==e.sampled||0!==e.segmentId)}function rr(e,t){var r=e.sessionIdleExpire,n=e.maxReplayDuration,i=e.previousSessionId,a=t.stickySession&&function(){if(!t5())return null;try{var e=P.sessionStorage.getItem(F);if(!e)return null;var t=JSON.parse(e);return t4(t)}catch(e){return null}}();return a?rt(a,{sessionIdleExpire:r,maxReplayDuration:n})?t7(t,{previousSessionId:a.id}):a:t7(t,{previousSessionId:i})}function rn(e,t,r){return!!ra(e,t)&&(ri(e,t,r),!0)}async function ri(e,t,r){var n=e.eventBuffer;if(!n||n.waitForCheckout&&!r)return null;var i="buffer"===e.recordingMode;try{r&&i&&n.clear(),r&&(n.hasCheckout=!0,n.waitForCheckout=!1);var a=e.getOptions(),s=function(e,t){try{if("function"==typeof t&&e.type===eG.Custom)return t(e)}catch(e){return null}return e}(t,a.beforeAddRecordingEvent);if(!s)return;return await n.addEvent(s)}catch(t){var o=t&&t instanceof tZ;if(o&&i)return n.clear(),n.waitForCheckout=!0,null;e.handleException(t),await e.stop({reason:o?"addEventSizeExceeded":"addEvent"});var l=(0,g.KU)();l&&l.recordDroppedEvent("internal_sdk_error","replay")}}function ra(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;var r=tT(t.timestamp);return!(r+e.timeouts.sessionIdlePause<Date.now())&&!(r>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration)}function rs(e){return"transaction"===e.type}function ro(e){return"feedback"===e.type}function rl(e){return!!e.category}function rd(){var e=(0,g.o5)().getPropagationContext().dsc;e&&delete e.replay_id;var t=(0,S.Bk)();if(t){var r=(0,_.k1)(t);delete r.replay_id}}function rc(e,t){return t.map(t=>{var r=t.type,n=t.start,i=t.end,a=t.name,s=t.data,o=e.throttledAddEvent({type:eG.Custom,timestamp:n,data:{tag:"performanceSpan",payload:{op:r,description:a,startTimestamp:n,endTimestamp:i,data:s}}});return"string"==typeof o?Promise.resolve(null):o})}function ru(e,t){var r;e.isEnabled()&&null!==t&&(r=t.name,(0,b.A)(r,(0,g.KU)())||e.addUpdate(()=>(rc(e,[t]),!0)))}function rh(e){if(e){var t=new TextEncoder;try{if("string"==typeof e)return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){var r=(0,D.P4)(e);return t.encode(r).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch(e){}}}function rp(e){if(e){var t=parseInt(e,10);return isNaN(t)?void 0:t}}function rm(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};var r=(0,a._)({},e._meta),n=r.warnings||[];return r.warnings=[...n,t],e._meta=r,e}function rf(e,t){if(!t)return null;var r=t.startTimestamp,n=t.endTimestamp,i=t.url,a=t.method,s=t.statusCode,o=t.request;return{type:e,start:r/1e3,end:n/1e3,name:i,data:{method:a,statusCode:s,request:o,response:t.response}}}function rv(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function ry(e,t,r){if(t||0!==Object.keys(e).length){if(!t)return{headers:e};if(!r)return{headers:e,size:t};var n={headers:e,size:t},i=function(e){if(!e||"string"!=typeof e)return{body:e};var t,r,n,i=e.length>15e4,a=(r=(t=e)[0],n=t[t.length-1],"["===r&&"]"===n||"{"===r&&"}"===n);if(i){var s=e.slice(0,15e4);return a?{body:s,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:"".concat(s,"…"),warnings:["TEXT_TRUNCATED"]}}if(a)try{return{body:JSON.parse(e)}}catch(e){}return{body:e}}(r),a=i.body,s=i.warnings;return n.body=a,(null==s?void 0:s.length)&&(n._meta={warnings:s}),n}}function rg(e,t){return Object.entries(e).reduce((r,n)=>{var i=(0,o._)(n,2),a=i[0],s=i[1],l=a.toLowerCase();return t.includes(l)&&e[a]&&(r[l]=s),r},{})}function rS(e,t){var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:P.document.baseURI;if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(P.location.origin))return e;var r=new URL(e,t);if(r.origin!==new URL(t).origin)return e;var n=r.href;return!e.endsWith("/")&&n.endsWith("/")?n.slice(0,-1):n}(e);return(0,w.Xr)(r,t)}async function r_(e,t,r){try{var n=await rb(e,t,r),i=rf("resource.fetch",n);ru(r.replay,i)}catch(e){}}async function rb(e,t,r){var n=Date.now(),i=t.startTimestamp,a=t.endTimestamp,s=e.data,l=s.url,d=s.method,c=s.status_code,u=s.request_body_size,h=s.response_body_size,p=rS(l,r.networkDetailAllowUrls)&&!rS(l,r.networkDetailDenyUrls);return{startTimestamp:void 0===i?n:i,endTimestamp:void 0===a?n:a,url:l,method:d,statusCode:void 0===c?0:c,request:p?function(e,t,r){var n,i,a=e.networkCaptureBodies,s=e.networkRequestHeaders,l=t?(n=t,i=s,1===n.length&&"string"!=typeof n[0]?rI(n[0],i):2===n.length?rI(n[1],i):{}):{};if(!a)return ry(l,r,void 0);var d=(0,D.Gv)(t),c=(0,o._)((0,D.sY)(d,tQ),2),u=c[0],h=c[1],p=ry(l,r,u);return h?rm(p,h):p}(r,t.input,u):rv(u),response:await rw(p,r,t.response,h)}}async function rw(e,t,r,n){var i=t.networkCaptureBodies,a=t.networkResponseHeaders;if(!e&&void 0!==n)return rv(n);var s=r?rE(r.headers,a):{};if(!r||!i&&void 0!==n)return ry(s,n,void 0);var l=(0,o._)(await rk(r),2),d=l[0],c=l[1],u=function(e,t){var r=t.networkCaptureBodies,n=t.responseBodySize,i=t.captureDetails,a=t.headers;try{var s=(null==e?void 0:e.length)&&void 0===n?rh(e):n;if(!i)return rv(s);if(r)return ry(a,s,e);return ry(a,s,void 0)}catch(e){return ry(a,n,void 0)}}(d,{networkCaptureBodies:i,responseBodySize:n,captureDetails:e,headers:s});return c?rm(u,c):u}async function rk(e){var t,r=function(e){try{return e.clone()}catch(e){}}(e);if(!r)return[void 0,"BODY_PARSE_ERROR"];try{return[await (t=r,new Promise((e,r)=>{var n=(0,R.wg)(()=>r(Error("Timeout while trying to read response body")),500);rC(t).then(t=>e(t),e=>r(e)).finally(()=>clearTimeout(n))}))]}catch(e){if(e instanceof Error&&e.message.indexOf("Timeout")>-1)return[void 0,"BODY_PARSE_TIMEOUT"];return[void 0,"BODY_PARSE_ERROR"]}}function rE(e,t){var r={};return t.forEach(t=>{e.get(t)&&(r[t]=e.get(t))}),r}function rI(e,t){if(!e)return{};var r=e.headers;return r?r instanceof Headers?rE(r,t):Array.isArray(r)?{}:rg(r,t):{}}async function rC(e){return await e.text()}async function rM(e,t,r){try{var n=function(e,t,r){var n,i=Date.now(),a=t.startTimestamp,s=void 0===a?i:a,l=t.endTimestamp,d=void 0===l?i:l,c=t.input,u=t.xhr,h=e.data,p=h.url,m=h.method,f=h.status_code,v=void 0===f?0:f,y=h.request_body_size,g=h.response_body_size;if(!p)return null;if(!u||!rS(p,r.networkDetailAllowUrls)||rS(p,r.networkDetailDenyUrls)){var S=rv(y);return{startTimestamp:s,endTimestamp:d,url:p,method:m,statusCode:v,request:S,response:rv(g)}}var _=u[O.Er],b=_?rg(_.request_headers,r.networkRequestHeaders):{},w=rg((n=u.getAllResponseHeaders())?n.split("\r\n").reduce((e,t)=>{var r=(0,o._)(t.split(": "),2),n=r[0],i=r[1];return i&&(e[n.toLowerCase()]=i),e},{}):{},r.networkResponseHeaders),k=(0,o._)(r.networkCaptureBodies?(0,D.sY)(c,tQ):[void 0],2),E=k[0],I=k[1],C=(0,o._)(r.networkCaptureBodies?function(e){var t=[];try{return[e.responseText]}catch(e){t.push(e)}try{var r=e.response,n=e.responseType;try{if("string"==typeof r)return[r];if(r instanceof Document)return[r.body.outerHTML];if("json"===n&&r&&"object"==typeof r)return[JSON.stringify(r)];if(!r)return[void 0]}catch(e){return[void 0,"BODY_PARSE_ERROR"]}return[void 0,"UNPARSEABLE_BODY_TYPE"]}catch(e){t.push(e)}return[void 0]}(u):[void 0],2),M=C[0],x=C[1],T=ry(b,y,E),R=ry(w,g,M);return{startTimestamp:s,endTimestamp:d,url:p,method:m,statusCode:v,request:I?rm(T,I):T,response:x?rm(R,x):R}}(e,t,r),i=rf("resource.xhr",n);ru(r.replay,i)}catch(e){}}async function rx(e){try{var t,r,n,i,a;return Promise.all(rc(e,[(r=(t=P.performance.memory).jsHeapSizeLimit,n=t.totalJSHeapSize,i=t.usedJSHeapSize,a=Date.now()/1e3,{type:"memory",name:"memory",start:a,end:a,data:{memory:{jsHeapSizeLimit:r,totalJSHeapSize:n,usedJSHeapSize:i}}})]))}catch(e){return[]}}var rT=d.O.navigator;async function rR(e){var t=e.client,r=e.scope,n=e.replayId,i=e.event,o={event_id:n,integrations:"object"!=typeof t._integrations||null===t._integrations||Array.isArray(t._integrations)?void 0:Object.keys(t._integrations)};t.emit("preprocessEvent",i,o);var l=await (0,I.mG)(t.getOptions(),i,o,r,t,(0,g.rm)());if(!l)return null;t.emit("postprocessEvent",l,o),l.platform=l.platform||"javascript";var d=t.getSdkMetadata(),c=(null==d?void 0:d.sdk)||{},u=c.name,h=c.version,p=c.settings;return l.sdk=(0,s._)((0,a._)({},l.sdk),{name:u||"sentry.javascript.unknown",version:h||"0.0.0",settings:p}),l}async function rA(e){var t,r,n=e.recordingData,i=e.replayId,a=e.segmentId,s=e.eventContext,o=e.timestamp,l=e.session,d=function(e){var t,r=e.recordingData,n=e.headers,i="".concat(JSON.stringify(n),"\n");if("string"==typeof r)t="".concat(i).concat(r);else{var a=new TextEncoder().encode(i);(t=new Uint8Array(a.length+r.length)).set(a),t.set(r,a.length)}return t}({recordingData:n,headers:{segment_id:a}}),c=s.urls,u=s.errorIds,h=s.traceIds,p=s.initialTimestamp,m=(0,g.KU)(),f=(0,g.o5)(),v=null==m?void 0:m.getTransport(),y=null==m?void 0:m.getDsn();if(!m||!v||!y||!l.sampled)return Promise.resolve({});var S={type:"replay_event",replay_start_timestamp:p/1e3,timestamp:o/1e3,error_ids:u,trace_ids:h,urls:c,replay_id:i,segment_id:a,replay_type:l.sampled},_=await rR({scope:f,client:m,replayId:i,event:S});if(!_)return m.recordDroppedEvent("event_processor","replay"),Promise.resolve({});delete _.sdkProcessingMetadata;var b=(t=m.getOptions().tunnel,(0,E.h4)((0,E.n2)(_,(0,E.Cj)(_),t,y),[[{type:"replay_event"},_],[{type:"replay_recording",length:"string"==typeof d?new TextEncoder().encode(d).length:d.length},d]]));try{r=await v.send(b)}catch(e){var w=Error(B);try{w.cause=e}catch(e){}throw w}if("number"==typeof r.statusCode&&(r.statusCode<200||r.statusCode>=300))throw new rD(r.statusCode);var k=(0,C.wq)({},r);if((0,C.Jz)(k,"replay"))throw new rO(k);return r}class rD extends Error{constructor(e){super("Transport returned status code ".concat(e))}}class rO extends Error{constructor(e){super("Rate limit hit"),this.rateLimits=e}}async function rN(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{count:0,interval:5e3},r=e.recordingData,n=e.onError;if(r.length)try{return await rA(e),!0}catch(r){if(r instanceof rD||r instanceof rO)throw r;if((0,v.o)("Replays",{_retryCount:t.count}),n&&n(r),t.count>=3){var i=Error("".concat(B," - max retries exceeded"));try{i.cause=r}catch(e){}throw i}return t.interval*=++t.count,new Promise((r,n)=>{(0,R.wg)(async()=>{try{await rN(e,t),r(!0)}catch(e){n(e)}},t.interval)})}}var rL="__THROTTLED";class rP{getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return!!this._canvas}getOptions(){return this._options}handleException(e){this._options.onError&&this._options.onError(e)}initializeSampling(e){var t=this._options,r=t.errorSampleRate,n=t.sessionSampleRate,i=r<=0&&n<=0;if(this._requiresManualStart=i,!i)this._initializeSessionForSampling(e),this.session&&!1!==this.session.sampled&&(this.recordingMode="buffer"===this.session.sampled&&0===this.session.segmentId?"buffer":"session",this._initializeRecording())}start(){if(!this._isEnabled||"session"!==this.recordingMode){if(!this._isEnabled||"buffer"!==this.recordingMode){this._updateUserActivity();var e=rr({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=e,this.recordingMode="session",this._initializeRecording()}}}startBuffering(){if(!this._isEnabled){var e=rr({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=e,this.recordingMode="buffer",this._initializeRecording()}}startRecording(){try{var e,t,r,n,i=this._canvas;this._stopRecording=tx((0,a._)((0,s._)((0,a._)((0,s._)((0,a._)({},this._recordingOptions,"buffer"===this.recordingMode?{checkoutEveryNms:6e4}:this._options._experiments.continuousCheckout&&{checkoutEveryNms:Math.max(36e4,this._options._experiments.continuousCheckout)}),{emit:(e=this,t=!1,(r,n)=>{if(e.checkAndHandleExpiredSession()){var i=n||!t;t=!0,e.clickDetector&&function(e,t){try{if(r=t,3!==r.type)return;var r,n=t.data.source;if(tL.has(n)&&e.registerMutation(t.timestamp),n===eY.Scroll&&e.registerScroll(t.timestamp),t.data.source===eY.MouseInteraction){var i=t.data,a=i.type,s=i.id,o=tx.mirror.getNode(s);o instanceof HTMLElement&&a===eX.Click&&e.registerClick(o)}}catch(e){}}(e.clickDetector,r),e.addUpdate(()=>{if("buffer"===e.recordingMode&&i&&e.setInitialState(),!rn(e,r,i))return!0;if(!i)return!1;var t=e.session;if(function(e,t){if(t&&e.session&&0===e.session.segmentId){var r;rn(e,(r=e.getOptions(),{type:eG.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:r.sessionSampleRate,errorSampleRate:r.errorSampleRate,useCompressionOption:r.useCompression,blockAllMedia:r.blockAllMedia,maskAllText:r.maskAllText,maskAllInputs:r.maskAllInputs,useCompression:!!e.eventBuffer&&"worker"===e.eventBuffer.type,networkDetailHasUrls:r.networkDetailAllowUrls.length>0,networkCaptureBodies:r.networkCaptureBodies,networkRequestHasHeaders:r.networkRequestHeaders.length>0,networkResponseHasHeaders:r.networkResponseHeaders.length>0}}}),!1)}}(e,i),"buffer"===e.recordingMode&&t&&e.eventBuffer){var n=e.eventBuffer.getEarliestTimestamp();n&&(t.started=n,e.getOptions().stickySession&&t6(t))}return null!=t&&!!t.previousSessionId||("session"===e.recordingMode&&e.flush(),!0)})}})}),/iPhone|iPad|iPod/i.test(null!=(r=null==rT?void 0:rT.userAgent)?r:"")||/Macintosh/i.test(null!=(n=null==rT?void 0:rT.userAgent)?n:"")&&(null==rT?void 0:rT.maxTouchPoints)&&(null==rT?void 0:rT.maxTouchPoints)>1?{sampling:{mousemove:!1}}:{}),{onMutation:this._onMutationHandler.bind(this)}),i?{recordCanvas:i.recordCanvas,getCanvasManager:i.getCanvasManager,sampling:i.sampling,dataURLOptions:i.dataURLOptions}:{}))}catch(e){this.handleException(e)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(e){return this.handleException(e),!1}}async stop(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.forceFlush;if(t.reason,this._isEnabled){this._isEnabled=!1,this.recordingMode="buffer";try{rd(),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),void 0!==r&&r&&await this._flush({force:!0}),null==(e=this.eventBuffer)||e.destroy(),this.eventBuffer=null,function(){if(t5())try{P.sessionStorage.removeItem(F)}catch(e){}}(),this.session=void 0}catch(e){this.handleException(e)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording())}resume(){this._isPaused&&this._checkSession()&&(this._isPaused=!1,this.startRecording())}async sendBufferedReplayOrFlush(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.continueRecording;if("session"===this.recordingMode)return this.flushImmediate();var r=Date.now();await this.flushImmediate();var n=this.stopRecording();(void 0===t||t)&&n&&"session"!==this.recordingMode&&(this.recordingMode="session",this.session&&(this._updateUserActivity(r),this._updateSessionActivity(r),this._maybeSaveSession()),this.startRecording())}addUpdate(e){var t=e();"buffer"!==this.recordingMode&&this._isEnabled&&!0!==t&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._checkSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return"buffer"===this.recordingMode?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){var e;return null==(e=this.session)?void 0:e.id}checkAndHandleExpiredSession(){return this._lastActivity&&t9(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&"session"===this.session.sampled?void this.pause():!!this._checkSession()}setInitialState(){var e="".concat(P.location.pathname).concat(P.location.hash).concat(P.location.search),t="".concat(P.location.origin).concat(e);this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=t,this._context.initialTimestamp=Date.now(),this._context.urls.push(t)}throttledAddEvent(e,t){var r=this._throttledAddEvent(e,t);if(r===rL){var n=tU({category:"replay.throttled"});this.addUpdate(()=>!rn(this,{type:5,timestamp:n.timestamp||0,data:{tag:"breadcrumb",payload:n,metric:!0}}))}return r}getCurrentRoute(){var e=this.lastActiveSpan||(0,S.Bk)(),t=e&&(0,S.zU)(e),r=(t&&(0,S.et)(t).data||{})[M.i_];if(t&&r&&["route","custom"].includes(r))return(0,S.et)(t).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=function(e){var t=e.useCompression,r=e.workerUrl;if(t&&window.Worker){var n=function(e){try{var t=e||function(){if("undefined"==typeof __SENTRY_EXCLUDE_REPLAY_WORKER__||!__SENTRY_EXCLUDE_REPLAY_WORKER__){var e;return e=new Blob(['var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),s=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(t,e){for(var i=new n(31),s=0;s<31;++s)i[s]=e+=1<<t[s-1];var a=new r(i[30]);for(s=1;s<30;++s)for(var o=i[s];o<i[s+1];++o)a[o]=o-i[s]<<5|s;return{b:i,r:a}},o=a(e,2),h=o.b,f=o.r;h[28]=258,f[258]=28;for(var l=a(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,s=0,a=new n(r);s<i;++s)t[s]&&++a[t[s]-1];var o,h=new n(r);for(s=1;s<r;++s)h[s]=h[s-1]+a[s-1]<<1;if(e){o=new n(1<<r);var f=15-r;for(s=0;s<i;++s)if(t[s])for(var l=s<<4|t[s],c=r-t[s],v=h[t[s]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>f]=l}else for(o=new n(i),s=0;s<i;++s)t[s]&&(o[s]=u[h[t[s]-1]++]>>15-t[s]);return o},p=new t(288);for(c=0;c<144;++c)p[c]=8;for(c=144;c<256;++c)p[c]=9;for(c=256;c<280;++c)p[c]=7;for(c=280;c<288;++c)p[c]=8;var g=new t(32);for(c=0;c<32;++c)g[c]=5;var w=d(p,9,0),y=d(g,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},_=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},x=function(r,e){for(var i=[],s=0;s<r.length;++s)r[s]&&i.push({s:s,f:r[s]});var a=i.length,o=i.slice();if(!a)return{t:F,l:0};if(1==a){var h=new t(i[0].s+1);return h[i[0].s]=1,{t:h,l:1}}i.sort(function(t,n){return t.f-n.f}),i.push({s:-1,f:25001});var f=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:f.f+l.f,l:f,r:l};c!=a-1;)f=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:f.f+l.f,l:f,r:l};var d=o[0].s;for(s=1;s<a;++s)o[s].s>d&&(d=o[s].s);var p=new n(d+1),g=A(i[c-1],p,0);if(g>e){s=0;var w=0,y=g-e,m=1<<y;for(o.sort(function(t,n){return p[n.s]-p[t.s]||t.f-n.f});s<a;++s){var b=o[s].s;if(!(p[b]>e))break;w+=m-(1<<g-p[b]),p[b]=e}for(w>>=y;w>0;){var M=o[s].s;p[M]<e?w-=1<<e-p[M]++-1:++s}for(;s>=0&&w;--s){var E=o[s].s;p[E]==e&&(--p[E],++w)}g=e}return{t:new t(p),l:g}},A=function(t,n,r){return-1==t.s?Math.max(A(t.l,n,r+1),A(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,s=t[0],a=1,o=function(t){e[i++]=t},h=1;h<=r;++h)if(t[h]==s&&h!=r)++a;else{if(!s&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(s),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(s);a=1,s=t[h]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var s=0;s<e;++s)t[i+s+4]=r[s];return 8*(i+4+e)},U=function(t,r,a,o,h,f,l,u,c,v,m){z(r,m++,a),++h[256];for(var b=x(h,15),M=b.t,E=b.l,A=x(f,15),U=A.t,C=A.l,F=D(M),I=F.c,S=F.n,L=D(U),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=x(q,7),H=G.t,J=G.l,K=19;K>4&&!H[s[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(h,p)+T(f,g)+l,X=T(h,M)+T(f,U)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(U,C,0),R=U;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[s[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=w,P=p,Q=y,R=g;for(B=0;B<u;++B){var rt=o[B];if(rt>255){_(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;_(r,m,Q[et]),m+=R[et],et>3&&(_(r,m,rt>>5&8191),m+=i[et])}else _(r,m,N[rt]),m+=P[rt]}return _(r,m,N[256]),m+P[256]},C=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,s=0|r.length,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=e+=r[a];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(s,a,o,h,u){if(!u&&(u={l:1},a.dictionary)){var c=a.dictionary.subarray(-32768),v=new t(c.length+s.length);v.set(c),v.set(s,c.length),s=v,u.w=c.length}return function(s,a,o,h,u,c){var v=c.z||s.length,d=new t(h+v+5*(1+Math.ceil(v/7e3))+u),p=d.subarray(h,d.length-u),g=c.l,w=7&(c.r||0);if(a){w&&(p[0]=c.r>>3);for(var y=C[a-1],M=y>>13,E=8191&y,z=(1<<o)-1,_=c.p||new n(32768),x=c.h||new n(z+1),A=Math.ceil(o/3),D=2*A,T=function(t){return(s[t]^s[t+1]<<A^s[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=x[H];if(_[J]=K,x[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!g)){w=U(s,p,0,F,I,S,O,q,G,j-G,w),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(s[j+Q]==s[j+Q-W]){for(var $=0;$<Z&&s[j+$]==s[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-_[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=_[J])&32767}if(R){F[q++]=268435456|f[Q]<<18|l[R];var it=31&f[Q],st=31&l[R];O+=e[it]+i[st],++I[257+it],++S[st],B=j+Q,++L}else F[q++]=s[j],++I[s[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=s[j],++I[s[j]];w=U(s,p,g,F,I,S,O,q,G,j-G,w),g||(c.r=7&w|p[w/8|0]<<3,w-=7,c.h=x,c.p=_,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+g;j+=65535){var at=j+65535;at>=v&&(p[w/8|0]=g,at=v),w=k(p,w+1,s.subarray(j,at))}c.i=v}return b(d,0,h+m(w)+u)}(s,null==a.level?6:a.level,null==a.mem?u.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(s.length)))):20:12+a.mem,o,h,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var s=this.b.length-this.s.z;this.b.set(n.subarray(0,s),this.s.z),this.s.z=this.b.length,this.p(this.b,!1),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(s),32768),this.s.z=n.length-s+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n.prototype.flush=function(){this.ondata||E(5),this.s.l&&E(4),this.p(this.b,!1),this.s.w=this.s.i,this.s.i-=2},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,s=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),a=s.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(s,n),O(s,a-8,r.d()),O(s,a-4,e),s}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t.prototype.flush=function(){j.prototype.flush.call(this)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(G)return G.encode(n);for(var e=n.length,i=new t(n.length+(n.length>>1)),s=0,a=function(t){i[s++]=t},o=0;o<e;++o){if(s+5>i.length){var h=new t(s+8+(e-o<<1));h.set(i),i=h}var f=n.charCodeAt(o);f<128||r?a(f):f<2048?(a(192|f>>6),a(128|63&f)):f>55295&&f<57344?(a(240|(f=65536+(1047552&f)|1023&n.charCodeAt(++o))>>18),a(128|f>>12&63),a(128|f>>6&63),a(128|63&f)):(a(224|f>>12),a(128|f>>6&63),a(128|63&f))}return b(i,0,s)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(const r of t)n+=r.length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J((t,n)=>{this.deflate.push(t,n)}),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}}),postMessage({id:void 0,method:"init",success:!0,response:void 0});']),URL.createObjectURL(e)}return""}();if(!t)return;var r=new Worker(t);return new t3(r)}catch(e){}}(r);if(n)return n}return new t0}({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_initializeSessionForSampling(e){var t=this._options.errorSampleRate>0,r=rr({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,previousSessionId:e},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:t});this.session=r}_checkSession(){if(!this.session)return!1;var e=this.session;return!rt(e,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})||(this._refreshSession(e),!1)}async _refreshSession(e){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(e.id))}_addListeners(){try{P.document.addEventListener("visibilitychange",this._handleVisibilityChange),P.addEventListener("blur",this._handleWindowBlur),P.addEventListener("focus",this._handleWindowFocus),P.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(!function(e){var t,r=(0,g.KU)();(0,N.i)(t=>{if(e.isEnabled()){var r=(i=(n=function(e){var t,r="click"===e.name,n=null;try{n=r?tO(e.event):tN(e.event),t=(0,h.Hd)(n,{maxStringLength:200})||"<unknown>"}catch(e){t="<unknown>"}return{target:n,message:t}}(t)).target,s=n.message,tU((0,a._)({category:"ui.".concat(t.name)},tj(i,s))));if(r){var n,i,s,o,l,d="click"===t.name,c=d?t.event:void 0;d&&e.clickDetector&&(null==c?void 0:c.target)&&!c.altKey&&!c.metaKey&&!c.ctrlKey&&!c.shiftKey&&(o=e.clickDetector,l=tO(t.event),o.handleClick(r,l)),tA(e,r)}}}),(0,L._)(t=>{if(e.isEnabled()){var r,n,i,a=(r=t.from,n=t.to,{type:"navigation.push",start:i=Date.now()/1e3,end:i,name:n,data:{previous:r}});null!==a&&(e.getContext().urls.push(a.name),e.triggerUserActivity(),e.addUpdate(()=>(rc(e,[a]),!1)))}}),(t=(0,g.KU)())&&t.on("beforeAddBreadcrumb",t=>(function(e,t){if(e.isEnabled()&&rl(t)){var r,n=(r=t,!rl(r)||["fetch","xhr","sentry.event","sentry.transaction"].includes(r.category)||r.category.startsWith("ui.")?null:"console"===r.category?function(e){var t,r=null==(t=e.data)?void 0:t.arguments;if(!Array.isArray(r)||0===r.length)return tU(e);var n=!1,i=r.map(e=>{if(!e)return e;if("string"==typeof e)return e.length>5e3?(n=!0,"".concat(e.slice(0,5e3),"…")):e;if("object"==typeof e)try{var t=(0,c.S8)(e,7);if(JSON.stringify(t).length>5e3)return n=!0,"".concat(JSON.stringify(t,null,2).slice(0,5e3),"…");return t}catch(e){}return e});return tU((0,s._)((0,a._)({},e),{data:(0,a._)((0,s._)((0,a._)({},e.data),{arguments:i}),n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{})}))}(r):tU(r));n&&tA(e,n)}})(e,t)),function(e){var t=(0,g.KU)();try{var r=e.getOptions(),n=r.networkDetailAllowUrls,i=r.networkDetailDenyUrls,a=r.networkCaptureBodies,s=r.networkRequestHeaders,o=r.networkResponseHeaders,l={replay:e,networkDetailAllowUrls:n,networkDetailDenyUrls:i,networkCaptureBodies:a,networkRequestHeaders:s,networkResponseHeaders:o};t&&t.on("beforeAddBreadcrumb",(e,t)=>(function(e,t,r){if(t.data)try{if(a=t,"xhr"===a.category&&(s=r,null==s?void 0:s.xhr)){var n,i,a,s,o,l,d,c,u=r.xhr,h=r.input;if(u){var p=rh(h),m=u.getResponseHeader("content-length")?rp(u.getResponseHeader("content-length")):function(e,t){try{var r="json"===t&&e&&"object"==typeof e?JSON.stringify(e):e;return rh(r)}catch(e){return}}(u.response,u.responseType);void 0!==p&&(t.data.request_body_size=p),void 0!==m&&(t.data.response_body_size=m)}rM(t,r,e)}(n=t,"fetch"===n.category&&(i=r,null==i?void 0:i.response))&&(o=r.input,l=r.response,d=rh(o?(0,D.Gv)(o):void 0),c=l?rp(l.headers.get("content-length")):void 0,void 0!==d&&(t.data.request_body_size=d),void 0!==c&&(t.data.response_body_size=c),r_(t,r,e))}catch(e){}})(l,e,t))}catch(e){}}(e);var n=Object.assign((t,r)=>{var n,i,o;return!e.isEnabled()||e.isPaused()?t:"replay_event"===t.type?(delete t.breadcrumbs,t):!t.type||rs(t)||ro(t)?e.checkAndHandleExpiredSession()?ro(t)?(e.flush(),t.contexts.feedback.replay_id=e.getSessionId(),e.triggerUserActivity(),e.addUpdate(()=>!t.timestamp||(e.throttledAddEvent({type:eG.Custom,timestamp:1e3*t.timestamp,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1)),t):!t.type&&(null==(i=t.exception)||null==(n=i.values)?void 0:n.length)&&null!=(o=r.originalException)&&o.__rrweb__&&!e.getOptions()._experiments.captureExceptions?null:(("buffer"===e.recordingMode&&t.message!==B&&t.exception&&!t.type&&t8(e.getOptions().errorSampleRate)||"session"===e.recordingMode)&&(t.tags=(0,s._)((0,a._)({},t.tags),{replayId:e.getSessionId()})),t):(rd(),t):t},{id:"Replay"});(0,v.SA)(n),r&&(r.on("beforeSendEvent",t=>{var r,n,i,a,s,o;e.isEnabled()&&!t.type&&(r=e,n=t,o=null==(s=n.exception)||null==(a=s.values)||null==(i=a[0])?void 0:i.value,"string"==typeof o&&(o.match(/(reactjs\.org\/docs\/error-decoder\.html\?invariant=|react\.dev\/errors\/)(418|419|422|423|425)/)||o.match(/(does not match server-rendered HTML|Hydration failed because)/i))&&tA(r,tU({category:"replay.hydrate-error",data:{url:(0,h.$N)()}})))}),r.on("afterSendEvent",(t,r)=>{if(e.isEnabled()&&(!t.type||rs(t))){var n,i,a,s,o,l=r.statusCode;if(l&&!(l<200)&&!(l>=300)){if(rs(t)){return void(n=e,i=t,o=n.getContext(),(null==(s=i.contexts)||null==(a=s.trace)?void 0:a.trace_id)&&o.traceIds.size<100&&o.traceIds.add(i.contexts.trace.trace_id))}var d=e,c=t,u=d.getContext();if(c.event_id&&u.errorIds.size<100&&u.errorIds.add(c.event_id),"buffer"===d.recordingMode&&c.tags&&c.tags.replayId){var h=d.getOptions().beforeErrorSampling;("function"!=typeof h||h(c))&&(0,R.wg)(async()=>{try{await d.sendBufferedReplayOrFlush()}catch(e){d.handleException(e)}})}}}}),r.on("createDsc",t=>{var r=e.getSessionId();r&&e.isEnabled()&&"session"===e.recordingMode&&e.checkAndHandleExpiredSession()&&(t.replay_id=r)}),r.on("spanStart",t=>{e.lastActiveSpan=t}),r.on("spanEnd",t=>{e.lastActiveSpan=t}),r.on("beforeSendFeedback",async(t,r)=>{var n,i=e.getSessionId();(null==r?void 0:r.includeReplay)&&e.isEnabled()&&i&&(null==(n=t.contexts)?void 0:n.feedback)&&("api"===t.contexts.feedback.source&&await e.sendBufferedReplayOrFlush(),t.contexts.feedback.replay_id=i)}),r.on("openFeedbackWidget",async()=>{await e.sendBufferedReplayOrFlush()}))}(this),this._hasInitializedCoreListeners=!0)}catch(e){this.handleException(e)}this._performanceCleanupCallback=function(e){function t(t){e.performanceEntries.includes(t)||e.performanceEntries.push(t)}function r(e){e.entries.forEach(t)}var n=[];return["navigation","paint","resource"].forEach(e=>{n.push((0,A.wv)(e,r))}),n.push((0,A.Pt)(tq(tJ,e)),(0,A.a9)(tq(tG,e)),(0,A.hT)(tq(tY,e))),()=>{n.forEach(e=>e())}}(this)}_removeListeners(){try{P.document.removeEventListener("visibilitychange",this._handleVisibilityChange),P.removeEventListener("blur",this._handleWindowBlur),P.removeEventListener("focus",this._handleWindowFocus),P.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(e){this.handleException(e)}}_doChangeToBackgroundTasks(e){this.session&&(re(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(e&&this._createCustomBreadcrumb(e),this.conditionalFlush()))}_doChangeToForegroundTasks(e){this.session&&this.checkAndHandleExpiredSession()&&e&&this._createCustomBreadcrumb(e)}_updateUserActivity(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();this._lastActivity=e}_updateSessionActivity(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();this.session&&(this.session.lastActivity=e,this._maybeSaveSession())}_createCustomBreadcrumb(e){this.addUpdate(()=>{this.throttledAddEvent({type:eG.Custom,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e}})})}_addPerformanceEntries(){var e=this.performanceEntries.map(tK).filter(Boolean).concat(this.replayPerformanceEntries);if(this.performanceEntries=[],this.replayPerformanceEntries=[],this._requiresManualStart){var t=this._context.initialTimestamp/1e3;e=e.filter(e=>e.start>=t)}return Promise.all(rc(this,e))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){var e=this.session,t=this.eventBuffer;if(e&&t&&!this._requiresManualStart&&!e.segmentId){var r=t.getEarliestTimestamp();r&&r<this._context.initialTimestamp&&(this._context.initialTimestamp=r)}}_popEventContext(){var e={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),e}async _runFlush(){var e,t=this.getSessionId();if(this.session&&this.eventBuffer&&t&&(await this._addPerformanceEntries(),null==(e=this.eventBuffer)?void 0:e.hasEvents)){if((await rx(this),this.eventBuffer)&&t===this.getSessionId())try{this._updateInitialTimestampFromEventBuffer();var r=Date.now();if(r-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw Error("Session is too long, not sending replay");var n=this._popEventContext(),i=this.session.segmentId++;this._maybeSaveSession();var a=await this.eventBuffer.finish();await rN({replayId:t,recordingData:a,segmentId:i,eventContext:n,session:this.session,timestamp:r,onError:e=>this.handleException(e)})}catch(e){this.handleException(e),this.stop({reason:"sendReplay"});var s=(0,g.KU)();s&&s.recordDroppedEvent(e instanceof rO?"ratelimit_backoff":"send_error","replay")}}}async _flush(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.force;if(this._isEnabled||void 0!==t&&t){if(this.checkAndHandleExpiredSession()&&this.session){var r=this.session.started,n=Date.now()-r;this._debouncedFlush.cancel();var i=n<this._options.minReplayDuration,a=n>this._options.maxReplayDuration+5e3;if(i||a){i&&this._debouncedFlush();return}var s=this.eventBuffer;s&&0===this.session.segmentId&&s.hasCheckout;var o=!!this._flushLock;this._flushLock||(this._flushLock=this._runFlush());try{await this._flushLock}catch(e){this.handleException(e)}finally{this._flushLock=void 0,o&&this._debouncedFlush()}}}}_maybeSaveSession(){this.session&&this._options.stickySession&&t6(this.session)}_onMutationHandler(e){var t=this._options._experiments.ignoreMutations;if((null==t?void 0:t.length)&&e.some(e=>{var r=function(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch(e){return null}}(e.target),n=t.join(",");return null==r?void 0:r.matches(n)}))return!1;var r=e.length,n=this._options.mutationLimit,i=this._options.mutationBreadcrumbLimit,a=n&&r>n;if(r>i||a){var s=tU({category:"replay.mutations",data:{count:r,limit:a}});this._createCustomBreadcrumb(s)}return!a||(this.stop({reason:"mutationLimit",forceFlush:"session"===this.recordingMode}),!1)}constructor(e){var t,r,n,i=e.options,o=e.recordingOptions;this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:3e5,sessionIdleExpire:9e5},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._requiresManualStart=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=o,this._options=i,this._debouncedFlush=(t=()=>this._flush(),r=this._options.flushMinDelay,n={maxWait:this._options.flushMaxDelay},(0,k.s)(t,r,(0,s._)((0,a._)({},n),{setTimeoutImpl:R.wg}))),this._throttledAddEvent=function(e,t,r){var n=new Map,i=!1;return function(){for(var a,s=arguments.length,o=Array(s),l=0;l<s;l++)o[l]=arguments[l];var d=Math.floor(Date.now()/1e3);if(a=d-r,n.forEach((e,t)=>{t<a&&n.delete(t)}),[...n.values()].reduce((e,t)=>e+t,0)>=t){var c=i;return i=!0,c?"__SKIPPED":rL}i=!1;var u=n.get(d)||0;return n.set(d,u+1),e(...o)}}((e,t)=>(function(e,t,r){return ra(e,t)?ri(e,t,r):Promise.resolve(null)})(this,e,t),300,5);var l=this.getOptions(),d=l.slowClickTimeout,c=l.slowClickIgnoreSelectors,u=d?{threshold:Math.min(3e3,d),timeout:d,scrollTimeout:300,ignoreSelector:c?c.join(","):""}:void 0;u&&(this.clickDetector=new tP(this,u)),this._handleVisibilityChange=()=>{"visible"===P.document.visibilityState?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()},this._handleWindowBlur=()=>{var e=tU({category:"ui.blur"});this._doChangeToBackgroundTasks(e)},this._handleWindowFocus=()=>{var e=tU({category:"ui.focus"});this._doChangeToForegroundTasks(e)},this._handleKeyboardEvent=e=>{!function(e,t){if(e.isEnabled()){e.updateUserActivity();var r=function(e){var t,r=e.metaKey,n=e.shiftKey,i=e.ctrlKey,o=e.altKey,l=e.key,d=e.target;if(!d||"INPUT"===(t=d).tagName||"TEXTAREA"===t.tagName||t.isContentEditable||!l)return null;var c=r||i||o,u=1===l.length;if(!c&&u)return null;var p=(0,h.Hd)(d,{maxStringLength:200})||"<unknown>",m=tj(d,p);return tU({category:"ui.keyDown",message:p,data:(0,s._)((0,a._)({},m.data),{metaKey:r,shiftKey:n,ctrlKey:i,altKey:o,key:l})})}(t);r&&tA(e,r)}}(this,e)}}}function rF(e,t){return[...e,...t].join(",")}var rB='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',rU=["content-length","content-type","accept"],rz=!1,rW=e=>new rj(e);class rj{get _isInitialized(){return rz}set _isInitialized(e){rz=e}afterAllSetup(e){(0,x.B)()&&!this._replay&&(this._setup(e),this._initialize(e))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:"session"===this._replay.recordingMode}):Promise.resolve()}flush(e){return this._replay?this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(e):(this._replay.start(),Promise.resolve()):Promise.resolve()}getReplayId(){var e;if(null==(e=this._replay)?void 0:e.isEnabled())return this._replay.getSessionId()}getRecordingMode(){var e;if(null==(e=this._replay)?void 0:e.isEnabled())return this._replay.recordingMode}_initialize(e){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(e),this._replay.initializeSampling())}_setup(e){var t,r,n,i,s,o=(t=this._initialOptions,r=e.getOptions(),n=(0,a._)({sessionSampleRate:0,errorSampleRate:0},t),i=(0,T.i)(r.replaysSessionSampleRate),s=(0,T.i)(r.replaysOnErrorSampleRate),null==i&&null==s&&(0,f.pq)(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}),null!=i&&(n.sessionSampleRate=i),null!=s&&(n.errorSampleRate=s),n);this._replay=new rP({options:o,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(e){try{var t=e.getIntegrationByName("ReplayCanvas");if(!t)return;this._replay._canvas=t.getOptions()}catch(e){}}constructor(e){var t=void 0===e?{}:e,r=t.flushMinDelay,n=t.flushMaxDelay,i=t.minReplayDuration,o=t.maxReplayDuration,l=t.stickySession,d=t.useCompression,c=t.workerUrl,u=t._experiments,h=void 0===u?{}:u,p=t.maskAllText,m=void 0===p||p,f=t.maskAllInputs,v=void 0===f||f,y=t.blockAllMedia,g=t.mutationBreadcrumbLimit,S=t.mutationLimit,_=t.slowClickTimeout,b=t.slowClickIgnoreSelectors,w=t.networkDetailAllowUrls,k=t.networkDetailDenyUrls,E=t.networkCaptureBodies,I=t.networkRequestHeaders,C=t.networkResponseHeaders,M=t.mask,T=t.maskAttributes,R=void 0===T?["title","placeholder","aria-label"]:T,A=t.unmask,D=t.block,O=t.unblock,N=t.ignore,L=t.maskFn,P=t.beforeAddRecordingEvent,F=t.beforeErrorSampling,B=t.onError;this.name="Replay";var U=function(e){var t=e.mask,r=e.unmask,n=e.block,i=e.unblock,a=e.ignore;return{maskTextSelector:rF(t,[".sentry-mask","[data-sentry-mask]"]),unmaskTextSelector:rF(r,[]),blockSelector:rF(n,[".sentry-block","[data-sentry-block]","base","iframe[srcdoc]:not([src])"]),unblockSelector:rF(i,[]),ignoreSelector:rF(a,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}}({mask:void 0===M?[]:M,unmask:void 0===A?[]:A,block:void 0===D?[]:D,unblock:void 0===O?[]:O,ignore:void 0===N?[]:N});if(this._recordingOptions=(0,s._)((0,a._)({maskAllInputs:v,maskAllText:m,maskInputOptions:{password:!0},maskTextFn:L,maskInputFn:L,maskAttributeFn:(e,t,r)=>(function(e){var t=e.el,r=e.key,n=e.maskAttributes,i=e.maskAllText,a=e.privacyOptions,s=e.value;return!i||a.unmaskTextSelector&&t.matches(a.unmaskTextSelector)?s:n.includes(r)||"value"===r&&"INPUT"===t.tagName&&["submit","button"].includes(t.getAttribute("type")||"")?s.replace(/[\S]/g,"*"):s})({maskAttributes:R,maskAllText:m,privacyOptions:U,key:e,value:t,el:r})},U),{slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:e=>{try{e.__rrweb__=!0}catch(e){}},recordCrossOriginIframes:!!h.recordCrossOriginIframes}),this._initialOptions={flushMinDelay:void 0===r?5e3:r,flushMaxDelay:void 0===n?5500:n,minReplayDuration:Math.min(void 0===i?4999:i,15e3),maxReplayDuration:Math.min(void 0===o?36e5:o,36e5),stickySession:void 0===l||l,useCompression:void 0===d||d,workerUrl:c,blockAllMedia:void 0===y||y,maskAllInputs:v,maskAllText:m,mutationBreadcrumbLimit:void 0===g?750:g,mutationLimit:void 0===S?1e4:S,slowClickTimeout:void 0===_?7e3:_,slowClickIgnoreSelectors:void 0===b?[]:b,networkDetailAllowUrls:void 0===w?[]:w,networkDetailDenyUrls:void 0===k?[]:k,networkCaptureBodies:void 0===E||E,networkRequestHeaders:rH(void 0===I?[]:I),networkResponseHeaders:rH(void 0===C?[]:C),beforeAddRecordingEvent:P,beforeErrorSampling:F,onError:B,_experiments:h},this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?"".concat(this._recordingOptions.blockSelector,",").concat(rB):rB),this._isInitialized&&(0,x.B)())throw Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}}function rH(e){return[...rU,...e.map(e=>e.toLowerCase())]}}}]);